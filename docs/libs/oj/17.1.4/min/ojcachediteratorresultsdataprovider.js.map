{"version":3,"names":["define","oj","ojdataprovider","ojeventtarget","ojcomponentcore","Object","prototype","hasOwnProperty","call","CachedIteratorResultsDataProvider","constructor","dataProvider","options","_a","_b","this","CacheAsyncIterable","_parent","dataProviderAsyncIterator","params","cache","CacheAsyncIterator","Symbol","asyncIterator","_cachedOffset","_needLocalRowCount","includeFilteredRowCount","_baseFetchFirstCapability","totalFilteredRowCount","_getStaleResult","result","value","data","length","CacheAsyncIteratorYieldResult","CacheAsyncIteratorReturnResult","metadata","fetchParameters","done","next","size","signal","wrapWithAbortHandling","resolve","_currentAsyncIterator","_checkCachedParamsAndIterate","then","_getResult","getSize","undefined","isDone","getDataList","Promise","_getFinalResult","reject","_getSharedIteratorState","fetchOffset","fetchUntilOffset","cachedFetchParams","sortCriteria","asyncIteratorFetchPromise","firstIteratorCachedFetchParams","firstIteratorCachedFetchOffset","firstIteratorCachedFetchPromise","fetchPromise","_compareCachedFetchParameters","_createCachedFetchParams","addListResult","finalResult","_VALUE","assign","_DONE","DataCache","_lastFetchParams","createOptimizedKeyMap","initialMap","createOptimizedKeySet","initialSet","addEventListener","_MUTATE","event","processMutations","detail","dispatchEvent","_REFRESH","reset","_firstIteratorState","getCapability","containsKeys","finalResults","Set","neededKeys","cacheResults","getDataByKeys","keys","forEach","key","results","get","add","containsParameters","newParams","attributes","scope","containsKeysResults","fetchByKeys","Map","item","set","fetchByKeysResults","fetchByOffset","_DEFAULT_SIZE","offset","updatedParams","JSON","parse","stringify","startsWith","getDataByOffset","fetchFirst","aborted","capabilityName","capability","attributeFilter","caching","getTotalSize","filterDef","isEmpty","static","cachedParams","compareValues","_getFilterDef","filterCriterion","filter","property","_KEY","_KEYS","_DATA","_STARTINDEX","_SORT","_SORTCRITERIA","_FILTERCRITERION","_METADATA","_ITEMS","_FROM","_OFFSET","_SIZE","_FETCHPARAMETERS","_RESULTS","_CONTAINSPARAMETERS","_CONTAINSKEYS","_FETCHBYKEYS","_FETCHBYOFFSET","_FETCHFIRST","_ADDEVENTLISTENER","_FETCHATTRIBUTES","EventTargetMixin","applyMixin","_registerLegacyNamespaceProp"],"sources":["../debug/ojcachediteratorresultsdataprovider.js"],"mappings":"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"}