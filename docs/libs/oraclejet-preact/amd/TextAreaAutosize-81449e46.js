define(['exports', 'preact/jsx-runtime', 'preact/compat', './FormContext-5130e198', './useFormContext-30acdd33', './FormFieldContext-3c44aaaa', 'preact/hooks', './useFocusableTextField-8b755b15', './Label-3912beb2', './keyboardUtils-fbb389f8', './TextFieldInput-ba4e508c', 'css!./ObfuscatedTextFieldInputStyles.styles.css', './ReadonlyTextFieldInput-608bddc1', './StyledTextField-b4278437', './TextField-1021f00b', './MaxLengthLiveRegion-bb956138', './useTextField-e6877c79', './logger-0f873e29', './TabbableModeContext-a9c97640', './useId-c9578d26', './useTranslationBundle-d07d4b20', 'css!./UserAssistanceStyles.styles.css', 'module', './UNSAFE_UserAssistance/themes/redwood/UserAssistanceVariants.css', './InlineUserAssistance-4656c2a6', './CompactUserAssistance-3370a318', './mergeProps-bcfa6a92', './LayerHost-639b3284', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-e5bdb734', 'preact', 'css!./IconStyle.styles.css', './Popup-66e79afa', 'css!./LabelStyles.styles.css', 'module', './UNSAFE_Label/themes/redwood/LabelVariants.css', './InputGroupContext-372087af', './HiddenAccessible-037ef42d', 'module', './UNSAFE_Popup/themes/redwood/PopupVariants.css', './useLengthFilter-ed8959a4', './useCurrentValueReducer-faded381', './useSelectableTextField-900d2860', './MaxLengthCounter-9a95922c'], (function(e,s,t,a,n,o,i,l,r,d,u,c,m,p,b,h,x,g,F,f,y,R,v,L,T,A,C,S,I,U,w,E,j,P,H,_,k,D,B,V,M,N,q,W,$,z){"use strict";const G=({isReadonly:e,enabledElementRef:s,readonlyElementRef:t,minRows:a=2,maxRows:n,value:o})=>{i.useLayoutEffect((()=>{const o=e?t:s;if(null===o.current)return;if(o.current instanceof HTMLDivElement)return;const i=o.current,l=(e=>{const s=window.getComputedStyle(e),t=s.lineHeight;if("normal"===t)return 1.2*parseFloat(s.fontSize);return parseFloat(t)})(i);i.style.height="0";const{paddingHeight:r,borderHeight:d}=(e=>{const s=window.getComputedStyle(e);return{paddingHeight:parseFloat(s.paddingTop)+parseFloat(s.paddingBottom),borderHeight:parseFloat(s.borderTop)+parseFloat(s.borderBottom)}})(i),u=l*a+r+d,c=i.scrollHeight+d;let m=0;if(void 0===n)m=c<u?u:c;else if(n>a){const e=l*n+r+d;m=c>e?e:c<u?u:c}else m=u;i.style.height=m+.5+"px"}),[o,a,n,e,s,t])},O=t.forwardRef((({"aria-describedby":e,assistiveText:a,autoComplete:i="off",autoFocus:d=!1,columnSpan:c,helpSourceLink:g,helpSourceText:F,isDisabled:R,isReadonly:v,isRequired:L=!1,isRequiredShown:S,label:I,labelEdge:U,labelStartWidth:w,maxLength:E,maxLengthCounter:j="remaining",maxLengthUnit:P,maxRows:H,messages:_,minRows:k=2,placeholder:D,role:B,textAlign:M,userAssistanceDensity:N,value:O,variant:X="default",onInput:J,onCommit:K,testId:Q},Y)=>{const Z=y.useTranslationBundle("@oracle/oraclejet-preact"),ee=E?Z.formControl_limitReached({CHARACTER_LIMIT:E}):"",{currentCommitValue:se,dispatch:te}=W.useCurrentValueReducer({value:O}),ae=t.useCallback((e=>{te({type:"input",payload:e.value}),J?.(e)}),[J,te]),ne=t.useCallback((e=>{te({type:"commit",payload:e.value}),K?.(e)}),[K,te]),{isDisabled:oe,isReadonly:ie,labelEdge:le,labelStartWidth:re,textAlign:de,userAssistanceDensity:ue}=n.useFormContext(),ce=R??oe,me=v??ie,pe=U??le,be=w??re,he=M??de,xe=N??ue,ge=t.useRef(f.useId()),Fe=e?`${e} ${ge.current}`:ge.current,fe=t.useRef(null),ye=t.useRef(null),{focusProps:Re,isFocused:ve,methods:Le}=l.useFocusableTextField({isDisabled:ce,isReadonly:me,enabledElementRef:fe,readonlyElementRef:ye}),{methods:Te}=$.useSelectableTextField(fe);t.useImperativeHandle(Y,(()=>C.mergeProps(Le,Te)),[Le,Te]);const{isMaxLengthReached:Ae,valueLength:Ce,onFilteredInput:Se}=q.useLengthFilter({maxLength:E,maxLengthUnit:P,value:O,onInput:ae,onCommit:ne}),Ie=[..._??[],...Ae?[{detail:ee,severity:"info"}]:[]],{formFieldContext:Ue,inputProps:we,labelProps:Ee,textFieldProps:je,userAssistanceProps:Pe}=x.useTextField({ariaDescribedBy:me||ce?e:Fe,contentVariant:"textarea",helpSourceLink:g,helpSourceText:F,isDisabled:ce,isFocused:ve,isReadonly:me,isRequiredShown:S,labelEdge:pe,messages:Ie,styleVariant:X,userAssistanceDensity:xe,value:O}),He=t.useCallback((()=>{const e=fe.current,s=e?e.value.length:null;fe.current?.setSelectionRange(s,s),fe.current?.focus()}),[fe]),_e="none"!==pe?s.jsx(r.Label,{...Ee,children:I}):void 0,ke={label:"none"!==pe?_e:void 0,labelEdge:"none"!==pe?pe:void 0,labelStartWidth:"none"!==pe?be:void 0},De="none"===pe?I:void 0,Be="efficient"===xe||"reflow"===xe?ce||me?"efficient"!==xe?void 0:s.jsx(T.InlineUserAssistance,{userAssistanceDensity:xe,...Pe}):s.jsx(T.InlineUserAssistance,{assistiveText:a,fieldLabel:I,helpSourceLink:g,helpSourceText:F,messages:Ie,isRequiredShown:S,userAssistanceDensity:xe,...Pe}):void 0,Ve=t.useRef(null),Me="compact"===xe?s.jsx(A.CompactUserAssistance,{anchorRef:Ve,messages:Ie,assistiveText:a,...Pe}):void 0;if(G({isReadonly:me,enabledElementRef:fe,readonlyElementRef:ye,minRows:k,maxRows:H,value:O}),me){const e=s.jsx(m.ReadonlyTextFieldInput,{"aria-describedby":we["aria-describedby"],"aria-label":De,"aria-labelledby":Ee.id,elementRef:ye,...H?{as:"textarea",rows:k}:{as:"div"},autoFocus:d,textAlign:he,value:O,variant:"textarea",hasEmptyLabel:""===I&&"none"===pe,hasInsideLabel:void 0!==I&&"inside"===pe});return s.jsx(o.FormFieldContext.Provider,{value:Ue,children:s.jsx(p.ReadonlyTextField,{role:"presentation",columnSpan:c,compactUserAssistance:Me,inlineUserAssistance:Be,variant:"textarea",mainContent:e,ref:Ve,testId:Q,...ke})})}const Ne=void 0!==E,qe=s.jsxs(s.Fragment,{children:[s.jsx(u.TextFieldInput,{as:"textarea","aria-label":De,autoComplete:i,autoFocus:d,currentCommitValue:se,hasEmptyLabel:""===I&&"none"===pe,hasInsideLabel:void 0!==_e&&"inside"===pe,isRequired:L,inputRef:fe,onCommit:ne,onInput:Se,placeholder:D,role:B,rows:k,textAlign:he,value:O,...we}),"remaining"===j&&Ne&&s.jsx(z.MaxLengthCounter,{maxLength:E,valueLength:Ce,onClick:He}),Ne&&s.jsx(V.HiddenAccessible,{id:ge.current,children:Z.formControl_maxLength({MAX_LENGTH:`${E}`})}),Ne&&ve&&s.jsx(h.MaxLengthLiveRegion,{maxLength:E,valueLength:Ce,testId:Q+"_remainingChars"})]});return s.jsx(o.FormFieldContext.Provider,{value:Ue,children:s.jsx(b.TextField,{mainContent:qe,columnSpan:c,compactUserAssistance:Me,inlineUserAssistance:Be,onBlur:Re?.onFocusOut,onFocus:Re?.onFocusIn,mainFieldRef:Ve,testId:Q,...je,...ke})})}));e.TextAreaAutosize=O}));
//# sourceMappingURL=TextAreaAutosize-81449e46.js.map
