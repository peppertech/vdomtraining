{"version":3,"file":"SelectMultiple-687af0f1.js","sources":["../../src/UNSAFE_SelectMultiple/SelectMultipleDesktopDropdown.tsx","../../src/UNSAFE_SelectMultiple/SelectedValuesCount.tsx","../../src/UNSAFE_SelectMultiple/SelectMultipleField.tsx","../../src/UNSAFE_SelectMultiple/TextTag.tsx","../../src/UNSAFE_SelectMultiple/TextTagList.tsx","../../src/UNSAFE_SelectMultiple/SelectMultipleFieldInput.tsx","../../src/UNSAFE_SelectMultiple/MobileDropdownFooter.tsx","../../src/UNSAFE_SelectMultiple/useDisplayValues.ts","../../src/UNSAFE_SelectMultiple/useSelectedOnlyData.ts","../../src/UNSAFE_SelectMultiple/useMobileDropdown.ts","../../src/UNSAFE_SelectMultiple/SelectMultipleMobileDropdown.tsx","../../src/UNSAFE_SelectMultiple/useSelectMultiple.ts","../../src/UNSAFE_SelectMultiple/SelectMultiple.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren, ComponentProps } from 'preact';\nimport { Ref } from 'preact/hooks';\nimport {\n  DefaultList,\n  Dropdown,\n  DropdownList,\n  DropdownUserAssistance,\n  EmptyResults,\n  LinkItem\n} from '../PRIVATE_SelectCommon';\nimport { CurrentKeyDetail, DataState, SelectionDetail } from '../UNSAFE_Collection';\nimport { InlineUserAssistance, UserAssistanceDensityType } from '../UNSAFE_UserAssistance';\nimport { PositionData } from '../UNSAFE_Floating';\nimport { VirtualizedListView } from '../UNSAFE_VirtualizedListView';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '#resources/nls/bundle';\nimport { ItemTextType } from '../utils/UNSAFE_selectUtils';\nimport { ItemRendererProps } from './SelectMultiple.types';\n\ntype InlineUserAssistanceProps = ComponentProps<typeof InlineUserAssistance>;\n\ntype Props<K extends string | number, D extends Record<string, any>> = {\n  assistiveText?: string;\n  currentKey?: K;\n  data?: DataState<K, D> | null;\n  dropdownId: string;\n  dropdownRef: Ref<HTMLDivElement>;\n  helpSourceLink?: InlineUserAssistanceProps['helpSourceLink'];\n  helpSourceText?: InlineUserAssistanceProps['helpSourceText'];\n  isAddToListShown?: boolean;\n  isDisabled?: boolean;\n  isDropdownAbove: boolean;\n  isEmptyResults: boolean;\n  isOpen: boolean;\n  isReadonly?: false;\n  isSelectedOnlyView: boolean;\n  isUserFiltering: boolean;\n  itemRenderer?: (itemRendererProps: ItemRendererProps<K, D>) => ComponentChildren;\n  itemText: ItemTextType<K, D>;\n  label: string;\n  mainFieldRef: Ref<HTMLDivElement>;\n  searchText?: string;\n  selectedKeys?: Set<K>;\n  userAssistanceDensity?: UserAssistanceDensityType;\n  onAddToListAction?: () => void;\n  onAutoDismiss: ((event?: Event | undefined) => void) | ((event?: Event | undefined) => void);\n  onCurrentKeyChange?: (detail: CurrentKeyDetail<K>) => void;\n  onLoadRange?: ComponentProps<typeof VirtualizedListView>['onLoadRange'];\n  onPosition: (data: PositionData) => void;\n  onSelectionChange?: (detail: SelectionDetail<K>) => void;\n};\n\nexport function SelectMultipleDesktopDropdown<\n  K extends string | number,\n  D extends Record<string, any>\n>({\n  assistiveText,\n  currentKey,\n  data,\n  dropdownId,\n  dropdownRef,\n  helpSourceLink,\n  helpSourceText,\n  isAddToListShown,\n  isDisabled,\n  isDropdownAbove,\n  isEmptyResults,\n  isOpen,\n  isReadonly,\n  isSelectedOnlyView,\n  isUserFiltering,\n  itemRenderer,\n  itemText,\n  label,\n  mainFieldRef,\n  searchText,\n  selectedKeys,\n  userAssistanceDensity,\n  onAddToListAction,\n  onAutoDismiss,\n  onCurrentKeyChange,\n  onLoadRange,\n  onPosition,\n  onSelectionChange\n}: Props<K, D>) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  const dropdownInlineUserAssistance =\n    isOpen &&\n    !isDropdownAbove &&\n    !isDisabled &&\n    !isReadonly &&\n    (assistiveText || helpSourceLink) &&\n    (userAssistanceDensity === 'efficient' || userAssistanceDensity === 'reflow') ? (\n      <DropdownUserAssistance\n        assistiveText={assistiveText}\n        fieldLabel={label}\n        helpSourceLink={helpSourceLink}\n        helpSourceText={helpSourceText}\n        userAssistanceDensity={userAssistanceDensity}\n      />\n    ) : undefined;\n\n  const dropdownListContent = isEmptyResults ? (\n    isAddToListShown ? undefined : (\n      <EmptyResults />\n    )\n  ) : (\n    <DefaultList<K, D>\n      aria-label={label ?? ''}\n      currentItemVariant=\"highlight\"\n      currentKey={currentKey}\n      data={data}\n      itemRenderer={itemRenderer}\n      itemText={itemText}\n      searchText={isSelectedOnlyView ? undefined : isUserFiltering ? searchText : undefined}\n      selectedKeys={selectedKeys}\n      selectionMode=\"multiple\"\n      onCurrentKeyChange={onCurrentKeyChange}\n      onLoadRange={onLoadRange}\n      onSelectionChange={onSelectionChange}\n    />\n  );\n\n  const addToListContent = isAddToListShown ? (\n    <LinkItem isHighlighted={isEmptyResults} onAction={onAddToListAction}>\n      {translations.select_addToList()}\n    </LinkItem>\n  ) : undefined;\n\n  return (\n    <Dropdown\n      dropdownRef={dropdownRef}\n      id={dropdownId}\n      isOpen={isOpen}\n      anchorRef={mainFieldRef}\n      onAutoDismiss={onAutoDismiss}\n      onPosition={onPosition}>\n      <DropdownList\n        hasBottomGap={dropdownInlineUserAssistance === undefined}\n        isLoading={data === null}>\n        {dropdownListContent}\n        {addToListContent}\n      </DropdownList>\n      {dropdownInlineUserAssistance}\n    </Dropdown>\n  );\n}\n","import { ComponentProps } from 'preact';\nimport { Chip } from '../UNSAFE_Chip';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { selectedValueCountStyles } from './themes/SelectedValuesCountStyles.css';\n\ntype PickedPropsFromChip = Pick<\n  ComponentProps<typeof Chip>,\n  'aria-label' | 'isDisabled' | 'isSelected' | 'onToggle'\n>;\n\ntype Props = PickedPropsFromChip & {\n  count?: number;\n  onKeyDown?: (event: KeyboardEvent) => void;\n  onKeyUp?: (event: KeyboardEvent) => void;\n  onMouseDown?: (event: MouseEvent) => void;\n};\n\n// This component renders a badge showing the number of selected values\nexport function SelectedValuesCount({\n  'aria-label': ariaLabel,\n  count = 0,\n  onKeyDown,\n  onKeyUp,\n  onMouseDown,\n  ...passThroughProps\n}: Props) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const instructions = translations.selectMultiple_showSelectedValues();\n  const accLabel = ariaLabel ? `${ariaLabel}. ` : '';\n\n  const ninetyNinePlus = translations.selectMultiple_countPlus({ COUNT: `99` });\n  // The Chip shows the number of values selected or 99+ if the number is over 99.\n  const chipCount = count > 99 ? `${ninetyNinePlus}` : `${count}`;\n  // The screenreader will hear what the number of selected values is along with instructions\n  // like Click to see the full list.\n  const valuesSelectedText = translations.selectMultiple_valuesSelected({\n    VALUE_COUNT: `${count}`\n  });\n  const label = `${accLabel}${valuesSelectedText} ${instructions}`;\n  return (\n    <div\n      class={selectedValueCountStyles.base}\n      onKeyDown={onKeyDown}\n      onKeyUp={onKeyUp}\n      onMouseDown={onMouseDown}>\n      <Chip aria-label={label} {...passThroughProps}>\n        {chipCount}\n      </Chip>\n    </div>\n  );\n}\n","import { ComponentChildren, ComponentProps } from 'preact';\nimport { DropdownArrow } from '../PRIVATE_SelectCommon';\nimport { Flex } from '../UNSAFE_Flex';\nimport { TextField } from '../UNSAFE_TextField';\nimport { useFormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { SelectedValuesCount } from './SelectedValuesCount';\nimport { IconButton } from '../UNSAFE_IconButton';\nimport { NavLeft } from '../UNSAFE_RedwoodIcons/NavLeft';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { CancelS } from '../UNSAFE_RedwoodIcons/CancelS';\nimport { LayoutColumnSpan } from '../utils/UNSAFE_styles/Layout';\nimport type { TestIdProps } from '#hooks/UNSAFE_useTestId';\n\ntype TextFieldProps = ComponentProps<typeof TextField>;\ntype PassThroughTextFieldProps = TestIdProps &\n  Pick<\n    TextFieldProps,\n    | 'compactUserAssistance'\n    | 'contentVariant'\n    | 'id'\n    | 'inlineUserAssistance'\n    | 'label'\n    | 'labelEdge'\n    | 'labelStartWidth'\n    | 'mainFieldRef'\n    | 'onBlur'\n    | 'onFocus'\n    | 'onMouseDown'\n    | 'statusVariant'\n    | 'styleVariant'\n  >;\n\ntype DropdownArrowProps = ComponentProps<typeof DropdownArrow>;\ntype IconButtonProps = ComponentProps<typeof IconButton>;\ntype SelectedValuesCountProps = ComponentProps<typeof SelectedValuesCount>;\n\ntype Props = PassThroughTextFieldProps & {\n  children?: ComponentChildren;\n  columnSpan?: LayoutColumnSpan;\n  fieldLabel?: string;\n  hasInsideLabel?: boolean;\n  isBackButtonShown?: boolean;\n  isClearButtonShown?: boolean;\n  isDropdownArrowShown?: boolean;\n  isDropdownSelectedOnlyView?: boolean;\n  isSelectedValuesCountShown?: boolean;\n  selectedValuesCount?: number;\n  onBackButtonClick?: IconButtonProps['onAction'];\n  onClearButtonClick?: IconButtonProps['onAction'];\n  onDropdownArrowClick?: DropdownArrowProps['onClick'];\n  onSelectedValuesCountKeyDown?: SelectedValuesCountProps['onKeyDown'];\n  onSelectedValuesCountKeyUp?: SelectedValuesCountProps['onKeyUp'];\n  onSelectedValuesCountMouseDown?: SelectedValuesCountProps['onMouseDown'];\n  onSelectedValuesCountToggle?: SelectedValuesCountProps['onToggle'];\n};\n\nexport function SelectMultipleField({\n  children,\n  columnSpan,\n  fieldLabel,\n  hasInsideLabel,\n  isBackButtonShown,\n  isClearButtonShown,\n  isDropdownArrowShown,\n  isDropdownSelectedOnlyView,\n  isSelectedValuesCountShown,\n  selectedValuesCount,\n  onBackButtonClick,\n  onClearButtonClick,\n  onDropdownArrowClick,\n  onSelectedValuesCountKeyDown,\n  onSelectedValuesCountKeyUp,\n  onSelectedValuesCountMouseDown,\n  onSelectedValuesCountToggle,\n  ...passThroughTextFieldProps\n}: Props) {\n  const { isDisabled, isLoading } = useFormFieldContext();\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  const backButton = isBackButtonShown ? (\n    <IconButton\n      aria-label={translations.selectMultiple_back()}\n      variant=\"borderless\"\n      onAction={onBackButtonClick}>\n      <NavLeft />\n    </IconButton>\n  ) : null;\n\n  const clearButton = isClearButtonShown ? (\n    <IconButton\n      aria-label={translations.formControl_clear()}\n      size={hasInsideLabel ? 'md' : 'sm'}\n      variant=\"borderless\"\n      onAction={onClearButtonClick}>\n      <CancelS />\n    </IconButton>\n  ) : null;\n\n  const dropdownArrow = isDropdownArrowShown ? (\n    <DropdownArrow\n      isDisabled={isDisabled}\n      size={hasInsideLabel ? 'md' : 'sm'}\n      onClick={onDropdownArrowClick}\n    />\n  ) : null;\n\n  const endContent = isLoading ? undefined : !isSelectedValuesCountShown ? (\n    <>\n      {isClearButtonShown && clearButton}\n      {isDropdownArrowShown && dropdownArrow}\n    </>\n  ) : (\n    <Flex align=\"center\" justify=\"center\" gap={[0, '1x']}>\n      <SelectedValuesCount\n        aria-label={fieldLabel}\n        count={selectedValuesCount}\n        isDisabled={isDisabled}\n        isSelected={isDropdownSelectedOnlyView}\n        onKeyDown={onSelectedValuesCountKeyDown}\n        onKeyUp={onSelectedValuesCountKeyUp}\n        onMouseDown={onSelectedValuesCountMouseDown}\n        onToggle={onSelectedValuesCountToggle}\n      />\n      {isClearButtonShown && clearButton}\n      {isDropdownArrowShown && dropdownArrow}\n    </Flex>\n  );\n\n  return (\n    <TextField\n      columnSpan={columnSpan}\n      startContent={isBackButtonShown && backButton}\n      mainContent={children}\n      endContent={endContent}\n      {...passThroughTextFieldProps}\n    />\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useCallback, useEffect, useId, useRef } from 'preact/hooks';\nimport { preventDefault } from '../PRIVATE_SelectCommon';\nimport { HiddenAccessible } from '../UNSAFE_HiddenAccessible';\nimport { IconButton } from '../UNSAFE_IconButton';\nimport { Text } from '../UNSAFE_Text';\nimport { CloseIcon } from '../PRIVATE_ThemedIcons/CloseIcon';\nimport { TabbableModeContext } from '../hooks/UNSAFE_useTabbableMode';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { isBackspaceOrDelete } from '../utils/PRIVATE_keyboardUtils';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { textTagStyles } from './themes/TextTagStyles.css';\n\n/**\n * Props for the TextTag component\n */\ntype Props<V> = {\n  /**\n   * The label for the text tag\n   */\n  children: string;\n\n  /**\n   * Specifies whether to show the remove icon\n   */\n  removeIcon?: 'always' | 'never';\n\n  /**\n   * Indicates whether the component is focused\n   */\n  isFocused?: boolean;\n\n  /**\n   * Specifies if the TextTag component is selected\n   */\n  isSelected?: boolean;\n\n  /**\n   * Callback to be invoked when Delete/Backspace is pressed\n   */\n  onRemoveAction?: (value: V) => void;\n\n  /**\n   * Callback to be invoked when clicking on the text tag\n   */\n  onSelect?: (value: V) => void;\n\n  /**\n   * Callback to be invoked when the remove icon is clicked\n   */\n  onRemoveIconClick?: (value: V) => void;\n\n  /**\n   * The value of the text tag\n   */\n  value: V;\n};\n\n/**\n * The component for rendering selectable/removable TextTag\n *\n * @param param0 The props for the TextTag component\n */\nexport function TextTag<V>({\n  children,\n  removeIcon = 'never',\n  isSelected = false,\n  onRemoveAction,\n  onSelect,\n  onRemoveIconClick,\n  isFocused,\n  value\n}: Props<V>) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const spanRef = useRef<HTMLSpanElement>(null);\n  const navigationTextId = useId();\n\n  const rootClasses = classNames([textTagStyles.base, isSelected && textTagStyles.selected]);\n\n  const onRemoveActionCallback = useCallback(() => {\n    onRemoveAction?.(value);\n  }, [value, onRemoveAction]);\n  const onSelectCallback = useCallback(() => {\n    onSelect?.(value);\n  }, [value, onSelect]);\n  const onRemoveIconClickCallback = useCallback(() => {\n    onRemoveIconClick?.(value);\n  }, [value, onRemoveIconClick]);\n  const onKeyUp = useCallback(\n    (event: KeyboardEvent) => {\n      if (isBackspaceOrDelete(event)) {\n        onRemoveActionCallback();\n        return;\n      }\n    },\n    [onRemoveActionCallback]\n  );\n\n  useEffect(() => {\n    if (isFocused && isSelected) {\n      spanRef.current?.focus();\n      spanRef.current?.scrollIntoView({ block: 'nearest' });\n    }\n  }, [isFocused, isSelected]);\n\n  return (\n    <>\n      <span\n        ref={spanRef}\n        class={rootClasses}\n        tabIndex={-1}\n        onClick={onSelectCallback}\n        onKeyUp={onKeyUp}\n        // Kill mouse down event to prevent focus transfer done by the parent container.\n        // We will programmatically take back focus in response to the onClick event.\n        onMouseDown={preventDefault}\n        role=\"option\"\n        aria-describedby={navigationTextId}\n        aria-selected={isSelected ? 'true' : 'false'}>\n        <Text size=\"md\" variant=\"inherit\">\n          {children}\n        </Text>\n        {removeIcon === 'always' && (\n          <TabbableModeContext.Provider value={{ isTabbable: false }}>\n            <IconButton size=\"xs\" variant=\"ghost\" onAction={onRemoveIconClickCallback}>\n              <CloseIcon />\n            </IconButton>\n          </TabbableModeContext.Provider>\n        )}\n      </span>\n      <HiddenAccessible id={navigationTextId}>\n        {translations.selectMultiple_removeSelectedTagInstructionText()}\n      </HiddenAccessible>\n    </>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { Ref } from 'preact';\nimport { forwardRef } from 'preact/compat';\nimport { useCallback, useEffect, useImperativeHandle, useRef, useState } from 'preact/hooks';\nimport { useFocusWithin } from '../hooks/UNSAFE_useFocusWithin';\nimport { useUser } from '../hooks/UNSAFE_useUser';\nimport { isSelectAll } from '../utils/PRIVATE_keyboardUtils';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { DimensionProps, dimensionInterpolations } from '../utils/UNSAFE_interpolations/dimensions';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { TextTag } from './TextTag';\nimport { textTagListStyles } from './themes/TextTagListStyles.css';\n\n/**\n * Data structure of the text tag item\n */\ntype TextTagItem<V> = {\n  label: string;\n  value: V;\n};\n\n/**\n * Type of the ref handle of the component\n */\ntype TextTagListHandle = {\n  /**\n   * Focuses the text tag container\n   */\n  focus: () => void;\n\n  /**\n   * Blurs the text tag container\n   */\n  blur: () => void;\n};\n\n/**\n * Supported style props\n */\nconst supportedDimensions = ['maxWidth'] as const;\ntype SupportedDimensions = typeof supportedDimensions[number];\ntype StyleProps = Pick<DimensionProps, SupportedDimensions>;\n\n/**\n * Props for the TextTag component\n */\ntype Props<V> = StyleProps & {\n  /**\n   * Specifies accessible screen reader text.\n   */\n  'aria-label'?: string;\n\n  /**\n   * An array of objects which is used to stamp out the TextTag components\n   */\n  data: TextTagItem<V>[];\n\n  /**\n   * Flag to indicate if the label is inside the container\n   * TODO: Handle this in a more generic way if/when we make this component generic\n   */\n  hasInsideLabel?: boolean;\n\n  /**\n   * Specifies whether to show the remove icon in the TextTag components\n   */\n  removeIcon?: 'always' | 'never';\n\n  /**\n   * A callback function to be invoked when the component wants to exit the navigation.\n   * This happens when one presses Right arrow after reaching the end of the list (or Left\n   * arrow in RTL mode).\n   */\n  onExitNavigation?: () => void;\n\n  /**\n   * A callback function to be invoked when one or more text tags are removed\n   */\n  onRemove?: (items: V[]) => void;\n};\n\n/**\n * Setting up interpolations\n */\nconst supportedInterpolations = Array.from(supportedDimensions, (x) => dimensionInterpolations[x]);\nconst styleInterpolations = mergeInterpolations<StyleProps>(supportedInterpolations);\n\n/**\n * TextTagList component for rendering the collection of TextTags as well\n * as managing the navigation.\n *\n * @param param0 The props for the TextTagList component\n * @param ref The ref for the component\n */\nfunction _TextTagList<V>(props: Props<V>, ref: Ref<TextTagListHandle> = () => {}) {\n  // destructure props\n  const {\n    'aria-label': ariaLabel,\n    data,\n    hasInsideLabel = false,\n    removeIcon = 'never',\n    onExitNavigation,\n    onRemove\n  } = props;\n\n  // ref for setting the scroll position for the div\n  const divRef = useRef<HTMLDivElement>(null);\n\n  // Internal state for storing the current selected tags\n  const [selectedTags, setSelectedTags] = useState<V[]>([]);\n\n  // The navigation of focus will depend on the reading direction, so we need to\n  // get the current reading direction\n  const { direction } = useUser();\n\n  // Create a ref for maintaining the current selected tag. This is used for\n  // determining which tag needs to be selected next when pressing ArrowLeft or\n  // ArrowRight.\n  const currentSelectedTagIndex = useRef(-1);\n  // Create a ref that holds the last tag which is needed when receiving focus\n  // programmatically.\n  const lastTag = data.at(-1)?.value;\n  const lastTagMeta = useRef({ value: lastTag, index: data.length - 1 });\n  lastTagMeta.current = { value: lastTag, index: data.length - 1 };\n\n  // A function to select the tag at the given index\n  const selectTagAtIndex = useCallback(\n    (index: number) => {\n      const key = data.at(index)?.value;\n      if (key == null) return;\n      setSelectedTags([key]);\n    },\n    [data] // setSelectedTags is stable and not needed in dep array\n  );\n  // A function to clear the selection\n  const clearSelection = useCallback(() => {\n    setSelectedTags((previousSelectedTags) => {\n      currentSelectedTagIndex.current = -1;\n      return previousSelectedTags.length ? [] : previousSelectedTags;\n    });\n  }, []); // setSelectedTags is stable and not needed in dep array\n\n  // Handle the remove & delete events from the tags\n  const onTagRemoveIconClick = useCallback(\n    (value: V) => {\n      // on remove icon click we only need to remove the tag that\n      // invoked the event\n      onRemove?.([value]);\n      onExitNavigation?.();\n      // Firefox & Safari are not calling onBlur when focusing out of the\n      // tag list through onExitNavigation, so clear the selections explicitly\n      // here.\n      clearSelection();\n    },\n    [clearSelection, onExitNavigation, onRemove]\n  );\n  const onTagRemoveAction = useCallback(\n    (value: V) => {\n      // on delete action we need to remove the tag that invoked the delete action\n      // as well as the selected tags.\n      const valuesToRemove = [...selectedTags];\n      if (!selectedTags.includes(value)) {\n        valuesToRemove.push(value);\n      }\n      onRemove?.(valuesToRemove);\n      onExitNavigation?.();\n      // Firefox & Safari are not calling onBlur when focusing out of the\n      // tag list through onExitNavigation, so clear the selections explicitly\n      // here.\n      clearSelection();\n    },\n    [selectedTags, clearSelection, onExitNavigation, onRemove]\n  );\n\n  // Handle the select event from the tags\n  const onTagSelect = useCallback(\n    (value: V) => {\n      setSelectedTags([value]);\n      currentSelectedTagIndex.current = data.findIndex((tag) => tag.value === value);\n    },\n    [data, setSelectedTags]\n  );\n\n  // Handle keyDown event on the tags container\n  const onTagKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (data.length === 0) return;\n      // Move towards the beginning of the list when pressing\n      // Left arrow (or Right arrow in rtl).\n      if (\n        (direction === 'ltr' && event.code === 'ArrowLeft') ||\n        (direction === 'rtl' && event.code === 'ArrowRight')\n      ) {\n        if (currentSelectedTagIndex.current === 0) return;\n        currentSelectedTagIndex.current -= 1;\n        selectTagAtIndex(currentSelectedTagIndex.current);\n        return;\n      }\n\n      // Move towards the end of the list when pressing\n      // Right arrow (or Left arrow in rtl). If at the end,\n      // invoke onExitNavigation.\n      if (\n        (direction === 'ltr' && event.code === 'ArrowRight') ||\n        (direction === 'rtl' && event.code === 'ArrowLeft')\n      ) {\n        if (currentSelectedTagIndex.current === data.length - 1) {\n          // We have reached the end, so exit navigation\n          onExitNavigation?.();\n          return;\n        }\n        currentSelectedTagIndex.current += 1;\n        selectTagAtIndex(currentSelectedTagIndex.current);\n        return;\n      }\n\n      // When pressing the Home key, move the focus to the first tag\n      if (event.code === 'Home') {\n        currentSelectedTagIndex.current = 0;\n        selectTagAtIndex(currentSelectedTagIndex.current);\n        return;\n      }\n\n      // When pressing the End key, move the focus to the last tag\n      if (event.code === 'End') {\n        currentSelectedTagIndex.current = data.length - 1;\n        selectTagAtIndex(currentSelectedTagIndex.current);\n        return;\n      }\n\n      // If it is a Select All event, then select all the tags and do\n      // not move the focus\n      if (isSelectAll(event)) {\n        setSelectedTags(data.map((tag) => tag.value));\n        // prevent default to prevent selection of the whole screen\n        event.preventDefault();\n        return;\n      }\n    },\n    [data, direction, onExitNavigation, selectTagAtIndex, setSelectedTags]\n  );\n\n  const handleOnFocus = useCallback(() => {\n    setSelectedTags((previousSelectedTags) => {\n      // select the tag only if there are no current selected tags\n      // and there is data\n      if (previousSelectedTags.length || lastTagMeta.current.value === undefined)\n        return previousSelectedTags;\n\n      currentSelectedTagIndex.current = lastTagMeta.current.index;\n      return [lastTagMeta.current.value];\n    });\n  }, []); // setSelectedTags is stable and not needed in the dep array\n  const handleOnBlur = useCallback(() => {\n    clearSelection();\n  }, [clearSelection]);\n\n  // When blurring out of the component, remove all selections\n  const { focusProps } = useFocusWithin({\n    onBlurWithin: handleOnBlur\n  });\n\n  // Update the ref to include the handler methods\n  useImperativeHandle(\n    ref,\n    () => ({\n      blur: handleOnBlur,\n      focus: handleOnFocus\n    }),\n    [handleOnBlur, handleOnFocus]\n  );\n\n  useEffect(() => {\n    // every time the data is changed, scroll to the end of the list to show the latest added\n    // pill\n    // In ltr we need to scroll to the right, so positive value should be passed and in rtl we\n    // need to scroll to the left, so negative value should be passed\n    divRef.current?.scrollTo({\n      left: divRef.current.scrollWidth * (direction === 'ltr' ? 1 : -1)\n    });\n  }, [data, direction]);\n\n  // the styles for the component\n  const styles = styleInterpolations(props);\n  // TODO: use theming and multi-variant styles\n  // \n  const rootClasses = classNames([\n    textTagListStyles.textTagListBase,\n    hasInsideLabel && textTagListStyles.textTagListInsideLabel\n  ]);\n\n  return (\n    <div\n      class={rootClasses}\n      ref={divRef}\n      tabIndex={-1}\n      onKeyDown={onTagKeyDown}\n      role=\"listbox\"\n      aria-label={ariaLabel}\n      aria-multiselectable=\"true\"\n      style={styles}\n      {...focusProps}>\n      {data.map((tag, index) => (\n        <TextTag\n          isFocused={currentSelectedTagIndex.current === index}\n          isSelected={selectedTags.includes(tag.value)}\n          key={tag.value}\n          onRemoveAction={onTagRemoveAction}\n          onSelect={onTagSelect}\n          onRemoveIconClick={onTagRemoveIconClick}\n          removeIcon={removeIcon}\n          value={tag.value}>\n          {tag.label}\n        </TextTag>\n      ))}\n    </div>\n  );\n}\n\nexport const TextTagList = forwardRef<TextTagListHandle, Props<any>>(_TextTagList);\n","import { ComponentProps, Ref } from 'preact';\nimport { TextTagList } from './TextTagList';\nimport { Flex } from '../UNSAFE_Flex';\nimport { TextFieldInput } from '../UNSAFE_TextField';\nimport { LiveRegion } from '../UNSAFE_LiveRegion';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { HiddenAccessible } from '../UNSAFE_HiddenAccessible';\n\ntype TextFieldInputProps = ComponentProps<typeof TextFieldInput>;\ntype TextTagListProps = ComponentProps<typeof TextTagList>;\n\ntype PassThroughTextFieldInputProps = Pick<\n  TextFieldInputProps,\n  | 'aria-controls'\n  | 'aria-describedby'\n  | 'aria-expanded'\n  | 'aria-invalid'\n  | 'aria-label'\n  | 'autoFocus'\n  | 'hasEmptyLabel'\n  | 'hasInsideLabel'\n  | 'id'\n  | 'onBlur'\n  | 'onFocus'\n  | 'onInput'\n  | 'onKeyDown'\n  | 'onKeyUp'\n  | 'isRequired'\n  | 'placeholder'\n  | 'textAlign'\n  | 'variant'\n> & {\n  inputRef?: Ref<HTMLInputElement>;\n};\ntype PassThroughTextTagListProps = Pick<\n  TextTagListProps,\n  'onExitNavigation' | 'onRemove' | 'removeIcon'\n>;\n\ntype Props = PassThroughTextFieldInputProps &\n  PassThroughTextTagListProps & {\n    displayValue?: string;\n    isAddToListShown?: boolean;\n    isTextTagListShown?: boolean;\n    isUserFiltering?: boolean;\n    liveRegionText?: string;\n    selectedValuesDescriptionId?: string;\n    textTagListData: TextTagListProps['data'];\n    textTagListRef?: TextTagListProps['ref'];\n    userInput?: string;\n    virtualKeyboard?: 'auto' | 'email' | 'number' | 'search' | 'tel' | 'text' | 'url';\n  };\n\nexport function SelectMultipleFieldInput({\n  displayValue,\n  isAddToListShown,\n  isTextTagListShown,\n  isUserFiltering,\n  liveRegionText,\n  onExitNavigation,\n  onRemove,\n  removeIcon,\n  selectedValuesDescriptionId,\n  textTagListData,\n  textTagListRef,\n  userInput,\n  virtualKeyboard,\n  ...passThroughTextFieldInputProps\n}: Props) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  const addToListAccText = isAddToListShown ? translations.select_addToListAvailable() : undefined;\n\n  return (\n    <>\n      {isTextTagListShown && (\n        <TextTagList\n          aria-label={translations.selectMultiple_selectedValues()}\n          data={textTagListData}\n          hasInsideLabel={passThroughTextFieldInputProps.hasInsideLabel}\n          maxWidth=\"50%\"\n          onExitNavigation={onExitNavigation}\n          onRemove={onRemove}\n          ref={textTagListRef}\n          removeIcon={removeIcon}\n        />\n      )}\n      <Flex flex={1}>\n        <TextFieldInput\n          aria-autocomplete=\"list\"\n          autoComplete=\"off\"\n          // When focused, we show the tag list, which can be treated as having prefix\n          hasPrefix={isTextTagListShown}\n          role=\"combobox\"\n          spellcheck={false}\n          type={virtualKeyboard === 'auto' ? 'search' : virtualKeyboard}\n          value={isUserFiltering || isTextTagListShown ? userInput : displayValue}\n          {...passThroughTextFieldInputProps}\n        />\n      </Flex>\n      {\n        // Show description text when focused as we will not be\n        // showing display text in the input.\n        isTextTagListShown && (\n          <HiddenAccessible\n            id={selectedValuesDescriptionId}\n            // We want the content to be hidden for screen readers too by default.\n            // But, it will be overridden when we link the aria-describedby attribute.\n            // Otherwise, the content here will be read twice.\n            isHidden={true}>\n            {displayValue}\n          </HiddenAccessible>\n        )\n      }\n      <LiveRegion>{liveRegionText}</LiveRegion>\n      {isAddToListShown ? <LiveRegion>{addToListAccText}</LiveRegion> : undefined}\n    </>\n  );\n}\n","import { ComponentProps } from 'preact';\nimport { Button } from '../UNSAFE_Button';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { mobileDropdownFooterStyles } from './themes/MobileDropdownFooterStyles.css';\n\ntype ButtonProps = ComponentProps<typeof Button>;\ntype Props = {\n  onApply?: ButtonProps['onAction'];\n};\n\nexport function MobileDropdownFooter({ onApply }: Props) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  return (\n    <div class={mobileDropdownFooterStyles.base}>\n      <Button\n        display=\"label\"\n        edge=\"bottom\"\n        label={translations.selectMultiple_apply()}\n        size=\"sm\"\n        variant=\"callToAction\"\n        onAction={onApply}\n      />\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useMemo } from 'preact/hooks';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { ItemTextType } from '../utils/UNSAFE_selectUtils';\nimport { renderItemText } from '../PRIVATE_SelectCommon';\n\nexport function useDisplayValues<K, D>(itemText: ItemTextType<K, D>, valueItems?: Item<K, D>[]) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const separator = translations.plural_separator();\n\n  // create the text displayed in the field from the selected values\n  const concatenatedDisplayValues = useMemo(() => {\n    if (valueItems === undefined) {\n      return '';\n    }\n    const displayValues = createDisplayValues(itemText, valueItems);\n    const concatenatedDisplayValues = concatDisplayValues(displayValues, separator);\n    return concatenatedDisplayValues;\n  }, [itemText, separator, valueItems]);\n\n  // create the text tags to display when the component is focused\n  const textTags = useMemo(\n    () => (valueItems === undefined ? [] : createTextTags(itemText, valueItems)),\n    [itemText, valueItems]\n  );\n\n  return {\n    displayValue: concatenatedDisplayValues,\n    textTags\n  };\n}\n\nfunction concatDisplayValues(displayValues: Set<string>, separator: string) {\n  return Array.from(displayValues.values()).join(separator);\n}\n\nfunction createDisplayValues<K, D>(itemText: ItemTextType<K, D>, selectedItems?: Item<K, D>[]) {\n  const arValues = selectedItems ? [...selectedItems?.values()] : [];\n  const mapFunc = (itemContext: Item<K, D>) => renderItemText(itemContext, itemText);\n  const mappedArray = arValues.map(mapFunc);\n  return new Set<string>(mappedArray as string[]);\n}\n\nfunction createTextTags<K, D>(itemText: ItemTextType<K, D>, selectedItems: Item<K, D>[] = []) {\n  return selectedItems.map((item) => ({\n    label: renderItemText(item, itemText) ?? '',\n    value: item.key\n  }));\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useMemo, useRef } from 'preact/hooks';\nimport { DataState } from 'src/UNSAFE_Collection';\nimport { Item } from '../utils/UNSAFE_dataProvider';\n\ntype Props<K, D> = {\n  isDropdownSelectedOnlyView?: boolean;\n  valueItems?: Item<K, D>[];\n};\n\n/**\n * Get the data to show in the dropdown for the selected-only view.\n * While the component is showing only selected values in the dropdown, that list of values should\n * not change as the user deselects items within it.  For example, if the list initially shows\n * selected items \"Item A\" and \"Item B\", and the user deselects \"Item B\", we do not want to remove\n * \"Item B\" from the list.  The reason is that the user may want to reselect it again.  So the\n * list should remain static as of the time the user toggled the selected-only view on.\n * If isDropdownSelectedOnlyView is false, then the data returned from this hook will be undefined.\n * If isDropdownSelectedOnlyView is true, then the data returned from this hook will consist of\n * all of the valueItems that were selected at the time isDropdownSelectedOnlyView was set to true.\n * @param isDropdownSelectedOnlyView Whether the component is showing only selected\n * values in the dropdown: true if so, false if not.\n * @param valueItems The keys, data, and optional metadata for the selected values.\n * @returns An object with data and onLoadRange properties that can be passed on to the\n * list in the dropdown.\n */\nexport function useSelectedOnlyData<K, D>({ isDropdownSelectedOnlyView, valueItems }: Props<K, D>) {\n  // Need to specify type of useMemo here so that dependent code in SelectMultiple and\n  // useSelectMultiple doesn't show a type error related to the sizePrecision prop on DataState:\n  //   Type 'string' is not assignable to type '\"exact\" | \"atLeast\"'.\n  // Note that useMemo here only depends on isDropdownSelectedOnlyView because we only want to\n  // recalculate when that value changes.  While the selected only view is shown, we want the\n  // data set to remain static with the set of valueItems as of the time the view was changed to\n  // only show selected items so that the user can deselect and reselect items.\n  // If useMemo depended on the valueItems too, then the data set would change as the user\n  // deselected items, which means those items would disappear from the dropdown and the user\n  // could not reselect them.\n\n  // ref for the static set of value items we want to show in the selected only view\n  const selectedOnlyValueItemsRef = useRef(valueItems);\n  // ref for the previous value of isDropdownSelectedOnlyView\n  const prevIsDropdownSelectedOnlyViewRef = useRef(isDropdownSelectedOnlyView);\n  // if the value of isDropdownSelectedOnlyView has changed, store the new static set of\n  // value items to show in selected only view, otherwise leave it the same\n  selectedOnlyValueItemsRef.current =\n    prevIsDropdownSelectedOnlyViewRef.current !== isDropdownSelectedOnlyView\n      ? valueItems\n      : selectedOnlyValueItemsRef.current;\n  // update the ref for the previous value of isDropdownSelectedOnlyView AFTER using it to\n  // update the ref for the static set of value items\n  prevIsDropdownSelectedOnlyViewRef.current = isDropdownSelectedOnlyView;\n\n  const selectedOnlyViewDataState = useMemo<DataState<K, D> | undefined>(() => {\n    return !isDropdownSelectedOnlyView ||\n      !selectedOnlyValueItemsRef.current ||\n      selectedOnlyValueItemsRef.current.length === 0\n      ? undefined\n      : {\n          offset: 0,\n          totalSize: selectedOnlyValueItemsRef.current.length ?? 0,\n          sizePrecision: 'exact',\n          data: selectedOnlyValueItemsRef.current.map((valueItem: Item<K, D>) => {\n            return { data: valueItem.data, metadata: valueItem.metadata ?? { key: valueItem.key } };\n          })\n        };\n  }, [isDropdownSelectedOnlyView]);\n\n  return {\n    data: selectedOnlyViewDataState,\n    onLoadRange: undefined\n  };\n}\n","import { Ref, useCallback, useEffect, useMemo, useRef, useState } from 'preact/hooks';\nimport { CurrentKeyDetail, DataState, SelectionDetail } from '../UNSAFE_Collection';\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { ItemTextType } from '../utils/UNSAFE_selectUtils';\nimport { isSearchTextEmptyOrUndefined } from '#PRIVATE_SelectCommon';\nimport { useDisplayValues } from './useDisplayValues';\nimport type { UseSelectMultipleProps, useSelectMultiple } from './useSelectMultiple';\nimport { useSelectedOnlyData } from './useSelectedOnlyData';\nimport { equals } from 'ramda';\n\ntype UseSelectMultipleReturn = ReturnType<typeof useSelectMultiple>;\ntype PickedPropsFromUseSelectMultiple = Pick<\n  UseSelectMultipleReturn,\n  | 'isDropdownOpen'\n  | 'isDropdownSelectedOnlyView'\n  | 'setDropdownOpen'\n  | 'setUserInput'\n  | 'stopFiltering'\n  | 'userInput'\n>;\nexport type UseMobileDropdownProps<K, D> = PickedPropsFromUseSelectMultiple & {\n  data: UseSelectMultipleProps<K, D>['data'];\n  inputRef: Ref<HTMLElement>;\n  itemText: ItemTextType<K, D>;\n  textTagListRef: UseSelectMultipleReturn['textTagListProps']['textTagListRef'];\n  valueItems: UseSelectMultipleProps<K, D>['valueItems'];\n  onCommit: UseSelectMultipleProps<K, D>['onCommit'];\n  onLoadRange: UseSelectMultipleProps<K, D>['onLoadRange'];\n};\n\n// use const for default valueItems so that it doesn't create a new empty array on every render\nconst DEFAULT_VALUE_ITEMS = [] as UseMobileDropdownProps<\n  string | number,\n  Record<string, any>\n>['valueItems'];\n\nexport function useMobileDropdown<K extends string | number, D>({\n  data,\n  inputRef,\n  isDropdownOpen,\n  isDropdownSelectedOnlyView,\n  itemText,\n  textTagListRef,\n  userInput,\n  valueItems = DEFAULT_VALUE_ITEMS as NonNullable<UseMobileDropdownProps<K, D>['valueItems']>,\n  onCommit,\n  onLoadRange,\n  setDropdownOpen,\n  setUserInput,\n  stopFiltering\n}: UseMobileDropdownProps<K, D>) {\n  const [currentRow, setCurrentRow] = useState<{ rowKey?: K }>({\n    rowKey: undefined\n  });\n  const [dropdownSelectedKeys, setDropdownSelectedKeys] = useState(keysFromValueItems(valueItems));\n  const dataCache = useRef(new Map<K, Item<K, D>>());\n  const currentValueItems = useMemo(() => {\n    const items: Item<K, D>[] = [];\n    dropdownSelectedKeys.forEach((key) => {\n      // Initially check if they are in valueItems\n      const item = valueItems.find((item) => item.key === key);\n      if (item) {\n        items.push(item);\n        return;\n      }\n\n      // otherwise check if it is available in the dataCache\n      if (dataCache.current.has(key)) {\n        items.push(dataCache.current.get(key)!);\n      }\n    });\n    return items;\n  }, [dropdownSelectedKeys, valueItems]);\n  const { textTags, displayValue } = useDisplayValues(itemText, currentValueItems);\n\n  // Create a ref for the input in the dropdown\n  const dropdownInputRef = useRef<HTMLInputElement>(null);\n\n  // show only the selected values in the dropdown if isDropdownSelectedOnlyView is true,\n  // otherwise show the full data set\n  // TODO: We may need to revisit this for hierarchical data because the selected valueItems\n  // won't have any information about ancestor group nodes, and we should probably show selected\n  // items in context within the hierarchy.  Also, the order of the items in the selected-only\n  // view right now follows the order in which they were selected, not the order in which they\n  // would appear in the full data set.  This may be more of a problem for hierarchical data\n  // if items have to appear within the correct group ancestors.  We may need to move\n  // construction of the selected-only DataState out of the component to the consuming code,\n  // and take a callback that we can call as a notification that the app should provide this\n  // special DataState to us (kind of like onLoadRange).  Note that we may also need an\n  // enhancement on the DataProvider API to be able to specify a filterCriterion to filter by\n  // the selected keys through a fetchFirst call, because a regular fetchByKeys call would\n  // still return results in the order in which the keys were specified and would not return\n  // data for the ancestor group nodes.\n  const { data: selectedOnlyData, onLoadRange: selectedOnlyOnLoadRange } = useSelectedOnlyData<\n    K,\n    D\n  >({\n    isDropdownSelectedOnlyView,\n    valueItems: currentValueItems\n  });\n\n  const onCurrentKeyChange = useCallback(\n    (detail: CurrentKeyDetail<K>) => {\n      setCurrentRow({ rowKey: detail.value });\n    },\n    [setCurrentRow]\n  );\n\n  const onSelectionChange = useCallback(\n    (detail: SelectionDetail<K>) => {\n      const newKeys = new Set(detail.value.keys?.values());\n      // update the dropdownSelectedKeys so that the selection visual state of the collection\n      // updates immediately while waiting for new valueItems to be set\n      setDropdownSelectedKeys(newKeys);\n\n      // clear the filter text typed by the user, but do NOT clear the actual filter criterion\n      // or highlighting in the list\n      setUserInput('');\n\n      // update the data cache on each selection if data is present\n      if (data) {\n        updateCache(dataCache.current, data, newKeys);\n      }\n    },\n    [data, setDropdownSelectedKeys, setUserInput]\n  );\n\n  const closeDropdown = useCallback(() => {\n    // reset dropdownSelectedKeys as you close the dropdown so that\n    // the next time the dropdown is opened, it will have the actual component's valueItems\n    setDropdownSelectedKeys(new Set(valueItems.map((v) => v.key)));\n    // Empty the cached map\n    dataCache.current.clear();\n    setDropdownOpen(false);\n    // stop filtering before closing the dropdown\n    stopFiltering();\n    // revert the focus back to the main field\n    inputRef.current?.focus();\n  }, [inputRef, setDropdownOpen, stopFiltering, valueItems]);\n\n  const onApply = useCallback(() => {\n    // Commit the current value items and close the dropdown\n    onCommit({\n      previousValue: keysFromValueItems(valueItems),\n      value: dropdownSelectedKeys\n    });\n    closeDropdown();\n  }, [dropdownSelectedKeys, valueItems, closeDropdown, onCommit]);\n\n  const onBackButtonClick = useCallback(() => {\n    closeDropdown();\n  }, [closeDropdown]);\n\n  const onClearButtonClick = useCallback(() => {\n    setDropdownSelectedKeys(new Set());\n    stopFiltering();\n  }, [stopFiltering]);\n\n  const onTextTagRemove = useCallback(\n    (keys: K[]) => {\n      const newSelectedKeys = new Set(dropdownSelectedKeys);\n      keys.forEach((key) => newSelectedKeys.delete(key));\n      setDropdownSelectedKeys(newSelectedKeys);\n    },\n    [dropdownSelectedKeys]\n  );\n\n  const onTextTagExitNavigation = useCallback(() => {\n    // Focus the input on the next tick. Doing it in the same event cycle will\n    // trigger the key press on the input element which makes the caret move by\n    // one character.\n    setTimeout(() => dropdownInputRef.current?.focus(), 0);\n  }, []);\n\n  const wasDropdownOpen = useRef(isDropdownOpen);\n  useEffect(() => {\n    // if the dropdown is open, ignore any valueItems update\n    if (isDropdownOpen) {\n      // if it was open before, then this is a valueItems change, so no action\n      if (wasDropdownOpen.current) return;\n\n      // otherwise this dropdown is opened now, so set the focus on the input field\n      setTimeout(() => dropdownInputRef.current?.focus(), 0);\n      wasDropdownOpen.current = true;\n      return;\n    }\n    wasDropdownOpen.current = false;\n  }, [isDropdownOpen]);\n\n  const [prevValueItems, setPrevValueItems] = useState(valueItems);\n  if (prevValueItems !== valueItems) {\n    // if dropdown is closed, keep the valueItems in sync with the dropdown selected keys\n    if (!isDropdownOpen) {\n      setDropdownSelectedKeys((prevDropdownSelectedKeys) => {\n        const nextDropdownSelectedKeys = keysFromValueItems(valueItems);\n        // since valueItems can be a different array with the same values and keysFromValueItems\n        // will create a new set every time, compare the value and update the set only if the\n        // values have changed\n        return equals(prevDropdownSelectedKeys, nextDropdownSelectedKeys)\n          ? prevDropdownSelectedKeys\n          : nextDropdownSelectedKeys;\n      });\n    }\n    setPrevValueItems(valueItems);\n  }\n\n  return {\n    collectionProps: {\n      currentKey: currentRow.rowKey,\n      data: isDropdownSelectedOnlyView ? selectedOnlyData : data,\n      selectedKeys: dropdownSelectedKeys,\n      onCurrentKeyChange,\n      onLoadRange: isDropdownSelectedOnlyView ? selectedOnlyOnLoadRange : onLoadRange,\n      onSelectionChange\n    },\n    footerProps: {\n      onApply\n    },\n    selectMultipleFieldInputProps: {\n      displayValue,\n      hasEmptyLabel: false,\n      hasInsideLabel: true,\n      inputRef: dropdownInputRef,\n      isTextTagListShown: textTags.length > 0,\n      isUserFiltering: true,\n      removeIcon: 'always' as const,\n      userInput,\n      textTagListData: textTags,\n      textTagListRef: textTagListRef,\n      onExitNavigation: onTextTagExitNavigation,\n      onRemove: onTextTagRemove\n    },\n    selectMultipleFieldProps: {\n      hasInsideLabel: true,\n      isBackButtonShown: true,\n      isClearButtonShown: !isSearchTextEmptyOrUndefined(userInput) || textTags.length !== 0,\n      isDropdownArrowShown: false,\n      isDropdownSelectedOnlyView,\n      isSelectedValuesCountShown: dropdownSelectedKeys.size > 0 || isDropdownSelectedOnlyView,\n      selectedValuesCount: dropdownSelectedKeys.size,\n      styleVariant: 'embedded' as const,\n      onBackButtonClick,\n      onClearButtonClick\n    }\n  };\n}\n\n/**\n * A function to cache the data for the current set of keys from the current data state\n * and current set of keys.\n *\n * The idea is that, the data state might not contain all the selected keys. However, as\n * a key is selected, if we update the cache, it will always contain the data for the selected\n * keys. Reason is that, when a key is selected, at that moment it will be in the current data\n * state. We will fetch that information and store it. While the current data state might not\n * contain information about all the selected keys, it will always have the information about\n * current selected key.\n *\n * @param cache The data cache\n * @param data The current data state\n * @param keys The current set of keys\n */\nconst updateCache = <K, D>(cache: Map<K, Item<K, D>>, data: DataState<K, D>, keys: Set<K>) =>\n  // iterate through the data and if a selected key's match is found, update the cache\n  data.data.forEach((item) => {\n    if (!keys.has(item.metadata.key)) return;\n\n    cache.set(item.metadata.key, {\n      data: item.data,\n      key: item.metadata.key,\n      metadata: item.metadata\n    });\n  });\n\n/**\n * Extract keys from a value items array.\n *\n * @param valueItems The value items from which the keys are to be extracted\n * @returns The set of keys\n */\nconst keysFromValueItems = <K, D>(valueItems: Item<K, D>[]) =>\n  new Set(valueItems.map((i) => i.key));\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren, ComponentProps } from 'preact';\nimport { Ref, StateUpdater } from 'preact/hooks';\nimport {\n  DefaultList,\n  DropdownList,\n  DropdownUserAssistance,\n  EmptyResults,\n  LinkItem,\n  SelectMobileDropdown\n} from '../PRIVATE_SelectCommon';\nimport { DataState } from '../UNSAFE_Collection';\nimport { Label } from '../UNSAFE_Label';\nimport { TextFieldInput } from '../UNSAFE_TextField';\nimport { InlineUserAssistance, UserAssistanceDensityType } from '../UNSAFE_UserAssistance';\nimport { View } from '../UNSAFE_View';\nimport { VirtualizedListView } from '../UNSAFE_VirtualizedListView';\nimport { FormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { useTranslationBundle } from '#hooks/UNSAFE_useTranslationBundle';\nimport { useTextField } from '../hooks/UNSAFE_useTextField';\nimport { BundleType } from '#resources/nls/bundle';\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { ItemTextType } from '../utils/UNSAFE_selectUtils';\nimport { Handle } from '../utils/UNSAFE_typeUtils';\nimport { ValueUpdateDetail } from '../utils/UNSAFE_valueUpdateDetail';\nimport { MobileDropdownFooter } from './MobileDropdownFooter';\nimport { SelectedValuesCount } from './SelectedValuesCount';\nimport { ItemRendererProps } from './SelectMultiple.types';\nimport { SelectMultipleField } from './SelectMultipleField';\nimport { SelectMultipleFieldInput } from './SelectMultipleFieldInput';\nimport { TextTagList } from './TextTagList';\nimport { useMobileDropdown } from './useMobileDropdown';\n\ntype InlineUserAssistanceProps = ComponentProps<typeof InlineUserAssistance>;\ntype SelectMultipleFieldInputProps = ComponentProps<typeof SelectMultipleFieldInput>;\ntype SelectedValuesCountToggleType = ComponentProps<typeof SelectedValuesCount>['onToggle'];\ntype TextFieldInputProps = ComponentProps<typeof TextFieldInput>;\ntype TextTagListHandle = Handle<typeof TextTagList, 'ref'>;\n\ntype Props<K extends string | number, D extends Record<string, any>> = {\n  'aria-describedby'?: string;\n  'aria-label'?: string;\n  assistiveText?: string;\n  data?: DataState<K, D> | null;\n  dropdownId: string;\n  enabledElementRef: Ref<HTMLElement>;\n  helpSourceLink?: InlineUserAssistanceProps['helpSourceLink'];\n  helpSourceText?: InlineUserAssistanceProps['helpSourceText'];\n  isAddToListShown?: boolean;\n  isDisabled?: boolean;\n  isEmptyResults: boolean;\n  isFocused: boolean;\n  isLoading: boolean;\n  isOpen: boolean;\n  isReadonly?: false;\n  isRequired?: boolean;\n  isSelectedOnlyView: boolean;\n  isUserFiltering: boolean;\n  itemRenderer?: (itemRendererProps: ItemRendererProps<K, D>) => ComponentChildren;\n  itemText: ItemTextType<K, D>;\n  label: string;\n  liveRegionText?: string;\n  placeholder?: TextFieldInputProps['placeholder'];\n  propIsLoading?: boolean;\n  searchText?: string;\n  selectedValuesDescriptionId?: string;\n  setDropdownOpen: StateUpdater<boolean>;\n  setUserInput: StateUpdater<string | undefined>;\n  stopFiltering: () => void;\n  textAlign?: TextFieldInputProps['textAlign'];\n  textTagListRef: Ref<TextTagListHandle>;\n  userAssistanceDensity?: UserAssistanceDensityType;\n  userInput?: string;\n  valueItems?: Item<K, D>[];\n  virtualKeyboard?: SelectMultipleFieldInputProps['virtualKeyboard'];\n  onAddToListAction?: () => void;\n  onCommit: (detail: ValueUpdateDetail<Set<K>>) => void;\n  onFieldBlur?: (event: FocusEvent) => void;\n  onFieldFocus?: (event: FocusEvent) => void;\n  onFieldInput?: SelectMultipleFieldInputProps['onInput'];\n  onFieldKeyDown?: SelectMultipleFieldInputProps['onKeyDown'];\n  onFieldKeyUp?: SelectMultipleFieldInputProps['onKeyUp'];\n  onLoadRange?: ComponentProps<typeof VirtualizedListView>['onLoadRange'];\n  onSelectedValuesCountKeyDown: (event: KeyboardEvent) => void;\n  onSelectedValuesCountKeyUp: (event: KeyboardEvent) => void;\n  onSelectedValuesCountMouseDown: (event: MouseEvent) => void;\n  onSelectedValuesCountToggle: SelectedValuesCountToggleType;\n};\n\nexport function SelectMultipleMobileDropdown<\n  K extends string | number,\n  D extends Record<string, any>\n>({\n  'aria-describedby': ariaDescribedBy,\n  'aria-label': ariaLabel,\n  assistiveText,\n  data,\n  dropdownId,\n  enabledElementRef,\n  helpSourceLink,\n  helpSourceText,\n  isAddToListShown,\n  isDisabled,\n  isEmptyResults,\n  isFocused,\n  isLoading,\n  isOpen,\n  isReadonly,\n  isRequired,\n  isSelectedOnlyView,\n  isUserFiltering,\n  itemRenderer,\n  itemText,\n  label,\n  liveRegionText,\n  placeholder,\n  propIsLoading,\n  searchText,\n  selectedValuesDescriptionId,\n  setDropdownOpen,\n  setUserInput,\n  stopFiltering,\n  textAlign,\n  textTagListRef,\n  userAssistanceDensity,\n  userInput,\n  valueItems,\n  virtualKeyboard,\n  onAddToListAction,\n  onCommit,\n  onFieldBlur,\n  onFieldFocus,\n  onFieldInput,\n  onFieldKeyDown,\n  onFieldKeyUp,\n  onLoadRange,\n  onSelectedValuesCountKeyDown,\n  onSelectedValuesCountKeyUp,\n  onSelectedValuesCountMouseDown,\n  onSelectedValuesCountToggle\n}: Props<K, D>) {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  const {\n    collectionProps: mobileDropdownCollectionProps,\n    footerProps: mobileDropdownFooterProps,\n    selectMultipleFieldInputProps: mobileDropdownSelectMultipleFieldInputProps,\n    selectMultipleFieldProps: mobileDropdownSelectMultipleFieldProps\n  } = useMobileDropdown<K, D>({\n    data,\n    inputRef: enabledElementRef,\n    isDropdownOpen: isOpen,\n    isDropdownSelectedOnlyView: isSelectedOnlyView,\n    itemText,\n    textTagListRef,\n    userInput,\n    valueItems,\n    onCommit,\n    onLoadRange,\n    setDropdownOpen,\n    setUserInput,\n    stopFiltering\n  });\n\n  // for dropdown field\n  const {\n    formFieldContext: mobileDropdownFormFieldContext,\n    inputProps: mobileDropdownInputProps,\n    labelProps: mobileDropdownLabelProps,\n    textFieldProps: mobileDropdownTextFieldProps,\n    userAssistanceProps: mobileDropdownUserAssistanceProps\n  } = useTextField({\n    ariaDescribedBy,\n    helpSourceLink,\n    helpSourceText,\n    isDisabled: false,\n    isFocused,\n    isLoading,\n    isReadonly: false,\n    isRequiredShown: false,\n    labelEdge: 'inside',\n    styleVariant: 'default',\n    value: mobileDropdownSelectMultipleFieldProps.selectedValuesCount > 0 ? true : undefined\n  });\n\n  // JET-54256 - inside label animates up on initial display with selected value\n  // If we're waiting for the selected values to load, the component should look like it\n  // has a value in the meantime.\n  // Use the original propIsLoading instead of isLoading because we don't want to delay\n  // the inside label position by a timer like we do the progressive loading indicator.\n  mobileDropdownFormFieldContext.hasValue =\n    propIsLoading || mobileDropdownFormFieldContext.hasValue;\n\n  const mobileDropdownFieldLabelProps = {\n    label: <Label {...mobileDropdownLabelProps}>{label}</Label>,\n    labelEdge: 'inside' as const\n  };\n\n  const dropdownInlineUserAssistance =\n    isOpen &&\n    !isDisabled &&\n    !isReadonly &&\n    (assistiveText || helpSourceLink) &&\n    (userAssistanceDensity === 'efficient' || userAssistanceDensity === 'reflow') ? (\n      <DropdownUserAssistance\n        assistiveText={assistiveText}\n        fieldLabel={label}\n        helpSourceLink={helpSourceLink}\n        helpSourceText={helpSourceText}\n        userAssistanceDensity={userAssistanceDensity}\n        {...mobileDropdownUserAssistanceProps}\n      />\n    ) : undefined;\n\n  const dropdownListContent = isEmptyResults ? (\n    isAddToListShown ? undefined : (\n      <EmptyResults />\n    )\n  ) : (\n    <DefaultList<K, D>\n      {...mobileDropdownCollectionProps}\n      aria-label={label ?? ''}\n      itemRenderer={itemRenderer}\n      itemText={itemText}\n      searchText={isSelectedOnlyView ? undefined : isUserFiltering ? searchText : undefined}\n      selectionMode=\"multiple\"\n    />\n  );\n\n  const addToListContent = isAddToListShown ? (\n    <LinkItem onAction={onAddToListAction}>{translations.select_addToList()}</LinkItem>\n  ) : undefined;\n\n  return (\n    <SelectMobileDropdown\n      header={\n        <FormFieldContext.Provider value={mobileDropdownFormFieldContext}>\n          <View>\n            <SelectMultipleField\n              fieldLabel={label}\n              onBlur={onFieldBlur}\n              onFocus={onFieldFocus}\n              onSelectedValuesCountKeyDown={onSelectedValuesCountKeyDown}\n              onSelectedValuesCountKeyUp={onSelectedValuesCountKeyUp}\n              onSelectedValuesCountMouseDown={onSelectedValuesCountMouseDown}\n              onSelectedValuesCountToggle={onSelectedValuesCountToggle}\n              {...mobileDropdownFieldLabelProps}\n              {...mobileDropdownTextFieldProps}\n              {...mobileDropdownSelectMultipleFieldProps}>\n              <SelectMultipleFieldInput\n                aria-controls={dropdownId}\n                aria-expanded={isOpen}\n                aria-label={ariaLabel}\n                isAddToListShown={isAddToListShown}\n                isRequired={isRequired}\n                liveRegionText={liveRegionText}\n                placeholder={placeholder}\n                selectedValuesDescriptionId={selectedValuesDescriptionId}\n                textAlign={textAlign}\n                virtualKeyboard={virtualKeyboard}\n                onInput={onFieldInput}\n                onKeyDown={onFieldKeyDown}\n                onKeyUp={onFieldKeyUp}\n                {...mobileDropdownInputProps}\n                {...mobileDropdownSelectMultipleFieldInputProps}\n              />\n            </SelectMultipleField>\n          </View>\n          {dropdownInlineUserAssistance}\n        </FormFieldContext.Provider>\n      }\n      footer={<MobileDropdownFooter {...mobileDropdownFooterProps} />}\n      id={dropdownId}\n      isOpen={isOpen}>\n      <DropdownList hasTopGap={!addToListContent} hasBottomGap={true} isLoading={data === null}>\n        {dropdownListContent}\n        {addToListContent}\n      </DropdownList>\n    </SelectMobileDropdown>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentProps } from 'preact';\nimport { Ref, useCallback, useEffect, useId, useMemo, useRef, useState } from 'preact/hooks';\nimport { isBeforeDataFetch, isPhone, useSelectCommon } from '../PRIVATE_SelectCommon';\nimport { isControlOrFunctionKey, KEYS } from '../utils/PRIVATE_keyboardUtils';\nimport { DataState, SelectionDetail } from '../UNSAFE_Collection';\nimport { useUser } from '../hooks/UNSAFE_useUser';\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { mergeProps } from '../utils/UNSAFE_mergeProps';\nimport { merge } from '../utils/UNSAFE_stringUtils';\nimport { Handle } from '../utils/UNSAFE_typeUtils';\nimport { ValueUpdateDetail } from '../utils/UNSAFE_valueUpdateDetail';\nimport { SelectMultiple } from './SelectMultiple';\nimport { SelectedValuesCount } from './SelectedValuesCount';\nimport { TextTagList } from './TextTagList';\nimport { useSelectedOnlyData } from './useSelectedOnlyData';\nimport { isSearchTextEmptyOrUndefined } from '#PRIVATE_SelectCommon';\n\ntype TextTagListHandle = Handle<typeof TextTagList, 'ref'>;\ntype PickedPropsFromSelectMultiple = Pick<\n  ComponentProps<typeof SelectMultiple>,\n  | 'addToList'\n  | 'aria-describedby'\n  | 'isDisabled'\n  | 'isReadonly'\n  | 'onAddToListAction'\n  | 'onFilter'\n  | 'onLoadRange'\n>;\ntype RenamedPropsFromSelectMultiple = Omit<PickedPropsFromSelectMultiple, 'aria-describedby'> & {\n  ariaDescribedBy: PickedPropsFromSelectMultiple['aria-describedby'];\n};\nexport type UseSelectMultipleProps<K, D> = RenamedPropsFromSelectMultiple & {\n  data?: DataState<K, D> | null;\n  inputRef: Ref<HTMLElement>;\n  isFocused?: boolean;\n  onCommit: (detail: ValueUpdateDetail<Set<K>>) => void;\n  valueItems?: Item<K, D>[];\n};\n\ntype SelectedValuesCountToggleType = ComponentProps<typeof SelectedValuesCount>['onToggle'];\ntype SelectedValuesCountToggleDetailType = Parameters<\n  Exclude<SelectedValuesCountToggleType, undefined>\n>[0];\n\n/**\n * Hook that manages SelectMultiple state and behavior.  This hook creates state variables and\n * event listeners, returning properties to apply to components internally rendered by\n * SelectMultiple, as well as state information.\n *\n * @param ariaDescribedBy Specifies the ID of elements that describe the input.\n * @param data Specifies data for the dropdown list.\n * @param inputRef Ref to the input element (this can be an input in desktop and a div in mobile).\n * @param isDisabled Specifies whether the component is disabled.\n * @param isFocused Specifies whether the component has focus.\n * @param isReadonly Specifies whether the component is readonly.\n * @param onCommit Callback invoked when the selected values are committed.\n * @param onFilter Callback function to trigger loading data for the dropdown list,\n * which may or may not be filtered by user entered text.\n * @param onLoadRange Callback function to handle when the viewport of the dropdown list has\n * changed, including the case where the user scrolls to the end of the list and there are more\n * items to load.  The function should set a new DataState on the component for the specified\n * range.\n * @param valueItems Specifies the keys, data, and optional metadata for the selected values.\n *\n * @returns Properties to apply to internal components that SelectMultiple renders, and component\n * state.\n */\nexport function useSelectMultiple<K, D>({\n  addToList,\n  ariaDescribedBy,\n  data: propData,\n  inputRef,\n  isDisabled,\n  isFocused: propIsFocused,\n  isReadonly,\n  onAddToListAction,\n  onCommit,\n  onFilter,\n  onLoadRange: propOnLoadRange,\n  valueItems\n}: UseSelectMultipleProps<K, D>) {\n  const [isDropdownSelectedOnlyView, setDropdownSelectedOnlyView] = useState(false);\n\n  const selectedValuesCount = valueItems?.length;\n  const hasSelectedValuesCount =\n    (selectedValuesCount !== undefined && selectedValuesCount > 0) || isDropdownSelectedOnlyView;\n\n  // show only the selected values in the dropdown if isDropdownSelectedOnlyView is true,\n  // otherwise show the full data set\n  // TODO: We may need to revisit this for hierarchical data because the selected valueItems\n  // won't have any information about ancestor group nodes, and we should probably show selected\n  // items in context within the hierarchy.  Also, the order of the items in the selected-only\n  // view right now follows the order in which they were selected, not the order in which they\n  // would appear in the full data set.  This may be more of a problem for hierarchical data\n  // if items have to appear within the correct group ancestors.  We may need to move\n  // construction of the selected-only DataState out of the component to the consuming code,\n  // and take a callback that we can call as a notification that the app should provide this\n  // special DataState to us (kind of like onLoadRange).  Note that we may also need an\n  // enhancement on the DataProvider API to be able to specify a filterCriterion to filter by\n  // the selected keys through a fetchFirst call, because a regular fetchByKeys call would\n  // still return results in the order in which the keys were specified and would not return\n  // data for the ancestor group nodes.\n  const selectedOnlyDataProps = useSelectedOnlyData<K, D>({\n    isDropdownSelectedOnlyView,\n    valueItems\n  });\n  const data = isDropdownSelectedOnlyView ? selectedOnlyDataProps.data : propData;\n  const onLoadRange = isDropdownSelectedOnlyView\n    ? selectedOnlyDataProps.onLoadRange\n    : propOnLoadRange;\n  const handleOnFilter = useCallback<NonNullable<typeof onFilter>>(\n    (args) => {\n      // when the user is filtering, we need to toggle out from selected only view\n      // we consider it filtering only if there is a non-empty filter text is present\n      if (!isSearchTextEmptyOrUndefined(args.searchText)) {\n        setDropdownSelectedOnlyView(false);\n      }\n      onFilter?.(args);\n    },\n    [onFilter]\n  ); // setDropdownSelectedOnlyView is stable so not needed in dep array\n\n  const {\n    currentRow,\n    dropdownRef,\n    handleDropdownArrowClick,\n    handleDropdownAutoDismiss: baseHandleDropdownAutoDismiss,\n    handleDropdownPosition,\n    handleInput,\n    handleMainFieldKeyDown: baseHandleMainFieldKeyDown,\n    handleMainFieldKeyUp,\n    handleUpDownArrowKeys,\n    isDropdownAbove,\n    isDropdownOpen,\n    isFocused,\n    isUserFiltering,\n    mainFieldRef,\n    onCurrentKeyChange,\n    onMouseDown,\n    searchText,\n    setCurrentRow,\n    setDropdownOpen,\n    setUserInput,\n    stopFiltering,\n    userInput\n  } = useSelectCommon<K, D>({\n    data,\n    inputRef,\n    isFocused: propIsFocused,\n    onFilter: handleOnFilter\n  });\n\n  const [prevIsDropdownOpen, setPrevIsDropdownOpen] = useState(isDropdownOpen);\n  const [prevValueItems, setPrevValueItems] = useState(valueItems);\n\n  const [selectedKeys, setSelectedKeys] = useState<Set<K> | undefined>(\n    createKeysFromValueItems<K, D>(valueItems)\n  );\n\n  const isDataFetched = data !== undefined && data !== null && !isBeforeDataFetch<K, D>(data);\n  const isEmptyResults = isDataFetched && data?.totalSize === 0;\n  const isAddToListShown =\n    addToList === 'on' &&\n    isUserFiltering &&\n    searchText != null &&\n    searchText.length > 0 &&\n    isEmptyResults;\n\n  const handleAddToListAction = useCallback(() => {\n    setDropdownOpen(false);\n    stopFiltering();\n    onAddToListAction?.({ searchText: isUserFiltering ? searchText : undefined });\n  }, [isUserFiltering, onAddToListAction, searchText, setDropdownOpen, stopFiltering]);\n\n  const textTagListRef = useRef<TextTagListHandle>(null);\n  const { direction } = useUser();\n  const selectedValuesDescriptionId = useId();\n  const combinedAriaDescribedBy = merge([\n    // when focused, we will show the text tag list.\n    // so, we need the screen readers to read them when focusing on the input.\n    isFocused && selectedValuesDescriptionId,\n    ariaDescribedBy\n  ]);\n\n  const removeDropdown = useCallback(() => {\n    dropdownRef.current?.parentElement?.removeChild(dropdownRef.current);\n  }, [dropdownRef]);\n\n  const shouldSelectCurrentRow = useCallback(\n    (currentRowArg: typeof currentRow): currentRowArg is Required<typeof currentRow> => {\n      // current row needs to be selected if all the conditions below are satisfied\n      // 1. user is filtering\n      // 2. dropdown is open\n      // 3. user has entered a search text\n      // 4. current data state has data\n      // 5. currentRow exists\n\n      return (\n        isUserFiltering &&\n        isDropdownOpen &&\n        !isSearchTextEmptyOrUndefined(userInput) &&\n        (data?.data.length ?? 0) > 0 &&\n        currentRowArg.rowKey !== undefined\n      );\n    },\n    [data, isDropdownOpen, isUserFiltering, userInput]\n  );\n\n  const selectRow = useCallback(\n    (key: K) => {\n      // If the key is already selected, do nothing\n      if (selectedKeys?.has(key)) return;\n      // If it is not already selected, add it to the selection\n      const newValue =\n        selectedKeys === undefined ? new Set([key]) : new Set([...selectedKeys.values(), key]);\n      onCommit({ previousValue: selectedKeys, value: newValue });\n      setSelectedKeys(newValue);\n    },\n    [onCommit, selectedKeys, setSelectedKeys]\n  );\n\n  const myHandleDropdownAutoDismiss = useCallback(\n    (event?: Event) => {\n      if (isDropdownOpen) {\n        if (event?.type === 'keydown') {\n          const keyboardEvent = event as KeyboardEvent;\n          switch (keyboardEvent.code) {\n            case KEYS.TAB:\n              // Put focus on an element in the main field, but don't kill the event, so that\n              // the browser can naturally transfer focus to the next focusable item relative\n              // to the element in the main field.\n              if (keyboardEvent.shiftKey || !hasSelectedValuesCount) {\n                inputRef.current?.focus();\n              } else {\n                chipRef.current?.focus();\n              }\n\n              // Remove the dropdown immediately, without waiting for a rerender based on changing\n              // state, so that the open dropdown cannot get focus when the browser handles the\n              // Tab key.\n              removeDropdown();\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    },\n    [hasSelectedValuesCount, inputRef, isDropdownOpen, removeDropdown]\n  );\n\n  const myHandleMainFieldKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      // const target = event.target as HTMLElement;\n      // ignore control key and function key\n      if (isControlOrFunctionKey(event)) {\n        return;\n      }\n\n      switch (event.code) {\n        case KEYS.TAB:\n          if (isDropdownOpen && (event.shiftKey || (!hasSelectedValuesCount && !event.shiftKey))) {\n            // Remove the dropdown immediately, without waiting for a rerender based on changing\n            // state, so that the open dropdown cannot get focus when the browser handles the\n            // Tab key.\n            removeDropdown();\n\n            setDropdownOpen(false);\n          }\n\n          // JET-53183 - core pack compat: stop propagation of handled events\n          // we don't want a parent collection component to jump focus to the next cell and skip\n          // over the selected values count chip\n          if (hasSelectedValuesCount && !event.shiftKey) {\n            event.stopPropagation();\n          }\n          break;\n\n        case KEYS.LEFT:\n          // Move focus to the text tag if we are in LTR and the cursor is at the\n          // beginning of the text (and there is no selection)\n          if (\n            direction === 'ltr' &&\n            inputRef.current instanceof HTMLInputElement &&\n            inputRef.current?.selectionStart === 0 &&\n            inputRef.current?.selectionEnd === 0\n          ) {\n            textTagListRef.current?.focus();\n          }\n          break;\n\n        case KEYS.RIGHT:\n          // Move focus to the text tag if we are in RTL and the cursor is at the\n          // beginning of the text (and there is no selection)\n          if (\n            direction === 'rtl' &&\n            inputRef.current instanceof HTMLInputElement &&\n            inputRef.current?.selectionStart === 0 &&\n            inputRef.current?.selectionEnd === 0\n          ) {\n            textTagListRef.current?.focus();\n          }\n          break;\n\n        case KEYS.ENTER:\n        case KEYS.NUMPAD_ENTER:\n          // if this is on a mobile device (only phone and not a tablet device), do not do anything\n          if (isPhone()) {\n            return;\n          }\n\n          // if add to list is shown, there are no results, so trigger the add to list link\n          if (isAddToListShown) {\n            handleAddToListAction();\n            return;\n          }\n\n          // if there is a currentRow in the dropdown (meaning a highlighted item that would\n          // have keyboard focus if the dropdown list had physical focus, which may be different\n          // from the currently selected item), select it and commit it;\n          if (shouldSelectCurrentRow(currentRow)) {\n            setDropdownOpen(false);\n            // after selecting a value, the user is no longer actively filtering, so update related\n            // state accordingly so that the newly selected value appears in the field\n            stopFiltering();\n            selectRow(currentRow.rowKey);\n          }\n          break;\n\n        default:\n          break;\n      }\n    },\n    [\n      currentRow,\n      direction,\n      handleAddToListAction,\n      hasSelectedValuesCount,\n      inputRef,\n      isAddToListShown,\n      isDropdownOpen,\n      removeDropdown,\n      selectRow,\n      setDropdownOpen,\n      shouldSelectCurrentRow,\n      stopFiltering\n    ]\n  );\n\n  // when the array of valueItems changes, pull out the new set of selectedKeys\n  // (don't need to set selectedKeys here on first render because the state was initialized with\n  // the correct value)\n  if (prevValueItems !== valueItems) {\n    const keys = createKeysFromValueItems<K, D>(valueItems);\n    setSelectedKeys(keys);\n  }\n\n  const chipRef = useRef<HTMLElement | null>(null);\n  useEffect(() => {\n    chipRef.current =\n      hasSelectedValuesCount && mainFieldRef.current?.querySelector\n        ? mainFieldRef.current.querySelector('[role=\"switch\"]')\n        : null;\n  }, [hasSelectedValuesCount, isDisabled, isReadonly, mainFieldRef]);\n\n  const handleSelectedValuesCountKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      switch (event.code) {\n        case KEYS.TAB:\n          if (isDropdownOpen && !event.shiftKey) {\n            // Remove the dropdown immediately, without waiting for a rerender based on changing\n            // state, so that the open dropdown cannot get focus when the browser handles the\n            // Tab key.\n            removeDropdown();\n\n            setDropdownOpen(false);\n          }\n\n          // JET-53183 - core pack compat: stop propagation of handled events\n          // we don't want a parent collection component to jump focus to the next cell and skip\n          // over the input\n          if (event.shiftKey) {\n            event.stopPropagation();\n          }\n          break;\n\n        case KEYS.UP:\n        case KEYS.DOWN:\n          // prevent the page from scrolling\n          event.preventDefault();\n          break;\n\n        case KEYS.ESC:\n          if (isDropdownOpen) {\n            setDropdownOpen(false);\n\n            event.preventDefault();\n\n            // JET-53183 - core pack compat: stop propagation of handled events\n            // we don't want a parent collection component to stop editing the row when we close\n            // the dropdown\n            event.stopPropagation();\n          }\n          break;\n\n        case KEYS.ENTER:\n          // JET-53183 - core pack compat: stop propagation of handled events\n          // we don't want a parent collection component to move focus to the next row when\n          // we toggle between the full and selected only list in the dropdown\n          event.stopPropagation();\n          break;\n\n        default:\n          break;\n      }\n    },\n    [isDropdownOpen, removeDropdown, setDropdownOpen]\n  );\n\n  const handleSelectedValuesCountKeyUp = useCallback(\n    (event: KeyboardEvent) => {\n      switch (event.code) {\n        case KEYS.UP:\n        case KEYS.DOWN:\n          handleUpDownArrowKeys(event);\n          break;\n\n        default:\n          break;\n      }\n    },\n    [handleUpDownArrowKeys]\n  );\n\n  const handleSelectedValuesCountMouseDown = useCallback(\n    (event: MouseEvent) => {\n      // call preventDefault so that the dropdown doesn't open showing the full list on mousedown\n      // on the chip before switching to show only the selected values on mouseup when the click\n      // is handled\n      event.preventDefault();\n      // explicitly focus the input because it won't happen naturally due to preventDefault()\n      inputRef.current?.focus();\n    },\n    [inputRef]\n  );\n\n  const handleSelectedValuesCountToggle = useCallback(\n    (detail: SelectedValuesCountToggleDetailType) => {\n      if (!isDropdownOpen) {\n        setDropdownOpen(true);\n      }\n\n      const value = detail.value ?? false;\n      if (value !== isDropdownSelectedOnlyView) {\n        setDropdownSelectedOnlyView(value);\n\n        // if the selected only toggle is enabled, we need to stop user filtering\n        if (value) {\n          stopFiltering();\n        }\n      }\n    },\n    [isDropdownOpen, isDropdownSelectedOnlyView, setDropdownOpen, stopFiltering]\n  );\n\n  // when the dropdown closes, automatically turn off isDropdownSelectedOnlyView\n  if (!isDropdownOpen && isDropdownSelectedOnlyView) {\n    setDropdownSelectedOnlyView(false);\n  }\n\n  const onSelectionChange = useCallback(\n    (detail: SelectionDetail<K>) => {\n      const newKeys = new Set(detail.value.keys?.values());\n      // update the selectedKeys so that the selection visual state of the collection\n      // updates immediately while waiting for new valueItems to be set\n      setSelectedKeys(newKeys);\n\n      // clear the filter text typed by the user, but do NOT clear the actual filter criterion\n      // or highlighting in the list\n      setUserInput('');\n\n      // call the onCommit callback so that the consuming code can update the valueItems\n      onCommit?.({ value: newKeys, previousValue: selectedKeys });\n    },\n    [onCommit, selectedKeys, setSelectedKeys, setUserInput]\n  );\n\n  const onTextTagListExitNavigation = useCallback(() => {\n    // Focus the input on the next tick. Doing it in the same event cycle will\n    // trigger the key press on the input element which makes the caret move by\n    // one character.\n    setTimeout(() => inputRef.current?.focus(), 0);\n  }, [inputRef]);\n\n  const onTextTagListRemove = useCallback(\n    (keys: K[]) => {\n      const previousValue = selectedKeys;\n      const value = new Set(selectedKeys);\n      keys.forEach((key) => value.delete(key));\n      onCommit?.({ previousValue, value });\n    },\n    [onCommit, selectedKeys]\n  );\n\n  const dropdownEventHandlers = useMemo(() => {\n    return mergeProps(\n      {\n        onAutoDismiss: baseHandleDropdownAutoDismiss,\n        onPosition: handleDropdownPosition\n      },\n      { onAutoDismiss: myHandleDropdownAutoDismiss }\n    );\n  }, [baseHandleDropdownAutoDismiss, handleDropdownPosition, myHandleDropdownAutoDismiss]);\n\n  const inputEventHandlers = useMemo(() => {\n    return mergeProps(\n      {\n        onInput: handleInput,\n        onKeyDown: baseHandleMainFieldKeyDown,\n        onKeyUp: handleMainFieldKeyUp\n      },\n      { onKeyDown: myHandleMainFieldKeyDown }\n    );\n  }, [baseHandleMainFieldKeyDown, handleInput, handleMainFieldKeyUp, myHandleMainFieldKeyDown]);\n\n  const textTagListProps = useMemo(\n    () => ({\n      textTagListRef,\n      onExitNavigation: onTextTagListExitNavigation,\n      onRemove: onTextTagListRemove\n    }),\n    [onTextTagListExitNavigation, onTextTagListRemove]\n  );\n\n  // clear the current item when the dropdown opens\n  if (isDropdownOpen && !prevIsDropdownOpen) {\n    setCurrentRow({ rowKey: undefined });\n  }\n\n  // We need to highlight the first result whenever the data changes\n  const [prevData, setPrevData] = useState(data);\n  if (prevData !== data) {\n    // when filtering, set the first result of the filtered data set to be the current item\n    // (check the data offset so we don't try to highlight again if the user scrolls through\n    // the list and more data is fetched)\n    const firstResultKey = data?.data[0]?.metadata.key;\n    if (isDropdownOpen && isUserFiltering && firstResultKey != null && data?.offset === 0) {\n      // if there are results and search text, highlight the first row, otherwise clear\n      // an existing highlight\n      setCurrentRow({\n        rowKey: isSearchTextEmptyOrUndefined(searchText) ? undefined : firstResultKey\n      });\n    }\n\n    setPrevData(data);\n  }\n\n  if (prevIsDropdownOpen !== isDropdownOpen) {\n    setPrevIsDropdownOpen(isDropdownOpen);\n  }\n  if (prevValueItems !== valueItems) {\n    setPrevValueItems(valueItems);\n  }\n\n  return {\n    addToListEventHandlers: {\n      onAction: handleAddToListAction\n    },\n    ariaProps: {\n      ariaDescribedBy: combinedAriaDescribedBy\n    },\n    collectionProps: {\n      currentKey: currentRow.rowKey,\n      data,\n      onCurrentKeyChange,\n      onSelectionChange,\n      onLoadRange,\n      selectedKeys\n    },\n    data,\n    dropdownArrowEventHandlers: {\n      onClick: handleDropdownArrowClick\n    },\n    dropdownEventHandlers,\n    dropdownRef,\n    hasSelectedValuesCount,\n    inputEventHandlers,\n    inputRef,\n    isAddToListShown,\n    isDataFetched,\n    isDropdownAbove,\n    isDropdownOpen,\n    isDropdownSelectedOnlyView,\n    isEmptyResults,\n    isFocused,\n    isUserFiltering,\n    mainFieldRef,\n    mouseProps: isDisabled || isReadonly ? {} : { onMouseDown },\n    searchText,\n    selectedValuesCountProps: {\n      onKeyDown: handleSelectedValuesCountKeyDown,\n      onKeyUp: handleSelectedValuesCountKeyUp,\n      onMouseDown: handleSelectedValuesCountMouseDown,\n      onToggle: handleSelectedValuesCountToggle\n    },\n    selectedValuesDescriptionId,\n    setDropdownOpen,\n    setUserInput,\n    stopFiltering,\n    textTagListProps,\n    userInput\n  };\n}\n\nfunction createKeysFromValueItems<K, D>(valueItems?: Item<K, D>[]) {\n  const keys = valueItems?.reduce((accumKeys, currentItem) => {\n    accumKeys.add(currentItem.key);\n    return accumKeys;\n  }, new Set<K>());\n  return keys;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { SelectMobileFieldInput } from '#PRIVATE_SelectCommon';\nimport type { TestIdProps } from '#hooks/UNSAFE_useTestId';\nimport { ComponentChildren, ComponentProps, Fragment, Ref } from 'preact';\nimport { forwardRef } from 'preact/compat';\nimport { isBeforeDataFetch, isPhone, isTablet } from '../PRIVATE_SelectCommon';\nimport { DataState } from '../UNSAFE_Collection';\nimport { Label } from '../UNSAFE_Label';\nimport { ReadonlyTextField, ReadonlyTextFieldInput, TextFieldInput } from '../UNSAFE_TextField';\nimport {\n  CompactUserAssistance,\n  InlineUserAssistance,\n  UserAssistanceDensityType\n} from '../UNSAFE_UserAssistance';\nimport { VirtualizedListView } from '../UNSAFE_VirtualizedListView';\nimport { FocusableHandle, useFocusableTextField } from '../hooks/UNSAFE_useFocusableTextField';\nimport { useFormContext } from '../hooks/UNSAFE_useFormContext';\nimport { FormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { useLoadingIndicatorTimer } from '../hooks/UNSAFE_useLoadingIndicatorTimer';\nimport { useTextField } from '../hooks/UNSAFE_useTextField';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { ItemTextType } from '../utils/UNSAFE_selectUtils';\nimport { Size } from '../utils/UNSAFE_size';\nimport { LayoutColumnSpan } from '../utils/UNSAFE_styles/Layout';\nimport { ValueUpdateDetail } from '../utils/UNSAFE_valueUpdateDetail';\nimport { ItemRendererProps } from './SelectMultiple.types';\nimport { SelectMultipleDesktopDropdown } from './SelectMultipleDesktopDropdown';\nimport { SelectMultipleField } from './SelectMultipleField';\nimport { SelectMultipleFieldInput } from './SelectMultipleFieldInput';\nimport { SelectMultipleMobileDropdown } from './SelectMultipleMobileDropdown';\nimport { useDisplayValues } from './useDisplayValues';\nimport { useSelectMultiple } from './useSelectMultiple';\n\ntype TextFieldInputProps = ComponentProps<typeof TextFieldInput>;\ntype InlineUserAssistanceProps = ComponentProps<typeof InlineUserAssistance>;\ntype SelectMultipleFieldInputProps = ComponentProps<typeof SelectMultipleFieldInput>;\n\ntype Props<K extends string | number, D extends Record<string, any>> = TestIdProps & {\n  /**\n   * Specifies whether the add to list link is shown in the dropdown when the user filters\n   * and there are no results.\n   * It is up to the application to show its own UI when the link is triggered.\n   */\n  addToList?: 'on' | 'off';\n  /**\n   * The ID of an element (or space separated IDs of multiple elements) that\n   * describes the input.\n   */\n  'aria-describedby'?: TextFieldInputProps['aria-describedby'];\n  /**\n   * Text to provide guidance to help the user understand what data to enter or select.\n   */\n  assistiveText?: InlineUserAssistanceProps['assistiveText'];\n  /**\n   * Specifies how many columns to span in a FormLayout with direction === 'row'\n   */\n  columnSpan?: LayoutColumnSpan;\n  /**\n   * Specifies data for the dropdown list.\n   *\n   * Note that the <code>itemText</code> property allows for customizing the rendering\n   * of each data item.\n   */\n  data?: DataState<K, D> | null;\n  /**\n   * Help source URL associated with the component.\n   */\n  helpSourceLink?: InlineUserAssistanceProps['helpSourceLink'];\n  /**\n   * Custom text to be rendered for the <code>helpSourceLink</code>.\n   */\n  helpSourceText?: InlineUserAssistanceProps['helpSourceText'];\n  /**\n   * Specifies whether the component is disabled.\n   */\n  isDisabled?: boolean;\n  /**\n   * Specifies whether the component is waiting for <code>valueItems</code> to load.\n   * While loading, SelectMultiple will show the progressive loading indicator in the text field.\n   */\n  isLoading?: boolean;\n  /**\n   * Specifies whether the component is readonly.\n   */\n  isReadonly?: boolean;\n  /**\n   * Specifies for accessibility purposes whether a value is required.\n   *\n   * Setting this property to <code>false</code> means that a value is not required to be\n   * selected by the user.  Setting this property to <code>true</code> means that a value\n   * is required to be selected by the user.\n   */\n  isRequired?: TextFieldInputProps['isRequired'];\n  /**\n   * Specifies whether to show an indicator on screen that a value is required, for example\n   * before the user has selected a value.\n   */\n  isRequiredShown?: InlineUserAssistanceProps['isRequiredShown'];\n  /**\n   * Render function for an item in the default list in the dropdown.\n   */\n  itemRenderer?: (itemRendererProps: ItemRendererProps<K, D>) => ComponentChildren;\n  /**\n   * Specifies how to get the text string to render for a data item.\n   * This property can be set to either:\n   * <ul>\n   * <li>a string that specifies the name of a top level data attribute to render as text, or</li>\n   * <li>a callback function that takes a properties object and returns the text string to\n   * display.</li>\n   * </ul>\n   *\n   * This text will be rendered for the selected <code>valueItems</code> of the component.\n   * It will also be rendered for each item in the dropdown.  When rendered for the\n   * dropdown items, default matching search term highlighting will still be applied.\n   */\n  itemText: ItemTextType<K, D>;\n  /**\n   * Specifies the label associated with the field.\n   */\n  label: string;\n  /**\n   * Specifies where the label is positioned relative to the field.\n   */\n  labelEdge?: 'inside' | 'start' | 'top' | 'none';\n  /**\n   * Specifies the width of the label when <code>labelEdge</code> is <code>\"start\"</code>\n   */\n  labelStartWidth?: Size;\n  /**\n   * Messages to show on screen that are associated with the component.\n   */\n  messages?: InlineUserAssistanceProps['messages'];\n  /**\n   * A short hint to display before the user selects or enters a value.\n   */\n  placeholder?: TextFieldInputProps['placeholder'];\n  /**\n   * Specifies how to align text within the field.\n   */\n  textAlign?: TextFieldInputProps['textAlign'];\n  /**\n   * Specifies the density of the user assistance presentation.  It can be set to:\n   * <ul>\n   * <li><code>'efficient'</code>: Show inline and reserve space to prevent layout reflow when user\n   * assistance text is displayed.</li>\n   * <li><code>'reflow'</code>: Show inline.  Layout will reflow when text is displayed.</li>\n   * <li><code>'compact'</code>: Messages, help, hints, and required will not be shown inline; they will show in a mode that keeps the screen more compact, like a popup for the messages, and a required icon to indicate Required. </li>\n   * </ul>\n   */\n  userAssistanceDensity?: UserAssistanceDensityType;\n  /**\n   * Specifies the keys, data, and optional metadata for the selected values.\n   */\n  valueItems?: Item<K, D>[];\n  /**\n   * The style variant of the component.\n   */\n  variant?: TextFieldInputProps['variant'];\n  /**\n   * The type of virtual keyboard to display for entering a value on mobile browsers.\n   * This property has no effect on desktop browsers.\n   */\n  virtualKeyboard?: SelectMultipleFieldInputProps['virtualKeyboard'];\n  /**\n   * Callback function called when the user triggers the add to list link shown in the dropdown.\n   */\n  onAddToListAction?: ({ searchText }: { searchText?: string }) => void;\n  /**\n   * Callback invoked when the user commits the selected values.\n   *\n   * The function should set a new array as the <code>valueItems</code> property.\n   */\n  onCommit: (detail: ValueUpdateDetail<Set<K>>) => void;\n  /**\n   * Callback function to trigger loading data for the dropdown list, which may or may not be\n   * filtered by user entered search text.\n   *\n   * The function should set a new <code>DataState</code> as the <code>data</code> property.\n   */\n  onFilter?: ({ searchText }: { searchText?: string }) => void;\n  /**\n   * Callback function to handle when the viewport of the dropdown list has changed, for example\n   * by scrolling, including the case where the user scrolls to the end of the list and there are\n   * more items to load.\n   *\n   * The function should set a new <code>DataState</code> for the specified range as the\n   * <code>data</code> property.\n   */\n  onLoadRange?: ComponentProps<typeof VirtualizedListView>['onLoadRange'];\n};\n\n/**\n * A SelectMultiple is a dropdown list that supports multiple selection and search filtering.\n */\nexport const SelectMultiple = forwardRef(\n  <K extends string | number, D extends Record<string, any>>(\n    {\n      addToList = 'off',\n      'aria-describedby': propAriaDescribedBy,\n      assistiveText,\n      columnSpan,\n      data: propData,\n      helpSourceLink,\n      helpSourceText,\n      isDisabled: propIsDisabled,\n      isLoading: propIsLoading,\n      isReadonly: propIsReadonly,\n      isRequired,\n      isRequiredShown,\n      itemRenderer,\n      itemText,\n      label,\n      labelEdge: propLabelEdge,\n      labelStartWidth: propLabelStartWidth,\n      messages,\n      onAddToListAction,\n      onCommit,\n      onFilter,\n      onLoadRange: propOnLoadRange,\n      placeholder,\n      testId,\n      textAlign: propTextAlign,\n      userAssistanceDensity: propUserAssistanceDensity,\n      valueItems,\n      variant = 'default',\n      virtualKeyboard\n    }: Props<K, D>,\n    ref?: Ref<FocusableHandle>\n  ) => {\n    const {\n      isDisabled: isFormDisabled,\n      isReadonly: isFormReadonly,\n      labelEdge: formLabelEdge,\n      labelStartWidth: formLabelStartWidth,\n      textAlign: formTextAlign,\n      userAssistanceDensity: formUserAssistanceDensity\n    } = useFormContext();\n    // default to FormContext values if component properties are not specified\n    const isDisabled = propIsDisabled ?? isFormDisabled;\n    const isReadonly = propIsReadonly ?? isFormReadonly;\n    const labelEdge = propLabelEdge ?? formLabelEdge;\n    const labelStartWidth = propLabelStartWidth ?? formLabelStartWidth;\n    const textAlign = propTextAlign ?? formTextAlign;\n    const userAssistanceDensity = propUserAssistanceDensity ?? formUserAssistanceDensity;\n\n    const {\n      enabledElementRef,\n      focusProps,\n      isFocused: origIsFocused,\n      readonlyElementRef\n    } = useFocusableTextField<HTMLElement, HTMLDivElement>({ isDisabled, isReadonly, ref });\n\n    const {\n      addToListEventHandlers,\n      ariaProps,\n      collectionProps,\n      data,\n      dropdownArrowEventHandlers,\n      dropdownEventHandlers,\n      dropdownRef,\n      hasSelectedValuesCount,\n      inputEventHandlers,\n      isAddToListShown,\n      isDataFetched,\n      isDropdownAbove,\n      isDropdownOpen,\n      isDropdownSelectedOnlyView,\n      isEmptyResults,\n      isFocused,\n      isUserFiltering,\n      mainFieldRef,\n      mouseProps,\n      searchText,\n      selectedValuesCountProps,\n      selectedValuesDescriptionId,\n      setDropdownOpen,\n      setUserInput,\n      stopFiltering,\n      textTagListProps,\n      userInput\n    } = useSelectMultiple<K, D>({\n      addToList,\n      ariaDescribedBy: propAriaDescribedBy,\n      data: propData,\n      inputRef: enabledElementRef,\n      isDisabled,\n      isFocused: origIsFocused,\n      isReadonly,\n      onAddToListAction,\n      onCommit,\n      onFilter,\n      onLoadRange: propOnLoadRange,\n      valueItems\n    });\n\n    // The incoming propIsLoading tells us that we are in a loading state, but we don't want to\n    // show the loading indicator until after a delay, because showing it immediately could result\n    // in unwanted flashing.  The isLoading var below will be set to true by useLoadingIndicatorTimer\n    // after the delay, when the timer expires, at which point we should show the loading indicator.\n    // If propIsLoading is set to false before the timer expires, then the timer will be cancelled\n    // and no loading indicator will be shown.\n    // (ListView detects its loading state by checking data === null.  While it would be nice for\n    // us to be consistent and check valueItems === null, we need to use a separate isLoading prop.\n    // If valueItems === null triggers our loading state, then the selections in the dropdown\n    // are cleared for that period of time, which is undesirable.)\n    const isLoading = useLoadingIndicatorTimer(propIsLoading ?? false);\n\n    const {\n      baseId,\n      formFieldContext,\n      inputProps,\n      labelProps,\n      textFieldProps,\n      userAssistanceProps\n    } = useTextField({\n      ariaDescribedBy: ariaProps.ariaDescribedBy,\n      helpSourceLink,\n      helpSourceText,\n      isDisabled,\n      isFocused,\n      isLoading,\n      isReadonly,\n      isRequiredShown,\n      labelEdge,\n      messages,\n      styleVariant: variant,\n      userAssistanceDensity,\n      value: valueItems !== undefined && valueItems.length > 0 ? true : undefined\n    });\n\n    // JET-54256 - inside label animates up on initial display with selected value\n    // If we're waiting for the selected values to load, the component should look like it\n    // has a value in the meantime.\n    // Use the original propIsLoading instead of isLoading because we don't want to delay\n    // the inside label position by a timer like we do the progressive loading indicator.\n    formFieldContext.hasValue = propIsLoading || formFieldContext.hasValue;\n\n    const dropdownId = `${baseId}-dropdown`;\n\n    const { displayValue, textTags } = useDisplayValues(itemText, valueItems);\n\n    // Do not set a forId in phone as we will be using aria-labelledby instead.\n    // This is because we will using a div and not input when rendering in a phone.\n    const labelComp =\n      labelEdge !== 'none' ? (\n        <Label {...labelProps} {...(isPhone() ? { forId: undefined } : {})}>\n          {label}\n        </Label>\n      ) : undefined;\n\n    const fieldLabelProps = {\n      label: labelEdge !== 'none' ? labelComp : undefined,\n      labelEdge: labelEdge !== 'none' ? labelEdge : undefined,\n      labelStartWidth: labelEdge !== 'none' ? labelStartWidth : undefined\n    };\n\n    const ariaLabel = labelEdge === 'none' ? label : undefined;\n    const isInlineDensity =\n      userAssistanceDensity === 'efficient' || userAssistanceDensity === 'reflow';\n\n    const inlineUserAssistance = isInlineDensity ? (\n      isDisabled || isReadonly ? (\n        // save space for user assistance if density is 'efficient', even though we don't\n        // render user assistance for disabled or readonly fields\n        userAssistanceDensity !== 'efficient' ? undefined : (\n          <InlineUserAssistance\n            userAssistanceDensity={userAssistanceDensity}\n            {...userAssistanceProps}\n          />\n        )\n      ) : (\n        <InlineUserAssistance\n          assistiveText={assistiveText}\n          fieldLabel={label}\n          helpSourceLink={helpSourceLink}\n          helpSourceText={helpSourceText}\n          messages={messages}\n          isRequiredShown={isRequiredShown}\n          userAssistanceDensity={userAssistanceDensity}\n          {...userAssistanceProps}\n        />\n      )\n    ) : undefined;\n\n    const compactUserAssistance =\n      userAssistanceDensity === 'compact' ? (\n        <CompactUserAssistance\n          anchorRef={mainFieldRef}\n          messages={messages}\n          assistiveText={assistiveText}\n          {...userAssistanceProps}\n        />\n      ) : undefined;\n\n    const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n    if (isReadonly) {\n      return (\n        <FormFieldContext.Provider value={formFieldContext}>\n          <ReadonlyTextField\n            role=\"presentation\"\n            columnSpan={columnSpan}\n            compactUserAssistance={compactUserAssistance}\n            inlineUserAssistance={inlineUserAssistance}\n            onBlur={focusProps.onfocusout}\n            onFocus={focusProps.onfocusin}\n            ref={mainFieldRef}\n            testId={testId}\n            {...fieldLabelProps}>\n            <ReadonlyTextFieldInput\n              aria-describedby={inputProps['aria-describedby']}\n              aria-label={ariaLabel}\n              aria-labelledby={labelProps.id}\n              as=\"div\"\n              elementRef={readonlyElementRef}\n              hasEmptyLabel={label === '' && labelEdge === 'none'}\n              hasInsideLabel={label !== undefined && labelEdge === 'inside'}\n              textAlign={textAlign}\n              value={displayValue}\n            />\n          </ReadonlyTextField>\n        </FormFieldContext.Provider>\n      );\n    }\n\n    const hasInsideLabel = labelEdge === 'inside';\n    const liveRegionText =\n      isDropdownOpen && isDataFetched\n        ? data?.totalSize === 0\n          ? translations.select_noMatchesFound()\n          : data?.totalSize === 1\n          ? translations.select_oneMatchFound()\n          : data?.sizePrecision === 'exact'\n          ? translations.select_sizeMatchesFound({ TOTAL_SIZE: `${data?.totalSize}` })\n          : translations.select_sizeOrMoreMatchesFound({ TOTAL_SIZE: `${data?.totalSize}` })\n        : '';\n\n    const shouldShowDropdown =\n      isDropdownOpen &&\n      data !== undefined &&\n      (data === null || data.totalSize > 0 || isBeforeDataFetch<K, D>(data) || isEmptyResults);\n\n    const hasEmptyLabel = label === '' && labelEdge === 'none';\n\n    // Use the mobile field if the component is being rendered in a phone\n    // and it is not disabled.\n    const isPhoneMainFieldInput = isPhone() && !isDisabled;\n    const mainFieldInput = !isPhoneMainFieldInput ? (\n      <SelectMultipleFieldInput\n        aria-controls={dropdownId}\n        aria-expanded={isDropdownOpen}\n        aria-label={ariaLabel}\n        displayValue={displayValue}\n        hasEmptyLabel={hasEmptyLabel}\n        hasInsideLabel={hasInsideLabel}\n        inputRef={enabledElementRef as Ref<HTMLInputElement>}\n        isAddToListShown={isAddToListShown}\n        isRequired={isRequired}\n        isTextTagListShown={isFocused && textTags.length !== 0}\n        isUserFiltering={isUserFiltering}\n        liveRegionText={liveRegionText}\n        placeholder={placeholder}\n        // we only want the remove icon in the main field for tablets\n        removeIcon={isTablet() ? 'always' : 'never'}\n        selectedValuesDescriptionId={selectedValuesDescriptionId}\n        textAlign={textAlign}\n        textTagListData={textTags}\n        userInput={userInput}\n        // In tablet, we would want to show the virtual keyboard\n        virtualKeyboard={isTablet() ? virtualKeyboard : undefined}\n        {...inputEventHandlers}\n        {...inputProps}\n        {...textTagListProps}\n      />\n    ) : (\n      <SelectMobileFieldInput\n        aria-controls={dropdownId}\n        aria-describedby={inputProps['aria-describedby']}\n        aria-expanded={isDropdownOpen}\n        aria-invalid={inputProps['aria-invalid']}\n        aria-label={ariaLabel}\n        aria-labelledby={labelProps.id}\n        displayValue={displayValue}\n        hasEmptyLabel={hasEmptyLabel}\n        hasInsideLabel={hasInsideLabel}\n        isRequired={isRequired}\n        onBlur={inputProps.onBlur}\n        onFocus={inputProps.onFocus}\n        placeholder={placeholder}\n        ref={enabledElementRef as Ref<HTMLDivElement>}\n        textAlign={textAlign}\n        variant={inputProps.variant}\n      />\n    );\n\n    const dropdown = !shouldShowDropdown ? null : isPhone() ? (\n      <SelectMultipleMobileDropdown\n        aria-describedby={ariaProps.ariaDescribedBy}\n        aria-label={ariaLabel}\n        assistiveText={assistiveText}\n        data={data}\n        dropdownId={dropdownId}\n        enabledElementRef={enabledElementRef}\n        helpSourceLink={helpSourceLink}\n        helpSourceText={helpSourceText}\n        isAddToListShown={isAddToListShown}\n        isDisabled={isDisabled}\n        isEmptyResults={isEmptyResults}\n        isFocused={isFocused}\n        isLoading={isLoading}\n        isOpen={shouldShowDropdown}\n        isReadonly={isReadonly}\n        isRequired={isRequired}\n        isSelectedOnlyView={isDropdownSelectedOnlyView}\n        isUserFiltering={isUserFiltering}\n        itemRenderer={itemRenderer}\n        itemText={itemText}\n        label={label}\n        liveRegionText={liveRegionText}\n        placeholder={placeholder}\n        propIsLoading={propIsLoading}\n        searchText={searchText}\n        selectedValuesDescriptionId={selectedValuesDescriptionId}\n        setDropdownOpen={setDropdownOpen}\n        setUserInput={setUserInput}\n        stopFiltering={stopFiltering}\n        textAlign={textAlign}\n        textTagListRef={textTagListProps.textTagListRef}\n        userAssistanceDensity={userAssistanceDensity}\n        userInput={userInput}\n        valueItems={valueItems}\n        virtualKeyboard={virtualKeyboard}\n        onAddToListAction={addToListEventHandlers.onAction}\n        onCommit={onCommit}\n        onFieldBlur={focusProps.onfocusout}\n        onFieldFocus={focusProps.onfocusin}\n        onFieldInput={inputEventHandlers.onInput}\n        onFieldKeyDown={inputEventHandlers.onKeyDown}\n        onFieldKeyUp={inputEventHandlers.onKeyUp}\n        onLoadRange={propOnLoadRange}\n        onSelectedValuesCountKeyDown={selectedValuesCountProps.onKeyDown}\n        onSelectedValuesCountKeyUp={selectedValuesCountProps.onKeyUp}\n        onSelectedValuesCountMouseDown={selectedValuesCountProps.onMouseDown}\n        onSelectedValuesCountToggle={selectedValuesCountProps.onToggle}\n      />\n    ) : (\n      <SelectMultipleDesktopDropdown\n        {...collectionProps}\n        {...dropdownEventHandlers}\n        assistiveText={assistiveText}\n        dropdownId={dropdownId}\n        dropdownRef={dropdownRef}\n        helpSourceLink={helpSourceLink}\n        helpSourceText={helpSourceText}\n        isAddToListShown={isAddToListShown}\n        isDisabled={isDisabled}\n        isDropdownAbove={isDropdownAbove}\n        isEmptyResults={isEmptyResults}\n        isOpen={shouldShowDropdown}\n        isReadonly={isReadonly}\n        isSelectedOnlyView={isDropdownSelectedOnlyView}\n        isUserFiltering={isUserFiltering}\n        itemRenderer={itemRenderer}\n        itemText={itemText}\n        label={label}\n        mainFieldRef={mainFieldRef}\n        onAddToListAction={addToListEventHandlers.onAction}\n        searchText={searchText}\n        userAssistanceDensity={userAssistanceDensity}\n      />\n    );\n\n    return (\n      <Fragment>\n        <FormFieldContext.Provider value={formFieldContext}>\n          <SelectMultipleField\n            columnSpan={columnSpan}\n            compactUserAssistance={compactUserAssistance}\n            fieldLabel={label}\n            hasInsideLabel={hasInsideLabel}\n            inlineUserAssistance={inlineUserAssistance}\n            isDropdownArrowShown={true}\n            isDropdownSelectedOnlyView={isDropdownSelectedOnlyView}\n            isSelectedValuesCountShown={hasSelectedValuesCount}\n            mainFieldRef={mainFieldRef}\n            onBlur={focusProps.onfocusout}\n            onFocus={focusProps.onfocusin}\n            onDropdownArrowClick={dropdownArrowEventHandlers.onClick}\n            onSelectedValuesCountKeyDown={selectedValuesCountProps.onKeyDown}\n            onSelectedValuesCountKeyUp={selectedValuesCountProps.onKeyUp}\n            onSelectedValuesCountMouseDown={selectedValuesCountProps.onMouseDown}\n            onSelectedValuesCountToggle={selectedValuesCountProps.onToggle}\n            selectedValuesCount={valueItems?.length}\n            testId={testId}\n            {...fieldLabelProps}\n            {...mouseProps}\n            {...textFieldProps}>\n            {mainFieldInput}\n          </SelectMultipleField>\n        </FormFieldContext.Provider>\n        {dropdown}\n      </Fragment>\n    );\n  }\n);\n"],"names":["SelectMultipleDesktopDropdown","assistiveText","currentKey","data","dropdownId","dropdownRef","helpSourceLink","helpSourceText","isAddToListShown","isDisabled","isDropdownAbove","isEmptyResults","isOpen","isReadonly","isSelectedOnlyView","isUserFiltering","itemRenderer","itemText","label","mainFieldRef","searchText","selectedKeys","userAssistanceDensity","onAddToListAction","onAutoDismiss","onCurrentKeyChange","onLoadRange","onPosition","onSelectionChange","translations","useTranslationBundle","dropdownInlineUserAssistance","undefined","_jsx","DropdownUserAssistance","fieldLabel","dropdownListContent","EmptyResults","DefaultList","currentItemVariant","selectionMode","addToListContent","LinkItem","isHighlighted","onAction","children","select_addToList","_jsxs","Dropdown","id","anchorRef","DropdownList","hasBottomGap","isLoading","SelectedValuesCount","ariaLabel","count","onKeyDown","onKeyUp","onMouseDown","passThroughProps","instructions","selectMultiple_showSelectedValues","accLabel","ninetyNinePlus","selectMultiple_countPlus","COUNT","chipCount","selectMultiple_valuesSelected","VALUE_COUNT","class","selectedValueCountStyles","base","jsx","Chip","SelectMultipleField","columnSpan","hasInsideLabel","isBackButtonShown","isClearButtonShown","isDropdownArrowShown","isDropdownSelectedOnlyView","isSelectedValuesCountShown","selectedValuesCount","onBackButtonClick","onClearButtonClick","onDropdownArrowClick","onSelectedValuesCountKeyDown","onSelectedValuesCountKeyUp","onSelectedValuesCountMouseDown","onSelectedValuesCountToggle","passThroughTextFieldProps","useFormFieldContext","backButton","IconButton","selectMultiple_back","variant","NavLeft","clearButton","formControl_clear","size","CancelS","dropdownArrow","DropdownArrow","onClick","endContent","Flex","align","justify","gap","isSelected","onToggle","TextField","startContent","mainContent","TextTag","removeIcon","onRemoveAction","onSelect","onRemoveIconClick","isFocused","value","spanRef","useRef","navigationTextId","useId","rootClasses","classNames","textTagStyles","selected","onRemoveActionCallback","useCallback","onSelectCallback","onRemoveIconClickCallback","event","isBackspaceOrDelete","useEffect","current","focus","scrollIntoView","block","jsxs","ref","tabIndex","preventDefault","role","Text","TabbableModeContext","Provider","isTabbable","CloseIcon","SvgClose","HiddenAccessible","selectMultiple_removeSelectedTagInstructionText","supportedInterpolations","Array","from","x","dimensionInterpolations","styleInterpolations","mergeInterpolations","TextTagList","forwardRef","props","onExitNavigation","onRemove","divRef","selectedTags","setSelectedTags","useState","direction","useUser","currentSelectedTagIndex","lastTag","at","lastTagMeta","index","length","selectTagAtIndex","key","clearSelection","previousSelectedTags","onTagRemoveIconClick","onTagRemoveAction","valuesToRemove","includes","push","onTagSelect","findIndex","tag","onTagKeyDown","code","isSelectAll","map","handleOnFocus","handleOnBlur","focusProps","useFocusWithin","onBlurWithin","useImperativeHandle","blur","scrollTo","left","scrollWidth","styles","textTagListStyles","textTagListBase","textTagListInsideLabel","style","SelectMultipleFieldInput","displayValue","isTextTagListShown","liveRegionText","selectedValuesDescriptionId","textTagListData","textTagListRef","userInput","virtualKeyboard","passThroughTextFieldInputProps","addToListAccText","select_addToListAvailable","_Fragment","Fragment","selectMultiple_selectedValues","maxWidth","flex","TextFieldInput","autoComplete","hasPrefix","spellcheck","type","isHidden","LiveRegion","MobileDropdownFooter","onApply","mobileDropdownFooterStyles","Button","display","edge","selectMultiple_apply","useDisplayValues","valueItems","separator","plural_separator","useMemo","displayValues","selectedItems","arValues","values","mapFunc","itemContext","renderItemText","mappedArray","Set","createDisplayValues","concatenatedDisplayValues","join","concatDisplayValues","textTags","item","createTextTags","useSelectedOnlyData","selectedOnlyValueItemsRef","prevIsDropdownSelectedOnlyViewRef","offset","totalSize","sizePrecision","valueItem","metadata","DEFAULT_VALUE_ITEMS","updateCache","cache","keys","forEach","has","set","keysFromValueItems","i","SelectMultipleMobileDropdown","ariaDescribedBy","enabledElementRef","isRequired","placeholder","propIsLoading","setDropdownOpen","setUserInput","stopFiltering","textAlign","onCommit","onFieldBlur","onFieldFocus","onFieldInput","onFieldKeyDown","onFieldKeyUp","collectionProps","mobileDropdownCollectionProps","footerProps","mobileDropdownFooterProps","selectMultipleFieldInputProps","mobileDropdownSelectMultipleFieldInputProps","selectMultipleFieldProps","mobileDropdownSelectMultipleFieldProps","inputRef","isDropdownOpen","currentRow","setCurrentRow","rowKey","dropdownSelectedKeys","setDropdownSelectedKeys","dataCache","Map","currentValueItems","items","find","get","dropdownInputRef","selectedOnlyData","selectedOnlyOnLoadRange","detail","newKeys","closeDropdown","v","clear","previousValue","onTextTagRemove","newSelectedKeys","delete","onTextTagExitNavigation","setTimeout","wasDropdownOpen","prevValueItems","setPrevValueItems","prevDropdownSelectedKeys","nextDropdownSelectedKeys","equals","hasEmptyLabel","isSearchTextEmptyOrUndefined","styleVariant","useMobileDropdown","formFieldContext","mobileDropdownFormFieldContext","inputProps","mobileDropdownInputProps","labelProps","mobileDropdownLabelProps","textFieldProps","mobileDropdownTextFieldProps","userAssistanceProps","mobileDropdownUserAssistanceProps","useTextField","isRequiredShown","labelEdge","hasValue","mobileDropdownFieldLabelProps","Label","SelectMobileDropdown","header","FormFieldContext","View","onBlur","onFocus","onInput","footer","hasTopGap","createKeysFromValueItems","reduce","accumKeys","currentItem","add","SelectMultiple","addToList","propAriaDescribedBy","propData","propIsDisabled","propIsReadonly","propLabelEdge","labelStartWidth","propLabelStartWidth","messages","onFilter","propOnLoadRange","testId","propTextAlign","propUserAssistanceDensity","isFormDisabled","isFormReadonly","formLabelEdge","formLabelStartWidth","formTextAlign","formUserAssistanceDensity","useFormContext","origIsFocused","readonlyElementRef","useFocusableTextField","addToListEventHandlers","ariaProps","dropdownArrowEventHandlers","dropdownEventHandlers","hasSelectedValuesCount","inputEventHandlers","isDataFetched","mouseProps","selectedValuesCountProps","textTagListProps","propIsFocused","setDropdownSelectedOnlyView","selectedOnlyDataProps","handleOnFilter","args","handleDropdownArrowClick","handleDropdownAutoDismiss","baseHandleDropdownAutoDismiss","handleDropdownPosition","handleInput","handleMainFieldKeyDown","baseHandleMainFieldKeyDown","handleMainFieldKeyUp","handleUpDownArrowKeys","useSelectCommon","prevIsDropdownOpen","setPrevIsDropdownOpen","setSelectedKeys","isBeforeDataFetch","handleAddToListAction","combinedAriaDescribedBy","merge","removeDropdown","parentElement","removeChild","shouldSelectCurrentRow","currentRowArg","selectRow","newValue","myHandleDropdownAutoDismiss","keyboardEvent","KEYS","TAB","shiftKey","chipRef","myHandleMainFieldKeyDown","isControlOrFunctionKey","stopPropagation","LEFT","HTMLInputElement","selectionStart","selectionEnd","RIGHT","ENTER","NUMPAD_ENTER","isPhone","querySelector","handleSelectedValuesCountKeyDown","UP","DOWN","ESC","handleSelectedValuesCountKeyUp","handleSelectedValuesCountMouseDown","handleSelectedValuesCountToggle","onTextTagListExitNavigation","onTextTagListRemove","mergeProps","prevData","setPrevData","firstResultKey","useSelectMultiple","useLoadingIndicatorTimer","baseId","labelComp","forId","fieldLabelProps","inlineUserAssistance","InlineUserAssistance","compactUserAssistance","CompactUserAssistance","ReadonlyTextField","onfocusout","onfocusin","ReadonlyTextFieldInput","as","elementRef","select_noMatchesFound","select_oneMatchFound","select_sizeMatchesFound","TOTAL_SIZE","select_sizeOrMoreMatchesFound","shouldShowDropdown","mainFieldInput","SelectMobileFieldInput","isTablet","dropdown"],"mappings":"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"}