define(['exports', 'preact/jsx-runtime', 'preact/hooks', 'preact/compat', './classNames-2e65b3b3', './collectionUtils-e7261bcb', './useId-bea76214', './useUser-e0989b0b', './LoadMoreCollection-7b33bf5e', './PRIVATE_Table/themes/Table.css', './Skeleton-957111dc', './Selector-f5524178', './keys-123d62b0', './Text-7cbb9b7a', './TabbableModeContext-8858ed6b', './PRIVATE_Table/themes/redwood/TableCellTheme', './useComponentTheme-f77b756d', './PRIVATE_Table/themes/redwood/TableRowTheme', './useInteractionStyle-0d19d1a9', './useTranslationBundle-d999fb18', './PRIVATE_Table/themes/TableRowStyles.css', './PRIVATE_Table/themes/redwood/TableNoDataTheme', './SelectorAll-ce761ec7', './PRIVATE_Table/themes/redwood/TableHeaderCellTheme', './ChevronUp-44bd4706', './ChevronUpDown-53b91889', './ChevronDown-d40e05a2', './EmbeddedIconButton-6d3fa12b', './PRIVATE_Table/themes/redwood/TableFooterCellTheme', './FocusTracker-6c447746', './useCollectionFocusRing-d3bea583', './useTabbableModeSet-44947df5', './clientHints-aa2ccdd3', './mergeProps-7d608009', './PRIVATE_Table/themes/TableCellStyles.css', './PRIVATE_Table/themes/TableHeaderCellStyles.css', './PRIVATE_Table/themes/TableFooterCellStyles.css', './PRIVATE_Table/themes/TableStyles.css', './PRIVATE_Table/themes/redwood/TableTheme', './tabbableUtils-b4353985', './useResizeObserver-b70bb2bf', './useTestId-af48c25c'], (function(e,t,l,n,o,r,a,i,s,c,u,d,y,b,f,m,S,h,g,p,w,C,R,v,k,E,K,x,T,j,A,I,H,V,D,F,L,P,z,$,W,q){"use strict";function B({tableId:e,columnWidthsArray:l}){const n=e=>null==e?"":`width: ${e}px;`;return t.jsx("colgroup",{children:l.map((l=>t.jsx("col",{style:n(l),"data-oj-table-col":e})))})}const M=50;function G({colspan:e,preactKey:n,minimumCount:r=1}){const[a,i]=l.useState(!1);l.useEffect((()=>{setTimeout((()=>{i(!0)}),M)}),[]);const d=o.classNames([c.tableSkeletonCellStyles.base]);return t.jsx("tr",{class:s.LOADMORE_STYLE_CLASS,children:a?t.jsx("td",{class:d,colSpan:e,role:"presentation",children:[...Array(r)].map((e=>t.jsx("div",{class:c.tableSkeletonBarContainerStyles.base,children:t.jsx(u.Skeleton,{height:"4x"})})))}):null},n)}function X({rowData:e,field:l}){return null!=l?t.jsx(b.Text,{overflowWrap:"breakWord",lineClamp:1,variant:"primary",size:"md",children:String(e[l])}):null}function N({tableId:e,rowData:l,field:n,columnKey:r,columnIndex:i,rowKey:s,rowIndex:c,isFinalRowIndex:u,isFinalColumnIndex:d,hasVerticalGridlines:y,hasHorizontalGridlines:b,isRowSelected:h,isPreviousRowSelected:g,isColumnSelected:p,isPreviousColumnSelected:w,isFocusRingVisible:C,isTabbable:R,isRowHeader:v,stickyColumn:k="none",renderer:E=X,selectorRenderer:K,isRowSelectionEnabled:x,isRowSingleSelection:T,variant:j,applyActiveStyle:A,applyHoverStyle:I,applyPseudoHoverStyle:H,isStickyStartEdge:V,isStickyEndEdge:D,isRtl:F}){const L=E!==X,{classes:P}=S.useComponentTheme(m.TableCellRedwoodTheme,{defaultRenderer:L?"notDefaultRenderer":"isDefaultRenderer",firstRow:0===c?"isFirstRow":"notFirstRow",lastRow:u?"isLastRow":"notLastRow",firstColumn:0===i?"isFirstColumn":"notFirstColumn",lastColumn:d?"isLastColumn":"notLastColumn",borderTopSpacer:T&&(h||g)||b&&0!==c?"notBorderTopSpacer":"isBorderTopSpacer",borderBottomSpacer:u&&!(T&&h||b)?"isBorderBottomSpacer":"notBorderBottomSpacer",borderStartSpacer:w||p||y&&0!==i?"notBorderStartSpacer":"isBorderStartSpacer",borderEndSpacer:d&&!p?"isBorderEndSpacer":"notBorderEndSpacer",verticalGrid:y?"isVerticalGrid":"notVerticalGrid",horizontalGrid:b?"isHorizontalGrid":"notHorizontalGrid",rowSingleSelection:T?"isRowSingleSelection":"notRowSingleSelection",rowSelectable:x?"isRowSelectable":"notRowSelectable",rowSelected:h?"isRowSelected":"notRowSelected",previousRowSelected:g?"isPreviousRowSelected":"notPreviousRowSelected",columnSelected:p?"isColumnSelected":"notColumnSelected",previousColumnSelected:w?"isPreviousColumnSelected":"notPreviousColumnSelected",stickyStartColumn:"start"===k?"isStickyStartColumn":"notStickyStartColumn",stickyEndColumn:"end"===k?"isStickyEndColumn":"notStickyEndColumn",stickyStartEdge:V?"isStickyStartEdge":"notStickyStartEdge",stickyEndEdge:D?"isStickyEndEdge":"notStickyEndEdge",rowHighlight:"highlight"===j?"isRowHighlight":"notRowHighlight",focusRingVisible:C?"isFocusRingVisible":"notFocusRingVisible",active:A?"isActive":"notActive",hover:I?"isHover":"notHover",pseudoHover:H?"isPseudoHover":"notPseudoHover",rtl:F?"isRtl":"notRtl"}),z=o.classNames([P]),$={rowData:l,rowKey:s,field:n,columnKey:r,selector:K};return t.jsx("td",{"aria-colindex":i+1,class:z,id:a.useId(),tabIndex:-1,role:v?"rowheader":"gridcell","data-oj-cell-type":"data","data-oj-column-key":r,"data-oj-table-focusable":e,"data-oj-table-data-cell":e,..."number"==typeof r&&{"data-oj-column-key-type":"number"},children:t.jsx(f.TabbableModeContext.Provider,{value:{isTabbable:R},children:E($)})})}const Y=n.memo((function({tableId:e,rowKey:l,rowData:n,rowIndex:r,isFinalRow:a,columnsArray:i,rowHeaderColumnKeys:s,hasVerticalGridlines:c,hasHorizontalGridlines:u,isSelected:b,isPreviousSelected:f,isRowSelectionEnabled:m,isSingleRowSelectionEnabled:w,showFocusRing:C,containsTabbableCell:R,selectedRowKeys:v={all:!1,keys:new Set},focusedColumnKey:k,selectedColumnKeys:E={all:!1,keys:new Set},variant:K,onSelectionChange:x,startStickyEdge:T,endStickyEdge:j,isRtl:A}){const I=p.useTranslationBundle("@oracle/oraclejet-preact"),{interactionProps:H,applyActiveStyle:V,applyHoverStyle:D,applyPseudoHoverStyle:F}=g.useInteractionStyle(),{classes:L}=S.useComponentTheme(h.TableRowRedwoodTheme,{lastRow:a?"isLastRow":"notLastRow"}),P=o.classNames([L]),z=e=>{null!=x&&x({value:{row:e.value,column:E},target:e.target},!1)};let $=!1;return t.jsx("tr",{"aria-rowindex":r+1,class:P,role:"row","data-oj-key":l,"data-oj-table-data-row":e,...m?b?{"aria-selected":!0}:{"aria-selected":!1}:{},..."number"==typeof l&&{"data-oj-key-type":"number"},...m&&H,children:i.map(((o,S)=>{const h=m?()=>{const e=(r+2).toString();return t.jsx(d.Selector,{"aria-label":I.collection_selectRow({ROW_NAME:e}),onChange:z,rowKey:l,selectedKeys:v})}:void 0,g=o.key,p=y.containsKey(E,g),x={tableId:e,rowData:n,field:o.value.field,stickyColumn:o.value.stickyEdge,columnKey:g,columnIndex:S,rowKey:l,rowIndex:r,isFinalRowIndex:a,isFinalColumnIndex:S===i.length-1,hasVerticalGridlines:c,hasHorizontalGridlines:u,isRowSelected:b,isPreviousRowSelected:f,isColumnSelected:p,isPreviousColumnSelected:$,isFocusRingVisible:C&&!R&&o.key===k,isTabbable:o.key===k&&R,isRowHeader:s.has(o.key),renderer:o.value.renderer,selectorRenderer:h,variant:K,isRowSelectionEnabled:m,isRowSingleSelection:w,applyActiveStyle:V,applyHoverStyle:D,applyPseudoHoverStyle:F,isStickyStartEdge:S===T,isStickyEndEdge:S===j,isRtl:A};return $=p,t.jsx(N,{...x})}))})}),((e,t)=>{return!(!e||!t)&&(e.tableId===t.tableId&&e.rowKey===t.rowKey&&e.rowData===t.rowData&&e.rowIndex===t.rowIndex&&e.isFinalRow===t.isFinalRow&&((e,t)=>{if(e.length===t.length){for(let l=0;l<e.length;l++)if(e[l].key!==t[l].key||e[l].value!==t[l].value)return!1;return!0}return!1})(e.columnsArray,t.columnsArray)&&e.horizontalGridlines===t.horizontalGridlines&&e.verticalGridlines===t.verticalGridlines&&(l=e.rowHeaderColumnKeys,n=t.rowHeaderColumnKeys,null==l?null==n:null!=n&&l.size===n.size&&[...l].every((e=>n.has(e))))&&e.isSelected===t.isSelected&&e.isPreviousSelected===t.isPreviousSelected&&e.isRowSelectionEnabled===t.isRowSelectionEnabled&&e.isSingleRowSelectionEnabled===t.isSingleRowSelectionEnabled&&e.showFocusRing===t.showFocusRing&&e.containsTabbableCell===t.containsTabbableCell&&e.selectedRowKeys===t.selectedRowKeys&&e.focusedColumnKey===t.focusedColumnKey&&e.selectedColumnKeys===t.selectedColumnKeys&&e.variant===t.variant&&e.onSelectionChange===t.onSelectionChange&&e.startStickyEdge===t.startStickyEdge&&e.endStickyEdge===t.endStickyEdge&&e.isRtl===t.isRtl);var l,n}));function _({tableId:e,columnsCount:l,isFocusRingVisible:n,isTabbable:r,renderer:i}){const s=p.useTranslationBundle("@oracle/oraclejet-preact"),c=o.classNames([w.tableRowStyles.base]),{classes:u}=S.useComponentTheme(C.TableNoDataRedwoodTheme,{defaultRenderer:null==i?"isDefaultRenderer":"notDefaultRenderer",focusRingVisible:n?"isFocusRingVisible":"notFocusRingVisible"}),d=o.classNames([u]);const y=null!=i?i:function(){return t.jsx(b.Text,{lineClamp:1,variant:"primary",size:"md",children:s.collection_noData()})};return t.jsx("tr",{"aria-rowindex":2,class:c,role:"row",children:t.jsx("td",{"aria-colindex":1,class:d,id:a.useId(),tabIndex:-1,role:"gridcell",colSpan:l,"data-oj-cell-type":"noData","data-oj-table-focusable":e,"data-oj-table-nodata-cell":e,children:t.jsx(f.TabbableModeContext.Provider,{value:{isTabbable:r},children:y()})})})}function O({tableId:e,getAccessibleRowHeaders:n,data:r,columnsArray:a,hasVerticalGridlines:i,hasHorizontalGridlines:u,getCurrentTabbableCell:d,showFocusRing:b,getRowKey:f,hasMore:m,onLoadMore:S,viewportConfig:h,currentCell:g,currentRowVariant:p,selected:w,isRowSelectionEnabled:C,isSingleRowSelectionEnabled:R,onSelectionChange:v,noDataRenderer:k,startStickyEdge:E,endStickyEdge:K,isRtl:x}){const T=l.useRef((new Date).getTime()),j=l.useRef(),A=o.classNames([c.collectionStyles.base]),I=l.useCallback((e=>({index:e.index,data:e.data.data,key:f(e.data.data)})),[f]);let H=!1;const V=null!=r?r.map((e=>({data:e,metadata:f(e)}))):[],D=null!=r&&0===r.length&&m,F=null==r||0===r.length&&!m;return j.current!==D&&(T.current=(new Date).getTime()),j.current=D,t.jsx("tbody",{class:A,children:F?t.jsx(_,{...(()=>{const t=d(),l="noData"===t?.type;return{tableId:e,columnsCount:a.length,isTabbable:l,isFocusRingVisible:b&&!l&&"noData"===g?.type,renderer:k}})()}):t.jsx(s.LoadMoreCollection,{data:V,loadMoreIndicator:t.jsx(G,{colspan:a.length,preactKey:T.current,minimumCount:D?25:3}),hasMore:m,onLoadMore:S,viewportConfig:h,children:l=>{const o=I(l),s=o.key,c=g?.rowKey===s,f=d()?.rowKey===s,m=b&&c,S=c&&(f||m)?g.columnKey:void 0,h=y.containsKey(w.row,s),k={tableId:e,columnsArray:a,rowHeaderColumnKeys:n(o),hasVerticalGridlines:i,hasHorizontalGridlines:u,isSelected:h,isPreviousSelected:H,onSelectionChange:v,isRowSelectionEnabled:C,isSingleRowSelectionEnabled:R,variant:c?p:void 0,focusedColumnKey:S,selectedRowKeys:w.row,selectedColumnKeys:w.column,showFocusRing:m,containsTabbableCell:f,rowIndex:o.index,rowKey:s,rowData:o.data,isFinalRow:o.index===(null!=r?r.length-1:-1),startStickyEdge:E,endStickyEdge:K,isRtl:x};return H=h,t.jsx(Y,{...k})}})})}function U({tableId:e,columnKey:n,columnIndex:r,isFinalColumnIndex:i,hasVerticalGridlines:s,isSelected:u,isPreviousSelected:d,isColumnSelectable:m,isRowSelectionEnabled:h,selectedColumnKeys:w={all:!1,keys:new Set},selectedRowKeys:C={all:!1,keys:new Set},isFocusRingVisible:T,isTabbable:j,headerText:A,stickyColumn:I="none",renderer:H,onSelectionChange:V,sortable:D="disabled",sortDirection:F,onSortCriterionChange:L,isStickyStartEdge:P,isStickyEndEdge:z,isRtl:$}){const W=p.useTranslationBundle("@oracle/oraclejet-preact"),{interactionProps:q,applyActiveStyle:B,applyHoverStyle:M,applyPseudoHoverStyle:G}=g.useInteractionStyle(),X=null!=H,{classes:N}=S.useComponentTheme(v.TableHeaderCellRedwoodTheme,{defaultRenderer:X?"notDefaultRenderer":"isDefaultRenderer",firstColumn:0===r?"isFirstColumn":"notFirstColumn",lastColumn:i?"isLastColumn":"notLastColumn",borderStartSpacer:d||u||s&&0!==r?"notBorderStartSpacer":"isBorderStartSpacer",borderEndSpacer:i&&!u?"isBorderEndSpacer":"notBorderEndSpacer",verticalGrid:s?"isVerticalGrid":"notVerticalGrid",columnSelectable:m?"isColumnSelectable":"notColumnSelectable",columnSelected:u?"isColumnSelected":"notColumnSelected",previousColumnSelected:d?"isPreviousColumnSelected":"notPreviousColumnSelected",stickyStartColumn:"start"===I?"isStickyStartColumn":"notStickyStartColumn",stickyEndColumn:"end"===I?"isStickyEndColumn":"notStickyEndColumn",stickyStartEdge:P?"isStickyStartEdge":"notStickyStartEdge",stickyEndEdge:z?"isStickyEndEdge":"notStickyEndEdge",focusRingVisible:T?"isFocusRingVisible":"notFocusRingVisible",active:B?"isActive":"notActive",hover:M?"isHover":"notHover",pseudoHover:G?"isPseudoHover":"notPseudoHover",rtl:$?"isRtl":"notRtl"}),Y=o.classNames([N]);let _;_=y.isSameKey(C,{all:!0,deletedKeys:new Set})?"all":y.isSameKey(C,{all:!1,keys:new Set})?"none":C.all?"partial-all":"partial";const O=e=>{null!=V&&V({value:{row:e.value,column:w},target:e.target},!1)},U={key:n,headerText:A,sortable:D,sortDirection:F,selector:h?()=>t.jsx(R.SelectorAll,{"aria-label":W.collection_selectAllRows(),onChange:O,selected:_}):void 0,sortControl:"enabled"===D||null!=F?()=>t.jsx(x.EmbeddedIconButton,{"aria-label":"enabled"===D?W.collection_sortEnabled():W.collection_sortDisabled(),isDisabled:"enabled"!==D,onAction:J,children:"ascending"===F?t.jsx(k.SvgChevronUp,{}):"descending"===F?t.jsx(K.SvgChevronDown,{}):t.jsx(E.SvgChevronUpDown,{})}):void 0},J=l.useCallback((()=>{if(null!=L){L([{key:n,sortDirection:"ascending"===F?"descending":"ascending"}])}}),[n,F,L]),Q=l.useCallback((()=>null!=H?H:({headerText:e,sortControl:l})=>{const n=null!=e?t.jsx(b.Text,{overflowWrap:"breakWord",lineClamp:3,variant:"primary",size:"md",children:e}):null;return null!=l?t.jsxs("div",{class:c.tableHeaderSortContainerStyles.base,children:[n,l()]}):n}),[H]);return t.jsx("th",{"aria-colindex":r+1,...u?{"aria-selected":!0}:m?{"aria-selected":!1}:void 0,...(()=>{if("ascending"===F||"descending"===F)return{"aria-sort":F}})(),class:Y,id:a.useId(),tabIndex:-1,role:"columnheader","data-oj-cell-type":"header","data-oj-column-key":n,"data-oj-table-focusable":e,"data-oj-table-header-cell":e,..."number"==typeof n&&{"data-oj-column-key-type":"number"},...m&&q,children:t.jsx(f.TabbableModeContext.Provider,{value:{isTabbable:j},children:Q()(U)})})}function J({tableId:e,columnsArray:l,hasVerticalGridlines:n,focusedKey:r,showFocusRing:a,selectedColumnKeys:i,selectedRowKeys:s,isColumnSelectionEnabled:u,isRowSelectionEnabled:d,containsTabbableCell:b,onSelectionChange:f,sortCriterion:m,onSortCriterionChange:S,startStickyEdge:h,endStickyEdge:g,isResizeHover:p,isRtl:w}){const C=o.classNames([c.tableHeaderRowStyles.base]),R=o.classNames([c.tableHeaderRowContainerStyles.base]);let v=!1;return t.jsx("thead",{class:R,children:t.jsx("tr",{class:C,role:"row",style:p?"cursor: col-resize;":"","data-oj-table-header-row":e,children:l.map(((o,c)=>{const p=o.key;let C;if(null!=m)for(const e of m)if(e.key===p){C=e.sortDirection;break}const R=y.containsKey(i,p),k={tableId:e,hasVerticalGridlines:n,columnKey:p,columnIndex:c,isFinalColumnIndex:c===l.length-1,stickyColumn:o.value.stickyEdge,isSelected:R,isPreviousSelected:v,selectedColumnKeys:i,selectedRowKeys:s,isColumnSelectable:u&&"disabled"!==o.value.selectable,isRowSelectionEnabled:d,isFocusRingVisible:a&&p===r&&!b,isTabbable:p===r&&b,headerText:o.value.headerText,renderer:o.value.headerRenderer,onSelectionChange:f,sortable:o.value.sortable,sortDirection:C,onSortCriterionChange:S,isStickyStartEdge:c===h,isStickyEndEdge:c===g,isRtl:w};return v=R,t.jsx(U,{...k})}))})})}function Q({footerText:e}){return null!=e?t.jsx(b.Text,{lineClamp:1,variant:"primary",size:"md",children:e}):null}function Z({tableId:e,columnKey:l,columnIndex:n,isFinalColumnIndex:r,hasVerticalGridlines:i,isSelected:s,isPreviousSelected:c,isColumnSelectable:u,isFocusRingVisible:d,isTabbable:y,stickyColumn:b="none",footerText:m,renderer:h=Q,isStickyStartEdge:p,isStickyEndEdge:w,isRtl:C}){const{interactionProps:R,applyActiveStyle:v,applyHoverStyle:k,applyPseudoHoverStyle:E}=g.useInteractionStyle(),K=h!==Q,{classes:x}=S.useComponentTheme(T.TableFooterCellRedwoodTheme,{defaultRenderer:K?"notDefaultRenderer":"isDefaultRenderer",firstColumn:0===n?"isFirstColumn":"notFirstColumn",lastColumn:r?"isLastColumn":"notLastColumn",borderStartSpacer:c||s||i&&0!==n?"notBorderStartSpacer":"isBorderStartSpacer",borderEndSpacer:r&&!s?"isBorderEndSpacer":"notBorderEndSpacer",verticalGrid:i?"isVerticalGrid":"notVerticalGrid",columnSelectable:u?"isColumnSelectable":"notColumnSelectable",columnSelected:s?"isColumnSelected":"notColumnSelected",previousColumnSelected:c?"isPreviousColumnSelected":"notPreviousColumnSelected",stickyStartColumn:"start"===b?"isStickyStartColumn":"notStickyStartColumn",stickyEndColumn:"end"===b?"isStickyEndColumn":"notStickyEndColumn",stickyStartEdge:p?"isStickyStartEdge":"notStickyStartEdge",stickyEndEdge:w?"isStickyEndEdge":"notStickyEndEdge",focusRingVisible:d?"isFocusRingVisible":"notFocusRingVisible",active:v?"isActive":"notActive",hover:k?"isHover":"notHover",pseudoHover:E?"isPseudoHover":"notPseudoHover",rtl:C?"isRtl":"notRtl"}),j=o.classNames([x]),A={key:l,footerText:m};return t.jsx("td",{"aria-colindex":n+1,...s?{"aria-selected":!0}:u?{"aria-selected":!1}:{},class:j,id:a.useId(),tabIndex:-1,role:"gridcell","data-oj-cell-type":"footer","data-oj-column-key":l,"data-oj-table-focusable":e,"data-oj-table-footer-cell":e,..."number"==typeof l&&{"data-oj-column-key-type":"number"},...u&&R,children:t.jsx(f.TabbableModeContext.Provider,{value:{isTabbable:y},children:h(A)})})}function ee({tableId:e,isRendered:l,columnsArray:n,hasVerticalGridlines:r,focusedKey:a,showFocusRing:i,selectedKeys:s,isColumnSelectionEnabled:u,containsTabbableCell:d,startStickyEdge:b,endStickyEdge:f,isRtl:m}){const S=o.classNames([c.tableFooterRowStyles.base]),h=o.classNames([c.tableFooterRowContainerStyles.base]);let g=!1;return l?t.jsx("tfoot",{class:h,children:t.jsx("tr",{class:S,role:"row","data-oj-table-footer-row":e,children:n.map(((l,o)=>{const c=l.key,S=y.containsKey(s,c),h={tableId:e,columnKey:c,columnIndex:o,isFinalColumnIndex:o===n.length-1,hasVerticalGridlines:r,stickyColumn:l.value.stickyEdge,isSelected:S,isPreviousSelected:g,isColumnSelectable:u&&"disabled"!==l.value.selectable,isFocusRingVisible:i&&c===a&&!d,isTabbable:c===a&&d,footerText:l.value.footerText,renderer:l.value.footerRenderer,isStickyStartEdge:o===b,isStickyEndEdge:o===f,isRtl:m};return g=S,t.jsx(Z,{...h})}))})}):null}function te({position:e,isRtl:l}){const n=o.classNames([c.tableDragIndicatorStyles.base]);return t.jsx("div",{class:n,style:null!=e?l?`right:${e}px;cursor:col-resize;`:`left:${e}px;cursor:col-resize;`:"display:none;"})}const le=e=>e.dataset.ojCellType,ne=e=>"number"===e.dataset.ojKeyType?Number(e.dataset.ojKey):e.dataset.ojKey,oe=(e,t,l)=>{if(null!=e){const n=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);if(n.length>l)return ne(n[l])}return null},re=(e,t,l)=>{if(null!=e){const n=e.querySelectorAll(`[data-oj-table-data-row='${t}']`),o=Array.prototype.indexOf.call(n,l);if(o>-1)return o}return null};const ae=e=>"number"===e.dataset.ojColumnKeyType?Number(e.dataset.ojColumnKey):e.dataset.ojColumnKey,ie=(e,t,l,n)=>{if(null!=e){const o=e.querySelectorAll(n?`[data-oj-table-header-cell='${t}']`:`[data-oj-table-footer-cell='${t}']`),r=Array.prototype.indexOf.call(o,l);if(r>-1)return r}return null};function se(e,t,l,n){const o=n?e.parentElement:e;if(null!=o){const e=o.closest(l);if(null!=e){const l=le(e);if("data"===l)return{rowKey:r.keyExtractor(e,`[data-oj-table-data-row='${t}']`),columnKey:ae(e),type:l};if("header"===l||"footer"===l)return{columnKey:ae(e),type:l};if("noData"===l)return{type:l}}}return null}function ce(e,t,l){if("header"===l.type){const n=e.querySelectorAll(`[data-oj-table-header-cell='${t}']`);for(const e of n)if(l.columnKey===ae(e))return e}else if("footer"===l.type){const n=e.querySelectorAll(`[data-oj-table-footer-cell='${t}']`);for(const e of n)if(l.columnKey===ae(e))return e}else if("data"===l.type){const n=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);for(const e of n)if(l.rowKey===ne(e)){const n=e.querySelectorAll(`[data-oj-table-focusable='${t}']`);for(const e of n)if(l.columnKey===ae(e))return e}}else if("noData"===l.type)return e.querySelector(`[data-oj-table-nodata-cell='${t}']`);return null}const ue=(e,t)=>{const l=e.querySelector(`[data-oj-table-footer-row='${t}']`);return null!=l?l.getBoundingClientRect().height:0},de=(e,t)=>{if(null!=e){const l=e.querySelector(`[data-oj-table-data-row='${t}']`);if(null!=l)return ne(l)}return null},ye=(e,t)=>{const l=e.querySelectorAll(`[data-oj-table-data-row='${t}']`),n=l.length;return n>0?ne(l[n-1]):null},be=(e,t)=>{if(null!=e){const l=e.querySelector(`[data-oj-table-focusable='${t}']`);if(null!=l){const e=le(l);return"header"===e||"footer"===e?{columnKey:ae(l),type:e}:"noData"===e?{type:"noData"}:{rowKey:ne(l),columnKey:ae(l),type:"data"}}}return null},fe=(e,t)=>null!=e&&e.querySelectorAll(`[data-oj-table-nodata-cell='${t}']`).length>0,me=(e,t)=>null!=e&&e.querySelectorAll(`[data-oj-table-footer-row='${t}']`).length>0;function Se(e,t,l,n,o,a){let i,s;if("data"===a?.type){i=a.rowKey;const l=ce(e,t,a);null!=l&&(s=l.parentElement)}else i=r.keyExtractor(o,`[data-oj-table-data-row='${t}']`),null!=i&&(s=o.closest(`[data-oj-table-data-row='${t}']`));if(null!=i&&null!=s){const r=re(e,t,s);if(null!=r){return n({context:{key:i,data:l[r]},target:o}),!0}}return!1}const he=(e,t,l,n,o,r)=>{const a=((e,t)=>{const l=e.querySelector(`[data-oj-table-header-row='${t}']`);return null!=l?l.getBoundingClientRect().height:0})(e,t),i=ue(e,t),s=we(l,n,a,i,o),c=s.top,u=c>=0,d=s.bottom,y=d>=0;u&&y||(null==r||"inView"===r?y?Math.abs(c)>Math.abs(d)?n.scrollTop=ge(n.scrollTop+d,!0):n.scrollTop=ge(n.scrollTop-c,!1):u&&(Math.abs(d)>Math.abs(c)?n.scrollTop=ge(n.scrollTop-c,!1):n.scrollTop=ge(n.scrollTop+d,!0)):n.scrollTop="top"===r?ge(n.scrollTop-c,!1):ge(n.scrollTop+d,!0))},ge=(e,t)=>t?Math.ceil(e):Math.floor(e),pe=(e,t,l,n,o,r)=>{const a=e.getBoundingClientRect(),i=t.getBoundingClientRect();return r?{left:i.left-a.left+n+o,right:a.right-i.right+l}:{left:i.left-a.left+l,right:a.right-i.right+n+o}},we=(e,t,l,n,o)=>{const r=e.getBoundingClientRect(),a=t.getBoundingClientRect();return{top:a.top-r.top+l,bottom:r.bottom-a.bottom+n+o}};function Ce(e,t,l,n,o){const r=function(e,t,l,n){if(null!=n){let o,r=!1;if(null!=n.columnKey)r=!0,o=n.columnKey;else if(null!=n.offsetX&&null==n.x){r=!0;o=ve(e,t,l).columnKey}if(r){if(null!=o){let e=0;for(let r=0;r<l.length;r++){if(t[r].key===o)return e+(null!=n.offsetX?n.offsetX:0);"start"!==t[r].value.stickyEdge&&(e+=l[r])}}}else if(null!=n.x)return n.x}return}(e,t,l,o);e.scrollLeft=null!=r?n?-r:r:0}function Re(e,t,l){const n=function(e,t,l){if(null!=l){let n,o=!1;if(null!=l.rowKey?(o=!0,n=l.rowKey):null!=l.offsetY&&null==l.y&&(o=!0,n=ke(e,t).rowKey),o){if(null!=n){let o=0;const r=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);for(let e=0;e<r.length;e++){if(n===ne(r[e]))return o+(null!=l.offsetY?l.offsetY:0);o+=r[e].getBoundingClientRect().height}}}else if(null!=l.y)return l.y}return}(e,t,l);e.scrollTop=null!=n?n:0}function ve(e,t,l,n){const o=Math.abs(null==n?e.scrollLeft:n),r={x:o,columnKey:void 0,offsetX:void 0};let a=0;if(t.length>0&&0===o)return r.columnKey=t[0].key,r.offsetX=0,r;for(let e=0;e<t.length;e++)if("start"!==t[e].value.stickyEdge&&(a+=l[e]),o<a){r.columnKey=t[e].key,r.offsetX=l[e]+o-a;break}return r}function ke(e,t,l){const n=Math.abs(null==l?e.scrollTop:l),o={y:n,rowKey:void 0,offsetY:void 0};let r=0;const a=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);if(a.length>0&&0===n)return o.rowKey=oe(e,t,0),o.offsetY=0,o;for(let l=0;l<a.length;l++){const i=a[l].getBoundingClientRect().height;if(r+=i,n<r){o.rowKey=oe(e,t,l),o.offsetY=i+n-r;break}}return o}function Ee(e,t,l,n,o,a,i,s){const c=s?.scroller()||e;if("data"===o.cell.type){const l=r.findElementByKey(e,o.cell.rowKey,`[data-oj-table-data-row='${t}']`);null!=l&&he(e,t,l,c,n.boxHeight-n.contentHeight,o.locationY)}const u=ce(e,t,o.cell);null!=u&&function(e,t,l,n,o,r,a){const i=ae(e);let s;for(let e=0;e<l.length;e++)if(l[e].key===i){s=e;break}if(null!=s&&null!=r){let i=0,c=0;const u=Ke(l,!0);for(let e=0;e<u.length;e++){const t=u[e];if(!(t<s))break;i+=r[t]}const d=Ke(l,!1);for(let e=d.length-1;e>-1;e--){const t=d[e];if(!(t>s))break;c+=r[t]}const y=pe(e,t,i,c,n,o),b=y.left,f=b>=0,m=y.right,S=m>=0;if(f&&S)return;null==a||"inView"===a?f?Math.abs(m)>Math.abs(b)?t.scrollLeft=ge(t.scrollLeft-b,!1):t.scrollLeft=ge(t.scrollLeft+m,!0):S&&(Math.abs(b)>Math.abs(m)?t.scrollLeft=ge(t.scrollLeft+m,!0):t.scrollLeft=ge(t.scrollLeft-b,!1)):t.scrollLeft="start"===a?ge(t.scrollLeft-b,!1):ge(t.scrollLeft+m,!0)}}(u,c,l,n.boxWidth-n.contentWidth,a,i,o.locationX)}const Ke=(e,t)=>{const l=[],n=t?"start":"end";for(let t=0;t<e.length;t++)e[t].value.stickyEdge===n&&l.push(t);return l},xe=(e,t,l,n,o,r)=>{const a=r&&!l||!r&&l?"left":"right",i=`${o}px`;e.querySelectorAll(`[data-oj-table-header-cell='${t}']`)[n].style[a]=i;const s=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);for(let e=0;e<s.length;e++){s[e].querySelectorAll(`[data-oj-table-data-cell='${t}']`)[n].style[a]=i}const c=e.querySelectorAll(`[data-oj-table-footer-cell='${t}']`);if(c.length>0){c[n].style[a]=i}};function Te(e,t,l,n,o,r,a,i){if(n.length>0){let s,c;const u=ve(e,n,o,a);for(s=0;s<n.length;s++)if(n[s].key===u.columnKey){c=s;break}let d,y;if(u.x>=1){const e=Ke(n,!0);for(s=0;s<e.length;s++){const t=e[s];if(!(t<c))break;d=t}}je(e,t,l,r,!0,d,i);let b=0;const f=e.scrollWidth-e.clientWidth-u.x;if(f>=1){const e=Ke(n,!1);for(let t=n.length-1;t>-1;t--)if(-1!==e.indexOf(t))y=t;else if(b+=o[t],b>f)break}je(e,t,l,r,!1,y,i)}}const je=(e,t,l,n,o,r,a)=>{if(null!=n.current){const i=o?n.current.start:n.current.end;(i!==r||a)&&(null!=i&&Ae(e,t,l,o,!1,i),null!=r&&Ae(e,t,l,o,!0,r),o?n.current.start=r:n.current.end=r)}},Ae=(e,t,l,n,o,r)=>{const a=l&&n||!l&&!n,i=o?"add":"remove";e.querySelectorAll(`[data-oj-table-header-cell='${t}']`)[r].classList[i](a?F.tableHeaderCellStyles.stickyEdgeLeft:F.tableHeaderCellStyles.stickyEdgeRight,n?F.tableHeaderCellStyles.stickyEdgeStart:F.tableHeaderCellStyles.stickyEdgeEnd);const s=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);for(let e=0;e<s.length;e++){s[e].querySelectorAll(`[data-oj-table-data-cell='${t}']`)[r].classList[i](a?D.tableCellStyles.stickyEdgeLeft:D.tableCellStyles.stickyEdgeRight,n?D.tableCellStyles.stickyEdgeStart:D.tableCellStyles.stickyEdgeEnd)}const c=e.querySelectorAll(`[data-oj-table-footer-cell='${t}']`);if(c.length>0){c[r].classList[i](a?L.tableFooterCellStyles.stickyEdgeLeft:L.tableFooterCellStyles.stickyEdgeRight,n?L.tableFooterCellStyles.stickyEdgeStart:L.tableFooterCellStyles.stickyEdgeEnd)}},Ie=(e,t)=>t??{scroller:()=>e.current};function He(e,t){return null==e?null==t:null!=t&&(e?.rowKey===t?.rowKey&&e?.columnKey===t?.columnKey&&e?.type===t?.type)}function Ve(e,t,l,n,o,a,i,s,c){let u;const d=o.type;if("noData"!==d){const l=o.columnKey;if("data"===d){const n=o.rowKey,s=r.findElementByKey(e,n,`[data-oj-table-data-row='${t}']`);if(null!=s){const n=i?s.previousElementSibling:s.nextElementSibling;if(null!=n){const e=ne(n);null!=e&&(u={rowKey:e,columnKey:l,type:"data"},a({value:u}))}else i?(u={columnKey:o.columnKey,type:"header"},a({value:u})):me(e,t)&&(u={columnKey:o.columnKey,type:"footer"},a({value:u}))}}else if("header"!==d||i){if("footer"===d&&i){const n=ye(e,t);null!=n?(u={rowKey:n,columnKey:l,type:"data"},a({value:u})):fe(e,t)?(u={type:"noData"},a({value:u})):(u={columnKey:o.columnKey,type:"header"},a({value:u}))}}else{const n=de(e,t);null!=n?(u={rowKey:n,columnKey:l,type:"data"},a({value:u})):fe(e,t)?(u={type:"noData"},a({value:u})):me(e,t)&&(u={columnKey:o.columnKey,type:"footer"},a({value:u}))}}else{const n=Le(l,!0);i?(u={columnKey:n,type:"header"},a({value:u})):me(e,t)&&(u={columnKey:n,type:"footer"},a({value:u}))}Ee(e,t,l,n.current,null!=u?{cell:u,locationX:"inView",locationY:"inView"}:{cell:o,locationX:"inView",locationY:"inView"},s,c)}function De(e,t,l,n,o,r,a,i,s){const c=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);if(c.length>0){const u=ke(e,t),d=function(e,t,l){if(null!=e){const n=e.querySelectorAll(`[data-oj-table-data-row='${t}']`);for(let e=0;e<n.length;e++)if(l===ne(n[e]))return e}return null}(e,t,u.rowKey);let y;if(a)y=0===u.offsetY?Math.max(d-1,0):d;else{const l=e.getBoundingClientRect(),o=n.current.boxHeight-n.current.contentHeight,r=l.bottom+ue(e,t)+o;for(y=d;c.length>y+1;){y+=1;if(c[y].getBoundingClientRect().bottom>r)break}}const b=oe(e,t,y);if(null!=b){const c={rowKey:b,columnKey:o.columnKey,type:"data"};b!==o.rowKey&&r({value:c}),Ee(e,t,l,n.current,{cell:c,locationX:"inView",locationY:a?"bottom":"top"},i,s)}}}function Fe(e,t,l,n,o,r,a,i,s){let c;const u=o.type;if("noData"!==u){const e=function(e,t,l){let n=-1;const o=t.length;for(let l=0;l<o;l++)if(t[l].key===e){n=l;break}return l&&0!==n?t[n-1].key:l||n===o-1?null:t[n+1].key}(o.columnKey,l,a);null!=e&&("data"===u?(c={rowKey:o.rowKey,columnKey:e,type:u},r({value:c})):(c={columnKey:e,type:u},r({value:c})))}Ee(e,t,l,n.current,null!=c?{cell:c,locationX:"inView",locationY:"inView"}:{cell:o,locationX:"inView",locationY:"inView"},i,s)}function Le(e,t){return t?e[0].key:e[e.length-1].key}function Pe(e,t,l,n,o,r,a,i,s,c){let u;const d=o.type;if("noData"!==d){const n=o.columnKey,s=Le(l,a);if(i)if(fe(e,t))u={type:"noData"},He(u,o)||r({value:u});else{const l=a?de(e,t):ye(e,t);null!=l&&(u={rowKey:l,columnKey:s,type:"data"},He(u,o)||r({value:u}))}else s!==n&&("data"===d?(u={rowKey:o.rowKey,columnKey:s,type:d},r({value:u})):(u={columnKey:s,type:d},r({value:u})))}Ee(e,t,l,n.current,null!=u?{cell:u,locationX:"inView",locationY:"inView"}:{cell:o,locationX:"inView",locationY:"inView"},s,c)}function ze(e,t,l,n,o,a,i,s){const c={all:!1,keys:new Set};let u=null!=s?.row?s.row:c,d=null!=s?.column?s.column:c;const b=r.keyExtractor(n,`[data-oj-table-data-row='${t}']`);if(null!=b)"single"!==i?.row&&"multiple"!==i?.row||(u=null==u?{all:!1,keys:new Set([b])}:y.containsKey(u,b)?o?y.removeKey(u,b,!1):{all:!1,keys:new Set([b])}:o&&"multiple"===i.row?y.addKey(u,b):{all:!1,keys:new Set([b])},d=c);else if("single"===i?.column||"multiple"===i?.column){const r=n.closest(`[data-oj-table-focusable='${t}']`);if(null!=r){const n=le(r);if("header"===n||"footer"===n){const a=ie(e,t,r,"header"===n);if(null!=a){const e=l[a];"disabled"!==e.value.selectable&&(d=null==d?{all:!1,keys:new Set([e.key])}:y.containsKey(d,e.key)?o?y.removeKey(d,e.key,!1):{all:!1,keys:new Set([e.key])}:o&&"multiple"===i.column?y.addKey(d,e.key):{all:!1,keys:new Set([e.key])},u=c)}}}}y.isSameKey(u,s?.row)&&y.isSameKey(d,s?.column)||a({value:{row:u,column:d},target:n},!1)}function $e(e,t,l,n,o,r,a,i,s,c){const u={all:!1,keys:new Set};let d=null!=c?.row?c.row:u,b=null!=c?.column?c.column:u;if(a){if(b=u,"multiple"===s?.row)if(d=u,o<=r)for(let l=o;l<=r;l++){const n=oe(e,t,l);d=y.addKey(d,n)}else for(let l=o;l>=r;l--){const n=oe(e,t,l);d=y.addKey(d,n)}}else if(d=u,"multiple"===s?.column)if(b=u,o<=r)for(let e=o;e<=r;e++){const t=l[e];"disabled"!==t.value.selectable&&(b=y.addKey(b,t.key))}else for(let e=o;e>=r;e--){const t=l[e];"disabled"!==t.value.selectable&&(b=y.addKey(b,t.key))}y.isSameKey(d,c?.row)&&y.isSameKey(b,c?.column)||i({value:{row:d,column:b},target:n},!0)}function We(e,t,l,n,o,a,i,s,c,u,d,y,b){const f=ce(e,t,i);if(null!=f){let m,S;const h="data"===i.type,g="header"===i.type;if(h?(S=f.parentElement,m=re(e,t,S)):(S=f,m=ie(e,t,S,g)),null!=m){let p,w;const C=s.current;null!=C?(w=a?C.previousElementSibling:C.nextElementSibling,null!=w?(s.current=w,p=h?re(e,t,w):ie(e,t,w,g)):p=h?re(e,t,C):ie(e,t,C,g)):(w=a?S.previousElementSibling:S.nextElementSibling,null!=w?(s.current=w,p=h?re(e,t,w):ie(e,t,w,g)):p=m),null!=p&&$e(e,t,l,o,m,p,h,c,y,b);const R=null!=s.current?s.current:f;let v;if(h){const e=r.keyExtractor(R,`[data-oj-table-data-row='${t}']`);v={type:i.type,rowKey:e,columnKey:i.columnKey}}else v=se(R,t,`[data-oj-table-focusable='${t}']`);Ee(e,t,l,n.current,{cell:v,locationX:"inView",locationY:"inView"},u,d)}}}function qe(e,t,l,n,o,a){const i=e.querySelector(`[data-oj-table-header-row='${t}']`);if(null!=i){const e=i.querySelectorAll(`[data-oj-table-header-cell='${t}']`);if(r.getElementContainsFunc(i)(l.target)){let t=!1;for(let r=0;r<e.length;r++){const s=e[r].getBoundingClientRect(),c=a?s.left:s.right;if(Math.abs(c-l.pageX)<=8){if("enabled"!==n[r].value.edgeResizable)break;o.current.key=n[r].key,i.style.cursor="col-resize",t=!0,o.current.isResizeHover=!0}}t||(i.style.cursor="",o.current.key=void 0,o.current.isResizeHover=!1)}else null!=i&&(i.style.cursor=""),o.current.key=void 0,o.current.isResizeHover=!1}}function Be(e,t,l,n,o,r,a){if(o.current.isResizing&&null!=a){for(const e of o.current.fullColumnWidths);const i=e.querySelector(`[data-oj-table-inner-table='${t}']`);if(null!=i){const e=i.getBoundingClientRect(),t=r?e.right-l.clientX:l.clientX-e.left;o.current.delta=t-o.current.startX,a({key:o.current.key,delta:o.current.delta,allColumnWidths:n})}}o.current={isResizing:!1,isResizeHover:o.current.isResizeHover,ignoreClick:o.current.ignoreClick}}function Me({outerTableRef:e,tableId:t,data:n,isRtl:o,columnsArray:r,appliedColumnWidths:a,sizingInfoRef:i,resizeInfoRef:s,currentStickyEdgesRef:c,cellHasRenderer:u,fullColumnWidths:d,onColumnResizing:y,onColumnResize:b,currentCell:f,onCurrentCellChange:m,selectionMode:S,selected:h,onSelectionChange:g,onRowAction:p,sortCriterion:w,onSortCriterionChange:C}){const R=l.useRef(!1),v=l.useRef(),k=l.useRef(!1),E=l.useRef(!1),K=l.useRef(),x=l.useMemo((()=>null!=m?e=>{E.current=!1,K.current=void 0,m(e)}:void 0),[m]),T=l.useMemo((()=>null!=g?(e,t)=>{t||(E.current=!1,K.current=void 0),g(e)}:void 0),[g]),[j,D,F,L]=I.useTabbableModeSet(e,(e=>se(e,t,`[data-oj-table-focusable='${t}']`,!0)),f,x,u,He),P=!j(void 0),[z,$]=A.useCollectionFocusRing(e,["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"]),W=l.useCallback((e=>{R.current=null==e.relatedTarget}),[]),q=l.useCallback((l=>{const n=l.target;null!=e.current&&null!=n&&function(e,t,l,n,o,r,a,i,s,c,u,d){const y=!a.current;if(a.current=!1,e===l){if(null==r.current&&!i.current)if(null==c){if(null!=u){const l=be(e,t);null!=l&&(u({value:l}),y&&Ee(e,t,n,o.current,{cell:l,locationX:"inView",locationY:"inView"},s,d))}}else y&&Ee(e,t,n,o.current,{cell:c,locationX:"inView",locationY:"inView"},s,d);r.current=void 0}else if(null!=le(l)){if(!i.current&&null!=u){const a=se(l,t,`[data-oj-table-focusable='${t}']`);He(c,a)||(r.current=a,u({value:a})),null!=c&&null==r.current&&y&&Ee(e,t,n,o.current,{cell:c,locationX:"inView",locationY:"inView"},s,d)}e.focus({preventScroll:!0})}}(e.current,t,n,r,i,v,R,E,o,f,x,d)}),[e,t,r,i,o,f,x,d]),B=l.useCallback((l=>{null!=e.current&&null!=y&&(s.current.isResizing?function(e,t,l,n,o,r,a,i){if(o.current.isResizing&&null!=a){const a=e.querySelector(`[data-oj-table-inner-table='${t}']`);if(null!=a){const e=a.getBoundingClientRect(),t=r?e.right-l.clientX:l.clientX-e.left;o.current.delta=t-o.current.startX,null!=i&&i({key:o.current.key,delta:o.current.delta,allColumnWidths:n})}}}(e.current,t,l,a,s,o,d,y):function(e,t,l,n,o,r){qe(e,t,l,n,o,r)}(e.current,t,l,r,s,o))}),[e,t,r,a,s,o,d,y]),M=l.useCallback((l=>{if(null!=e.current){k.current="touch"===l.pointerType;let n=!1;const i=l.target;null!=T&&null!=f&&l.shiftKey&&(n=function(e,t,l,n,o){const r=se(l,t,`[data-oj-table-focusable='${t}']`);if(("multiple"===o?.row&&"data"===n.type||"multiple"===o?.column&&("header"===n.type||"footer"===n.type))&&r?.type===n.type){const l=ce(e,t,n),o=ce(e,t,r);if(null!=l&&null!=o){if("data"===r?.type)return null!=re(e,t,l.parentElement)&&null!=re(e,t,o.parentElement);if("header"===r?.type||"footer"===r?.type){const n="header"===r?.type;return null!=ie(e,t,l,n)&&null!=ie(e,t,o,n)}}}return!1}(e.current,t,i,f,S),E.current=n),n||function(e,t,l,n,o,r,a,i,s){if(null!=i&&(null==r.current.key&&qe(e,t,l,n,r,a),null!=r.current.key)){const n=e.querySelector(`[data-oj-table-inner-table='${t}']`);if(null!=n){const e=n.getBoundingClientRect(),t=a?e.right-l.clientX:l.clientX-e.left,c=[];for(let e=0;e<i.length;e++){const t=i[e];c.push(t)}return r.current={isResizing:!0,isResizeHover:!0,key:r.current.key,startX:t,delta:0,fullColumnWidths:c,ignoreClick:r.current.ignoreClick},null!=s&&s({key:r.current.key,delta:0,allColumnWidths:o}),!0}}return!1}(e.current,t,l,r,a,s,o,d,y)&&(s.current.ignoreClick=!0)}}),[e,t,r,a,s,o,f,S,T,d,y]),G=l.useCallback((l=>{null!=e.current&&Be(e.current,t,l,a,s,o,b)}),[e,t,a,s,o,b]),X=l.useCallback((l=>{null!=e.current&&function(e,t,l){if(!l.current.isResizing){const n=e.querySelector(`[data-oj-table-header-row='${t}']`);null!=n&&(n.style.cursor=""),l.current.isResizeHover=!1}}(e.current,t,s)}),[e,t,s]),N=l.useCallback((l=>{null!=e.current&&function(e,t,l,n,o,r,a){o.current.isResizing&&0===l.buttons&&Be(e,t,l,n,o,r,a)}(e.current,t,l,a,s,o,b)}),[e,t,a,s,o,b]),Y=l.useCallback((l=>{let o=!1;const a=H.getClientHints().platform,i=l.target;null!=e.current&&(null==T||s.current.ignoreClick||(null!=f&&l.shiftKey&&(o=function(e,t,l,n,o,r,a,i,s){const c=se(n,t,`[data-oj-table-focusable='${t}']`),u=ce(e,t,o),d=ce(e,t,c);if(null!=u&&null!=d&&("multiple"===i?.row&&"data"===c?.type||"multiple"===i?.column&&("header"===c?.type||"footer"===c?.type))&&c?.type===o.type){let o,y,b;const f="data"===c?.type;if(f)b=d.parentElement,o=re(e,t,u.parentElement),y=re(e,t,b);else if("header"===c?.type||"footer"===c?.type){const l="header"===c?.type;b=d,o=ie(e,t,u,l),y=ie(e,t,d,l)}if(null!=o&&null!=y)return r.current=b,$e(e,t,l,n,o,y,f,a,i,s),!0}return!1}(e.current,t,r,i,f,K,T,S,h)),o||ze(e.current,t,r,i,("mac"===a?l.metaKey:l.ctrlKey)||k.current,T,S,h)),null!=p&&null!=n&&Se(e.current,t,n,p,i)&&l.stopPropagation()),s.current.ignoreClick=!1}),[e,t,r,n,s,K,f,S,h,T,p]),_=l.useCallback((l=>{const a=H.getClientHints().platform,s={" ":function(o){null!=e.current&&(null!=f&&(P||null==T||ze(e.current,t,r,ce(o,t,f),!0,T,S,h),null!=p&&null!=n&&Se(e.current,t,n,p,l.target,f)&&l.stopPropagation()),l.preventDefault())},Enter:function(){null!=e.current&&(null!=f&&(null!=p&&null!=n&&"data"===f.type&&Se(e.current,t,n,p,l.target,f)||!P&&null!=C&&"header"===f.type&&function(e,t,l,n){for(const o of e)if(o.key===t){if("enabled"===o.value.sortable){let e;if(null!=n)for(const t of n)if(t.key===o.key){e=t.sortDirection;break}return l([{key:t,sortDirection:"ascending"===e?"descending":"ascending"}]),!0}break}return!1}(r,f.columnKey,C,w))&&l.stopPropagation(),l.preventDefault())},ArrowUp:function(n){null!=e.current&&(P||null==f||null==x||("data"===f.type&&l.shiftKey&&null!=T&&"multiple"===S?.row?We(e.current,t,r,i,n,!0,f,K,T,o,d,S,h):Ve(n,t,r,i,f,x,!0,o,d)),l.preventDefault())},ArrowDown:function(n){null!=e.current&&(P||null==f||null==x||("data"===f.type&&l.shiftKey&&null!=T&&"multiple"===S?.row?We(e.current,t,r,i,n,!1,f,K,T,o,d,S,h):Ve(n,t,r,i,f,x,!1,o,d)),l.preventDefault())},ArrowLeft:function(n){null!=e.current&&(P||null==f||null==x||("header"!==f.type&&"footer"!==f.type||!l.shiftKey||null==T||"multiple"!==S?.column?Fe(n,t,r,i,f,x,!o,o,d):We(e.current,t,r,i,n,!0,f,K,T,o,d,S,h)),l.preventDefault())},ArrowRight:function(n){null!=e.current&&(P||null==f||null==x||("header"!==f.type&&"footer"!==f.type||!l.shiftKey||null==T||"multiple"!==S?.column?Fe(n,t,r,i,f,x,o,o,d):We(e.current,t,r,i,n,!1,f,K,T,o,d,S,h)),l.preventDefault())},PageUp:function(e){P||null==f||null==x||De(e,t,r,i,f,x,!0,o,d),l.preventDefault()},PageDown:function(e){P||null==f||null==x||De(e,t,r,i,f,x,!1,o,d),l.preventDefault()},Home:function(e){P||null==f||null==x||Pe(e,t,r,i,f,x,!0,"mac"===a?l.metaKey:l.ctrlKey,o,d),l.preventDefault()},End:function(e){P||null==f||null==x||Pe(e,t,r,i,f,x,!1,"mac"===a?l.metaKey:l.ctrlKey,o,d),l.preventDefault()}};Object.keys(s).includes(l.key)&&null!=e.current&&s[l.key](e.current)}),[e,t,n,o,P,r,i,K,d,f,x,S,h,T,p,w,C]),O=l.useCallback((()=>{null!=e.current&&null!=d&&Te(e.current,t,o,r,d,c,e.current.scrollLeft)}),[e,t,o,r,c,d]);return{interactionManagerProps:V.mergeProps(D,$,{onBlur:W,onFocus:q,onPointerMove:B,onPointerDown:M,onPointerUp:G,onPointerLeave:X,onPointerEnter:N,onClick:Y,onKeyDown:_,onScroll:O}),onTableSelectionChange:T,showFocusRing:z,isCurrentTabbableCell:j,getCurrentTabbableCell:F,setCurrentTabbableCell:L}}function Ge(e,t,l,n,o,r,a){if(l)return function(e,t,l){const n=1,o=100,r=void 0;let a=!1,i=0,s=0,c=0;const u=[],d=[],y=[],b=[],f=[];for(let e=0;e<t.length;e++){const m=t[e];let S=m.value.minWidth;(null==S||S<=0)&&(S=o);let h=m.value.maxWidth;(null==h||h<S)&&(h=r),u.push(h);let g=m.value.weight;(null==g||g<1)&&(g=n),d.push(g);const p=null!=l?l[m.key]:void 0;null!=p?(s+=p,c+=p,y.push(p),b.push(p),f.push(p)):(a=!0,c+=S,i+=g,y.push(void 0),b.push(S),f.push(S))}a&&c<e&&function(e,t,l,n,o,r,a,i,s){let c=!0;for(;c;){c=!1,Ye(e,t,l,n,o,r,i,s);let u=0;for(let t=0;t<e.length;t++){if(null==o[t]){const e=a[t];null!=e&&i[t]>e&&(c=!0,o[t]=e,n+=e,l-=r[t],i[t]=e,s[t]=e)}u+=i[t]}c=c&&u<t}}(t,e,i,s,y,d,u,b,f);return _e(t,b)}(o,r,a);let i=Xe(e,t,n,o,r,a);if(-1===o){let l=0;const s=[];for(let e=0;e<r.length;e++){const t=i[r[e].key];s.push(t),l+=t}!function(e,t,l,n){const o=e.querySelectorAll(`[data-oj-table-col='${t}']`);for(let e=0;e<o.length;e++){o[e].style.width=`${l[e]}px`}const r=e.querySelectorAll(`[data-oj-table-inner-table='${t}']`)[0];r.style.width=`${n}px`,r.style.tableLayout="fixed"}(e,t,s,l),o=e.scrollWidth,Math.abs(l-o)>1&&(i=Xe(e,t,n,o,r,a))}return i}function Xe(e,t,l,n,o,r){let a=!1;const i=[],s=[],c=[],u=[];for(let e=0;e<o.length;e++){const t=o[e];let l=t.value.minWidth;(null==l||l<=0)&&(l=undefined),i.push(l);let n=t.value.maxWidth;(null==n||n<(null!=l?l:0))&&(n=undefined),s.push(n);const d=null!=r?r[t.key]:void 0;null!=d?(c.push(d),u[e]=d):(a=!0,c.push(void 0))}if(a){let r=0,a=0,d=0,y=0,b=0;const f=l.current,m=[],S=[],h=[];if(null!=f)for(let e=0;e<o.length;e++)m.push(f.minWidths[o[e].key]),S.push(f.weightWidths[o[e].key]);else{l.current={minWidths:{},weightWidths:{}};const n=e.querySelectorAll(`[data-oj-table-header-cell='${t}']`);for(let e=0;e<n.length;e++){const t=n[e].getBoundingClientRect().width;S.push(t),l.current.weightWidths[o[e].key]=t}e.classList.remove(P.tableStyles.disableWrapping);for(let e=0;e<n.length;e++){const t=n[e].getBoundingClientRect().width;m.push(t),l.current.minWidths[o[e].key]=t}}for(let e=0;e<m.length;e++){const t=c[e];if(null==t){let t;const l=m[e],n=i[e],o=s[e];t=null!=n&&n>=l?n:null!=o&&l>=o?o:l,a+=t;const r=null!=n&&n>=S[e]?n:S[e];S[e]=r,d+=null!=o&&o<=r?o:r,y+=r,b+=r-t,u[e]=t,h.push(t)}else r+=t,a+=t,d+=t,h.push(t)}-1===n&&(n=d),a<n&&function(e,t,l,n,o,r,a,i,s,c,u,d){let y=!0;for(;y;){y=!1,l>t?Ne(e,t-r,n,s,i,u,d):Ye(e,t,o,a,i,s,u,d);let b=0;for(let t=0;t<e.length;t++){if(null==i[t]){const e=c[t];null!=e&&u[t]>e&&(y=!0,i[t]=e,a+=e,r+=e-d[t],o-=s[t],u[t]=e,d[t]=e)}b+=u[t]}y=y&&b<t}}(o,n,d,b,y,a,r,c,S,s,u,h)}return _e(o,u)}function Ne(e,t,l,n,o,r,a){if(t>0){let i=t,s=l;for(let t=0;t<e.length;t++)if(s>0&&null==o[t]){const e=n[t]-a[t],l=e/s*i;r[t]=l+a[t],i-=l,s-=e}}}function Ye(e,t,l,n,o,r,a,i){const s=[];let c=!0;for(;c;){c=!1;let u=l,d=t-n;if(d>0)for(let t=0;t<e.length;t++)if(u>0&&null==o[t]&&null==s[t]){const e=r[t],o=e/u*d,y=i[t];if(o<y){s[t]=y,n+=y,a[t]=y,c=!0,l-=e;break}a[t]=o,d-=o,u-=e}}}function _e(e,t){const l={};for(let n=0;n<e.length;n++)l[e[n].key]=t[n];return l}const Oe={row:{all:!1,keys:new Set},column:{all:!1,keys:new Set}},Ue=n.forwardRef((function({"aria-label":e,"aria-labelledby":n,getAccessibleRowHeaders:s,columns:u,columnOrder:d,columnWidths:y,layout:b="contents",data:f,getRowKey:m,hasMore:h=!1,onLoadMore:g=(()=>{}),currentCell:p,onCurrentCellChange:w,currentRowVariant:C,gridlines:R,selectionMode:v,selected:k=Oe,onSelectionChange:E,onRowAction:K,sortCriterion:x,onSortCriterionChange:T,horizontalScrollPositionOverride:A,verticalScrollPositionOverride:I,columnResizingIndicator:H,onColumnResizing:V,onColumnResize:D,noDataRenderer:F,testId:L},M){const G=a.useId(),X=l.useRef(null),N=l.useRef({isInitialRender:!0}),[Y,_]=l.useState(),[U,Q]=l.useState(),Z=l.useRef(!1),le=l.useRef(),ne=l.useRef(),oe=l.useRef(),re=l.useRef({start:void 0,end:void 0}),ae=l.useRef({isResizing:!1,isResizeHover:!1,ignoreClick:!1}),{direction:ie}=i.useUser(),se="rtl"===ie,ue=q.useTestId(L),de=l.useMemo((()=>{const e=[];if(null!=d)for(const t of d)null!=u[t]&&e.push({key:t,value:u[t]});else for(const[t,l]of Object.entries(u))e.push({key:t,value:l});return e}),[d,u]);let ye=!1;const be=[];if(null!=Y)for(let e=0;e<de.length;e++){const t=de[e].key,l=Y[t],n=null!=y?y[t]:void 0;if(null==l||null!=n&&n!==l){ye=!0;break}be.push(l)}else ye=!0;const fe={isLayoutRequired:ye,columnWidthsArray:ye?void 0:be};l.useImperativeHandle(M,(()=>({getHorizontalScrollPosition:()=>fe.isLayoutRequired?{}:ve(X.current,de,fe.columnWidthsArray),getVerticalScrollPosition:()=>fe.isLayoutRequired?{}:ke(X.current,G)})),[G,de,fe.isLayoutRequired,fe.columnWidthsArray]);const me=l.useCallback((e=>{let t=!1;if("noData"===e.type)t=null!=F;else for(const l of de)if(l.key===e.columnKey){"data"===e.type?t=null!=l.value.renderer:"header"===e.type?t=null!=l.value.headerRenderer:"footer"===e.type&&(t=null!=l.value.footerRenderer);break}return t}),[de,F]),{interactionManagerProps:Se,onTableSelectionChange:he,showFocusRing:ge,isCurrentTabbableCell:pe,getCurrentTabbableCell:we,setCurrentTabbableCell:Ee}=Me({outerTableRef:X,tableId:G,data:f,isRtl:se,columnsArray:de,appliedColumnWidths:Y,sizingInfoRef:N,resizeInfoRef:ae,currentStickyEdgesRef:re,cellHasRenderer:me,fullColumnWidths:fe.isLayoutRequired?void 0:fe.columnWidthsArray,onColumnResizing:V,onColumnResize:D,currentCell:p,onCurrentCellChange:w,selectionMode:v,selected:k,onSelectionChange:E,onRowAction:K,sortCriterion:x,onSortCriterionChange:T});l.useEffect((()=>{null!=X.current&&null!=we()&&$.getActiveElement(X.current)===$.getBodyElement(X.current)&&X.current.focus({preventScroll:!0})})),l.useLayoutEffect((()=>{le.current=void 0,_(void 0)}),[u]),l.useLayoutEffect((()=>{const e=X.current;if(null!=e&&!N.current.isInitialRender&&fe.isLayoutRequired){const t="fixed"===b?N.current.boxWidth-N.current.defaultScrollbarWidth:-1,l=Ge(e,G,"fixed"===b,le,t,de,y);_(l)}}),[G,de,y,b,fe.isLayoutRequired]);const je=l.useRef();je.current=e=>{if(null!=X.current){let t;const l=e.contentBoxSize[0].inlineSize,n=e.contentBoxSize[0].blockSize,o=e.borderBoxSize[0].inlineSize,r=e.borderBoxSize[0].blockSize;N.current.isInitialRender?(t="fixed"===b?l:-1,N.current={isInitialRender:!1,contentWidth:l,boxWidth:o,contentHeight:n,boxHeight:r,defaultScrollbarWidth:o-l,defaultScrollbarHeight:r-n}):(t=Z.current?l:o-N.current.defaultScrollbarWidth,N.current.contentWidth=l,N.current.boxWidth=o,N.current.contentHeight=n,N.current.boxHeight=r);const a=Ge(X.current,G,"fixed"===b,le,t,de,y);_(a),U!==n&&Q(n)}};const Ae=l.useCallback((e=>{je.current(e)}),[]);W.useResizeObserver({ref:X,callback:Ae}),l.useLayoutEffect((()=>{if(null!=X.current&&!N.current.isInitialRender&&null!=U){const e=X.current.querySelector(`[data-oj-table-inner-table='${G}']`);if(null!=e){const t=U<e.getBoundingClientRect().height;Z.current!==t&&(Z.current=t,t?(X.current.classList.remove(P.tableStyles.noVerticalScroll),X.current.classList.add(P.tableStyles.verticalScroll)):(X.current.classList.remove(P.tableStyles.verticalScroll),X.current.classList.add(P.tableStyles.noVerticalScroll)))}}}),[G,U,f,F,Y]),l.useLayoutEffect((()=>{ne.current===A||fe.isLayoutRequired||(Ce(X.current,de,fe.columnWidthsArray,se,A),ne.current=A)}),[G,de,fe.isLayoutRequired,fe.columnWidthsArray,A,se]),l.useLayoutEffect((()=>{oe.current===I||fe.isLayoutRequired||(Re(X.current,G,I),oe.current=I)}),[G,fe.isLayoutRequired,I]),l.useLayoutEffect((()=>{null==X.current||fe.isLayoutRequired||function(e,t,l,n,o,r,a){let i,s=0,c=0;const u=Ke(n,!0);for(let n=0;n<u.length;n++)i=u[n],xe(e,t,l,i,s,!0),s+=o[i];const d=Ke(n,!1);for(let n=d.length-1;n>-1;n--)i=d[n],xe(e,t,l,i,c,!1),c+=o[i];Te(e,t,l,n,o,r,void 0,a)}(X.current,G,se,de,fe.columnWidthsArray,re,!0)}),[G,de,fe.isLayoutRequired,fe.columnWidthsArray,se]);const{classes:He}=S.useComponentTheme(z.TableRedwoodTheme,{forceScroll:N.current.isInitialRender?"isForceScroll":"notForceScroll",verticalScroll:Z.current?"isVerticalScroll":"notVerticalScroll",disableWrapping:"contents"===b&&void 0===le.current?"isDisableWrapping":"notDisableWrapping"}),Ve=o.classNames([He]),De=o.classNames([c.innerTableStyles.base]),Fe=o.classNames([c.focusTrackerStyles.base]);l.useEffect((()=>{if(null!=X.current&&null!=p){const e=ce(X.current,G,p);null!=e&&X.current.setAttribute("aria-activedescendant",e.id)}}),[G,p]);const Le=de.some((e=>null!=e.value.footerRenderer||null!=e.value.footerText)),Pe=null==f?void 0:h?-1:f.length+(Le?2:1),ze=re.current?.start,$e=re.current?.end,We="visible"===R?.vertical,qe="hidden"!==R?.horizontal,Be="single"===v?.row||"multiple"===v?.row,Xe="single"===v?.column||"multiple"===v?.column,Ne=l.useCallback((e=>{r.handleEnterActionableMode(e.hasFocusWithin,e.tabbableElements,Ee)}),[Ee]),Ye=l.useCallback((e=>{r.handleWrapActionableFocus(!0,e.tabbableElements,Ee)}),[Ee]),_e=l.useCallback((e=>{r.handleWrapActionableFocus(!1,e.tabbableElements,Ee)}),[Ee]);return t.jsx("div",{...ue,ref:X,"aria-colcount":de.length,"aria-label":e,"aria-labelledby":n,"aria-rowcount":Pe,..."multiple"===v?.column||"multiple"===v?.row?{"aria-multiselectable":!0}:{},class:Ve,role:"grid",tabIndex:0,...Se,children:t.jsxs(j.FocusTracker,{styleClass:Fe,isDisabled:pe(void 0),onFocusStartEdge:Ye,onFocusEndEdge:_e,onStartTracking:Ne,children:[t.jsxs("table",{class:De,role:"presentation",style:(()=>{let e="",t="";if(fe.isLayoutRequired)e="contents"!==b?"width: 100%;":"width: 1px";else{let t=0;for(let e=0;e<fe.columnWidthsArray.length;e++)t+=fe.columnWidthsArray[e];e=`width: ${t}px; table-layout: fixed;`}return null!=U&&(t=null==f||0===f.length?`min-height: ${U}px;`:""),`${e}${t}`})(),"data-oj-table-inner-table":G,children:[t.jsx(B,{...(()=>{let e;if(fe.isLayoutRequired){e=[];for(let t=0;t<de.length;t++)e[t]=void 0}else e=fe.columnWidthsArray;return{tableId:G,columnWidthsArray:e}})()}),t.jsx(J,{...(()=>{const e=we(),t="header"===e?.type;return{tableId:G,columnsArray:de,hasVerticalGridlines:We,focusedKey:"header"===p?.type?p.columnKey:void 0,selectedColumnKeys:k.column,selectedRowKeys:k.row,isColumnSelectionEnabled:Xe,isRowSelectionEnabled:Be,containsTabbableCell:t,onSelectionChange:he,sortCriterion:x,onSortCriterionChange:T,showFocusRing:ge,startStickyEdge:ze,endStickyEdge:$e,isResizeHover:ae.current.isResizeHover,isRtl:se}})()}),t.jsx(O,{tableId:G,data:f,columnsArray:de,getAccessibleRowHeaders:s,hasVerticalGridlines:We,hasHorizontalGridlines:qe,selected:k,isRowSelectionEnabled:Be,isSingleRowSelectionEnabled:"single"===v?.row,currentCell:p,currentRowVariant:C,getCurrentTabbableCell:we,showFocusRing:ge,getRowKey:m,hasMore:h,onLoadMore:g,noDataRenderer:F,viewportConfig:Ie(X),onSelectionChange:he,startStickyEdge:ze,endStickyEdge:$e,isRtl:se}),t.jsx(ee,{...(()=>{const e=we(),t="footer"===e?.type;return{tableId:G,isRendered:Le,columnsArray:de,hasVerticalGridlines:We,focusedKey:"footer"===p?.type?p.columnKey:void 0,selectedKeys:k.column,isColumnSelectionEnabled:Xe,containsTabbableCell:t,showFocusRing:ge,startStickyEdge:ze,endStickyEdge:$e,isRtl:se}})()})]}),(()=>{if(null!=H&&!fe.isLayoutRequired){let e=0;for(let t=0;t<de.length;t++)if(e+=fe.columnWidthsArray[t],de[t].key===H.key){null!=H.delta&&(e+=H.delta);break}return t.jsx(te,{position:e,isRtl:se})}})()]})})}));e.Table=Ue}));
//# sourceMappingURL=Table-662e8b90.js.map
