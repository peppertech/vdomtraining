define(['exports', 'preact/jsx-runtime', 'preact/compat', 'preact/hooks', './Calendar-9b725f49', './HiddenAccessible-037ef42d', './IconButton-81c8463f', './clientHints-030d25aa', './FormFieldContext-3c44aaaa', './logger-0f873e29', './TabbableModeContext-a9c97640', './useTranslationBundle-516b1b83', 'css!./UserAssistanceStyles.styles.css', 'module', './UNSAFE_UserAssistance/themes/redwood/UserAssistanceVariants.css', './InlineUserAssistance-2a480664', './Flex-56ecdf4c', 'css!./MessageBannerStyles.styles.css', 'module', './UNSAFE_MessageBanner/themes/redwood/MessageBannerVariants.css', 'preact', './LayerHost-e95c5f30', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3b34c2bc', 'css!./IconStyle.styles.css', 'css!./MessageStyles.styles.css', './MessageFormattingUtils-2e19d8de', './TransitionGroup-3b9d81b6', './MessagesContext-602a69a2', 'css!./HiddenAccessibleStyles.styles.css', 'css!./ComponentMessageStyles.styles.css', 'module', './UNSAFE_ComponentMessage/themes/redwood/ComponentMessageVariants.css', './Popup-956e6d7d', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./LabelStyles.styles.css', 'module', './UNSAFE_Label/themes/redwood/LabelVariants.css', './InputGroupContext-372087af', 'module', './UNSAFE_Popup/themes/redwood/PopupVariants.css', './UNSAFE_InputDatePicker/themes/InputDatePickerDropdownStyles.css', './Sheet-e6308643', './DatePicker-d7802b3e', './SectionedContent-6031f8f7', './stringUtils-0ae982c2', './FormContext-5130e198', './useFormContext-30acdd33', './useId-c9578d26', './getFormatParse-c1655d39', './maskUtils-550b6ac2', './calendarDateUtils-ee8bb928', './InputDateMask-9aba967d'], (function(e,s,t,a,n,o,r,i,l,d,c,u,m,p,h,y,f,b,C,D,S,k,x,A,v,g,F,T,V,I,w,P,U,M,R,j,_,B,H,E,N,L,O,Y,Z,W,z,G,q,J,K,Q,X,$,ee){"use strict";const se=({anchorRef:e,assistiveText:t,dayFormatter:n,daysOutsideMonth:o,helpSourceLink:r,helpSourceText:i,isDisabled:d,isOpen:c,isReadonly:m,label:p,onClose:h,onCommit:f,max:b,messages:C,min:D,monthAndYearPicker:S,testId:k,todayButton:x,todayTimeZone:A,userAssistanceDensity:v,value:g,weekDisplay:F})=>{const[T,V]=a.useState(!1),[I,w]=a.useState(c),P=a.useCallback((e=>{V(e.placement.startsWith("top"))}),[]);I!==c&&(w(c),c||V(!1));const U=te(),{datePicker_label:M}=u.useTranslationBundle("@oracle/oraclejet-preact"),R=M(),j=s.jsx(W.DatePicker,{dayFormatter:n,daysOutsideMonth:o,height:U?void 0:"auto",onCommit:f,max:b,min:D,maxWidth:U?"100%":void 0,width:"100%",monthAndYearPicker:S,testId:k,todayTimeZone:A,todayButton:x,value:g,weekDisplay:F}),_=!c||T&&!U||d||m||!(t||r||C&&C.length>0)||"efficient"!==v&&"reflow"!==v?void 0:s.jsx(l.FormFieldContext.Provider,{value:{isFocused:!0},children:s.jsx("div",{class:Y.userAssistanceStyles,children:s.jsx(y.InlineUserAssistance,{assistiveText:t,fieldLabel:p,helpSourceLink:r,helpSourceText:i,messages:C,userAssistanceDensity:v})})}),B=k?k+(U?"_sheet":"_dropdown"):void 0,H=s.jsx("div",{class:Y.dropdownStyles,children:s.jsx(z.SectionedContent,{"aria-label":R,footer:_,hasFocusTrap:!0,main:j,role:"dialog",testId:B})});return U?s.jsx(Z.Sheet,{initialFocus:"firstFocusable",isOpen:c,onClose:h,children:s.jsx(z.SectionedContent,{"aria-label":R,footer:_,hasFocusTrap:!0,main:j,role:"dialog",testId:B})}):s.jsx(z.StickyPositioningDropdown,{anchorRef:e,initialFocus:"firstFocusable",isOpen:c,onClose:h,onPosition:P,sizeOptions:{isMaxWidthAdjusted:!1,isMaxHeightAdjusted:!0},children:H})},te=()=>"phone"===i.getClientHints().deviceType,ae=e=>e&&$.isCompleteCalendarDate(e)?e:void 0,ne=(e,s)=>{switch(s.type){case"dateChanged":return{...e,dateValue:s.data,completeDateValue:ae(s.data)};case"dateSelected":return{...e,dateValue:s.data,completeDateValue:s.data};case"reset":return{completeDateValue:ae(s.data),dateValue:s.data};default:return e}},oe=({onCommit:e,onInput:s,value:t})=>{const[n,o]=a.useState(!1),r=a.useRef(null),i=a.useRef(null),l=a.useRef(!1),d=a.useRef(),c=a.useRef(t),u=a.useRef(t),m=a.useRef(t),p=a.useRef(!1),{state:h,dispatch:y}=(({value:e})=>{const[s,t]=a.useReducer(ne,{completeDateValue:ae(e),dateValue:e});return{state:s,dispatch:t}})({value:t});X.calendarDatesAreDifferent(m.current,t)&&(m.current=t,X.calendarDatesAreDifferent(t,h.dateValue)&&(y({type:"reset",data:t}),u.current=t,c.current=t)),a.useEffect((()=>{X.calendarDatesAreDifferent(h.dateValue,u.current)&&(s({previousValue:u.current,value:h.dateValue}),u.current=h.dateValue),p.current&&X.calendarDatesAreDifferent(h.dateValue,c.current)&&(e?.({previousValue:c.current,value:h.dateValue}),c.current=h.dateValue,p.current=!1)}),[e,s,h.dateValue]);const f=a.useCallback((e=>{y({type:"dateChanged",data:e.value})}),[y]),b=a.useCallback((()=>{X.calendarDatesAreDifferent(c.current,h.dateValue)&&(e?.({value:h.dateValue,previousValue:c.current}),c.current=h.dateValue)}),[e,h.dateValue]),C=a.useCallback((()=>{l.current||o((e=>!e)),l.current=!1}),[]),D=a.useCallback((e=>{"outsideMousedown"===e.reason?(l.current=!0,clearTimeout(d.current),d.current=setTimeout((()=>{l.current=!1}),200)):"dismissed"!==e.reason&&"keyboardDismissed"!==e.reason||r.current?.focus(),o(!1)}),[]);return{calendarIconActionHandler:C,datePickerCommitHandler:a.useCallback((e=>{r.current?.focus(),p.current=!0,y({type:"dateSelected",data:e.value}),o(!1)}),[y]),dropdownCloseHandler:D,completeDateValue:h.completeDateValue,dateValue:h.dateValue,iconRef:r,isOpen:n,maskCommitHandler:b,maskInputHandler:f,maskRef:i}},re=t.forwardRef((({"aria-describedby":e,assistiveText:t,dayFormatter:i,daysOutsideMonth:l,helpSourceLink:d,helpSourceText:c,isDisabled:m,isReadonly:p,label:h,max:y,messages:f,min:b,monthAndYearPicker:C,todayTimeZone:D,todayButton:S,value:k,onCommit:x,onInput:A,testId:v,userAssistanceDensity:g,weekDisplay:F,...T},V)=>{const{calendarIconActionHandler:I,datePickerCommitHandler:w,completeDateValue:P,dateValue:U,dropdownCloseHandler:M,iconRef:R,isOpen:j,maskCommitHandler:_,maskInputHandler:B,maskRef:H}=oe({onCommit:x,onInput:A,value:k}),E=a.useRef(null),{inputDatePicker_selectDate:N,inputDatePicker_instruction:L}=u.useTranslationBundle("@oracle/oraclejet-preact"),O=N(),{userAssistanceDensity:Y}=J.useFormContext(),Z=g??Y;a.useImperativeHandle(V,(()=>({focus:()=>{H.current?.focus()},blur:()=>{H.current?.blur()}})));const W=K.useId(),z=L(),q=m||p?void 0:s.jsx(o.HiddenAccessible,{id:W,isHidden:!0,children:z}),Q=m||p?e:G.merge([e,W]),X=s.jsx(r.IconButton,{"aria-haspopup":"dialog","aria-label":O,isDisabled:m,ref:R,size:"sm",testId:v?v+"_calendarIcon":void 0,variant:"ghost",onAction:I,children:s.jsx(n.SvgCalendar,{})}),$=j;return s.jsxs(s.Fragment,{children:[s.jsx(ee.InputDateMaskContext.Provider,{value:{isDropdownOpen:j,isInputDatePickerParent:!0},children:s.jsx(ee.InputDateMask,{"aria-describedby":Q,assistiveText:t,endContent:X,helpSourceLink:d,helpSourceText:c,isDisabled:m,isReadonly:p,label:h,onCommit:_,onInput:B,mainFieldRef:E,messages:f,testId:v,ref:H,userAssistanceDensity:g,value:U,...T})}),q,$&&s.jsx(se,{anchorRef:E,assistiveText:t,dayFormatter:i,daysOutsideMonth:l,helpSourceLink:d,helpSourceText:c,isDisabled:m,isReadonly:p,isOpen:j,label:h,onClose:M,onCommit:w,max:y,messages:f,min:b,monthAndYearPicker:C,testId:v?v+"_datePicker":void 0,todayTimeZone:D,todayButton:S,userAssistanceDensity:Z,value:P,weekDisplay:F})]})}));e.InputDatePicker=re}));
//# sourceMappingURL=InputDatePicker-6167ff45.js.map
