{"version":3,"file":"useSelectCommon-fabc27f4.js","sources":["../../src/PRIVATE_SelectCommon/itemTextUtils.ts","../../src/PRIVATE_SelectCommon/DefaultList.tsx","../../src/PRIVATE_SelectCommon/eventUtils.ts","../../src/PRIVATE_SelectCommon/Dropdown.tsx","../../src/PRIVATE_SelectCommon/DropdownArrow.tsx","../../src/PRIVATE_SelectCommon/MobileDropdown.tsx","../../src/PRIVATE_SelectCommon/SelectMobileFieldInput.tsx","../../src/PRIVATE_SelectCommon/DropdownList.tsx","../../src/PRIVATE_SelectCommon/DropdownUserAssistance.tsx","../../src/PRIVATE_SelectCommon/EmptyResults.tsx","../../src/PRIVATE_SelectCommon/LinkItem.tsx","../../src/PRIVATE_SelectCommon/SelectMobileDropdown.tsx","../../src/PRIVATE_SelectCommon/selectUtils.ts","../../src/PRIVATE_SelectCommon/useSelectCommon.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { Item } from '../utils/UNSAFE_dataProvider';\nimport { error } from '../utils/UNSAFE_logger';\nimport { ItemTextFunctionType, ItemTextType } from '../utils/UNSAFE_selectUtils';\n\nexport function renderItemText<K, D>(item: Item<K, D>, itemText: ItemTextType<K, D>) {\n  // if item-text is a string and the data has the specified field, return it;\n  // otherwise log an error\n  if (typeof itemText === 'string') {\n    if ((item.data as any)?.hasOwnProperty(itemText)) {\n      const retData = item.data[itemText];\n      return String(retData);\n    }\n    error('SelectMultiple: itemText specifies field that does not exist: ' + itemText);\n    // return undefined if the field doesn't exist\n    return undefined;\n  }\n  // if item-text is a function, call it to create a display label\n  return (itemText as ItemTextFunctionType<K, D>)(item);\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren, ComponentProps } from 'preact';\nimport { useCallback, useMemo } from 'preact/hooks';\nimport {\n  CurrentKeyDetail,\n  DataState,\n  ItemActionDetail,\n  ListItemRendererContext,\n  Metadata,\n  SelectionDetail\n} from '../UNSAFE_Collection';\nimport { HighlightText } from '../UNSAFE_HighlightText';\nimport { List, SkeletonContainer } from '../PRIVATE_List';\nimport { Flex } from '../UNSAFE_Flex';\nimport { Skeleton } from '../UNSAFE_Skeleton';\nimport { Keys } from '../utils/UNSAFE_keys';\nimport { ItemTextType } from '../utils/UNSAFE_selectUtils';\nimport { renderItemText } from './itemTextUtils';\nimport { dropdownStyles } from './themes/dropdownStyles.css';\n\ntype PickedPropsFromList = Pick<\n  ComponentProps<typeof List>,\n  'aria-label' | 'currentItemVariant' | 'selectionMode'\n>;\n\n// pick the props from the ListItemContext instead of extending it directly so that we\n// don't automatically expose any new props that may be added to it\ntype PickedPropsFromListItemContext<K, D> = Pick<\n  ListItemRendererContext<K, D>,\n  'data' | 'index' | 'selector'\n>;\ntype ItemRendererSelectionDetail<K> = {\n  value: Set<K>;\n  target: EventTarget | null;\n};\ntype ItemRendererMetadata<K> = Pick<Metadata<K>, 'key' | 'suggestion'>;\ntype ItemRendererProps<K, D> = PickedPropsFromListItemContext<K, D> & {\n  metadata: ItemRendererMetadata<K>;\n  searchText?: string;\n  selectedKeys?: Set<K>;\n  onSelectionChange: (detail: ItemRendererSelectionDetail<K>) => void;\n};\n\ntype Props<K extends string | number, D extends Record<string, any>> = PickedPropsFromList & {\n  itemRenderer?: (itemRendererProps: ItemRendererProps<K, D>) => ComponentChildren;\n  itemText: ItemTextType<K, D>;\n  // props from List that we constrain or unconstrain\n  currentKey?: K;\n  data?: DataState<K, D> | null;\n  onCurrentKeyChange?: (detail: CurrentKeyDetail<K>) => void;\n  onItemAction?: (detail: ItemActionDetail<K, D>) => void;\n  onLoadRange?: ComponentProps<typeof List>['onLoadRange'];\n  onSelectionChange?: (detail: SelectionDetail<K>) => void;\n  searchText?: string;\n  selectedKeys?: Set<K>;\n};\n\nconst noOp = () => {};\n\nexport function DefaultList<K extends string | number, D extends Record<string, any>>({\n  'aria-label': ariaLabel,\n  currentItemVariant,\n  currentKey,\n  data,\n  itemRenderer,\n  itemText,\n  onCurrentKeyChange,\n  onItemAction,\n  onLoadRange = noOp,\n  onSelectionChange,\n  searchText,\n  selectedKeys,\n  selectionMode\n}: Props<K, D>) {\n  const listItemRenderer = useCallback(\n    (listItemContext: ListItemRendererContext<K, D>) => {\n      // specify the listItemContext props that we want to expose individually instead of\n      // spreading the whole object so that we don't automatically include any new props that\n      // may be added to it\n      const itemRendererProps: ItemRendererProps<K, D> = {\n        data: listItemContext.data,\n        index: listItemContext.index,\n        metadata: listItemContext.metadata,\n        selector: listItemContext.selector,\n        searchText,\n        selectedKeys,\n        onSelectionChange: ({ target, value }) => {\n          onSelectionChange?.({\n            target,\n            value: { all: false, keys: value }\n          });\n        }\n      };\n      const itemContext = {\n        data: listItemContext.data,\n        key: listItemContext.metadata.key,\n        metadata: listItemContext.metadata\n      };\n      return itemRenderer ? (\n        itemRenderer(itemRendererProps)\n      ) : (\n        <Flex>\n          {listItemContext.selector && listItemContext.selector()}\n          <div class={dropdownStyles.item}>\n            <HighlightText matchText={searchText}>\n              {renderItemText(itemContext, itemText) as string}\n            </HighlightText>\n          </div>\n        </Flex>\n      );\n    },\n    [itemRenderer, itemText, onSelectionChange, searchText, selectedKeys]\n  );\n\n  const keys = useMemo(() => {\n    return { all: false, keys: selectedKeys ?? new Set<K>() };\n  }, [selectedKeys]) as Keys<K>;\n\n  return (\n    <List<K, D>\n      aria-label={ariaLabel}\n      allowTabbableMode={false}\n      currentItemVariant={currentItemVariant}\n      currentKey={currentKey}\n      data={data ?? null}\n      loadingIndicator={loadingIndicator}\n      onCurrentKeyChange={onCurrentKeyChange}\n      onItemAction={onItemAction}\n      onLoadRange={onLoadRange}\n      onSelectionChange={onSelectionChange}\n      role=\"listbox\"\n      selectedKeys={keys}\n      selectionMode={selectionMode}>\n      {(context: ListItemRendererContext<K, D>) => listItemRenderer(context)}\n    </List>\n  );\n}\n\n/**\n * Custom 3 Skeleton loader for select multiple\n * TODO: to remove this once  is solved\n */\nconst loadingIndicator = (\n  <SkeletonContainer minimumCount={3}>\n    {() => {\n      return (\n        <Flex height=\"12x\" align=\"center\">\n          <Skeleton height=\"4x\" />\n        </Flex>\n      );\n    }}\n  </SkeletonContainer>\n);\n","export const isSimpleClick = (event: MouseEvent) => {\n  return event.button === 0 && !event.ctrlKey;\n};\n\nexport const preventDefault = (event: Event) => {\n  event.preventDefault();\n};\n\nexport const preventDefaultForCurrentTarget = (event: MouseEvent) => {\n  if (event.currentTarget === event.target) {\n    event.preventDefault();\n  }\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren, ComponentProps } from 'preact';\nimport { MutableRef, useCallback, useState } from 'preact/hooks';\nimport { Floating, PositionData } from '../UNSAFE_Floating';\nimport { Layer } from '../UNSAFE_Layer';\nimport { isControlOrFunctionKey, KEYS } from '../utils/PRIVATE_keyboardUtils';\nimport { preventDefaultForCurrentTarget } from './eventUtils';\nimport { dropdownStyles } from './themes/dropdownStyles.css';\n//Once Dropdown is consumed this will be removed\nimport { useOutsideMousedown } from '../hooks/PRIVATE_useOutsideMousedown';\n\ntype FloatingProps = ComponentProps<typeof Floating>;\n\ntype Props = {\n  anchorRef: MutableRef<HTMLElement | null>;\n  children?: ComponentChildren;\n  dropdownRef: MutableRef<HTMLElement | null>;\n  id?: string;\n  isOpen?: boolean;\n  onAutoDismiss?: (event?: Event) => void;\n  onPosition?: FloatingProps['onPosition'];\n};\n\nconst DEFAULT_PLACEMENT = 'bottom-start';\n\n//TODO: Start consuming PRIVATE_Dropdown. JET-62565\nexport function Dropdown({\n  anchorRef,\n  children,\n  dropdownRef,\n  id,\n  isOpen,\n  onAutoDismiss,\n  onPosition\n}: Props) {\n  const [placement, setPlacement] = useState<FloatingProps['placement']>(DEFAULT_PLACEMENT);\n\n  const [prevIsOpen, setPrevIsOpen] = useState(isOpen);\n\n  if (prevIsOpen !== isOpen) {\n    // reset the placement to the default when the dropdown closes, not opens, so that it doesn't\n    // initially open in the previous position and then move to the default position on the\n    // rerender after the state is updated\n    if (!isOpen) {\n      setPlacement(DEFAULT_PLACEMENT);\n    }\n  }\n\n  const handlePosition = useCallback(\n    (positionData: PositionData) => {\n      // update the placement so that the dropdown stays where it is until there is a collision,\n      // i.e. it no longer fits, instead of letting it try to move back to the default position\n      // on every render\n      setPlacement(positionData.placement);\n\n      // call the callback that was passed in through props\n      onPosition?.(positionData);\n    },\n    [onPosition, setPlacement]\n  );\n\n  const handleAutoDismiss = useCallback(\n    (event: Event) => {\n      onAutoDismiss?.(event);\n    },\n    [onAutoDismiss]\n  );\n\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.defaultPrevented || isControlOrFunctionKey(event)) {\n        return;\n      }\n\n      switch (event.code) {\n        case KEYS.ESC:\n        case KEYS.TAB:\n          handleAutoDismiss(event);\n          break;\n      }\n    },\n    [handleAutoDismiss]\n  );\n\n  // use the mousedown event to be consistent with legacy JET and so that we're hiding the dropdown\n  // on the same event where focus will transfer\n  useOutsideMousedown({\n    isDisabled: !isOpen,\n    ref: [anchorRef, dropdownRef],\n    handler: handleAutoDismiss\n  });\n\n  // TODO: get dropdown y (mainAxis) offset from --oj-c-PRIVATE-DO-NOT-USE-private-core-global-dropdown-offset\n  const offsetValue = { mainAxis: 4, crossAxis: 0 };\n\n  const inlineStyle = isOpen\n    ? {\n        minWidth: `${anchorRef.current?.offsetWidth}px`\n      }\n    : {};\n\n  if (prevIsOpen !== isOpen) {\n    setPrevIsOpen(isOpen);\n  }\n\n  return !isOpen ? null : (\n    <Layer logicalParentRef={anchorRef}>\n      <Floating\n        anchorRef={anchorRef}\n        sizeOptions={{\n          isMaxHeightAdjusted: true,\n          maxHeightCeiling: 400\n        }}\n        ref={dropdownRef}\n        placement={placement}\n        offsetValue={offsetValue}\n        onPosition={handlePosition}>\n        <div\n          class={dropdownStyles.base}\n          id={id}\n          style={inlineStyle}\n          onKeyDown={handleKeyDown}\n          onMouseDown={preventDefaultForCurrentTarget}>\n          {children}\n        </div>\n      </Floating>\n    </Layer>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useCallback } from 'preact/hooks';\nimport { usePress } from '../hooks/UNSAFE_usePress';\nimport { DropdownArrowIcon } from '../PRIVATE_ThemedIcons/DropdownArrowIcon';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { dropdownStyles } from './themes/dropdownStyles.css';\nimport { useComponentTheme } from '#hooks/UNSAFE_useComponentTheme';\nimport { ButtonLayoutRedwoodTheme } from '#UNSAFE_ButtonLayout/themes/redwood/ButtonLayoutTheme';\n\ntype Props = {\n  isDisabled?: boolean;\n  onClick?: () => void;\n  size?: 'md' | 'sm';\n};\n\nconst noop = () => {};\n\nexport function DropdownArrow({ isDisabled = false, onClick, size = 'md' }: Props) {\n  const { baseTheme: buttonLayoutBaseTheme } = useComponentTheme(ButtonLayoutRedwoodTheme);\n  const preventDefault = useCallback((event: Event) => {\n    event.preventDefault();\n  }, []);\n  const { pressProps } = usePress(onClick ?? noop, { isDisabled });\n\n  const styleClasses = classNames([\n    buttonLayoutBaseTheme,\n    dropdownStyles.arrow.base,\n    size === 'sm' ? dropdownStyles.arrow.sizeSm : dropdownStyles.arrow.sizeMd,\n    isDisabled ? dropdownStyles.arrow.disabled : dropdownStyles.arrow.enabled\n  ]);\n\n  return (\n    <span\n      aria-hidden=\"true\"\n      class={styleClasses}\n      tabIndex={-1}\n      onMouseDown={preventDefault}\n      {...pressProps}>\n      <DropdownArrowIcon />\n    </span>\n  );\n}\n","import { ComponentChildren } from 'preact';\nimport { Flex } from '../UNSAFE_Flex';\nimport { Layer } from '../UNSAFE_Layer';\nimport { WindowOverlay } from '../UNSAFE_WindowOverlay';\nimport { mobileDropdownStyles } from './themes/mobileDropdownStyles.css';\n\ntype Props = {\n  /**\n   * The dropdown content\n   */\n  children?: ComponentChildren;\n\n  /**\n   * The id for the top level element\n   */\n  id?: string;\n\n  /**\n   * Specifies whether the dropdown is being shown\n   */\n  isOpen?: boolean;\n};\n\nexport function MobileDropdown({ children, id, isOpen }: Props) {\n  return !isOpen ? null : (\n    <Layer>\n      <WindowOverlay>\n        <div id={id} class={mobileDropdownStyles.base} role=\"dialog\" aria-modal=\"true\">\n          <Flex width=\"100%\" height=\"100%\" maxHeight=\"100%\" direction=\"column\">\n            {children}\n          </Flex>\n        </div>\n      </WindowOverlay>\n    </Layer>\n  );\n}\n","import { Ref } from 'preact';\nimport { forwardRef } from 'preact/compat';\nimport {\n  AriaAttributesSignalExcluded,\n  HTMLAttributesSignalExcluded\n} from '../utils/UNSAFE_attributeUtils';\nimport { TextProps, textInterpolations } from '../utils/UNSAFE_interpolations/text';\nimport { mergeInterpolations } from '../utils/UNSAFE_mergeInterpolations';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { TextFieldInputVariantOptions } from '../UNSAFE_TextField/themes/TextFieldInputStyles.css';\nimport { useFormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { selectMobileFieldInputStyles } from './themes/SelectMobileFieldInputStyles.css';\nimport { isInputPlaceholderShown } from '../UNSAFE_TextField/TextFieldUtils';\nimport { useTabbableMode } from '../hooks/UNSAFE_useTabbableMode';\nimport { Text } from '../UNSAFE_Text';\nimport { useAccessibleContext } from '../hooks/UNSAFE_useAccessibleContext';\nimport { merge } from '../utils/UNSAFE_stringUtils';\nimport { TextFieldInputRedwoodTheme } from '../UNSAFE_TextField/themes/redwood/TextFieldInputTheme';\n\ntype AriaProps = Pick<\n  AriaAttributesSignalExcluded,\n  | 'aria-controls'\n  | 'aria-describedby'\n  | 'aria-expanded'\n  | 'aria-invalid'\n  | 'aria-label'\n  | 'aria-labelledby'\n>;\n\ntype EventProps = Pick<HTMLAttributesSignalExcluded<HTMLDivElement>, 'onBlur' | 'onFocus'>;\n\ntype Props = AriaProps &\n  EventProps &\n  TextProps & {\n    displayValue?: string;\n    hasEmptyLabel?: boolean;\n    hasInsideLabel?: boolean;\n    isRequired?: boolean;\n    placeholder?: string;\n    variant?: 'default' | 'embedded';\n  };\n\nconst interpolations = [...Object.values(textInterpolations)];\nconst styleInterpolations = mergeInterpolations<Props>(interpolations);\n\n/**\n * This component is used for rendering the main field in mobile phones. This is a bit different from the\n * normal main field (TextFieldInput) that we use for desktop & tablet devices in the way that\n * a user will not be able to edit the value of this field. But, one can still have other functionalities\n * of having a placeholder, tab in & out of it, and other such functionalities of an enabled field.\n *\n * This also differs from ReadonlyTextFieldInput in the following ways:\n * 1. This will be rendered as div as well, but has a role of combobox set on it\n * 2. This will not be read as readonly input by the screen readers\n * 3. This has the stylings much similar to the TextFieldInput component\n * 4. This supports the use of placeholder and shows it when there is no value present\n * 5. This supports having the variant property and styles accordingly\n *\n * As such, this is very similar to the TextFieldInput except that this does not allow user input.\n * Note: we cannot use TextFieldInput with readonly set on it; even though it might provide us the\n * behavior we need, it will make the field as readonly and screen readers read the same about this\n * field. This will be an incorrect representation contextually as one can still edit the value by opening\n * the dropdown and changing the selection.\n */\nexport const SelectMobileFieldInput = forwardRef(\n  (\n    {\n      'aria-controls': ariaControls,\n      'aria-describedby': ariaDescribedBy,\n      'aria-expanded': ariaExpanded,\n      'aria-invalid': ariaInvalid,\n      'aria-label': ariaLabel,\n      'aria-labelledby': ariaLabelledBy,\n      displayValue,\n      hasEmptyLabel,\n      hasInsideLabel = false,\n      isRequired,\n      onBlur,\n      onFocus,\n      placeholder,\n      textAlign,\n      variant = 'default'\n    }: Props,\n    ref?: Ref<HTMLDivElement>\n  ) => {\n    // consume required contexts\n    const { isDisabled, isFocused, hasValue = false } = useFormFieldContext();\n    const { isTabbable, tabbableModeProps } = useTabbableMode();\n\n    // setup properties\n    const myPlaceholder = isInputPlaceholderShown(hasInsideLabel, hasValue, isFocused)\n      ? placeholder\n      : undefined;\n\n    // Add unsafe API for specifying an external label which is added to ariaLabelledBy on the input,\n    // only when labelEdge is 'none' and label is ''. Since ariaLabelledBy takes precedence over all other\n    // kinds of labels, this helps to ensure we don't override a meaningful label.\n    const { UNSAFE_ariaLabelledBy } = useAccessibleContext();\n    const mergedAriaLabelledBy = hasEmptyLabel\n      ? merge([ariaLabelledBy, UNSAFE_ariaLabelledBy])\n      : ariaLabelledBy;\n\n    // setup style classes\n    const { class: styleInterpolationClasses } = styleInterpolations({ textAlign });\n    const { classes: themeClasses } = useComponentTheme<TextFieldInputVariantOptions>(\n      TextFieldInputRedwoodTheme,\n      {\n        type: 'notPassword',\n        styleVariant: variant,\n        textarea: 'notTextArea',\n        input: 'isInput',\n        prefix: 'noPrefix',\n        suffix: 'noSuffix',\n        startContent: 'noStartContent',\n        endContent: 'hasEndContent',\n        insideLabel: hasInsideLabel ? 'hasInsideLabel' : 'noInsideLabel',\n        value: hasValue ? 'hasValue' : 'noValue',\n        focused: isFocused ? 'isFocused' : 'notFocused',\n        disabled: isDisabled ? 'isDisabled' : 'notDisabled'\n      }\n    );\n    const rootDivStyleClasses = classNames([\n      selectMobileFieldInputStyles.base,\n      styleInterpolationClasses,\n      themeClasses\n    ]);\n\n    return (\n      <div\n        aria-autocomplete=\"list\"\n        aria-controls={ariaControls}\n        aria-describedby={ariaDescribedBy}\n        aria-expanded={ariaExpanded}\n        aria-invalid={ariaInvalid}\n        aria-label={ariaLabel}\n        aria-labelledby={mergedAriaLabelledBy}\n        aria-required={isRequired ? 'true' : undefined}\n        class={rootDivStyleClasses}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        ref={ref}\n        role=\"combobox\"\n        {...(isTabbable && tabbableModeProps)}>\n        <div class={selectMobileFieldInputStyles.content}>\n          <Text variant={displayValue ? 'inherit' : 'secondary'}>\n            {displayValue || myPlaceholder}\n          </Text>\n        </div>\n      </div>\n    );\n  }\n);\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren } from 'preact';\nimport { CollectionGestureContext } from '../hooks/PRIVATE_useCollectionGestureContext';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { preventDefaultForCurrentTarget } from './eventUtils';\nimport { dropdownStyles } from './themes/dropdownStyles.css';\n\ntype Props = {\n  children?: ComponentChildren;\n  hasTopGap?: boolean;\n  hasBottomGap?: boolean;\n  isLoading?: boolean;\n};\n\nexport function DropdownList({\n  children,\n  hasTopGap = true,\n  hasBottomGap = true,\n  isLoading = false\n}: Props) {\n  const styleClasses = classNames([\n    dropdownStyles.list.base,\n    hasTopGap && dropdownStyles.list.topGap,\n    hasBottomGap && dropdownStyles.list.bottomGap,\n    isLoading && dropdownStyles.list.loading\n  ]);\n  return (\n    <CollectionGestureContext.Provider value={'embedded'}>\n      <div class={styleClasses} onMouseDown={preventDefaultForCurrentTarget}>\n        {children}\n      </div>\n    </CollectionGestureContext.Provider>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentProps } from 'preact';\nimport { useCallback } from 'preact/hooks';\nimport { FormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { InlineUserAssistance } from '../UNSAFE_UserAssistance';\nimport { dropdownStyles } from './themes/dropdownStyles.css';\n\ntype InlineUserAssistanceProps = Pick<\n  ComponentProps<typeof InlineUserAssistance>,\n  | 'assistiveText'\n  | 'fieldLabel'\n  | 'helpSourceLink'\n  | 'helpSourceText'\n  | 'id'\n  | 'userAssistanceDensity'\n>;\n\nexport function DropdownUserAssistance(props: InlineUserAssistanceProps) {\n  // Prevent the focus from transferring when the user clicks on an empty/non-clickable area\n  // of the user assistance\n  const handleMouseDown = useCallback((event: MouseEvent) => {\n    // Don't call preventDefault when the user clicks on the help source link, so that the\n    // focus is allowed to transfer in that case.\n    if ((event.target as Element)?.tagName !== 'A') {\n      event.preventDefault();\n    }\n  }, []);\n\n  return (\n    <FormFieldContext.Provider value={{ isFocused: true }}>\n      <div class={dropdownStyles.userAssistance} onMouseDown={handleMouseDown}>\n        <InlineUserAssistance {...props} />\n      </div>\n    </FormFieldContext.Provider>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { preventDefaultForCurrentTarget } from './eventUtils';\nimport { dropdownStyles } from './themes/dropdownStyles.css';\n\nexport function EmptyResults() {\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n\n  // call preventDefault for mousedown on this div so that focus does not transfer from\n  // the input\n  return (\n    <div class={dropdownStyles.results.extraItem} onMouseDown={preventDefaultForCurrentTarget}>\n      {translations.select_noMatchesFound()}\n    </div>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { useCallback } from 'preact/hooks';\nimport { Link } from '#UNSAFE_Link';\nimport { useFocusWithin } from '#hooks/UNSAFE_useFocusWithin';\nimport { useHover } from '#hooks/UNSAFE_useHover';\nimport { classNames } from '#utils/UNSAFE_classNames';\nimport { dropdownStyles } from './themes/dropdownStyles.css';\n\ntype Props = {\n  /**\n   * Child content of the item.\n   */\n  children: string;\n  /**\n   * Specifies whether to highlight the item.\n   */\n  isHighlighted?: boolean;\n  /**\n   * Callback invoked when the user triggers the link, for example by clicking or pressing Enter.\n   */\n  onAction?: () => void;\n};\n\n/**\n * This component renders a link that looks like a list item in a Select* component dropdown.\n * It fires an action when the user triggers it, and is intended to be used for launching\n * external application UI from within the dropdown, for example to provide advanced search or\n * add to list functionality.\n * The LinkItem would typically be shown in a fixed position above or below the list itself.\n */\nconst LinkItem = ({ children, isHighlighted, onAction }: Props) => {\n  const { isHover, hoverProps } = useHover();\n  const { isFocused, focusProps } = useFocusWithin();\n\n  const handleClick = useCallback(\n    (e: Event) => {\n      // prevent the link from actually navigating by preventing default and returning false\n      e.preventDefault();\n      onAction?.();\n      return false;\n    },\n    [onAction]\n  );\n\n  const rootClasses = classNames([isFocused ? dropdownStyles.results.linkItemFocus : undefined]);\n\n  const linkClasses = classNames([\n    dropdownStyles.results.extraItem,\n    isHover || isFocused || isHighlighted ? dropdownStyles.results.linkItemHighlight : undefined\n  ]);\n\n  return (\n    <div class={rootClasses} {...focusProps}>\n      <Link href=\"#\" onClick={handleClick}>\n        <div class={linkClasses} {...hoverProps}>\n          {children}\n        </div>\n      </Link>\n    </div>\n  );\n};\n\nexport { LinkItem };\n","import { ComponentChildren, ComponentProps } from 'preact';\nimport { Separator } from '../UNSAFE_Separator';\nimport { MobileDropdown } from './MobileDropdown';\nimport { selectMobileDropdownStyles } from './themes/selectMobileDropdownStyles.css';\n\ntype MobileDropdownProps = ComponentProps<typeof MobileDropdown>;\ntype PassThroughMobileDropdownProps = Pick<MobileDropdownProps, 'id' | 'isOpen'>;\n\ntype Props = PassThroughMobileDropdownProps & {\n  /**\n   * The main dropdown content\n   */\n  children?: ComponentChildren;\n\n  /**\n   * The components to be placed in the end of the dropdown\n   */\n  footer?: ComponentChildren;\n\n  /**\n   * The components to be placed in the beginning of the dropdown\n   */\n  header?: ComponentChildren;\n\n  /**\n   * Specifies whether to have a separator between header and content\n   */\n  hasHeaderSeparator?: boolean;\n};\n\nexport function SelectMobileDropdown({\n  children,\n  footer,\n  hasHeaderSeparator = true,\n  header,\n  id,\n  isOpen\n}: Props) {\n  return (\n    <MobileDropdown id={id} isOpen={isOpen}>\n      {header}\n      {hasHeaderSeparator && <Separator />}\n      {/* TODO: Add overflow support to View and use it here */}\n      {/*  */}\n      <div class={selectMobileDropdownStyles.content}>{children}</div>\n      <Separator />\n      {footer}\n    </MobileDropdown>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { getClientHints } from '../utils/PRIVATE_clientHints';\nimport { DataState } from '../UNSAFE_Collection';\n\n/**\n * Helper function to determine whether the current device is a mobile device\n * @returns true if running on a mobile device, false otherwise\n */\nexport function isMobile() {\n  const deviceType = getClientHints().deviceType;\n  return deviceType === 'phone' || deviceType === 'tablet';\n}\n\n/**\n * Helper function to determine whether the current device is a phone\n * @returns true if running on a phone, false otherwise\n */\nexport function isPhone() {\n  return getClientHints().deviceType === 'phone';\n}\n\n/**\n * Helper function to determine whether the current device is a tablet\n * @returns true if running on a tablet, false otherwise\n */\nexport function isTablet() {\n  return getClientHints().deviceType === 'tablet';\n}\n\nexport function isBeforeDataFetch<K, D>(data: DataState<K, D>) {\n  return data.sizePrecision === 'atLeast' && data.totalSize === 0;\n}\n\nexport function isSearchTextEmptyOrUndefined(searchText?: string) {\n  return searchText === undefined || searchText.length === 0;\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { Ref, useCallback, useEffect, useRef, useState } from 'preact/hooks';\nimport { CurrentKeyDetail, DataState } from '../UNSAFE_Collection';\nimport { PositionData } from '../UNSAFE_Floating';\nimport { allTabbableElements } from '../utils/PRIVATE_tabbableUtils';\nimport { ValueUpdateDetail } from '../utils/UNSAFE_valueUpdateDetail';\nimport { isControlOrFunctionKey, KEYS } from '../utils/PRIVATE_keyboardUtils';\nimport { isSimpleClick } from './eventUtils';\n\ntype UseSelectCommonProps<K, D> = {\n  data?: DataState<K, D> | null;\n  inputRef: Ref<HTMLElement>;\n  isFocused?: boolean;\n  onFilter?: ({ searchText }: { searchText?: string }) => void;\n};\n\n/**\n * Hook that manages state and behavior for a Select* component.  This hook creates state\n * variables and event listeners, returning properties to apply to components internally\n * rendered by a Select* component, as well as state information.\n *\n * @param data Specifies data for the dropdown list.\n * @param inputRef Ref to the input element.\n * @param isFocused Specifies whether the component has focus.\n * @param onFilter Callback function to trigger loading data for the dropdown list,\n * which may or may not be filtered by user entered text.\n *\n * @returns Component state and event listeners.\n */\nexport function useSelectCommon<K, D>({\n  data,\n  inputRef,\n  isFocused,\n  onFilter\n}: UseSelectCommonProps<K, D>) {\n  const mainFieldRef = useRef<HTMLDivElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const [isDropdownOpen, setDropdownOpen] = useState(false);\n  const [isDropdownAbove, setDropdownAbove] = useState(false);\n  const [currentRow, setCurrentRow] = useState<{ rowKey?: K }>({\n    rowKey: undefined\n  });\n  const [isUserFiltering, setUserFiltering] = useState(false);\n  const [userInput, setUserInput] = useState<string>();\n  const [searchText, setSearchText] = useState<string>();\n\n  const [prevIsDropdownOpen, setPrevIsDropdownOpen] = useState(isDropdownOpen);\n  const [prevIsFocused, setPrevIsFocused] = useState(isFocused);\n  const [prevIsUserFiltering, setPrevIsUserFiltering] = useState(isUserFiltering);\n\n  const onMouseDown = useCallback(\n    (event: MouseEvent) => {\n      // const target = event.target as HTMLElement;\n      if (event.defaultPrevented || !isSimpleClick(event)) {\n        return;\n      }\n      if (!isDropdownOpen) {\n        setDropdownOpen(true);\n      }\n      // this is needed to focus the input when clicking on the inside label when there is no\n      // value;  otherwise the component looks focused but doesn't actually have physical focus\n      setTimeout(function () {\n        inputRef.current?.focus();\n      }, 0);\n    },\n    [inputRef, isDropdownOpen]\n  );\n\n  const handleDropdownArrowClick = useCallback(() => {\n    setDropdownOpen(!isDropdownOpen);\n\n    // focus the input so that if the user Tabs afterwards, it loses focus and the dropdown closes\n    inputRef.current?.focus();\n  }, [inputRef, isDropdownOpen]);\n\n  const handleDropdownAutoDismiss = useCallback(\n    (event?: Event) => {\n      if (isDropdownOpen) {\n        setDropdownOpen(false);\n\n        switch (event?.type) {\n          case 'keydown':\n            const keyboardEvent = event as KeyboardEvent;\n            switch (keyboardEvent.code) {\n              case KEYS.ESC:\n                // focus the input when the user cancels out of the dropdown\n                inputRef.current?.focus();\n                break;\n              default:\n                break;\n            }\n            break;\n          case 'mousedown':\n            // if focus is in the dropdown, focus the input before the dropdown is hidden so that\n            // focus will transfer correctly when the target is not focusable;\n            // otherwise the text cursor appears in the input again\n            if (dropdownRef.current?.contains(document.activeElement)) {\n              inputRef.current?.focus();\n            }\n            break;\n          default:\n            break;\n        }\n      }\n    },\n    [inputRef, isDropdownOpen]\n  );\n\n  const handleDropdownPosition = useCallback((data: PositionData) => {\n    setDropdownAbove(data.placement.startsWith('top'));\n  }, []);\n\n  const getDropdownTabbableElems = useCallback(() => {\n    return isDropdownOpen && dropdownRef.current\n      ? allTabbableElements(dropdownRef.current)\n      : undefined;\n  }, [isDropdownOpen]);\n\n  const handleUpDownArrowKeys = useCallback(\n    (event: KeyboardEvent) => {\n      if (!isDropdownOpen) {\n        setDropdownOpen(true);\n      } else {\n        // transfer physical focus into the dropdown\n        const tabbableElems = getDropdownTabbableElems();\n        tabbableElems?.[0]?.focus();\n\n        // if there is no current item set, make the first item current\n        if (data !== undefined && currentRow.rowKey === undefined) {\n          setCurrentRow({ rowKey: data?.data?.[0]?.metadata?.key });\n        }\n      }\n\n      // prevent the page from scrolling\n      event.preventDefault();\n    },\n    [currentRow, data, getDropdownTabbableElems, isDropdownOpen]\n  );\n\n  const handleMainFieldKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      // const target = event.target as HTMLElement;\n      // ignore control key and function key\n      if (isControlOrFunctionKey(event)) {\n        return;\n      }\n\n      switch (event.code) {\n        case KEYS.PAGE_UP:\n        case KEYS.PAGE_DOWN:\n          // prevent the page from scrolling\n          event.preventDefault();\n\n          return;\n\n        case KEYS.UP:\n        case KEYS.DOWN:\n          // prevent the page from scrolling\n          event.preventDefault();\n          break;\n\n        case KEYS.ESC:\n          if (isDropdownOpen) {\n            setDropdownOpen(false);\n\n            event.preventDefault();\n\n            // JET-53183 - core pack compat: stop propagation of handled events\n            // we don't want a parent collection component to stop editing the row when we close\n            // the dropdown\n            event.stopPropagation();\n          }\n          break;\n\n        default:\n          break;\n      }\n    },\n    [isDropdownOpen]\n  );\n\n  const handleMainFieldKeyUp = useCallback(\n    (event: KeyboardEvent) => {\n      // ignore control key and function key\n      if (isControlOrFunctionKey(event)) {\n        return;\n      }\n\n      switch (event.code) {\n        case KEYS.UP:\n        case KEYS.DOWN:\n          handleUpDownArrowKeys(event);\n          break;\n\n        default:\n          break;\n      }\n    },\n    [handleUpDownArrowKeys]\n  );\n\n  const handleInput = useCallback(\n    (detail: ValueUpdateDetail<string>) => {\n      if (!isDropdownOpen) {\n        setDropdownOpen(true);\n      }\n      setUserFiltering(true);\n      setUserInput(detail.value);\n      const str = detail.value;\n      setSearchText(str);\n      onFilter?.({ searchText: str });\n    },\n    [isDropdownOpen, onFilter]\n  );\n\n  const onCurrentKeyChange = useCallback((detail: CurrentKeyDetail<K>) => {\n    setCurrentRow({ rowKey: detail.value });\n  }, []);\n\n  const stopFiltering = useCallback(() => {\n    setUserFiltering(false);\n    setUserInput('');\n    setSearchText('');\n  }, []);\n\n  // the user is not actively filtering if the dropdown is closed and the component doesn't\n  // have focus\n  if (\n    prevIsDropdownOpen !== isDropdownOpen ||\n    prevIsFocused !== isFocused ||\n    prevIsUserFiltering !== isUserFiltering\n  ) {\n    if (!isDropdownOpen && !isFocused && isUserFiltering) {\n      stopFiltering();\n    }\n  }\n\n  // need to call onFilter with undefined searchText when the dropdown opens and the\n  // user is NOT filtering\n  useEffect(() => {\n    if (isDropdownOpen && !isUserFiltering) {\n      onFilter?.({ searchText: undefined });\n    }\n  }, [isDropdownOpen, isUserFiltering, onFilter]);\n\n  // when the dropdown closes, reset the isDropdownAbove flag\n  if (prevIsDropdownOpen !== isDropdownOpen) {\n    if (!isDropdownOpen) {\n      setDropdownAbove(false);\n    }\n    setPrevIsDropdownOpen(isDropdownOpen);\n  }\n\n  if (prevIsFocused !== isFocused) {\n    setPrevIsFocused(isFocused);\n  }\n  if (prevIsUserFiltering !== isUserFiltering) {\n    setPrevIsUserFiltering(isUserFiltering);\n  }\n\n  return {\n    currentRow,\n    dropdownRef,\n    getDropdownTabbableElems,\n    handleDropdownArrowClick,\n    handleDropdownAutoDismiss,\n    handleDropdownPosition,\n    handleInput,\n    handleMainFieldKeyDown,\n    handleMainFieldKeyUp,\n    handleUpDownArrowKeys,\n    isDropdownAbove,\n    isDropdownOpen,\n    // the field should remain to look focused while the dropdown is open,\n    // in case physical focus is in the dropdown\n    isFocused: isFocused || isDropdownOpen,\n    isUserFiltering,\n    mainFieldRef,\n    onCurrentKeyChange,\n    onMouseDown,\n    searchText,\n    setCurrentRow,\n    setDropdownOpen,\n    setUserInput,\n    stopFiltering,\n    userInput\n  };\n}\n"],"names":["renderItemText","item","itemText","data","hasOwnProperty","retData","String","error","noOp","loadingIndicator","_jsx","jsx","SkeletonContainer","minimumCount","children","Flex","height","align","Skeleton","isSimpleClick","event","button","ctrlKey","preventDefaultForCurrentTarget","currentTarget","target","preventDefault","DEFAULT_PLACEMENT","noop","MobileDropdown","id","isOpen","Layer","WindowOverlay","class","mobileDropdownStyles","base","role","width","maxHeight","direction","interpolations","Object","values","textInterpolations","styleInterpolations","mergeInterpolations","SelectMobileFieldInput","forwardRef","ariaControls","ariaDescribedBy","ariaExpanded","ariaInvalid","ariaLabel","ariaLabelledBy","displayValue","hasEmptyLabel","hasInsideLabel","isRequired","onBlur","onFocus","placeholder","textAlign","variant","ref","isDisabled","isFocused","hasValue","useFormFieldContext","isTabbable","tabbableModeProps","useTabbableMode","myPlaceholder","isInputPlaceholderShown","undefined","UNSAFE_ariaLabelledBy","useAccessibleContext","mergedAriaLabelledBy","merge","styleInterpolationClasses","classes","themeClasses","useComponentTheme","TextFieldInputRedwoodTheme","type","styleVariant","textarea","input","prefix","suffix","startContent","endContent","insideLabel","value","focused","disabled","rootDivStyleClasses","classNames","selectMobileFieldInputStyles","content","Text","currentItemVariant","currentKey","itemRenderer","onCurrentKeyChange","onItemAction","onLoadRange","onSelectionChange","searchText","selectedKeys","selectionMode","listItemRenderer","useCallback","listItemContext","itemRendererProps","index","metadata","selector","all","keys","itemContext","key","_jsxs","jsxs","dropdownStyles","HighlightText","matchText","useMemo","Set","List","allowTabbableMode","context","anchorRef","dropdownRef","onAutoDismiss","onPosition","placement","setPlacement","useState","prevIsOpen","setPrevIsOpen","handlePosition","positionData","handleAutoDismiss","handleKeyDown","defaultPrevented","isControlOrFunctionKey","code","KEYS","ESC","TAB","useOutsideMousedown","handler","inlineStyle","minWidth","current","offsetWidth","logicalParentRef","Floating","sizeOptions","isMaxHeightAdjusted","maxHeightCeiling","offsetValue","mainAxis","crossAxis","style","onKeyDown","onMouseDown","onClick","size","baseTheme","buttonLayoutBaseTheme","ButtonLayoutRedwoodTheme","pressProps","usePress","styleClasses","arrow","sizeSm","sizeMd","enabled","tabIndex","DropdownArrowIcon","hasTopGap","hasBottomGap","isLoading","list","topGap","bottomGap","loading","CollectionGestureContext","Provider","props","handleMouseDown","tagName","FormFieldContext","userAssistance","InlineUserAssistance","translations","useTranslationBundle","results","extraItem","select_noMatchesFound","isHighlighted","onAction","isHover","hoverProps","useHover","focusProps","useFocusWithin","handleClick","e","rootClasses","linkItemFocus","linkClasses","linkItemHighlight","Link","href","footer","hasHeaderSeparator","header","Separator","selectMobileDropdownStyles","sizePrecision","totalSize","deviceType","getClientHints","length","inputRef","onFilter","mainFieldRef","useRef","isDropdownOpen","setDropdownOpen","isDropdownAbove","setDropdownAbove","currentRow","setCurrentRow","rowKey","isUserFiltering","setUserFiltering","userInput","setUserInput","setSearchText","prevIsDropdownOpen","setPrevIsDropdownOpen","prevIsFocused","setPrevIsFocused","prevIsUserFiltering","setPrevIsUserFiltering","setTimeout","focus","handleDropdownArrowClick","handleDropdownAutoDismiss","contains","document","activeElement","handleDropdownPosition","startsWith","getDropdownTabbableElems","allTabbableElements","handleUpDownArrowKeys","tabbableElems","handleMainFieldKeyDown","PAGE_UP","PAGE_DOWN","UP","DOWN","stopPropagation","handleMainFieldKeyUp","handleInput","detail","str","stopFiltering","useEffect"],"mappings":"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"}