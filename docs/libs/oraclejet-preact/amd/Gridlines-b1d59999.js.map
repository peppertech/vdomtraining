{"version":3,"file":"Gridlines-b1d59999.js","sources":["../../src/PRIVATE_PlotArea/Gridlines.tsx","../../src/PRIVATE_PlotArea/PlotArea.tsx","../../src/PRIVATE_PlotArea/utils.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { styles } from './themes/PlotAreaStyles.css';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { ChartPlotArea, Scale } from '../utils/UNSAFE_visTypes/chart';\nimport { useColorScheme } from '../hooks/UNSAFE_useColorScheme';\n\ntype Props = {\n  xScale: Scale;\n  yScale: Scale;\n  xViewportMin: number;\n  xViewportMax: number;\n  isLog: boolean;\n  yTicks: number[];\n  yMinorTicks: number[];\n  plotArea?: ChartPlotArea;\n  yAxisPosition: 'left' | 'right' | 'top' | 'bottom';\n};\n\nconst TICK_DEFAULT = {\n  yMajorTick: {\n    isRendered: true\n  },\n  yMinorTick: {\n    isRendered: false\n  },\n  xMajorTick: {\n    isRendered: false\n  }\n};\n\nexport function Gridlines({\n  plotArea = TICK_DEFAULT,\n  yMinorTicks,\n  xScale,\n  yScale,\n  isLog,\n  xViewportMin,\n  xViewportMax,\n  yTicks,\n  yAxisPosition\n}: Props) {\n  const isHoriz = yAxisPosition === 'top' || yAxisPosition === 'bottom';\n  const [x1, x2] = xScale.range();\n  const [y1, y2] = yScale.range();\n\n  let yLinesPath = '';\n  let xLinesPath = '';\n  let yMinorPath = '';\n  const { yMajorTick: _yMajorTick, yMinorTick: _yMinorTick, xMajorTick: _xMajorTick } = plotArea;\n  const yMajorTick = { ...TICK_DEFAULT.yMajorTick, ..._yMajorTick };\n  const yMinorTick = { ...TICK_DEFAULT.yMinorTick, ..._yMinorTick };\n  const xMajorTick = { ...TICK_DEFAULT.xMajorTick, ..._xMajorTick };\n  const isYMinorRendered = yMinorTick?.isRendered === true || isLog;\n\n  if (yMajorTick?.isRendered) {\n    for (let i = 1; i < yTicks.length; i++) {\n      let y = yScale.transform(yTicks[i]);\n      // last grid line get's clipped due to plot area clippath. Slightly adjust\n      // coord so that it's not clipped.\n      if (i === yTicks.length - 1) {\n        y += isHoriz ? -1 : 1;\n      }\n      yLinesPath += isHoriz ? `M${y},${x1}L${y},${x2}` : `M${x1},${y}L${x2},${y}`;\n    }\n  }\n\n  if (xMajorTick?.isRendered) {\n    const xStartIndex = Math.floor(xViewportMin - 0.5) + 1.5;\n    for (let i = xStartIndex; i < xViewportMax; i++) {\n      const x = xScale.transform(i);\n      xLinesPath += isHoriz ? `M${y1},${x}L${y2},${x}` : `M${x},${y1}L${x},${y2}`;\n    }\n  }\n\n  if (isYMinorRendered) {\n    for (let i = 0; i < yMinorTicks.length; i++) {\n      const y = yScale.transform(yMinorTicks[i]);\n      yMinorPath += isHoriz ? `M${y},${x1}L${y},${x2}` : `M${x1},${y}L${x2},${y}`;\n    }\n  }\n\n  const colorScheme = useColorScheme();\n\n  return (\n    <>\n      {yMajorTick?.isRendered && (\n        <path\n          d={yLinesPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.majorTickLineStyles,\n            yMajorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            yMajorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: yMajorTick.lineColor,\n            strokeWidth: yMajorTick.lineWidth\n          }}\n        />\n      )}\n      {xMajorTick?.isRendered && (\n        <path\n          d={xLinesPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.majorTickLineStyles,\n            xMajorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            xMajorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: xMajorTick.lineColor,\n            strokeWidth: xMajorTick.lineWidth\n          }}\n        />\n      )}\n      {isYMinorRendered && (\n        <path\n          d={yMinorPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.minorTickLineStyles,\n            colorScheme === 'light'\n              ? styles.lightMinorTickLineStroke\n              : styles.darkMinorTickLineStroke,\n            yMinorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            yMinorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: yMinorTick?.lineColor,\n            strokeWidth: yMinorTick?.lineWidth\n          }}\n        />\n      )}\n    </>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { styles } from './themes/PlotAreaStyles.css';\nimport { Dimension } from '../utils/UNSAFE_visTypes/common';\nimport { getAxisLineProps, getBaseLineProps } from './utils';\nimport { Scale } from '../utils/UNSAFE_visTypes/chart';\nimport { ColorProps } from '../utils/UNSAFE_interpolations/colors';\n\ntype Props = {\n  yScale: Scale;\n  isLog: boolean;\n  color?: ColorProps['color'];\n  availSpace: Dimension;\n  xAxisPosition: 'left' | 'right' | 'top' | 'bottom';\n  cursor?: string;\n};\n\nexport function PlotArea({ color, yScale, isLog, availSpace, xAxisPosition, cursor }: Props) {\n  const hasBaseLine = !isLog && yScale.domain()[0] < 0 && yScale.domain()[1] > 0;\n  const axisLineProps = getAxisLineProps(availSpace, xAxisPosition);\n  const baseLineProps = getBaseLineProps(availSpace, yScale.transform(0), xAxisPosition);\n  return (\n    <>\n      <rect {...availSpace} class={styles.plotAreaStyle} style={{ fill: color, cursor }}></rect>\n      <line {...axisLineProps} class={styles.axisLineStyle} />\n      {hasBaseLine && <line {...baseLineProps} class={styles.baseLineStyle} />}\n    </>\n  );\n}\n","import { ColorProps } from '../utils/UNSAFE_interpolations/colors';\nimport { Dimension } from '../utils/UNSAFE_visTypes/common';\n\nexport function getAxisLineProps(\n  availSpace: Dimension,\n  axisPosition: 'left' | 'right' | 'top' | 'bottom',\n  axisLine?: {\n    lineColor?: ColorProps['color'];\n    lineWidth?: number;\n    isRendered: boolean;\n  }\n) {\n  return {\n    x1: axisPosition === 'right' ? availSpace.x + availSpace.width : availSpace.x,\n    x2: axisPosition === 'left' ? availSpace.x : availSpace.x + availSpace.width,\n    y1: axisPosition === 'bottom' ? availSpace.y + availSpace.height : availSpace.y,\n    y2: axisPosition === 'top' ? availSpace.y : availSpace.y + availSpace.height,\n    stroke: axisLine?.lineColor,\n    strokeWidth: axisLine?.lineWidth\n  };\n}\n\nexport function getBaseLineProps(\n  availSpace: Dimension,\n  coord: number,\n  axisPosition: 'left' | 'right' | 'top' | 'bottom'\n) {\n  let x1, x2, y1, y2: number;\n  if (axisPosition === 'bottom') {\n    x1 = availSpace.x;\n    x2 = availSpace.x + availSpace.width;\n    y1 = coord;\n    y2 = coord;\n  } else {\n    x1 = coord;\n    x2 = coord;\n    y1 = availSpace.y;\n    y2 = availSpace.y + availSpace.height;\n  }\n\n  return { x1, x2, y1, y2 };\n}\n"],"names":["TICK_DEFAULT","yMajorTick","isRendered","yMinorTick","xMajorTick","plotArea","yMinorTicks","xScale","yScale","isLog","xViewportMin","xViewportMax","yTicks","yAxisPosition","isHoriz","x1","x2","range","y1","y2","yLinesPath","xLinesPath","yMinorPath","_yMajorTick","_yMinorTick","_xMajorTick","isYMinorRendered","i","length","y","transform","Math","floor","x","colorScheme","useColorScheme","_jsxs","jsxs","_Fragment","Fragment","children","_jsx","jsx","d","class","classNames","styles","noPointerEvents","majorTickLineStyles","lineStyle","dashedLine","undefined","dottedLine","style","stroke","lineColor","strokeWidth","lineWidth","minorTickLineStyles","lightMinorTickLineStroke","darkMinorTickLineStroke","color","availSpace","xAxisPosition","cursor","hasBaseLine","domain","axisLineProps","axisPosition","axisLine","width","height","getAxisLineProps","baseLineProps","coord","getBaseLineProps","plotAreaStyle","fill","axisLineStyle","baseLineStyle"],"mappings":"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"}