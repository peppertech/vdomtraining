define(['exports', 'preact/jsx-runtime', './useUser-85c781ea', 'preact', './PRIVATE_Chart/themes/ChartStyles.css', './classNames-08d99695', './layoutUtils-ac40a238', './useTranslationBundle-516b1b83', './dataStyleUtils-012386a4', './accUtils-1557920a', './colorUtils-7c069766', './Chart-96ea9fed'], (function(e,t,i,s,r,n,o,a,l,d,u,c){"use strict";const g=2,h=.25;function x(e,t,i,s,r,n,o){const a=n?1:s,l=g*r,d=(t*(1-i)-(a-1)*l)/a;if(n)return{barWidth:d,offset:-1*d/2,itemsGaps:l};const u=t/2,c=t*(i/2)+e*(d+g*r);return{barWidth:d,offset:o?u-c-d:c-u,itemsGaps:l}}const f=1.5,I=2.5;function m(e){return e.isSelected||e.isFocused?t.jsx(p,{...e}):t.jsx("rect",{x:e.x,y:e.y,"data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,"data-oj-object":"bar","aria-label":e["aria-label"],role:e["aria-label"]?"img":void 0,id:e.activeId,style:{width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth},class:n.classNames([e.isPointerEnabled?r.styles.cursorEnable:void 0,e.isDimmed?r.styles.dimmed:void 0])})}function p(e){const{x:i,y:s,width:o,height:a,fill:l,isSelected:d,isFocused:u}=e,c=d?I:f;return t.jsxs("g",{id:e.activeId,"data-oj-object":"bar","data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,className:e.isDimmed?r.styles.dimmed:"",role:e["aria-label"]?"img":void 0,"aria-label":e["aria-label"],children:[t.jsx("rect",{x:i,y:s,class:n.classNames([d?r.styles.selectedBorder:""]),style:{width:o,height:a,fill:!d&&u?l:void 0}}),t.jsx("rect",{x:i+c,y:s+c,class:n.classNames([r.styles.contrastBorder,e.isPointerEnabled?r.styles.cursorEnable:void 0]),style:{width:o-2*c,height:a-2*c,fill:l}})]})}function b(e,t,i){return{fill:e.color||t.color||i,stroke:e.borderColor||t.borderColor}}function y(e,t,i,s,r){let n,o,a,l,d=e,u=t,c=t-e;return c<1&&(d=Math.floor(d),u=d+1,c=1),r?(o=d,n=i>s?s:i,a=Math.abs(s-i),l=Math.abs(u-d)):(n=d,o=i>s?s:i,a=Math.abs(u-d),l=Math.abs(s-i)),{x:n,y:o,width:a,height:l}}function S(e,t,i,s,r,n,o){let a,l;return i?(a=t.transform(e<0?n:o),n+=e<0?e:0,o+=e>0?e:0,l=t.transform(e<0?n:o),a+=l>a?r:-r):(a=s?t.range()[0]:t.transform(0),l=t.transform(e)),{baselineCoord:a,endCoord:l}}function v(e,t,i,s,r,n,o){const{baselineCoord:a,endCoord:l}=S(e,t,i,s,r,n,o);return(a+l)/2}const w=2;function D(e,t,i,s,r,n){if(!n)return{};const o=function(e,t,i,s){return e?i&&!t||!i&&t?s.x:s.x+s.width:i?s.height+s.y:s.y}(e,t,i,s);return"insideBarEdge"===r?{y:e?s.y+s.height/2:o+(i?-1:1)*(n.height/2+w+2),x:e?o-(i&&!t||!i&&t?-1:1)*(n.width/2+w):s.x+s.width/2}:"outsideBarEdge"===r?{y:e?s.y+s.height/2:o-(i?-1:1)*(n.height/2+w),x:e?o+(i&&!t||!i&&t?-1:1)*(n.width/2+w):s.x+s.width/2}:{x:s.x+s.width/2,y:s.y+s.height/2}}const j=(e,t,i,s,r,n)=>({y:s?e:t-(i?-1:1)*(n.height/2+w),x:s?t+(i&&!r||!i&&r?-1:1)*(n.width/2+w):e});function C({groupCenter:e,getStackLabel:i,group:s,posValue:n,negValue:o,posItemsData:a,yScale:l,isHoriz:d,isRtl:u,negItemsData:c,defaultFontSize:g,labelStyle:h,getTextDimensions:x}){const f=i({group:s,value:n,data:a}),I={fontSize:g,fontWeight:"bold",...h},m=o<0?i?.({group:s,value:o,data:c}):"",p=j(e,l.transform(n),!1,d,u,x(f,I)),b=j(e,l.transform(o),!0,d,u,x(m,I));return t.jsxs(t.Fragment,{children:[t.jsx("text",{class:r.styles.stackLabelStyle,style:I,...p,children:f}),t.jsx("text",{class:r.styles.stackLabelStyle,style:I,...b,children:m})]})}function k({item:e,seriesColor:i,isStacked:s,defaultFontSize:n,barDim:o,isRtl:a,isHoriz:l,getTextDimensions:d}){let c=null;const g=!e.labelPosition||"outsideBarEdge"===e.labelPosition&&s?"center":e.labelPosition,h=e.label,x=e.color||i;if("none"!=g&&h&&d&&(!s||"outsideBarEdge"!==g)){const i={fontSize:n,fill:s||!("outsideBarEdge"===g)?u.getContrastingTextColor(x):void 0,...e.labelStyle},f=function(e,t,i,s){return e?!(t.height>i.height)&&("outsideBarEdge"==s||t.width<i.width):!(t.width>i.width)&&("outsideBarEdge"==s||t.height<i.height)}(l,d(h,i),o,g||"center");c=f?t.jsx("text",{class:r.styles.dataLabelStyle,style:i,...D(l,a,e.value<0,o,g||"center",d?.(h,i)),children:h}):null}return c}function F({yScale:e,xScale:i,colors:r,series:n,groupIndex:u,hiddenIds:c,barGapRatio:g,dataItemGaps:h,groupWidth:f,highlightedIds:I,selectedIds:p,isPointInsideMarquee:v,orientation:w,isLog:D,activeId:j,getDataItem:F,isRtl:A,isStacked:E,isSelectionEnabled:T,focusedItemInfo:G,hoveredItemInfo:P,isDrillEnabled:z,group:B,timeAxisType:L,getTextDimensions:R,defaultFontSize:M,stacklabelStyle:N,getStackLabel:W}){const q="horizontal"===w,U=[],V=n.length;let H=D?e.domain()[0]:0,$=0;const _=[],J=[],K=a.useTranslationBundle("@oracle/oraclejet-preact"),O=E&&!!W&&"mixedFrequency"!=L;let Q="mixedFrequency"!=L?i.transform(null!=L?new Date(B.id).getTime():u):void 0;for(let a=0;a<V;a+=1){const w=F(a,u);if(!w||c?.has(w.id)||D&&w.value<=0)continue;"mixedFrequency"===L&&(Q=o.getMixedFreqGroupCenter(i,w));const C=G?.groupIndex===u&&G?.seriesIndex===a&&G?.isFocusVisible,N=P?.groupIndex===u&&P?.seriesIndex===a&&P?.isCurrent,W=!!C||!!N&&T,X=C&&G.isCurrent||N,Y=void 0===I||I.has(w.id),Z="on"===w.drilling||"off"!=w.drilling&&z,{barWidth:ee,offset:te,itemsGaps:ie}=x(a,f,g,V,h,E,A),se=Q+te,re=se+ee,{baselineCoord:ne,endCoord:oe}=S(w.value,e,E,D,ie,$,H);$+=w.value<0?w.value:0,H+=w.value>0?w.value:0,O&&(w.value>=0?_.push(w):J.push(w));const ae=b(w,n[a],r?.[a]),le=y(se,re,oe,ne,q),de=v?v?.(w.id,{x:le.x+le.width/2,y:le.y}):p?.has(w.id),ue=d.supportsMobileScreenReader||X?l.getItemAriaLabel(K,n[a].name||n[a].id.toString(),B.name||B.id,w.value,T,!!de,Z,w.accessibleLabel):"";U.push(t.jsxs(t.Fragment,{children:[s.createElement(m,{...le,...ae,seriesIndex:a,groupIndex:u,isFocused:W,activeId:X?j:"","aria-label":ue,isDimmed:!Y,isSelected:!!de,isPointerEnabled:Z||T,key:`${u};${a}`}),t.jsx(k,{item:w,isRtl:A,seriesColor:r[a%12],isStacked:E,defaultFontSize:M,barDim:le,isHoriz:q,getTextDimensions:R})]}))}return t.jsxs(t.Fragment,{children:[U,O&&R&&t.jsx(C,{group:B,isRtl:A,yScale:e,getStackLabel:W,defaultFontSize:M,getTextDimensions:R,posItemsData:_,negItemsData:J,isHoriz:q,groupCenter:Q,labelStyle:N,posValue:H,negValue:$})]})}function A(e,t,i,s){const r=l.getNextItemInGroup(e,i,s);if(r)return r;if(e.groupIndex<t){let r={seriesIndex:0,groupIndex:e.groupIndex+1};if(s(r.seriesIndex,r.groupIndex))return r;if(r=A(r,t,i,s),r)return r}return e}function E(e,t,i,s){const r=l.getPrevItemInGroup(e,s);if(r)return r;if(e.groupIndex>t){let r={groupIndex:e.groupIndex-1,seriesIndex:i-1};if(s(r.seriesIndex,r.groupIndex))return r;if(r=E(r,t,i,s),r)return r}return e}e.BarChart=function({width:e,height:s,selectedIds:r=[],hiddenIds:n=[],highlightedIds:a,hideAndShowBehavior:d="none",orientation:u="vertical",yAxis:g,series:f,groups:I,isStacked:m=!1,getDataItem:p,selectionMode:b="none",drilling:w="off",dataItemGaps:D=.5,...j}){const{direction:C}=i.useUser(),k="rtl"===C,T=new Set(n),G="horizontal"===u,P=j.xAxis?.timeAxisType,z=new Set(r),B=new Set(a);return t.jsx(c.Chart,{width:e,height:s,selectedIds:z,hiddenIds:n,hideAndShowBehavior:d,orientation:u,yAxis:g,series:f,groups:I,isStacked:m,getDataItem:p,selectionMode:b,drilling:w,renderGridLinesInFront:!1,findNearest:(e,t,i,s)=>{const r=function(e,t,i,s,r,n){return o=>{const{offset:a,barWidth:l}=x(o,e,t,i,s,r,n);return{offset:a,dataWidth:l}}}(i,s,f.length,D,m,k);return o.findNearestDataPoint(f,I,e,t,p,m,r,v,"log"===g?.scale,D,T,P)},getDataItemPos:(e,t,i,s)=>function(e,t,i,s,r,n,o,a,l,d,u,c,g,h){return(f,I)=>{const m=e.length;let p=0,b=0;for(let e=0;e<m;e+=1){const v=i(e,I);let w=I;if(h){const e="mixedFrequency"===h?i(f,I)?.x:t[I].id;w=new Date(e).getTime()}if(!v||n?.has(v.id)||d&&v.value<=0)continue;const D=s.transform(w),{barWidth:j,offset:C,itemsGaps:k}=x(e,a,l,m,o,u,c),F=D+C,A=F+j,{baselineCoord:E,endCoord:T}=S(v.value,r,u,d,k,b,p);if(b+=v.value<0?v.value:0,p+=v.value>0?v.value:0,f===e)return y(F,A,T,E,g)}}}(f,I,p,e,t,T,D,i,s,"log"===g?.scale,m,k,G,P),getNavUtil:(e,t)=>function(e,t,i,s,r,n){const o=(t,i)=>{const s=e(t,i);return Boolean(s)};return(e,a)=>{if(!r&&("ArrowDown"===a||"ArrowUp"===a))return e;let d;const u={groupIndex:e.groupIndex,seriesIndex:e.seriesIndex};return u.groupIndex<i?(u.groupIndex=i,u):u.groupIndex>s?(u.groupIndex=s,u):(r?d="ArrowLeft"===a?n?l.getNextItemInSeries(u,s,o):l.getPrevItemInSeries(u,i,o):"ArrowRight"===a?n?l.getPrevItemInSeries(u,i,o):l.getNextItemInSeries(u,s,o):"ArrowDown"===a?l.getPrevItemInGroup(u,o):l.getNextItemInGroup(u,t,o):"ArrowRight"===a?d=n?E(u,i,t,o):A(u,s,t,o):"ArrowLeft"===a&&(d=n?A(u,s,t,o):E(u,i,t,o)),d||u)}}(p,f.length,e,t,m,k),getGapRatio:(e,t)=>function(e,t,i){return e?.37+.26/(i-t+1):h}(m,e,t),getMarkerInfo:(e,t)=>({color:l.getItemColor(e,t,f,p),type:l.getMarkerType(e,t,"bar",p)}),isRtl:k,offset:.5,...j,children:({xStartIndex:e,xEndIndex:i,xScale:s,yScale:r,gapRatio:n,activeId:o,focusedItemInfo:l,hoveredItemInfo:d,groupWidth:c,isPointInsideMarquee:h,getTextDimensions:x,defaultFontSize:y,colors:S})=>t.jsx(t.Fragment,{children:I.slice(e,i+1).map(((i,v)=>t.jsx(F,{yScale:r,xScale:s,groupIndex:v+e,selectedIds:z,hiddenIds:T,highlightedIds:a?B:a,isDrillEnabled:"on"===w,series:f,barGapRatio:n,dataItemGaps:D,isPointInsideMarquee:h,isStacked:m,groupWidth:c,group:I[v],timeAxisType:j.xAxis?.timeAxisType,colors:S,activeId:o,isLog:"log"===g?.scale,orientation:u,getDataItem:p,isSelectionEnabled:"none"!=b,isRtl:k,focusedItemInfo:l,hoveredItemInfo:d,getTextDimensions:x,defaultFontSize:y,getStackLabel:j.getStackLabel})))})})}}));
//# sourceMappingURL=BarChart-b75423c1.js.map
