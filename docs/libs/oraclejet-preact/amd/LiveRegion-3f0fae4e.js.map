{"version":3,"file":"LiveRegion-3f0fae4e.js","sources":["../../src/UNSAFE_LiveRegion/LiveRegion.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'preact/hooks';\nimport { offScreenStyle } from './LiveRegionStyles.css';\n\ntype Props = {\n  /**\n   * Whether this live region is atomic\n   */\n  atomic?: 'true' | 'false';\n\n  /**\n   * The text to be read out in the live region\n   */\n  children?: string;\n\n  /**\n   * Timeout for updating the text\n   */\n  timeout?: number;\n\n  /**\n   * The value for the aria-live attribute\n   */\n  type?: 'assertive' | 'polite' | 'off';\n};\n\n/**\n * A helper component that renders an aria-live region\n *\n * TODO: Create a more centralized component that can handle aria-live region for\n * the whole application and use context api to communicate\n */\nfunction LiveRegion({ atomic = 'false', children = '', timeout = 100, type = 'polite' }: Props) {\n  const ariaLiveText = useLiveText(children, timeout);\n\n  return (\n    <span aria-live={type} aria-atomic={atomic} class={offScreenStyle}>\n      {ariaLiveText}\n    </span>\n  );\n}\n\n/**\n * A custom hook for handling the aria-live region\n *\n * @param text The aria-live text to use\n * @param timeout The timeout for setting the aria-live text async\n * @returns The aria-live text\n */\nfunction useLiveText(text: string, timeout: number) {\n  const [liveText, setLiveText] = useState('');\n  const updateText = useCallback(() => setLiveText(text), [text]);\n  const updateTextAsync = useCallback(() => setTimeout(updateText, timeout), [updateText, timeout]);\n\n  useEffect(() => {\n    const timeoutId = updateTextAsync();\n\n    return () => clearTimeout(timeoutId);\n  }, [updateTextAsync]);\n\n  return liveText;\n}\n\nexport { LiveRegion };\n"],"names":["atomic","children","timeout","type","ariaLiveText","text","liveText","setLiveText","useState","updateText","useCallback","updateTextAsync","setTimeout","useEffect","timeoutId","clearTimeout","useLiveText","_jsx","class"],"mappings":"oIA+BA,UAAoBA,OAAEA,EAAS,QAAOC,SAAEA,EAAW,GAAEC,QAAEA,EAAU,IAAGC,KAAEA,EAAO,WAC3E,MAAMC,EAgBR,SAAqBC,EAAcH,GACjC,MAAOI,EAAUC,GAAeC,EAAQA,SAAC,IACnCC,EAAaC,EAAAA,aAAY,IAAMH,EAAYF,IAAO,CAACA,IACnDM,EAAkBD,eAAY,IAAME,WAAWH,EAAYP,IAAU,CAACO,EAAYP,IAQxF,OANAW,EAAAA,WAAU,KACR,MAAMC,EAAYH,IAElB,MAAO,IAAMI,aAAaD,EAAU,GACnC,CAACH,IAEGL,CACT,CA5BuBU,CAAYf,EAAUC,GAE3C,OACEe,MAAA,OAAA,CAAA,YAAiBd,EAAI,cAAeH,EAAQkB,kDAAqBjB,SAC9DG,GAGP"}