define(['exports', 'preact/jsx-runtime', 'preact/compat', 'preact/hooks', './LayerHost-e95c5f30', 'css!./DragAndDropStyles.styles.css', './useReorderableContext-652356ad', 'css!./ReorderableItemStyles.styles.css', './HiddenAccessible-037ef42d', './collectionUtils-6740111c', './useReorderableItem-7fd4d629', './classNames-08d99695', './UNSAFE_ListView/themes/ListViewStyles.css', './mergeProps-bcfa6a92', './List-3ebac3fc', './Menu-8f3a1e8c', './MenuItem-44b2547b', 'preact', './logger-0f873e29', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3b34c2bc', 'css!./IconStyle.styles.css', './SelectMenuGroupContext-67f24a8f', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./MenuSeparatorStyles.styles.css', 'module', './UNSAFE_Menu/themes/redwood/MenuSeparatorVariants.css', './useItemAction-66d976c4', './useContextMenuGesture-a2ad99c1'], (function(e,r,t,o,n,s,l,i,c,a,u,d,f,m,y,g,p,x,C,I,h,R,S,b,v,M,E,P,T,O,K){"use strict";const w=(e,r)=>{if(null!=e){const t=e.querySelectorAll("[role='row']");if(t.length>r)return a.getKey(t[r])}return null};function k(e,r){const t=Math.abs(null==r?e.scrollTop:r),o={y:t,key:void 0,offsetY:void 0};let n=0;const s=e.querySelectorAll("[role='row']");if(s.length>0&&0===t)return o.key=w(e,0),o.offsetY=0,o;for(let r=0;r<s.length;r++){const l=s[r].getBoundingClientRect().height;if(n+=l,t<n){o.key=w(e,r),o.offsetY=l+t-n;break}}return o}function L(e,r){const t=function(e,r){if(null!=r){let t,o=!1;if(null!=r.key?(o=!0,t=r.key):null!=r.offsetY&&null==r.y&&(o=!0,t=k(e).key),o){if(null!=t){let o=0;const n=e.querySelectorAll("[role ='row']");for(let e=0;e<n.length;e++){if(t===a.getKey(n[e]))return o+(null!=r.offsetY?r.offsetY:0);o+=n[e].getBoundingClientRect().height}}}else if(null!=r.y)return r.y}return}(e,r);e.scrollTop=null!=t?t:0}const D=t.memo((function({children:e,dragKey:t,setDragKey:n,onReorder:s,rootRef:l,itemKey:i}){const c=o.useRef(null),m={itemOverlayFront:f.styles.reorderableItemOverlayFront,itemOverlayRear:f.styles.reorderableItemOverlayRear,itemDragger:f.styles.reorderableItemDragger},y=o.useCallback((e=>{e.dataTransfer?.setData("text/listview-items-key",JSON.stringify(i))}),[i]),{rootProps:g,isDragged:p,overlayZoneBeforeProps:x,overlayZoneAfterProps:C}=u.useReorderableItem({currentKey:void 0,isDisabled:!s,draggable:!!s,dragKey:t,setDragKey:n,onReorder:s,rootRef:l,ref:c,getItem:()=>c?.current?.closest(a.ITEM_SELECTOR),setTransferData:y,itemStyles:m,itemSelector:a.ITEM_SELECTOR,isVertical:!0}),I=d.classNames([g?.class,f.styles.reorderableItemDnd]);return r.jsxs("div",{...g,draggable:!1,class:I,children:[e,!p&&t&&r.jsxs(r.Fragment,{children:[r.jsx("div",{...x}),r.jsx("div",{...C})]})]})}),((e,r)=>!(!e||!r)&&(e?.children===r?.children&&e?.dragKey===r?.dragKey)));function j({contextMenuConfig:e,contextMenuContext:t,...o}){const n=e.accessibleLabel;return r.jsx(r.Fragment,{children:r.jsx(g.Menu,{...o,...n&&{"aria-label":n},children:o.isOpen&&e.itemsRenderer(t)})})}const A={mouse:{initialFocus:"menu",placement:"bottom-start",offsetValue:0},keyboard:{initialFocus:"firstItem",placement:"bottom-start",offsetValue:0},touch:{initialFocus:"menu",placement:"end",offsetValue:40}},F={isOpen:!1,initialFocus:"menu",placement:"bottom-start",offsetValue:0,anchorRef:{current:null}},_=t.forwardRef(((e,t)=>{const{contextMenuConfig:n}=e,s=o.useRef(),i=o.useRef(null),{currentItemOverride:d,updateCurrentItemOverride:f}=(e=>{const r=o.useRef(),t=o.useRef();t.current!==e&&(t.current=e,r.current=e);const n=o.useCallback((e=>{r.current={rowKey:e}}),[]);return{currentItemOverride:r.current,updateCurrentItemOverride:n}})(e.currentItemOverride),g=e.data?e.data.map((r=>({data:r,metadata:{key:e.getRowKey(r)}}))):null,p=e.onLoadMore?e.onLoadMore:()=>{},x=g?{offset:0,data:g,sizePrecision:e.hasMore?"atLeast":"exact",totalSize:g.length}:null,{triggerProps:C,menuProps:I,contextMenuContext:h,notifyCurrentItemChanged:R}=((e,r,t,n)=>{const[s,l]=o.useState(),[i,c]=o.useState(F),u=o.useRef(),{triggerProps:d}=K.useContextMenuGesture((({gesture:r,anchor:o,target:s})=>{let i=o;if("keyboard"===r){i=a.findElementByKey(t.current,u.current?.rowKey,a.ITEM_SELECTOR)||o;const r=O.findItemContext(u.current?.rowKey,e);l(r)}else{const r=a.keyExtractor(s,a.ITEM_SELECTOR),t=O.findItemContext(r,e);l(t),n(r)}c({...A[r],anchorRef:{current:i},isOpen:!0})}),{isDisabled:!r}),f=o.useCallback((e=>{"dismissed"!==e.reason&&"itemAction"!==e.reason||t.current?.focus({preventScroll:!0}),c({...F})}),[t]);return{menuProps:{...i,onClose:f},onClose:f,contextMenuContext:s,triggerProps:d,notifyCurrentItemChanged:e=>{u.current=e.value}}})(x,n,i,f),S=r=>{e.onPersistCurrentItem?.(r),R(r)};o.useImperativeHandle(t,(()=>({getScrollPosition:()=>i.current?k(i.current):{y:0}}))),o.useLayoutEffect((()=>{i.current&&s.current!==e.scrollPositionOverride&&(L(i.current,e.scrollPositionOverride),s.current=e.scrollPositionOverride)}),[e.scrollPositionOverride]);const b=null!=e.onReorder,{reorderProps:v,reorderItemProps:M,reorderContext:E,reorderInstructionsId:P,reorderInstructions:T}=(({onReorder:e,rootRef:r,viewportConfig:t})=>{const n=null!=e,[s,l]=o.useState(void 0),{reorderProps:i,reorderContext:c,reorderInstructionsId:d,reorderInstructions:f}=u.useReorderable({onReorder:e,rootRef:r,itemSelector:a.ITEM_SELECTOR,isDisabled:!n,columns:1}),g=o.useRef(!1);return o.useEffect((()=>{if(n&&g.current){const e=r.current,o=a.findElementByKey(e,c.currentItemKey.current,a.ITEM_SELECTOR);if(o){const r=t?.scroller()||e;y.scrollToVisible(o,r,0),g.current=!1}}})),n?{reorderProps:m.mergeProps({onKeyDown:e=>{n&&("ArrowUp"===e.key||"ArrowDown"===e.key)&&(e.metaKey||e.ctrlKey)&&e.shiftKey&&(g.current=!0,i.onKeyDown?.(e))},onDragOver:e=>{void 0!==s&&(g.current=!1,a.dragToScroll(e,void 0!==s,r.current))}}),reorderItemProps:{dragKey:s,setDragKey:l,onReorder:e,rootRef:r},reorderContext:c,reorderInstructionsId:d,reorderInstructions:f}:{reorderProps:i,reorderContext:c,reorderInstructionsId:d,reorderInstructions:f}})({onReorder:e.onReorder,rootRef:i,viewportConfig:e.viewportConfig});return b&&M?r.jsxs(r.Fragment,{children:[r.jsxs(l.ReorderableContext.Provider,{value:E,children:[r.jsx(y.List,{...e,contextMenuTriggerProps:C,reorderProps:v,onLoadRange:p,scrollerRef:i,data:x,currentItemOverride:d,onPersistCurrentItem:S,children:t=>r.jsx(D,{...M,itemKey:t.metadata.key,children:e.children(t)})}),r.jsx("span",{id:P,children:r.jsx(c.HiddenAccessible,{children:T})})]}),n&&r.jsx(j,{...I,contextMenuConfig:n,contextMenuContext:h})]}):r.jsxs(r.Fragment,{children:[r.jsx(y.List,{...e,onLoadRange:p,scrollerRef:i,data:x,contextMenuTriggerProps:C,currentItemOverride:d,onPersistCurrentItem:S,children:e.children}),n&&r.jsx(j,{...I,contextMenuConfig:n,contextMenuContext:h})]})}));e.ListView=_}));
//# sourceMappingURL=ListView-c8082c0c.js.map
