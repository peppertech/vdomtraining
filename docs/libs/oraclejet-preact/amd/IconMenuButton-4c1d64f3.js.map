{"version":3,"file":"IconMenuButton-4c1d64f3.js","sources":["../../src/UNSAFE_IconMenuButton/IconMenuButton.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { ButtonLayout } from '../UNSAFE_ButtonLayout';\n\nimport { ChevronDownIcon } from '../PRIVATE_ThemedIcons/ChevronDownIcon';\n\nimport { Menu } from '../UNSAFE_Menu';\nimport { useMenuAction, MenuToggleDetail } from '../hooks/UNSAFE_useMenuAction';\nimport { useTooltip } from '../hooks/UNSAFE_useTooltip';\n\nimport { BaseButton } from '../UNSAFE_BaseButton';\n\nimport type { DimensionProps } from '../utils/UNSAFE_interpolations/dimensions';\n\nimport { ComponentChildren, ComponentChild, Fragment } from 'preact';\nimport { forwardRef, ForwardedRef } from 'preact/compat';\nimport { useRef, useImperativeHandle } from 'preact/hooks';\nimport { mergeProps } from '../utils/UNSAFE_mergeProps';\nimport { TestIdProps } from '../hooks/UNSAFE_useTestId';\n\ntype WidthInterpolationProps = Pick<DimensionProps, 'width'>;\n\nexport type BaseProps = WidthInterpolationProps & {\n  /**\n   * children - One or more MenuItems, dividers, or Menu groups\n   */\n  children?: ComponentChildren;\n\n  /**\n   * The icon is the button's icon.  Note that this is not the menu\n   * expand icon shown on the right (or to the left in right to left mode).\n   */\n  icon?: ComponentChild;\n\n  /**\n   * Specifies that the button element should be disabled.\n   */\n  isDisabled?: boolean;\n\n  /**\n   * Specifies if only the icon is shown, and no down chevron.\n   */\n  isIconOnly?: boolean;\n\n  /**\n   * Specifes the button type\n   */\n  type?: 'button' | 'submit';\n\n  /**\n   * The ID of an element (or space separated IDs of multiple elements) that\n   * describes the button.\n   */\n  'aria-describedby'?: string;\n\n  /**\n   * Specifies if the menu is open\n   */\n  isMenuOpen?: boolean;\n\n  /**\n   * Property that triggers a callback immediately when toggle happens and value of expanded property should be updated\n   */\n  onToggleMenu?: (details: MenuToggleDetail) => void;\n\n  /**\n   * Indicates in what states the button has chrome (background and border).\n   *     \"borderless\"': \"Borderless buttons are a more prominent variation. Borderless\n   * buttons are useful for supplemental actions that require minimal emphasis.\",\n   *     \"outlined\"': \"Outlined buttons are salient, but lighter weight than\n   * solid buttons. Outlined buttons are useful for secondary actions.\",\n   *     \"solid\"': \"Solid buttons stand out, and direct the user's attention to the\n   *  most important actions in the UI.\"\n   */\n  variant?: 'borderless' | 'outlined' | 'solid';\n\n  /**\n   * The size indicates how large the button is rendered: \"sm\", \"md\" (default), \"lg\".\n   */\n  size?: 'sm' | 'md' | 'lg';\n};\n\n/**\n * Note that either an accessibleLabel or tooltip must be specified.\n */\ntype VariationAccessibleLabelProps =\n  | {\n      /**\n       * accessibleLabel - the aria label\n       */\n      accessibleLabel: string;\n\n      /**\n       * tooltip - overrides the accessibleLabel for the tooltip\n       */\n      tooltip?: string;\n    }\n  | {\n      accessibleLabel?: string;\n\n      tooltip: string;\n    };\n\n/**\n * A IconMenuButton is a combined action and menu button.\n */\nexport const IconMenuButton = forwardRef(\n  (\n    {\n      children,\n      tooltip,\n      accessibleLabel,\n      variant = 'outlined',\n      isDisabled = false,\n      isMenuOpen = false,\n      isIconOnly = false,\n      onToggleMenu,\n      size = 'md',\n      type: buttonType = 'button',\n      testId,\n      width,\n      icon,\n      'aria-describedby': ariaDescribedBy\n    }: BaseProps & VariationAccessibleLabelProps & TestIdProps,\n    ref?: ForwardedRef<HTMLButtonElement>\n  ) => {\n    const buttonRef = useRef<HTMLButtonElement>(null);\n    useImperativeHandle(ref!, () => buttonRef.current!, [buttonRef]);\n\n    const { triggerProps, menuProps } = useMenuAction({\n      isDisabled: isDisabled,\n      onToggleMenu: onToggleMenu,\n      isMenuOpen: isMenuOpen,\n      anchorRef: buttonRef\n    });\n\n    const { tooltipContent, tooltipProps } = useTooltip({\n      text: tooltip ? tooltip : accessibleLabel,\n      isDisabled: isMenuOpen || isDisabled\n    });\n\n    const elementDetails = {\n      type: 'button' as const,\n      buttonType: buttonType\n    };\n\n    const rootButton = (\n      <Fragment>\n        <BaseButton\n          {...mergeProps(tooltipProps, triggerProps)}\n          styling={isMenuOpen ? ['min', 'active'] : ['min']}\n          elementDetails={elementDetails}\n          isDisabled={isDisabled}\n          variant={variant}\n          width={width}\n          size={size}\n          ref={buttonRef}\n          aria-describedby={ariaDescribedBy}\n          aria-label={accessibleLabel ?? tooltip}\n          testId={testId}>\n          <ButtonLayout\n            display={'icons'}\n            startIcon={icon}\n            endIcon={isIconOnly ? null : <ChevronDownIcon />}\n            size={size}></ButtonLayout>\n          {tooltipContent}\n        </BaseButton>\n      </Fragment>\n    );\n\n    /*TODO: Remove this hardcoded offsetValue so we have dropdown offset only set on one single place.\n     Could be done via menu props or having a dropdownMenu component. JET-60595*/\n    return isDisabled ? (\n      rootButton\n    ) : (\n      <Fragment>\n        {rootButton}\n        <Menu {...menuProps} offsetValue={4} aria-label={accessibleLabel ?? tooltip}>\n          {children}\n        </Menu>\n      </Fragment>\n    );\n  }\n);\n\nIconMenuButton.displayName = 'IconMenuButton';\n"],"names":["IconMenuButton","forwardRef","children","tooltip","accessibleLabel","variant","isDisabled","isMenuOpen","isIconOnly","onToggleMenu","size","type","buttonType","testId","width","icon","ariaDescribedBy","ref","buttonRef","useRef","useImperativeHandle","current","triggerProps","menuProps","useMenuAction","anchorRef","tooltipContent","tooltipProps","useTooltip","text","elementDetails","rootButton","_jsx","jsx","Fragment","_jsxs","BaseButton","mergeProps","styling","ButtonLayout","display","startIcon","endIcon","ChevronDownIcon","SvgChevronDown","Menu","offsetValue","displayName"],"mappings":"81BA+Ga,MAAAA,EAAiBC,EAAAA,YAC5B,EAEIC,WACAC,UACAC,kBACAC,UAAU,WACVC,cAAa,EACbC,cAAa,EACbC,cAAa,EACbC,eACAC,OAAO,KACPC,KAAMC,EAAa,SACnBC,SACAC,QACAC,OACA,mBAAoBC,GAEtBC,KAEA,MAAMC,EAAYC,SAA0B,MAC5CC,EAAmBA,oBAACH,GAAM,IAAMC,EAAUG,SAAU,CAACH,IAErD,MAAMI,aAAEA,EAAYC,UAAEA,GAAcC,gBAAc,CAChDlB,WAAYA,EACZG,aAAcA,EACdF,WAAYA,EACZkB,UAAWP,KAGPQ,eAAEA,EAAcC,aAAEA,GAAiBC,aAAW,CAClDC,KAAM1B,GAAoBC,EAC1BE,WAAYC,GAAcD,IAGtBwB,EAAiB,CACrBnB,KAAM,SACNC,WAAYA,GAGRmB,EACJC,EAAAC,IAACC,EAAQA,SACP,CAAAhC,SAAAiC,EAAAA,KAACC,EAAAA,WAAU,IACLC,EAAUA,WAACV,EAAcL,GAC7BgB,QAAS/B,EAAa,CAAC,MAAO,UAAY,CAAC,OAC3CuB,eAAgBA,EAChBxB,WAAYA,EACZD,QAASA,EACTS,MAAOA,EACPJ,KAAMA,EACNO,IAAKC,qBACaF,EAAe,aACrBZ,GAAmBD,EAC/BU,OAAQA,YACRmB,EAACC,IAAAM,EAAYA,cACXC,QAAS,QACTC,UAAW1B,EACX2B,QAASlC,EAAa,KAAOwB,EAAAC,IAACU,EAAeC,eAAG,CAAA,GAChDlC,KAAMA,IACPgB,OAOP,OAAOpB,EAAU,EAGf6B,EAAAA,KAACD,EAAQA,oBACNH,EACDC,MAACa,EAAAA,KAAS,IAAAtB,EAAWuB,YAAa,EAAC,aAAc1C,GAAmBD,EACjED,SAAAA,MAGN,IAILF,EAAe+C,YAAc"}