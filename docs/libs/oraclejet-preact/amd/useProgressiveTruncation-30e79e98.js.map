{"version":3,"file":"useProgressiveTruncation-30e79e98.js","sources":["../../src/UNSAFE_TabBarCommon/TabBarLinkItem.tsx","../../src/UNSAFE_TabBarCommon/useProgressiveTruncation.ts"],"sourcesContent":["import { BaseTabBarItem, BaseTabBarItemProps } from './BaseTabBarItem';\n\ntype Link = {\n  /**\n   * Sets the URL that the hyperlink points to. If there is no valid URL use \"#\" for href value to navigate to the top of the page. \n   */\n  href: string;\n  /**\n   * Label of the TabBarLinkItem. For truncated labels this is the content\n   * for tooltip text of the Tab.\n   */\n  label: string;\n};\nexport type TabBarLinkItemProps<K extends string | number> = Link &\n  Pick<\n    BaseTabBarItemProps<K>,\n    'itemKey' | 'icon' | 'badge' | 'metadata' | 'severity' | 'aria-controls' | 'labelMaxWidth'\n  >;\n/**\n * TabBarLinkItem is used to render links in a TabBar. It allows to view the browser's built in link context menu to open the link in new browser tab.\n */\nexport function TabBarLinkItem<K extends string | number>({\n  itemKey,\n  icon,\n  badge,\n  metadata,\n  severity,\n  labelMaxWidth,\n  href,\n  label,\n  'aria-controls': ariaControls\n}: TabBarLinkItemProps<K>) {\n  return (\n    <BaseTabBarItem\n      aria-controls={ariaControls}\n      itemKey={itemKey}\n      label={label}\n      icon={icon}\n      badge={badge}\n      metadata={metadata}\n      severity={severity}\n      labelMaxWidth={labelMaxWidth}\n      href={href}></BaseTabBarItem>\n  );\n}\n","import type { RefObject } from 'preact';\nimport { useCallback, useLayoutEffect, useState, useRef, StateUpdater } from 'preact/hooks';\nimport { useResizeObserver } from '../hooks/UNSAFE_useResizeObserver';\nimport { Size } from '../utils/UNSAFE_size';\nimport { getTabWidths } from '../utils/PRIVATE_tabBarUtils';\nimport type { TrailingContentInfo } from '../utils/PRIVATE_tabBarUtils';\n\ntype ProgressiveTruncationProps = {\n  rootRef: RefObject<HTMLDivElement>;\n  isDisabled?: boolean;\n};\n\nexport const useProgressiveTruncation = <K extends string | number>({\n  rootRef,\n  isDisabled = false\n}: ProgressiveTruncationProps) => {\n  const trailingContentWidths = useRef(new Map<K, TrailingContentInfo>());\n  const [tabMaxWidth, setTabMaxWidth] = useState<Map<K, Size>>();\n  const [tabBarWidth, setTabBarWidth] = useState<number>(0);\n\n  useLayoutEffect(() => {\n    if (tabMaxWidth == undefined && rootRef && rootRef.current && !isDisabled) {\n      const isOverflow = tabBarWidth < rootRef.current.scrollWidth;\n      if (!isOverflow) {\n        return;\n      }\n      const tabWidths = getTabWidths(\n        rootRef.current,\n        trailingContentWidths,\n        isDisabled,\n        tabBarWidth,\n        false\n      );\n\n      const tabMaxWidthMap = new Map(\n        tabWidths.map((tab) => [tab.key, (tab.maxWidth + 'px') as Size])\n      );\n      setTabMaxWidth(tabMaxWidthMap);\n    }\n  }, [tabBarWidth, tabMaxWidth, isDisabled, rootRef]);\n\n  const getTabBarMaxWidth = useCallback(\n    (entry: { contentRect: { width: StateUpdater<number> } }) => {\n      if (tabBarWidth !== entry.contentRect.width) {\n        setTabBarWidth(entry.contentRect.width);\n        if (tabMaxWidth !== undefined) {\n          setTabMaxWidth(undefined);\n        }\n      }\n    },\n    [tabMaxWidth, tabBarWidth]\n  );\n  useResizeObserver(rootRef, getTabBarMaxWidth, { isDisabled: isDisabled });\n  return {\n    maxWidths: tabMaxWidth\n  };\n};\n"],"names":["itemKey","icon","badge","metadata","severity","labelMaxWidth","href","label","ariaControls","_jsx","jsx","BaseTabBarItem","rootRef","isDisabled","trailingContentWidths","useRef","Map","tabMaxWidth","setTabMaxWidth","useState","tabBarWidth","setTabBarWidth","useLayoutEffect","undefined","current","scrollWidth","tabWidths","getTabWidths","tabMaxWidthMap","map","tab","key","maxWidth","getTabBarMaxWidth","useCallback","entry","contentRect","width","useResizeObserver","maxWidths"],"mappings":"4LAqBM,UAAoDA,QACxDA,EAAOC,KACPA,EAAIC,MACJA,EAAKC,SACLA,EAAQC,SACRA,EAAQC,cACRA,EAAaC,KACbA,EAAIC,MACJA,EACA,gBAAiBC,IAEjB,OACEC,EAACC,IAAAC,iBACgB,CAAA,gBAAAH,EACfR,QAASA,EACTO,MAAOA,EACPN,KAAMA,EACNC,MAAOA,EACPC,SAAUA,EACVC,SAAUA,EACVC,cAAeA,EACfC,KAAMA,GAEZ,6BChCwC,EACtCM,UACAC,cAAa,MAEb,MAAMC,EAAwBC,EAAAA,OAAO,IAAIC,MAClCC,EAAaC,GAAkBC,EAAQA,YACvCC,EAAaC,GAAkBF,EAAQA,SAAS,GAEvDG,EAAAA,iBAAgB,KACd,GAAmBC,MAAfN,GAA4BL,GAAWA,EAAQY,UAAYX,EAAY,CAEzE,KADmBO,EAAcR,EAAQY,QAAQC,aAE/C,OAEF,MAAMC,EAAYC,EAAYA,aAC5Bf,EAAQY,QACRV,EACAD,EACAO,GACA,GAGIQ,EAAiB,IAAIZ,IACzBU,EAAUG,KAAKC,GAAQ,CAACA,EAAIC,IAAMD,EAAIE,SAAW,SAEnDd,EAAeU,EAChB,IACA,CAACR,EAAaH,EAAaJ,EAAYD,IAE1C,MAAMqB,EAAoBC,eACvBC,IACKf,IAAgBe,EAAMC,YAAYC,QACpChB,EAAec,EAAMC,YAAYC,YACbd,IAAhBN,GACFC,OAAeK,GAElB,GAEH,CAACN,EAAaG,IAGhB,OADAkB,EAAiBA,kBAAC1B,EAASqB,EAAmB,CAAEpB,WAAYA,IACrD,CACL0B,UAAWtB,EACZ"}