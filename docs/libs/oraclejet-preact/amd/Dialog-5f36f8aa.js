define(['exports', 'preact/jsx-runtime', 'preact/compat', './WindowOverlay-43c10424', './useTestId-b5cd4766', './useAnimation-5a74955f', 'preact/hooks', './refUtils-d354a169', './UNSAFE_Dialog/themes/redwood/DialogTheme', './FocusTrap-60520575', './Layer-6f29b67f', './LayerHost-639b3284', './Modal-7bece8d5', './classNames-08d99695', './ImageVars.css-17386400', './useComponentTheme-5aa41a8f', './useId-c9578d26', './dimensions-60420dbb', './mergeInterpolations-9ede4cf7', './useResizeObserver-275c3e83', './useDraggable-7f591a3d', './Floating-5d98c1ca', './IconButton-ae9a01ce', './Close-04d8a398', './Resizable-d12fcde1', './useBreakpoints-52d11a72', './useTranslationBundle-d07d4b20', './animationUtils-716a9aa6', './tabbableUtils-85aa6918'], (function(e,n,o,a,s,i,t,r,l,c,d,u,m,f,b,g,h,p,y,R,v,D,S,x,E,z,j,I,A){"use strict";const O=({children:e,id:o,cancelBehavior:a,onClose:s,draggableProps:i,headerDecoration:t="on"})=>{const{styles:r}=g.useComponentTheme(l.DialogRedwoodTheme),c=f.classNames([r.dialogHeaderStyle,..."on"===t?[r.dialogHeaderDecorationStyle]:[]]),d="string"==typeof e?n.jsx("h1",{id:o,className:r.dialogTitleStyle,children:e}):n.jsx("div",{children:e}),u=j.useTranslationBundle("@oracle/oraclejet-preact"),m="icon"===a?n.jsx("div",{children:n.jsx("div",{className:r.dialogHeaderCloseIconStyle,children:n.jsx(S.IconButton,{"aria-label":u.message_close(),size:"sm",variant:"ghost",onAction:()=>{s?.({reason:"icon"})},children:n.jsx(x.SvgClose,{})})})}):null;return n.jsxs("div",{className:c,...i,children:[d,m]})},B=o.forwardRef((({children:e,style:o},a)=>n.jsx("div",{ref:a,className:o,children:e}))),C=o.forwardRef((({children:e,header:o,footer:a,visibility:i,labelId:c,role:d,ariaLabelledBy:u,ariaDescribedBy:m,cancelBehavior:h,draggableProps:p,isResizable:y,headerDecoration:v,containerRef:D,onClose:S,onResizeStart:x,onResize:j,onResizeEnd:I,onKeyDown:A,testId:C,style:T,footerRef:w},N)=>{const k=t.useRef(null),L=r.mergeRefs(N,k),[F,U]=t.useState(!1),P=!z.useBreakpoints().md,{classes:_,styles:W}=g.useComponentTheme(l.DialogRedwoodTheme),H=t.useCallback((()=>{k.current&&(k.current.clientHeight<400?U(!0):U(!1))}),[]);t.useEffect((()=>{H()}),[H]),R.useResizeObserver(k,H);const M=P?W.baseStyleSmallWidth:W.baseStyleDesktop,X=F?W.dialogContentStyleNoShrink:W.dialogContentStyle,G="visible"===i?W.visibilityVisible:W.visibilityHidden,K=s.useTestId(C);return n.jsxs("div",{ref:L,className:f.classNames([_,M,G,b.globalImages]),style:T,onKeyDown:A,role:d,"aria-labelledby":u,"aria-describedby":m,...K,children:[n.jsxs("div",{className:W.dialogContainerStyle,children:[n.jsx(O,{id:c,onClose:S,headerDecoration:v,cancelBehavior:h,draggableProps:p,children:o}),n.jsx("div",{className:X,children:n.jsx("div",{className:W.dialogBodyStyle,children:e})}),n.jsx(B,{ref:w,style:W.dialogFooterStyle,children:a})]}),y&&n.jsx(E.Resizable,{onResizeStart:x,onResize:j,onResizeEnd:I,containerRef:D})]})})),T=o.forwardRef((({autoFocusRef:e,children:o,isOpen:s,header:l="",footer:u,modality:f="modal",launcherRef:b,anchorRef:g,placement:R,offset:S=0,cancelBehavior:x="none",dragAffordance:E="none",resizeBehavior:j="none",headerDecoration:I="on",onDragStart:O,onDragMove:B,onDragEnd:T,onResizeStart:N,onResize:k,onResizeEnd:L,onFocusSet:F,onClose:U,onTransitionEnd:P,role:_="dialog","aria-labelledby":W,"aria-describedby":H,testId:M,...X},G)=>{const[K,Y]=t.useState(s?"initial":"unmounted"),[V,q]=t.useState("hidden"),J=t.useRef(null),Q=t.useRef(null),Z=t.useRef(null),$=t.useRef(null),ee=!z.useBreakpoints().md,ne=ee?"bottom":R||"center",oe=ee?"opening"===K?"slideUp":"slideDown":"opening"===K?"zoomIn":"zoomOut",ae=h.useId(),se=W||ae,ie=[...Object.values(p.dimensionInterpolations)],te=y.mergeInterpolations(ie),{...re}=te(X),le=t.useCallback((()=>{$.current&&A.allTabbableElements($.current).length>0?A.focusWithin($.current):A.focusWithin(Q.current),F?.()}),[F]),ce=t.useCallback((()=>{const e=Z.current;e&&A.focusOn(e)}),[Z]),{nodeRef:de}=i.useAnimation(oe,{animationStates:w,isAnimatedOnMount:!0,onAnimationEnd:()=>{s?P?.(!0):s||(ce(),de(null),q("hidden"),Y("unmounted"),P?.(!1))}}),ue=t.useMemo((()=>r.mergeRefs(Q,G)),[Q,G]),me=t.useCallback((e=>{Z.current===A.getActiveElement()&&"F6"===e.code&&(e.preventDefault(),e.stopPropagation(),A.focusWithin(Q.current),F?.())}),[f]),{draggableProps:fe}=v.useDraggable({isDisabled:"none"===E,containerRef:J,onDragStart:O,onDragMove:B,onDragEnd:T});t.useEffect((()=>{if("unmounted"!==K||s){if("unmounted"!==K||!s)return"initial"===K&&s?(de(Q.current),void Y("opening")):void("opening"===K&&s?q("visible"):s||Y("closing"));Y("initial")}}),[s,K,de]),t.useEffect((()=>(s&&(b?.current&&b.current instanceof Element?Z.current=document.body.contains(b.current)?b.current:A.getActiveElement():Z.current=A.getActiveElement(),"modeless"===f&&Z.current?.addEventListener("keydown",me)),()=>{"modeless"===f&&Z.current?.removeEventListener("keydown",me)})),[s,b,me,f]),t.useEffect((()=>{"visible"===V&&le()}),[V,le]);const be=e=>{switch(e.code){case"Escape":U?.({reason:"escapeKey"});break;case"F6":Z.current&&"modeless"===f&&A.focusOn(Z.current),e.preventDefault(),e.stopPropagation()}},ge=()=>n.jsx(c.FocusTrap,{autoFocusRef:e,children:n.jsx(C,{ref:ue,labelId:se,header:l,footer:u,role:_,ariaLabelledBy:se,ariaDescribedBy:H,onKeyDown:be,testId:M,style:re,visibility:V,cancelBehavior:x,draggableProps:fe,isResizable:"resizable"===j,headerDecoration:I,containerRef:J,onClose:U,onResizeStart:N,onResize:k,onResizeEnd:L,footerRef:$,children:o})}),he=()=>g&&g.current?n.jsx(D.Floating,{ref:J,anchorRef:g,placement:"bottom-start",flipOptions:{mainAxis:!1,crossAxis:!1},shiftOptions:{mainAxis:!1,crossAxis:!1},children:ge()}):n.jsx(a.WindowOverlay,{placement:ne,offset:S,children:ge()});return"modal"===f?n.jsx(m.Modal,{isOpen:"unmounted"!==K,children:he()}):"unmounted"!==K?n.jsx(d.Layer,{children:he()}):null})),w={zoomIn:{from:{scaleX:.9,scaleY:.9,transformOrigin:"center",opacity:0},to:{scaleX:1,scaleY:1,opacity:1},options:{duration:200}},zoomOut:{from:{scaleX:1,scaleY:1,transformOrigin:"center",opacity:1},to:{scaleX:.9,scaleY:.9,opacity:0},options:{duration:200}},slideUp:{...I.SLIDE_UP_XLARGE,options:{duration:I.DURATION_LARGE}},slideDown:{...I.SLIDE_DOWN_XLARGE,options:{duration:I.DURATION_LARGE}}};e.Dialog=T}));
//# sourceMappingURL=Dialog-5f36f8aa.js.map
