define(['exports', 'preact/jsx-runtime', './PRIVATE_TimeComponent/themes/TimeComponentStyles.css', './classNames-2e65b3b3', 'preact/hooks', './Flex-d0cc2f6e', './BaseButton-0ad3564a', './ButtonLayout-64cb114c', './useTooltip-648a4c14', './Floating-d924078b', 'preact/compat', './TopLayerHost-06d05670', './logger-e130a3d8', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './Plus-5ca34d16', './getFormatParse-97bbbd74', './useTranslationBundle-d999fb18', './Minus-da2065f6', './TrackResizeContainer-ff49e9cb', 'preact', './Text-7cbb9b7a'], (function(e,t,n,o,r,i,a,s,l,c,d,m,h,u,g,x,p,f,w,y,C,T,v){"use strict";function S({width:e,height:o,children:r,align:i,justify:a}){const s=T.toChildArray(r);return t.jsx("div",{class:n.layersStackStyles.base,style:{width:e,height:o,alignItems:i,justifyItems:a},children:s.map((e=>t.jsx("div",{class:n.layersStackStyles.layer,children:e})))})}function b({innerRef:e,children:i}){const[a,s]=r.useState(!1),l={onControlsShow:()=>s(!0),onControlsHide:()=>s(!1)};return t.jsx("div",{ref:e,...l,class:o.classNames([n.overlayControlsContainerStyles.base,a&&n.overlayControlsContainerStyles.visible]),children:i})}function j({children:e,accessibleLabel:o,isDisabled:r=!1,onAction:i}){const{tooltipContent:c,tooltipProps:{onFocus:d,onBlur:m,...h}}=l.useTooltip({text:o});return t.jsxs("div",{class:n.zoomControlStyles.base,...h,children:[t.jsx(a.BaseButton,{elementDetails:r?void 0:{type:"span",isFocusable:!1},isDisabled:r,size:"sm",variant:"outlined",styling:["min"],onAction:i,children:t.jsx(s.ButtonLayout,{display:"icons",startIcon:e,size:"sm"})}),c]})}const M=e=>Date.parse(e),D=e=>new Date(e).toISOString(),R=1.25,O=.8,A=(e,t,n,o,r,i,a,s,l,c,d,m,h,u)=>{const{newViewportStartTime:g,newViewportEndTime:x}=((e,t,n,o,r,i,a,s)=>{const l=e,c=t,d=n,m=o,h=r,u=i,g=d-c,x=Math.max(0,g-a)*((l-c)/g),p=Math.max(0,g-a)*((d-l)/g),f=-Math.max(0,s-g)*((l-c)/g),w=-Math.max(0,s-g)*((d-l)/g),y=Math.max(f,Math.min(x,(1-1/u)*(l-c))),C=Math.max(w,Math.min(p,(1-1/u)*(d-l))),T=Math.max(0,m-(c+y)),v=Math.max(0,d-C-h);return{newViewportStartTime:Math.max(m,c+(y-v)),newViewportEndTime:Math.min(h,d-(C-T))}})(e,t,n,o,r,i,a,s),{minorAxisScale:p,majorAxisScale:f}=((e,t,n,o,r,i,a)=>{const s=((e,t,n)=>{const o=t-e;return[...n,-1/0].findIndex((e=>o>e))-1})(e,t,n);let l=0;return l=void 0===i?s-r:s>=r?Math.min(s-r,i.length-1-a):-Math.min(r-s,a),{minorAxisScale:o[r+l],majorAxisScale:i&&i[a+l]}})(g,x,l,c,d,m,h),w={viewportStartTime:g,viewportEndTime:x,majorAxisScale:f,minorAxisScale:p},y=g!==t||x!==n;return u&&y&&u({viewportStart:D(g),viewportEnd:D(x),majorAxisScale:f,minorAxisScale:p}),{newViewport:w,isViewportChanged:y}};function P({zoomFactor:e=R,startTime:n,endTime:o,viewportStartTime:r,viewportEndTime:i,majorAxisZoomOrder:a,majorAxisZoomOrderIndex:s,minorAxisZoomOrder:l,minorAxisZoomOrderIndex:c,zoomOrderViewDurationThresholds:d,minZoomViewportDuration:m,maxZoomViewportDuration:h,onViewportChange:u}){const g=w.useTranslationBundle("@oracle/oraclejet-preact").timeComponent_tooltipZoomIn(),x=r+(i-r)/2,{newViewport:f,isViewportChanged:y}=A(x,r,i,n,o,e,m,h,d,l,c,a,s),C=!y;return t.jsx(j,{accessibleLabel:g,isDisabled:C,onAction:()=>{u?.({viewportStart:D(f.viewportStartTime),viewportEnd:D(f.viewportEndTime),majorAxisScale:f.majorAxisScale,minorAxisScale:f.minorAxisScale})},children:t.jsx(p.SvgPlus,{size:"4x"})})}function L({zoomFactor:e=O,startTime:n,endTime:o,viewportStartTime:r,viewportEndTime:i,majorAxisZoomOrder:a,majorAxisZoomOrderIndex:s,minorAxisZoomOrder:l,minorAxisZoomOrderIndex:c,zoomOrderViewDurationThresholds:d,minZoomViewportDuration:m,maxZoomViewportDuration:h,onViewportChange:u}){const g=w.useTranslationBundle("@oracle/oraclejet-preact").timeComponent_tooltipZoomOut(),x=r+(i-r)/2,{newViewport:p,isViewportChanged:f}=A(x,r,i,n,o,e,m,h,d,l,c,a,s),C=!f;return t.jsx(j,{accessibleLabel:g,isDisabled:C,onAction:()=>{u?.({viewportStart:D(p.viewportStartTime),viewportEnd:D(p.viewportEndTime),majorAxisScale:p.majorAxisScale,minorAxisScale:p.minorAxisScale})},children:t.jsx(y.SvgMinus,{size:"4x"})})}const E=({captureTargetRef:e,numPointers:t=1,onPointerGestureDown:n,onPointerGestureMove:o,onPointerGestureEnd:i,onExtraneousPointerDown:a,isDisabled:s=!1})=>{const l=r.useRef([]);s&&(l.current=[]);const c=e=>{const n=l.current.findIndex((t=>t.pointerId===e.pointerId));-1!==n&&(l.current[n]=e,l.current.length===t&&i&&i({pointers:l.current}),l.current.splice(n,1))};return s?{}:{onPointerDown:o=>{l.current.push(o),l.current.length===t?(l.current.forEach((t=>e.current.setPointerCapture(t.pointerId))),n&&n({pointers:l.current})):l.current.length>t&&a&&a({pointers:l.current})},onPointerMove:e=>{if(0===l.current.length)return;const n=l.current.findIndex((t=>t.pointerId===e.pointerId));-1!==n&&(l.current[n]=e,l.current.length===t&&o&&o({pointers:l.current}))},onPointerUp:c,onPointerCancel:c,onPointerOut:c,onPointerLeave:c}},z=({captureTargetRef:e,draggableRegion:t,onDragStart:n,onDragMove:o,onDragEnd:i,isDisabled:a=!1})=>{const s={isDragging:!1,x0:-1,y0:-1,regionOffsetX:-1,regionOffsetY:-1},l=r.useRef(s),c=(e,t)=>{const{isDragging:n,x0:o,y0:r,regionOffsetX:i,regionOffsetY:a}=l.current;if(!n)return;const s=e.offsetX,c=e.offsetY;t&&t({x:s,y:c,dx:s-o,dy:c-r,regionOffsetX:i,regionOffsetY:a,originalEvent:e})},d=E({captureTargetRef:e,numPointers:1,onExtraneousPointerDown:()=>{l.current=s},onPointerGestureDown:({pointers:[e]})=>{const o=e.offsetX,r=e.offsetY;if(0!==e.button||!((e,t,n)=>{if(!n)return!0;const{xMin:o,xMax:r,yMin:i,yMax:a}=n;return e>=o&&e<=r&&t>=i&&t<=a})(o,r,t))return;const{regionOffsetX:i,regionOffsetY:a}=((e,t,n)=>n?{regionOffsetX:e-n.xMin,regionOffsetY:t-n.yMin}:{regionOffsetX:e,regionOffsetY:t})(o,r,t);l.current={isDragging:!0,x0:o,y0:r,regionOffsetX:i,regionOffsetY:a},n&&n({x:o,y:r,regionOffsetX:i,regionOffsetY:a,originalEvent:e})},onPointerGestureMove:({pointers:[e]})=>{c(e,o)},onPointerGestureEnd:({pointers:[e]})=>{c(e,i),l.current=s}});return a?{}:d};function V({thumbWidth:e,thumbHeight:n,thumbTop:o,thumbLeft:i,thumbRight:a,draggableRegion:s,processDragRangeXChange:l,processDragRangeYChange:c,processClickRangeXChange:d,processClickRangeYChange:m,styles:h,width:u,height:g}){const x=r.useRef(null),p=z({captureTargetRef:x,draggableRegion:s,onDragMove:({x:e,y:t,regionOffsetX:n,regionOffsetY:o})=>{l?.(e,n),c?.(t,o)}});return t.jsx("div",{ref:x,class:h.container,style:{width:u,height:g},onClick:e=>{const t=e.offsetX,n=e.offsetY,{xMin:o,xMax:r,yMin:i,yMax:a}=s;t>=o&&t<=r&&n>=i&&n<=a||(d?.(t),m?.(n))},...p,children:t.jsx("div",{class:h.track,children:t.jsx("div",{class:h.thumb,style:{width:e,height:n,top:o,left:i,right:a}})})})}function Z({width:e,height:o,positions:r,variant:i}){const a=r.map((e=>`M${e},0 V${o}`)).join(" ");return t.jsx("svg",{width:e,height:o,children:t.jsx("path",{class:n.verticalGridlinesStyles[i],d:a})})}function I({x:e,y:r,width:i,label:a,font:s,labelPosition:c,isTruncated:d,isStartIntervalTruncated:m,isRTL:h}){const{tooltipContent:u,tooltipProps:{onFocus:g,onBlur:x,...p}}=l.useTooltip({text:a,isDisabled:!d}),f="center"===c?"center":void 0,w=m&&d?h?"ltr":"rtl":void 0;return t.jsxs("div",{...p,"aria-hidden":"true",class:o.classNames([n.timeAxisLabelsStyles.label,d&&n.timeAxisLabelsStyles.labelTruncated]),style:{left:e,top:r,width:i,textAlign:f,direction:w,...s},children:[t.jsx(v.Text,{variant:"primary",truncation:"ellipsis",size:"inherit",weight:"inherit",children:a}),u]})}e.DEFAULT_ZOOM_IN_FACTOR=R,e.DEFAULT_ZOOM_OUT_FACTOR=O,e.TimeComponentCanvas2D=function({width:e,height:n,draw:o}){const i=r.useRef(null);return r.useLayoutEffect((()=>{const t=i.current,o=t.getContext("2d");t.style.width=`${e}px`,t.style.height=`${n}px`;const r=window.devicePixelRatio;t.width=Math.floor(e*r),t.height=Math.floor(n*r),o.scale(r,r)}),[e,n]),r.useLayoutEffect((()=>{const e=i.current,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),o(t)}),[e,n,o]),t.jsx("canvas",{ref:i})},e.TimeComponentHorizontalScrollbar=function({getNewRange:e,onRangeChange:o,...i}){const a=r.useRef({min:0,max:0}),s=(e,t)=>{const{min:n,max:r}=a.current;(e!==n||t!==r)&&o(e,t),a.current={min:e,max:t}};return t.jsx(V,{...i,processDragRangeXChange:(t,n)=>{const{newMin:o,newMax:r}=e(Math.max(0,t-n));s(o,r)},processClickRangeXChange:t=>{const{xMin:n,xMax:o}=i.draggableRegion,r=(o-n)/2,{newMin:a,newMax:l}=e(Math.max(0,t-r));s(a,l)},styles:n.horizontalScrollbarStyles})},e.TimeComponentHorizontalScrollbarContainer=function({getLayout:e,onRangeChange:o,children:r}){return t.jsx("div",{class:n.horizontalScrollbarStyles.base,children:t.jsx(C.TrackResizeContainer,{width:"100%",height:"100%",children:(t,n)=>r({...e(t),onRangeChange:o,width:t,height:n})})})},e.TimeComponentHorizontalTimeAxis=function({font:e,labelPosition:o,labels:r,labelTicks:i,labelPositions:a,isLabelTruncated:s,isIntervalStartTruncated:l,intervalWidths:c,majorGridTicksPos:d,minorGridTicksPos:m,isRTL:h,width:u,height:g}){return t.jsxs(S,{width:`${u}px`,height:`${g}px`,children:[t.jsx("div",{class:n.timeAxisLabelsStyles.base,children:r.map(((n,r)=>t.jsx(I,{font:e,label:n,labelPosition:o,x:a[r],y:0,width:c[r],isTruncated:s[r],isStartIntervalTruncated:0===r&&l,isRTL:h},i[r])))}),m&&t.jsx(Z,{width:u,height:g,positions:m,variant:"minor"}),d&&t.jsx(Z,{width:u,height:g,positions:d,variant:"major"})]})},e.TimeComponentLayersStack=S,e.TimeComponentOverlayControlsContainer=b,e.TimeComponentPanZoomLayout=function({overlayControlsContainerRef:e,width:r,height:i,overlayControls:a,verticalControl:s,verticalControlTopGap:l="0",verticalControlBottomGap:c="0",verticalControlStartGap:d=!0,horizontalControl:m,horizontalControlStartGap:h="0",horizontalControlEndGap:u="0",horizontalControlTopGap:g=!0,vis:x}){return t.jsxs("div",{class:n.panZoomLayoutStyles.base,style:{gridTemplateColumns:`${h} minmax(0, 1fr) ${u} auto`,gridTemplateRows:`${l} minmax(0, 1fr) ${c} auto`,width:r,height:i},children:[t.jsx("div",{class:o.classNames([n.panZoomLayoutStyles.verticalControl,d&&n.panZoomLayoutStyles.verticalControlWithSpacing]),children:s}),t.jsx("div",{class:o.classNames([n.panZoomLayoutStyles.horizontalControl,g&&n.panZoomLayoutStyles.horizontalControlWithSpacing]),children:m}),t.jsx("div",{class:n.panZoomLayoutStyles.vis,children:a?t.jsxs(S,{children:[x,t.jsx(b,{innerRef:e,children:a})]}):x})]})},e.TimeComponentVerticalGridlines=Z,e.TimeComponentVerticalScrollbar=function({getNewRange:e,onRangeChange:o,...i}){const a=r.useRef({min:0,max:0}),s=(e,t)=>{const{min:n,max:r}=a.current;(e!==n||t!==r)&&o(e,t),a.current={min:e,max:t}};return t.jsx(V,{...i,processDragRangeYChange:(t,n)=>{const{newMin:o,newMax:r}=e(Math.max(0,t-n));s(o,r)},processClickRangeYChange:t=>{const{yMin:n,yMax:o}=i.draggableRegion,r=(o-n)/2,{newMin:a,newMax:l}=e(Math.max(0,t-r));s(a,l)},styles:n.verticalScrollbarStyles})},e.TimeComponentVerticalScrollbarContainer=function({getLayout:e,onRangeChange:o,children:r}){return t.jsx("div",{class:n.verticalScrollbarStyles.base,children:t.jsx(C.TrackResizeContainer,{width:"100%",height:"100%",children:(t,n)=>r({...e(n),onRangeChange:o,width:t,height:n})})})},e.TimeComponentZoomControls=function({position:e="topEnd",zoomParameters:r,onViewportChange:a}){return t.jsx(C.TrackResizeContainer,{width:"100%",height:"100%",children:(s,l)=>{const{getZoomOrderViewDurationThresholds:c,...d}=r,m=c(s);return t.jsx("div",{class:o.classNames([n.zoomControlsLayoutStyles.base,n.zoomControlsLayoutStyles[e]]),children:t.jsx("div",{class:n.zoomControlsLayoutStyles.controls,children:t.jsxs(i.Flex,{direction:"column",gap:"2.25x",children:[t.jsx(P,{...d,zoomOrderViewDurationThresholds:m,onViewportChange:a}),t.jsx(L,{...d,zoomOrderViewDurationThresholds:m,onViewportChange:a})]})})})}})},e.getDefaultDateFormatter=(e,t)=>{const n=D(t),o=M(e.getPreviousDate(n)),r=M(e.getNextDate(n))-o<=864e5?{dateStyle:"medium",timeStyle:"medium",locale:navigator.language}:{dateStyle:"medium",locale:navigator.language};return f.getFormatParse(r).format},e.getGestureZoomFactor=e=>(Math.abs(e)/15*.05+1)**Math.sign(e),e.getISOString=D,e.getPositionTime=(e,t,n,o,r)=>(r?o-e:e)*(n-t)/o+t,e.getTimePosition=(e,t,n,o,r)=>{const i=o*(e-t)/(n-t);return r?o-i:i},e.parseDate=M,e.useDrag=z,e.usePointerGesture=E,e.useWheel=({onWheel:e,preventDefault:t=!0,isDisabled:n=!1})=>n?{}:{onWheel:n=>{const{deltaX:o,deltaY:r}=(e=>{const{deltaX:t,deltaY:n,deltaMode:o}=e;switch(o){case e.DOM_DELTA_PIXEL:return{deltaX:-t,deltaY:-n};case e.DOM_DELTA_LINE:return{deltaX:15*-t,deltaY:15*-n};case e.DOM_DELTA_PAGE:return{deltaX:40*-t,deltaY:40*-n};default:return{deltaX:-t,deltaY:-n}}})(n);t&&n.preventDefault(),e({x:n.offsetX,y:n.offsetY,deltaX:o,deltaY:r,ctrlKey:n.ctrlKey||n.metaKey})}},e.zoomTime=A}));
//# sourceMappingURL=TimeComponentCanvas2D-abefcfde.js.map
