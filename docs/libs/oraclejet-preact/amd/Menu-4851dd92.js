define(['exports', 'preact/jsx-runtime', 'preact/compat', './Floating-d924078b', './Layer-f22bc6df', './TopLayerHost-06d05670', 'preact/hooks', './mergeProps-7d608009', './classNames-2e65b3b3', './useUser-e0989b0b', './MenuItem-96f8014c', './UNSAFE_Menu/themes/MenuStyles.css', './useTestId-af48c25c', './UNSAFE_Menu/themes/DropdownMenuStyles.css', './Modal-098f562a', 'css!./WindowOverlayStyles.styles.css', './logger-e130a3d8', 'module', './UNSAFE_WindowOverlay/themes/redwood/WindowOverlayVariants.css', './useSheetSwipe-ee78bba5', 'css!./SheetStyles.styles.css', './UNSAFE_Menu/themes/SheetMenuStyles.css'], (function(e,s,t,n,o,r,a,l,u,c,i,d,m,f,y,h,b,p,v,M,x,S){"use strict";const g=({children:e,"aria-label":t,currentFocus:n="menu",display:o,closeSubmenu:r,menuId:f,menuLevel:y,anchorRef:h})=>{const{onClose:b,testId:p}=i.useMenuContext(),{direction:v}=c.useUser(),M=a.useRef(null),x=a.useRef({wasMouseMoved:!1,lastMouseLeaveMenuItemdRelatedTarget:null}),[S,g]=a.useState(),[C,w]=a.useState(!1),[j,E]=a.useState(!1),F=a.useCallback((e=>{g(e.key),"keyboard"===e.reason?w(!0):w(!1)}),[]),L=a.useCallback((()=>{const e=s=>{const t=i.keyElemExtractor(s.target),n=t?.key,o=t?.elem;if(n&&o){x.current.wasMouseMoved=!0;const s=new MouseEvent("mouseenter");o.dispatchEvent(s),M.current?.removeEventListener("mousemove",e)}};M.current?.addEventListener("mousemove",e)}),[]),{currentKeyProps:I}=function(e,s,t,n,o){const r=a.useMemo((()=>({ArrowDown:s,ArrowUp:e,Home:t,End:n})),[s,e,t,n]),l=a.useCallback((e=>{if(o){const s=r[e.key];if(s&&!e.shiftKey){const t=s();t&&o({key:t,reason:"keyboard"}),e.preventDefault()}}}),[o,r]);return{currentKeyProps:null==o?{}:{onKeyDown:l}}}(i.getPrevNext(M.current,!0,S),i.getPrevNext(M.current,!1,S),(()=>i.getNVisible(M.current,0)),(()=>i.getLastVisible(M.current)),F);a.useEffect((()=>{const e=M.current;let s;if("none"!==n&&e)if("menu"===n){F({key:void 0,reason:"click"});const t=()=>{e.focus()};"sheet"===o?t():s=setTimeout((()=>{t()}),k)}else if("firstItem"===n){const e=i.getNVisible(M.current,0);e&&F({key:e,reason:"keyboard"})}else if("secondItem"===n){const e=i.getNVisible(M.current,1);e&&F({key:e,reason:"keyboard"})}return()=>{clearTimeout(s)}}),[F,n,y,o,h]),a.useEffect((()=>{L()}),[L]);const P=m.useTestId(p);return s.jsx("div",{...f&&{id:f},ref:M,tabIndex:S||"main"!==y&&"sheet"!==o?-1:0,role:"menu","aria-label":t,class:u.classNames([d.menuStyles.menuContainerStyle,d.menuStyles[`${o}MenuContainerStyle`]]),...l.mergeProps(I,i.getKeyboardCloseProps(b,y),i.getCloseSubmenuEvent(v,r),i.getMenuContainerFocusMethods((()=>{M.current?.contains(document.activeElement)||(w(!1),E(!1))}),(()=>{E(!0)})),i.getMenuContainerMouseLeave((e=>{e.relatedTarget&&e.relatedTarget.isEqualNode(x.current.lastMouseLeaveMenuItemdRelatedTarget)||(F({key:void 0,reason:"mouseEnter"}),M.current?.focus())})),i.getMenuPointerDown()),...P,children:s.jsx(i.MenuContainerContext.Provider,{value:{menuContainerRef:M,currentKey:S,showFocusRing:C,changeKey:F,menuContainerGeneralInformation:x,isContainerFocused:j},children:e})})},k=0,C=t.forwardRef((({anchorRef:e,defaultPlacement:r,offsetValue:a,closeSubmenu:l,children:u,"aria-label":c,currentFocus:d,menuId:m,menuLevel:y,flipOptions:h},b)=>{const{onClose:p}=i.useMenuContext(),v=t.useCallback((e=>{if("sub"===y)return;const s=i.keyElemExtractor(e.target)?.key;s||p?.({reason:"outsideClick",target:e.target})}),[p,y]);return s.jsx(o.Layer,{logicalParentRef:e,children:s.jsx(n.Floating,{class:f.dropdownMenuStyles.base,onClickOutside:v,anchorRef:e,flipOptions:h,shiftOptions:{mainAxis:!1,crossAxis:!1},sizeOptions:{isMaxHeightAdjusted:!0,isMaxWidthAdjusted:!0},boundaryOptions:{padding:0},placement:r,offsetValue:a,children:s.jsx("div",{style:{minWidth:w},ref:b,children:s.jsx(g,{menuLevel:y,closeSubmenu:l,"aria-label":c,currentFocus:d,menuId:m,display:"dropdown",anchorRef:e,children:u})})})})})),w=200,j=({children:e})=>s.jsx("div",{class:S.sheetMenuStyles.modalWrapper,children:e}),E=t.forwardRef((({children:e},t)=>s.jsx("div",{class:S.sheetMenuStyles.modalContainer,ref:t,children:e}))),F=({backdropVisible:e=!1})=>s.jsx("div",{class:u.classNames([S.sheetMenuStyles.modalBackdrop,e&&S.sheetMenuStyles.modalBackdropVisible])}),L=({children:e,"aria-label":t,currentFocus:n,anchorRef:r,closeSubmenu:l,menuLevel:u})=>{const{onClose:c}=i.useMenuContext();a.useEffect((()=>{const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}),[]);const d=a.useCallback((()=>{c?.({reason:"dismissed"})}),[c]),{backdropRef:m}=y.useModal({isOpen:!0,onBackdropClick:d}),{swipeProps:f}=M.useSheetSwipe(d);return s.jsx(o.Layer,{logicalParentRef:r,children:s.jsxs(j,{children:[s.jsx(F,{backdropVisible:"main"===u}),s.jsx(E,{ref:m,children:s.jsx("div",{class:S.sheetMenuStyles.sheetMenuContainerWrapper,...f,children:s.jsx(g,{"aria-label":t,currentFocus:n,display:"sheet",closeSubmenu:l,menuLevel:u,children:e})})})]})})},I=i.getIsMobile();e.DropdownMenu=C,e.Menu=({onClose:e,isOpen:t,testId:n,initialFocus:o="menu",placement:r="bottom-start",offsetValue:a=0,...l})=>s.jsx(i.MenuContext.Provider,{value:{onClose:e,isMobile:I,testId:n},children:t?s.jsx(s.Fragment,{children:I?s.jsx(L,{...l,currentFocus:o,menuLevel:"main"}):s.jsx(C,{...l,currentFocus:o,menuLevel:"main",defaultPlacement:r,offsetValue:a,flipOptions:{crossAxis:!0,mainAxis:!0,fallbackPlacements:["bottom-start","bottom-end","top-start","top-end","end-top","start-top","end-bottom","start-bottom"]}})}):null}),e.SheetMenu=L}));
//# sourceMappingURL=Menu-4851dd92.js.map
