define(['exports', 'preact/hooks', './useResizeObserver-275c3e83', './tabBarUtils-70c9cb5f'], (function(e,t,n,r){"use strict";const s=(e,t,n)=>{if(null==e)return!0;if(e&&t&&n){const r=[...e,...t];return r.length!==n.length||JSON.stringify(n)!==JSON.stringify(r)}return!1},c=(e,t)=>{if(null!=e&&null!=t){let n=0,r=e.length-1,s=null,c=null;for(;n<=r&&n<e.length&&r>-1;){const l=Math.floor((n+r)/2),u=e[l];if(u===t)return{closestEntry:u,closestIndex:l};u<t?(s=u,c=l,n=l+1):r=l-1,c=s&&t>s?Math.abs(t-s)>102&&l+1<=e.length-2?l+1:Math.abs(t-s)>48?l:l-1>=0?l-1:0:l-1>=0?l-1:0}return{closestEntry:s,closestIndex:c}}return{closestEntry:null,closestIndex:null}};e.useDetectHorizontalOverflow=function({rootRef:e,keysArray:l,isTruncationDisabled:u=!0}){const[i,o]=t.useState(),[a,f]=t.useState(),h=t.useRef(new Map),[d,y]=t.useState(),[m,b]=t.useState(0),v=t.useRef(!1),g=t.useRef(!1),p=t.useRef();t.useLayoutEffect((()=>{const t=e?.current?.clientWidth,n=e?.current?.scrollWidth;if(e.current&&l&&l.length>0&&t&&t>0&&(m!==t&&b(t),void 0===d)){if(t>0&&t<n)if(v.current)p.current=p.current?.map((e=>({...e})));else{const n=r.getTabWidths(e.current,h,u,t,v?.current,l);n.every((e=>e.hasReachedLimit))&&(v.current=!0),p.current=n}else y((e=>e));if(!u){const e=new Map(p.current?.map((e=>[e.key,e.maxWidth+"px"])));y(e)}if(t<n){const n=p.current?.map((e=>e.cumulativeWidth));if(n&&t<n[n.length-1]){const{closestEntry:s,closestIndex:i}=c(n,t);if(s&&null!=i&&(o(l.slice(0,i)),f(l?.slice(i)),i>0&&!g.current&&!u)){const n=r.getTabWidths(e.current,h,u,t,v?.current),s=new Map(n.map((e=>[e.key,e.maxWidth+"px"])));g.current=!0,y(s)}}}}}),[l,e,m,d,u]);const x=t.useCallback((t=>{const n=Math.ceil(t.contentRect.width);Math.abs(m-t.contentRect.width)>1&&(b(t.contentRect.width),void 0===d||v.current||y(void 0),n>=e.current?.scrollWidth&&(o(l),f([])),g.current=!1)}),[m,d,e,l]);return n.useResizeObserver(e,x),s(i,a,l)?{visibleItemKeys:l,overflowItemKeys:a,maxWidths:d}:{visibleItemKeys:i,overflowItemKeys:a,maxWidths:d}}}));
//# sourceMappingURL=useDetectHorizontalOverflow-c90aa487.js.map
