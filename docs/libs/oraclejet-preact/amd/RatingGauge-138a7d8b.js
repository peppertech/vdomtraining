define(['exports', 'preact/jsx-runtime', 'preact', 'preact/hooks', './classNames-08d99695', './UNSAFE_RatingGauge/themes/RatingGaugeContract.css', './useComponentTheme-5aa41a8f', './useUser-85c781ea', './vanilla-extract-dynamic.esm-eceadd82', './UNSAFE_RatingGauge/themes/redwood/RatingGaugeTheme', './useKeyboardEvents-d87e3587', 'preact/compat', './LayerHost-e95c5f30', 'css!./LayerStyles.styles.css', './Floating-a658b79c', 'css!./useDatatip.styles.css', './datatipUtils-1b8ab042', './meterUtils-9d026b15', './useDatatip-87792500', './useTooltipControlled-fb57eb02', './mergeProps-bcfa6a92', './TabbableModeContext-a9c97640', './useTabbableMode-dc440317', './useTestId-3a316499'], (function(e,t,s,a,o,i,n,l,r,d,c,u,h,b,p,g,m,y,R,x,S,v,f,C){"use strict";function D(e,t,s,a,o){const i=a.current;if(!i||0===i.width)return-1;const n=e-i.x,l=t*(o?i.width-n:n)/i.width/s;return l<.5?0:Math.min(t,Math.ceil(l)*s)}function w(e){if(!e)return{width:0,x:0};const t=e.getBoundingClientRect();return{width:t.width,x:t.x+window.scrollX}}const T=({isSelected:e,isDisabled:s,isReadOnly:a,color:c="neutral"})=>{const{forcedColors:u}=l.useUser(),h="active"===u,b=h&&s,p=function(e){return"neutral"===e||"gold"===e||"danger"===e||"warning"===e||"success"===e?e:void 0}(c),g=r.assignInlineVars({[i.ratingGaugeVars.colorSelected]:c,[i.ratingGaugeVars.borderColorSelected]:c,[i.ratingGaugeVars.colorSelectedReadonly]:c}),{variantClasses:m,styles:{ratingStarBaseStyle:y,innerRatingStarColor:R,outerRatingStarColor:x,outerDisabledHighContrastBaseStyle:S,outerDisabledHighContrastSelectedStyle:v,outerDisabledHighContrastUnselectedStyle:f}}=n.useComponentTheme(d.RatingGaugeRedwoodTheme,{color:p,selectionState:e?"isSelected":"isNotSelected",disabledState:s?"isDisabled":"isNotDisabled",readonlyState:a?"isReadonly":"isNotReadonly",highContrastState:h?"isHighContrast":"isNotHighContrast"});return t.jsx("svg",{viewBox:"0 0 36 36",height:"100%",width:"100%",style:p?void 0:g,class:o.classNames([y,p?m:""]),children:t.jsxs("g",{children:[t.jsx("path",{class:R,d:"m18 1 5.0061 11.9524 12.9939 1.0344-9.9 8.4215 3.0246 12.5917-11.1246-6.7476-11.12461 6.7476 3.02461-12.5917-9.9-8.4215 12.9939-1.0344z"}),t.jsx("path",{class:o.classNames([x,b?S:"",b?e?v:f:""]),d:"m23.0061 12.9524-5.0061-11.9524-5.0061 11.9524-12.9939 1.0344 9.9 8.4215-3.02461 12.5917 11.12461-6.7476 11.1246 6.7476-3.0246-12.5917 9.9-8.4215zm10.5043 1.8394-8.5262 7.2528 2.6077 10.8562-9.5919-5.818-9.59192 5.818 2.60772-10.8562-8.52615-7.2528 11.19115-.891 4.3192-10.31227 4.3192 10.31227z"})]})})},j=({fillRatio:e,isDisabled:a,isReadonly:o,color:i})=>{const{direction:r}=l.useUser(),c="rtl"===r,{styles:{fractionalStarBaseStyle:u}}=n.useComponentTheme(d.RatingGaugeRedwoodTheme);return 1===e||0===e?t.jsx(T,{isSelected:1===e,isDisabled:a,isReadOnly:o,color:i}):t.jsxs(s.Fragment,{children:[t.jsx("div",{class:u,style:{clipPath:`inset(0% ${c?100*(1-e):0}% 0% ${c?0:100*e}%)`},children:t.jsx(T,{isSelected:!1,isDisabled:a,isReadOnly:o,color:i})}),t.jsx("div",{class:u,style:{clipPath:`inset(0% ${c?0:100*(1-e)}% 0% ${c?100*(1-e):0}%)`},children:t.jsx(T,{isSelected:!0,isDisabled:a,isReadOnly:o,color:i})})]})};e.RatingGauge=function({max:e=5,value:i=0,size:r,color:u="neutral",step:h=1,isReadonly:b,isDisabled:p,testId:g,...m}){const v=C.useTestId(g);y.validateRange(0,e,i,h);const T=a.useRef(null),P=a.useRef(w(null)),M=!b&&!p;a.useEffect((()=>{P.current=w(T.current)}),[r,e]);const N=((e,t,s,o,i,n,r,d)=>{const u=a.useRef(),{direction:h}=l.useUser(),b="rtl"===h,p=e=>{d?.({value:e}),u.current=e},g=c.useKeyboardEvents(s,0,e,t,u,r,d);return n?{onPointerUp:s=>{const a=D(s.pageX,e,t,i,b);-1!==a&&r?.({value:a})},onBlur:()=>{r?.({value:s})},onPointerMove:s=>{const a=D(s.pageX,e,t,i,b);-1!==a&&a!=u.current&&p(a)},onKeyUp:g.onKeyUp,onKeyDown:g.onKeyDown,onPointerLeave:()=>{p(void 0)},onPointerEnter:()=>{i.current=w(o.current)}}:{}})(e,h,i,T,P,M,m.onCommit,m.onInput),{datatipContent:U,datatipProps:G}=function({max:e,value:t,isDisabled:s,isReadonly:a,datatip:o,thresholds:i,width:n}){const l=(Math.max(1,Math.ceil(t))-Math.ceil(e/2))*n/e,r=o||!i||s?o:y.findThreshold(t,i)?.accessibleLabel,{datatipContent:d,datatipProps:c}=R.useDatatip({content:s||a?null:r,anchor:"element",offset:{mainAxis:8,crossAxis:l},placement:"bottom",touchResponse:"touchStart"});return{datatipContent:d,datatipProps:a&&!s?{"aria-describedby":void 0}:c}}({max:e,value:i,isDisabled:p,isReadonly:b,datatip:m.datatip,thresholds:m.thresholds,width:P.current.width}),{tooltipContent:B,tooltipProps:z}=function({isReadonly:e,isDisabled:t,tooltip:s}){const[o,i]=a.useState(!1),n=e&&!t?s:"",{tooltipContent:l,tooltipProps:r}=x.useTooltipControlled({text:n,isOpen:o,anchor:{x:"element",y:"element"},position:"bottom",isDisabled:t,onToggle:({value:e})=>i(e),variant:"tooltip"});return{tooltipContent:l,tooltipProps:!t&&e?r:{"aria-describedby":void 0}}}({isReadonly:b,isDisabled:p,tooltip:m.tooltip}),A=y.getMeterAriaProps(i,0,e,m["aria-label"],m["aria-labelledby"],m.thresholds,p,b,m.tooltip),{"aria-describedby":E,...F}=G,{"aria-describedby":H,...I}=z,K=S.mergeProps(N,F,I),O=[E,H,m["aria-describedby"]].filter(Boolean).join(" "),V=y.getThresholdColorFromValue(i,u,m.thresholds),{isTabbable:L}=f.useTabbableMode(),{classes:$,styles:{baseStyle:X,interactiveStyle:_,itemStyle:k,sizeStyle:q}}=n.useComponentTheme(d.RatingGaugeRedwoodTheme,{size:r});return t.jsxs(s.Fragment,{children:[t.jsx("div",{...v,...A,ref:T,class:o.classNames([$,X,M?_:void 0]),tabIndex:L&&!p?0:-1,...K,"aria-describedby":O,children:[...Array(e)].map(((e,s)=>{const a=Math.min(Math.max(0,i-s),1);return t.jsx("div",{className:o.classNames([q,k]),children:t.jsx(j,{fillRatio:a,isDisabled:p,isReadonly:b,color:V})})}))}),U,B]})}}));
//# sourceMappingURL=RatingGauge-138a7d8b.js.map
