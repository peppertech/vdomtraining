define(['exports', 'preact/jsx-runtime', 'preact/hooks', './classNames-2e65b3b3', './PRIVATE_TimeComponent/themes/TimeComponentStyles.css', './UNSAFE_Gantt/themes/GanttStyles.css', './size-a13c8931', './useTestId-af48c25c', './TrackResizeContainer-ff49e9cb', './Text-7cbb9b7a', './TimeComponentCanvas2D-abefcfde', './useUser-e0989b0b', './Layer-f22bc6df', 'preact/compat', './TopLayerHost-06d05670', './Floating-d924078b', './hooks/PRIVATE_useDatatip/themes/useDatatip.css', './useId-bea76214', 'css!./useDatatip.styles.css', './util-aa688832', './mergeProps-7d608009', './useSelection-0c4c6e5c', './hooks/PRIVATE_useChartDatatip/themes/ChartDatatipStyles.css', './useTranslationBundle-d999fb18', './accUtils-3fffc1bb', './LayoutUtils-75d8cff4', './PathUtils-aae5f82f', './useCssVars-bb132b52', './useTextDimensions-a2b7ad1c', './Common/themes/themeContract.css', './utils-8a58b095', './eventsUtils-0fae65ca'], (function(e,t,o,i,r,n,a,s,d,l,c,h,u,m,g,w,p,b,x,f,v,y,T,k,j,R,A,S,C,I,P,L){"use strict";function O({innerRef:e,width:o,height:d,testId:l,children:c,...h}){const u=s.useTestId(l);return t.jsx("div",{ref:e,tabIndex:0,...u,...h,class:i.classNames([r.styles.baseStyle,n.styles.baseStyle]),style:{width:o&&a.sizeToCSS(o),height:d&&a.sizeToCSS(d)},children:c})}function E({rowAxisTopGap:e="0",rowAxisBottomGap:o="0",resolvedRowAxisWidth:i,resolvedRowAxisMaxWidth:r,rowAxis:a,ganttView:s}){const l="%"===i.suffix,c="%"===r.suffix;return l||c?t.jsx(d.TrackResizeContainer,{width:"100%",height:"100%",children:(d,h)=>t.jsxs("div",{class:n.rowAxisLayoutStyles.base,style:{gridTemplateRows:`${e} minmax(0, 1fr) ${o}`},children:[t.jsx("div",{class:n.rowAxisLayoutStyles.rowAxis,children:a(l?d*(i.value/100):i.value,c?d*(r.value/100):r.value)}),t.jsx("div",{class:n.rowAxisLayoutStyles.ganttView,children:s})]})}):t.jsxs("div",{class:n.rowAxisLayoutStyles.base,style:{gridTemplateRows:`${e} minmax(0, 1fr) ${o}`},children:[t.jsx("div",{class:n.rowAxisLayoutStyles.rowAxis,children:a(i.value,r.value)}),t.jsx("div",{class:n.rowAxisLayoutStyles.ganttView,children:s})]})}const D=({maxWidth:e,maxHeight:o,data:{label:i="",labelStyle:r}})=>t.jsx("div",{style:{width:e>-1?e:void 0,height:o,display:"flex",alignItems:"center",...r},children:t.jsx(l.Text,{size:"md",variant:r?.color?"inherit":"primary",truncation:"ellipsis",children:i})}),V=(e,t,o)=>({maxWidth:o,maxHeight:e.height,data:t[e.index]});class M{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let o=this.length++;for(;o>0;){const e=o-1>>1,i=this.values[e];if(t>=i)break;this.ids[o]=this.ids[e],this.values[o]=i,o=e}this.ids[o]=e,this.values[o]=t}pop(){if(0===this.length)return;const e=this.ids[0];if(this.length--,this.length>0){const e=this.ids[0]=this.ids[this.length],t=this.values[0]=this.values[this.length],o=this.length>>1;let i=0;for(;i<o;){let e=1+(i<<1);const o=e+1;let r=this.ids[e],n=this.values[e];const a=this.values[o];if(o<this.length&&a<n&&(e=o,r=this.ids[o],n=a),n>=t)break;this.ids[i]=r,this.values[i]=n,i=e}this.ids[i]=e,this.values[i]=t}return e}peek(){if(0!==this.length)return this.ids[0]}peekValue(){if(0!==this.length)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const z=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _{static from(e){if(!e||void 0===e.byteLength||e.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[t,o]=new Uint8Array(e,0,2);if(251!==t)throw new Error("Data does not appear to be in a Flatbush format.");const i=o>>4;if(3!==i)throw new Error(`Got v${i} data when expected v3.`);const r=z[15&o];if(!r)throw new Error("Unrecognized array type.");const[n]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new _(a,n,r,void 0,e)}constructor(e,t=16,o=Float64Array,i=ArrayBuffer,r){if(void 0===e)throw new Error("Missing required argument: numItems.");if(isNaN(e)||e<=0)throw new Error(`Unexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535);let n=e,a=n;this._levelBounds=[4*n];do{n=Math.ceil(n/this.nodeSize),a+=n,this._levelBounds.push(4*a)}while(1!==n);this.ArrayType=o,this.IndexArrayType=a<16384?Uint16Array:Uint32Array;const s=z.indexOf(this.ArrayType),d=4*a*this.ArrayType.BYTES_PER_ELEMENT;if(s<0)throw new Error(`Unexpected typed array class: ${o}.`);r&&void 0!==r.byteLength&&!r.buffer?(this.data=r,this._boxes=new this.ArrayType(this.data,8,4*a),this._indices=new this.IndexArrayType(this.data,8+d,a),this._pos=4*a,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new i(8+d+a*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,4*a),this._indices=new this.IndexArrayType(this.data,8+d,a),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,48+s]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e),this._queue=new M}add(e,t,o,i){const r=this._pos>>2,n=this._boxes;return this._indices[r]=r,n[this._pos++]=e,n[this._pos++]=t,n[this._pos++]=o,n[this._pos++]=i,e<this.minX&&(this.minX=e),t<this.minY&&(this.minY=t),o>this.maxX&&(this.maxX=o),i>this.maxY&&(this.maxY=i),r}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const e=this._boxes;if(this.numItems<=this.nodeSize)return e[this._pos++]=this.minX,e[this._pos++]=this.minY,e[this._pos++]=this.maxX,void(e[this._pos++]=this.maxY);const t=this.maxX-this.minX||1,o=this.maxY-this.minY||1,i=new Uint32Array(this.numItems);for(let r=0,n=0;r<this.numItems;r++){const a=e[n++],s=e[n++],d=e[n++],l=e[n++],c=Math.floor(65535*((a+d)/2-this.minX)/t),h=Math.floor(65535*((s+l)/2-this.minY)/o);i[r]=Z(c,h)}H(i,e,this._indices,0,this.numItems-1,this.nodeSize);for(let t=0,o=0;t<this._levelBounds.length-1;t++){const i=this._levelBounds[t];for(;o<i;){const t=o;let r=e[o++],n=e[o++],a=e[o++],s=e[o++];for(let t=1;t<this.nodeSize&&o<i;t++)r=Math.min(r,e[o++]),n=Math.min(n,e[o++]),a=Math.max(a,e[o++]),s=Math.max(s,e[o++]);this._indices[this._pos>>2]=t,e[this._pos++]=r,e[this._pos++]=n,e[this._pos++]=a,e[this._pos++]=s}}}search(e,t,o,i,r){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let n=this._boxes.length-4;const a=[],s=[];for(;void 0!==n;){const d=Math.min(n+4*this.nodeSize,F(n,this._levelBounds));for(let l=n;l<d;l+=4){if(o<this._boxes[l])continue;if(i<this._boxes[l+1])continue;if(e>this._boxes[l+2])continue;if(t>this._boxes[l+3])continue;const d=0|this._indices[l>>2];n>=4*this.numItems?a.push(d):(void 0===r||r(d))&&s.push(d)}n=a.pop()}return s}neighbors(e,t,o=1/0,i=1/0,r){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let n=this._boxes.length-4;const a=this._queue,s=[],d=i*i;e:for(;void 0!==n;){const i=Math.min(n+4*this.nodeSize,F(n,this._levelBounds));for(let o=n;o<i;o+=4){const i=0|this._indices[o>>2],s=B(e,this._boxes[o],this._boxes[o+2]),l=B(t,this._boxes[o+1],this._boxes[o+3]),c=s*s+l*l;c>d||(n>=4*this.numItems?a.push(i<<1,c):(void 0===r||r(i))&&a.push(1+(i<<1),c))}for(;a.length&&1&a.peek();){if(a.peekValue()>d)break e;if(s.push(a.pop()>>1),s.length===o)break e}n=a.length?a.pop()>>1:void 0}return a.clear(),s}}function B(e,t,o){return e<t?t-e:e<=o?0:e-o}function F(e,t){let o=0,i=t.length-1;for(;o<i;){const r=o+i>>1;t[r]>e?i=r:o=r+1}return t[o]}function H(e,t,o,i,r,n){if(Math.floor(i/n)>=Math.floor(r/n))return;const a=e[i+r>>1];let s=i-1,d=r+1;for(;;){do{s++}while(e[s]<a);do{d--}while(e[d]>a);if(s>=d)break;U(e,t,o,s,d)}H(e,t,o,i,d,n),H(e,t,o,d+1,r,n)}function U(e,t,o,i,r){const n=e[i];e[i]=e[r],e[r]=n;const a=4*i,s=4*r,d=t[a],l=t[a+1],c=t[a+2],h=t[a+3];t[a]=t[s],t[a+1]=t[s+1],t[a+2]=t[s+2],t[a+3]=t[s+3],t[s]=d,t[s+1]=l,t[s+2]=c,t[s+3]=h;const u=o[i];o[i]=o[r],o[r]=u}function Z(e,t){let o=e^t,i=65535^o,r=65535^(e|t),n=e&(65535^t),a=o|i>>1,s=o>>1^o,d=r>>1^i&n>>1^r,l=o&r>>1^n>>1^n;o=a,i=s,r=d,n=l,a=o&o>>2^i&i>>2,s=o&i>>2^i&(o^i)>>2,d^=o&r>>2^i&n>>2,l^=i&r>>2^(o^i)&n>>2,o=a,i=s,r=d,n=l,a=o&o>>4^i&i>>4,s=o&i>>4^i&(o^i)>>4,d^=o&r>>4^i&n>>4,l^=i&r>>4^(o^i)&n>>4,o=a,i=s,r=d,n=l,d^=o&r>>8^i&n>>8,l^=i&r>>8^(o^i)&n>>8,o=d^d>>1,i=l^l>>1;let c=e^t,h=i|65535^(c|o);return c=16711935&(c|c<<8),c=252645135&(c|c<<4),c=858993459&(c|c<<2),c=1431655765&(c|c<<1),h=16711935&(h|h<<8),h=252645135&(h|h<<4),h=858993459&(h|h<<2),h=1431655765&(h|h<<1),(h<<1|c)>>>0}const Y=e=>{const t=e.map((e=>e.taskObjs.length)).reduce(((e,t)=>e+t),0),o=new _(t);return e.forEach((e=>e.taskObjs.forEach((({overallStartTime:e,overallEndTime:t,y:i,height:r})=>{o.add(e,i,t,i+r)})))),o.finish(),o},W=(e,t,o,i,r=!0)=>r?e<=i&&o<=t:e<i&&o<t,X=(e,t)=>W(e.overallStartTime,e.overallEndTime,t.overallStartTime,t.overallEndTime,!1),G=(e,t,o)=>{const i=((e,t,o)=>{if(0===e.length)return 0;let i=0,r=e.length;for(;i<r;){const o=Math.floor((i+r)/2);e[o]<t?i=o+1:r=o}if(i<e.length&&(e[i]===t||"successor"===o))return i;return i>0?i-1:0})(e,t,"predecessor");let r=i;for(let t=i;t<e.length&&e[t]<=o;t++)r=t;return{minRowInd:i,maxRowInd:r}},K=e=>({start:e.start?e.start:e.end,end:e.end?e.end:e.start}),N=e=>!(!e||"none"===e),$=(e,t,o,i)=>{const r=N(i.selectionMode),n=new Set(i.selectedIds);let a=0;const s=e.map(((i,s)=>{const d=i.tasks.map(((e,o)=>{const{start:i,end:a}=K(e),d=c.parseDate(i),l=c.parseDate(a);return{id:e.id,renderIndex:0,index:o,rowIndex:s,y:-1,startTime:d,endTime:l,overallStartTime:d,overallEndTime:l,rowLevel:0,height:void 0!==e.height?e.height:t.taskHeight,borderRadius:void 0!==e.borderRadius?e.borderRadius.toString():t.taskBorderRadius,fill:e.color?e.color:t.taskBgColor,stroke:t.taskBorderColor,strokeWidth:1,isSelectable:r,isSelected:n.has(e.id),selectionEffect:{stroke:t.taskEffectBorderColor,strokeWidth:2,padding:2},hoverEffect:{stroke:t.taskEffectBorderColor,strokeWidth:1,padding:0,shadow:{...t.taskEffectBoxShadow}},focusEffect:{stroke:t.taskEffectBorderColor,strokeWidth:1,padding:2}}}));d.sort(((e,t)=>e.startTime-t.startTime)),d.forEach(((e,t)=>e.renderIndex=t));const l=(({rowHeight:e,rowY:t,taskObjs:o,resolvedVars:i})=>{if(0===o.length)return(e=>e.rowPaddingTop+e.taskHeight+e.rowPaddingBottom)(i);o[0].rowLevel=0,o[0].y=0;const r=[[o[0]]],n=[o[0]];for(let e=1;e<o.length;e++){const t=o[e],i="stack",a=o[e-1];X(t,a)?r[r.length-1].push(t):r.push([t]);let s,d=0;switch(i){case"stack":{let e=!0;for(let o=0;o<n.length;o++){if(s=void 0,!X(t,n[o])){s=n[o],n[o]=t,e=!1;break}d+=1}e&&n.push(t),t.y=0,s&&(t.previousAdjacentTaskObj=s,s.nextAdjacentTaskObj=t);break}default:return i}t.rowLevel=d}const a=i.rowPaddingTop,s=i.rowPaddingBottom,d=n.map((()=>0));if(void 0===e){o.forEach((e=>{e.height>d[e.rowLevel]&&(d[e.rowLevel]=e.height)}));const e=d.map((e=>e+a+s)).reduce(((e,t,o)=>(e.push((e[o-1]||0)+t),e)),[]);o.forEach((t=>{t.y+=(e[t.rowLevel-1]||0)+a}))}const l=r.map((e=>{let t=0;return e.forEach((e=>{const o=e.y+e.height;o>t&&(t=o)})),t}));let c;return void 0===e?(c=l.reduce(((e,t)=>Math.max(e,t)))+a,r.forEach((e=>{e.forEach((e=>{const o=d[e.rowLevel];e.y+=(o-e.height)/2+t}))}))):(c=e,r.forEach(((e,o)=>{const i=l[o];let r=Number.MAX_VALUE;e.forEach((e=>{e.y+=Math.floor((c-e.height)/2),e.y<r&&(r=e.y)}));const n=Math.floor((c-i)/2)-r;e.forEach((e=>{e.y+=t+n}))}))),c})({rowHeight:i.height,rowY:a,taskObjs:d,resolvedVars:t});((e,t)=>{e.forEach((e=>{const{index:o,rowIndex:i}=e,r=t[i].tasks[o].label;r&&(e.labelObj={startTime:e.startTime,endTime:e.endTime,label:r,isInner:!0,position:"center"})}))})(d,e);const h={id:i.id,y:a,height:l,index:s,isSelected:d.some((e=>e.isSelected)),taskObjs:d},u="on"===o.horizontal?1:0;return a+=l+u,h})),d=s[s.length-1],l=d?d.y+d.height:0,h=new Map;s.forEach((e=>e.taskObjs.forEach((e=>h.set(e.id,e)))));const u=new Map;s.forEach((e=>u.set(e.id,e)));const m=(e=>({tasks:Y(e)}))(s);return{rowData:e,rowObjs:s,rowPadding:t.rowPaddingTop,totalRowsHeight:l,gridlines:o,spatialIndex:m,idRowObjMap:u,idTaskObjMap:h}},q=(e,t)=>{const o=e.selectionProps.selectedIds||[],i=[];o.forEach((e=>{const o=t.get(e);o&&i.push(o)}));const r=N(e.selectionProps.selectionMode)?e.hoverProps.hoveredTaskId:void 0,n=void 0!==r?t.get(r):void 0,a=e.currentProps.currentTask,s=!0===a?.isFocused,d=a?.id,l=s&&void 0!==d?t.get(d):void 0;return{selectedTaskObjs:i,hoveredTaskObj:n,focusedTaskObj:l}},J=(e,t,o,i,r,n)=>{const a=c.getTimePosition(e.startTime,t,o,i,n),s=c.getTimePosition(e.endTime,t,o,i,n);return{...e,x:n?s:a,y:e.y-r,width:n?a-s:s-a}},Q=(e,t,o,i,r,n,a)=>{const s=i,d=i+n,l=e.rowObjs.map((e=>e.y)),{minRowInd:h,maxRowInd:u}=G(l,s,d),m=[];for(let n=h;n<=u;n++){const s=e.rowObjs[n],d=s.taskObjs.filter((({overallStartTime:e,overallEndTime:i})=>W(e,i,t,o))).map((e=>J(e,t,o,r,i,a))),l={...s,y:s.y-i,taskObjs:d};m.push(l)}const g=[];m.forEach((i=>{i.taskObjs.forEach((({index:i,rowIndex:n,labelObj:s,y:d,height:l})=>{const h=((e,t,o,i,r,n,a,s)=>{if(!e)return;const d=c.getTimePosition(e.startTime,r,n,a,s),l=c.getTimePosition(e.endTime,r,n,a,s);let h;switch(e.position){case"center":h="center";break;case"start":h=s?"right":"left";break;case"end":h=s?"left":"right";break;default:return e.position}return{x:s?l:d,y:o,width:s?d-l:l-d,height:i,label:e.label,isInner:e.isInner,textAlign:h,labelStyle:t}})(s,e.rowData[n].tasks[i].labelStyle,d,l,t,o,r,a);h&&g.push(h)}))}));const w="on"===e.gridlines.horizontal?m.map((({y:e,height:t})=>e+t+.5)):void 0,p=new Map;return m.forEach((e=>e.taskObjs.forEach((e=>p.set(e.id,e))))),{spatialIndex:e.spatialIndex,gridlines:e.gridlines,horizontalGridlinesPos:w,rowData:e.rowData,allRowObjs:e.rowObjs,allIdTaskObjMap:e.idTaskObjMap,allIdRowObjMap:e.idRowObjMap,rowPadding:e.rowPadding,rowObjs:m,taskLabelObjs:g,idTaskObjMap:p}},ee=(e,t)=>{const o=[],i=t&&t.length>0;return e&&o.push(e),i&&o.push(t.join(", ")),o.join(". ")},te=(e,t,o,i)=>{const r=[];(e.isSelectable||e.isSelected)&&r.push(e.isSelected?i.dataVisualization_stateSelected():i.dataVisualization_stateUnselected());const n=t[e.rowIndex].tasks[e.index],a=void 0!==n.accessibleLabel?n.accessibleLabel:((e,t,o,i)=>{const r=t[e.rowIndex],n=r.tasks[e.index],{start:a,end:s}=K(n),d=a===s,l=[];if(r.label){const e=i.dataVisualization_labelAndValue({LABEL:i.gantt_labelRow(),VALUE:r.label});l.push(e)}if(d){const e=i.dataVisualization_labelAndValue({LABEL:i.gantt_labelDate(),VALUE:o(a)});l.push(e)}else{const e=i.dataVisualization_labelAndValue({LABEL:i.gantt_labelStart(),VALUE:o(a)}),t=i.dataVisualization_labelAndValue({LABEL:i.gantt_labelEnd(),VALUE:o(s)});l.push(e),l.push(t)}if(n.label){const e=i.dataVisualization_labelAndValue({LABEL:i.gantt_labelLabel(),VALUE:n.label});l.push(e)}return l.join("; ")})(e,t,o,i);return ee(a,r)},oe=(e,t)=>{const o=t[e.index],i=o.accessibleLabel||o.label;return ee(i,[])};function ie({rowObj:e,rowData:o,isRowSelected:r,isFocused:a,isHorizontalGridlinesVisible:s,ariaActive:d,children:l}){const c=oe(e,o);return t.jsx("div",{id:d?.dataId===e.id?d.ariaId:void 0,"data-oj-row-index":e.index,role:"row","aria-label":c,class:i.classNames([n.rowAxisStyles.labelContainer,r&&n.rowBackgroundStyles.selected,a&&n.rowAxisStyles.labelContainerFocused,s&&n.rowAxisStyles.withLabelSeparatorBottom]),children:t.jsx("div",{role:"rowheader",children:l})},e.id)}function re({content:e,placement:i="top-end-corner",offset:r,borderColor:n,anchor:a,targetFocusRef:s}){const d=o.useRef(b.useId()),[l,c]=o.useState({x:0,y:0}),h=r||{mainAxis:8,crossAxis:-8},m=o.useRef(null),g="element"===a?m:{current:l};return{datatipContent:null!=e?t.jsx(u.Layer,{children:t.jsx(w.Floating,{anchorRef:g,placement:i,offsetValue:h,flipOptions:{crossAxis:!0,mainAxis:!0},shiftOptions:{crossAxis:!1,mainAxis:!1},children:t.jsx("div",{id:d.current,className:p.styles.dvtDatatipStyle,style:{borderColor:n},children:e})})}):null,datatipProps:{"aria-describedby":d.current,onPointerEnter:e=>{e.eventPhase!==Event.AT_TARGET&&e.eventPhase!==Event.BUBBLING_PHASE||(m.current=e.currentTarget)},onPointerLeave:()=>{c({x:-1e4,y:-1e4})},onPointerMove:e=>{c({x:e.clientX,y:e.clientY})},onFocus:e=>{e.eventPhase!==Event.AT_TARGET&&e.eventPhase!==Event.BUBBLING_PHASE||(m.current=e.target)},onShowFocusDatatip:()=>{m.current=s.current}}}}const ne=({targetRef:e,rowData:t,hoveredRowObj:o,focusedRowObj:i,currentRowLabelInteraction:r,rowAxisRegion:n})=>{const{direction:a}=h.useUser(),s="rtl"===a,d={hover:{rowObj:o,anchor:"pointer"},focus:{rowObj:i,anchor:"element"},none:{rowObj:void 0,anchor:"pointer"}},{anchor:l,rowObj:c}=d[r],u=c?t[c.index].accessibleLabel:void 0,m=c&&"element"===l?{x:0,y:c.y+n.y,width:n.w,height:c.height}:void 0;return re({content:u,anchor:l,placement:"top-start",offset:f.calculateOffset(s,n.w,m),targetFocusRef:e})},ae=({rowObjs:e,hoverProps:t})=>({onPointerMove:o=>{const i=(t=>{const{clientX:o,clientY:i}=t,r=document.elementsFromPoint(o,i);for(let t=0;t<r.length;t++){const o=r[t].dataset.ojRowIndex;if(o)return e[Number(o)].id}})(o);i!==t.hoveredRowLabelId&&t.onRowLabelHoverChange({id:i})}});function se({innerRef:e,scrollPosition:o,resolvedWidth:r,resolvedMaxWidth:a,currentRowLabel:s,currentRowLabelInteraction:d,hoveredRowLabelId:l,onRowLabelHoverChange:c,layoutObj:{labelPaddingInlineStart:h,labelPaddingInlineEnd:u,rowData:m,rowObjs:g,idRowObjMap:w,isHorizontalGridlinesVisible:p},ariaActive:b,children:x}){const f=r!==1/0?r:void 0,y=a!==1/0?a:void 0,T=Math.min(r,a),k=T===1/0?-1:T-(h+u),j=ae({rowObjs:g,hoverProps:{hoveredRowLabelId:l,onRowLabelHoverChange:c}}),{datatipContent:R,datatipProps:A}=ne({rowData:m,hoveredRowObj:l&&w.get(l),focusedRowObj:s?.isFocused?w.get(s.id):void 0,currentRowLabelInteraction:d,rowAxisRegion:{x:0,y:-o,w:2*(h+u),h:-1},targetRef:e});return t.jsxs("div",{ref:e,...v.mergeProps(j,A),class:i.classNames([n.rowAxisStyles.base,p&&n.rowAxisStyles.withSeparatorTop]),style:{width:f,maxWidth:y},children:[t.jsx("div",{role:"grid",class:n.rowAxisStyles.contentContainer,style:{top:-o},children:g.map((e=>t.jsx(ie,{ariaActive:b,rowObj:e,rowData:m,isRowSelected:e.isSelected,isFocused:!!s?.isFocused&&s.id===e.id,isHorizontalGridlinesVisible:p,children:x(V(e,m,k))})))}),R]})}const de=(e,t,o,i,r)=>{const n=((e,t,o)=>{const i=t.max-o.max,r=t.min-o.min,n=e*(t.max-t.min),a=Math.max(i,Math.min(n,r));return{min:Math.max(0,t.min-a),max:t.max-a}})(e,t,i),{min:a,max:s}=o,d=n.min!==a||n.max!==s;return d&&r(n),{newRange:n,isRangeChanged:d}},le=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-t.y)**2),ce=({captureTargetRef:e,width:t,startTime:i,endTime:r,viewportStartTime:n,viewportEndTime:a,majorAxisZoomOrder:s,majorAxisZoomOrderIndex:d,minorAxisZoomOrder:l,minorAxisZoomOrderIndex:u,zoomOrderViewDurationThresholds:m,minZoomViewportDuration:g,maxZoomViewportDuration:w,onViewportChange:p,isDisabled:b=!1})=>{const{direction:x}=h.useUser(),f="rtl"===x,v=(({captureTargetRef:e,onPinchZoomStart:t,onPinchZoomChange:i,onPinchZoomEnd:r,isDisabled:n=!1})=>{const a=o.useRef({x:-1,y:-1}),s=o.useRef(-1),d=()=>{a.current={x:-1,y:-1},s.current=-1};n&&d();const l=c.usePointerGesture({captureTargetRef:e,numPointers:2,onPointerGestureDown:({pointers:[e,o]})=>{const i={x:e.offsetX,y:e.offsetY},r={x:o.offsetX,y:o.offsetY};a.current=((e,t)=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2}))(i,r),s.current=le(i,r),t&&t({origin:a.current,delta:0})},onPointerGestureMove:({pointers:[e,t]})=>{const o={x:e.offsetX,y:e.offsetY},r={x:t.offsetX,y:t.offsetY},n=le(o,r),d=n-s.current;s.current=n,i&&i({origin:a.current,delta:d})},onPointerGestureEnd:()=>{d(),r&&r()}});return n?{}:l})({captureTargetRef:e,onPinchZoomChange:({origin:{x:e},delta:o})=>{const h=c.getPositionTime(e,n,a,t,f);c.zoomTime(h,n,a,i,r,c.getGestureZoomFactor(o),g,w,m,l,u,s,d,p)},isDisabled:b});return b?{}:v},he=({rowObjs:e})=>{if(0!==e.length&&0!==e[0].taskObjs.length)return{id:e[0].taskObjs[0].id,isFocused:!0}},ue=(e,{rowObjs:t,idTaskObjMap:o},i)=>{const r=o.get(e);if(!r)return;const n="next"===i?1:-1,{rowIndex:a,renderIndex:s}=r,d=t[a].taskObjs[s+n];if(d)return d.id;const l=t[a+n];if(l){const e="next"===i?l.taskObjs[0]:l.taskObjs[l.taskObjs.length-1];if(e)return e.id}},me=(e,{rowObjs:t,idTaskObjMap:o},i)=>{const r=o.get(e);if(!r)return;const n="down"===i?1:-1,{rowIndex:a}=r,s=t[a+n];if(!s)return;const d=s.taskObjs[0];return d?d.id:void 0},ge=(e,t)=>ue(e,t,"next"),we=(e,t)=>ue(e,t,"prev"),pe=(e,{rowObjs:t,idRowObjMap:o},i)=>{const r=o.get(e);if(!r)return;const n="down"===i?1:-1,{index:a}=r,s=t[a+n];return s?s.id:void 0},be=(e,t,o,i="auto",r="auto",n=0)=>{const a=Math.min(e.x-t.x-n,0),s=Math.max(0,e.x+e.w-(t.x+t.w)+n),d=o?s:a,l=o?a:s;let c=0;switch(i){case"start":c=d;break;case"end":c=l;break;case"auto":c=(o?l<0:l>0)?l:d;break;default:return i}const h=Math.min(e.y-t.y-n,0),u=Math.max(0,e.y+e.h-(t.y+t.h)+n);let m=0;switch(r){case"top":m=h;break;case"bottom":m=u;break;case"auto":m=h<0?h:u;break;default:return r}return{dx:-c,dy:-m}},xe=({viewportLayout:e,dataBodyWidth:t,dataBodyHeight:i,viewportStartTime:r,viewportEndTime:n,scrollPosition:a,...s})=>{const{direction:d}=h.useUser(),l="rtl"===d,c=(({getRangeX:e,getRangeY:t,globalRangeX:i,globalRangeY:r,onRangeXChange:n,onRangeYChange:a,isDisabled:s=!1})=>{const d=o.useRef({min:0,max:0}),l=o.useRef({min:0,max:0});return s?{}:{onKbPanHorizontal:t=>{const{detail:{rangeRatio:o}}=t,{newRange:r}=de(o,e(),d.current,i,n);d.current=r},onKbPanVertical:e=>{const{detail:{rangeRatio:o}}=e,{newRange:i}=de(o,t(),l.current,r,a);l.current=i}}})(s),u=o.useRef({min:0,max:0}),m=o.useRef({min:0,max:0}),g=(e=0,o=0)=>{if(0!==e){const{newRange:o}=de(e/t,s.getRangeX(),u.current,s.globalRangeX,s.onRangeXChange);u.current=o}if(0!==o){const{newRange:e}=de(o/i,s.getRangeY(),m.current,s.globalRangeY,s.onRangeYChange);m.current=e}};return s.isDisabled?{}:{...c,onKbPanTaskIntoView:o=>{let s=e.idTaskObjMap.get(o.detail.id);if(!s){const i=e.allIdTaskObjMap.get(o.detail.id);if(!i)return;s=J(i,r,n,t,a,l)}const{x:d,y:c,width:h,height:u}=s,m={x:d,y:c,w:h,h:u},w={x:0,y:0,w:t,h:i},p=e.rowPadding,{dx:b,dy:x}=be(m,w,l,"auto","auto",p);g(b,x)},onKbPanRowIntoView:o=>{const r=e.allIdRowObjMap.get(o.detail.id);if(!r)return;const n={x:0,y:r.y-a,w:t,h:r.height},s={x:0,y:0,w:t,h:i},d=e.rowPadding,{dy:c}=be(n,s,l,"auto","auto",d);g(0,c)}}},fe=({captureTargetRef:e,width:t,height:i,viewportStartTime:r,viewportEndTime:n,majorAxisScale:a,minorAxisScale:s,startTime:d,endTime:l,zoomParameters:u,scrollPosition:m,dataBodyHeight:g,totalRowsHeight:w,viewportLayout:p,onViewportChange:b,onScrollPositionChange:x,onCursorChange:f,isPanDisabled:y,isZoomDisabled:T})=>{const k={captureTargetRef:e,width:t,height:i,getRangeX:()=>({min:r,max:n}),getRangeY:()=>({min:m,max:m+g}),globalRangeX:{min:d,max:l},globalRangeY:{min:0,max:w},onRangeXChange:e=>{b?.({viewportStart:c.getISOString(e.min),viewportEnd:c.getISOString(e.max),majorAxisScale:a,minorAxisScale:s})},onRangeYChange:e=>{x?.({y:e.min})},isDisabled:y},{getZoomOrderViewDurationThresholds:j,...R}=u,A={captureTargetRef:e,width:t,...R,zoomOrderViewDurationThresholds:j(t),onViewportChange:b,isDisabled:T},S=(({captureTargetRef:e,width:t,height:i,getRangeX:r,getRangeY:n,globalRangeX:a,globalRangeY:s,onRangeXChange:d,onRangeYChange:l,onDragPanStart:u,onDragPanEnd:m,isDisabled:g=!1})=>{const{direction:w}=h.useUser(),p=o.useRef({min:0,max:0}),b=o.useRef({min:0,max:0}),x=o.useRef({min:0,max:0}),f=o.useRef({min:0,max:0}),v=o.useRef(!1),y=c.useDrag({captureTargetRef:e,onDragStart:()=>{x.current=r(),f.current=n(),u&&u()},onDragMove:({dx:e,dy:o})=>{v.current=!0;const{newRange:r}=de(("rtl"===w?-1:1)*e/t,x.current,p.current,a,d);p.current=r;const{newRange:n}=de(o/i,f.current,b.current,s,l);b.current=n},onDragEnd:({originalEvent:e})=>{v.current&&e.preventDefault(),v.current=!1,m&&m()},isDisabled:g});return g?{}:y})({...k,onDragPanStart:()=>f?.({cursor:"grabbing"}),onDragPanEnd:()=>f?.({cursor:"grabbingUnset"})}),C=(({width:e,height:t,getRangeX:i,getRangeY:r,globalRangeX:n,globalRangeY:a,onRangeXChange:s,onRangeYChange:d,isDisabled:l=!1})=>{const{direction:u}=h.useUser(),m=o.useRef({min:0,max:0}),g=o.useRef({min:0,max:0}),w=c.useWheel({onWheel:({deltaX:o,deltaY:l,ctrlKey:c})=>{if(c)return;const{newRange:h}=de(("rtl"===u?-1:1)*o/e,i(),m.current,n,s);m.current=h;const{newRange:w}=de(l/t,r(),g.current,a,d);g.current=w},isDisabled:l});return l?{}:w})(k),I=xe({...k,viewportLayout:p,dataBodyWidth:t,dataBodyHeight:g,viewportStartTime:r,viewportEndTime:n,scrollPosition:m}),P=ce(A),L=(({width:e,startTime:t,endTime:o,viewportStartTime:i,viewportEndTime:r,majorAxisZoomOrder:n,majorAxisZoomOrderIndex:a,minorAxisZoomOrder:s,minorAxisZoomOrderIndex:d,zoomOrderViewDurationThresholds:l,minZoomViewportDuration:u,maxZoomViewportDuration:m,onViewportChange:g,isDisabled:w=!1})=>{const{direction:p}=h.useUser(),b="rtl"===p,x=c.useWheel({onWheel:({x:h,deltaY:w,ctrlKey:p})=>{if(!p)return;const x=c.getPositionTime(h,i,r,e,b);c.zoomTime(x,i,r,t,o,c.getGestureZoomFactor(w),u,m,l,s,d,n,a,g)},isDisabled:w});return w?{}:x})(A),O=(({startTime:e,endTime:t,viewportStartTime:o,viewportEndTime:i,majorAxisZoomOrder:r,majorAxisZoomOrderIndex:n,minorAxisZoomOrder:a,minorAxisZoomOrderIndex:s,zoomOrderViewDurationThresholds:d,minZoomViewportDuration:l,maxZoomViewportDuration:h,onViewportChange:u,isDisabled:m=!1})=>m?{}:{onKbZoomIn:m=>{const g=o+(i-o)/2;c.zoomTime(g,o,i,e,t,m.detail.zoomFactor,l,h,d,a,s,r,n,u)},onKbZoomOut:m=>{const g=o+(i-o)/2;c.zoomTime(g,o,i,e,t,m.detail.zoomFactor,l,h,d,a,s,r,n,u)}})(A);return{gestureProps:v.mergeProps(S,C,I,P,L,O)}},ve=({viewportLayout:e,viewportYOffset:t,dataBodyRegion:o,viewportStartTime:i,viewportEndTime:r,width:n,isRTL:a,selectionProps:s,hoverProps:d,currentProps:l,onCursorChange:h})=>{const{x:u,y:m,w:g,h:w}=o,p=N(s.selectionMode),b=o=>{const s=e.allRowObjs,d=e.spatialIndex,{offsetX:l,offsetY:h}=o;if(!!(l<u||l>u+g||h<m||h>m+w))return;const p={time:c.getPositionTime(l,i,r,n,a),y:h+t},b=((e,t,{time:o,y:i})=>{const r=t.search(o,i,o,i);if(0===r.length)return;let n=r[0];for(let t=0;t<e.length;t++){const o=e[t];for(let e=0;e<o.taskObjs.length;e++){if(0===n)return{rowIndex:t,taskIndex:e};n-=1}}})(s,d.tasks,p);if(!b)return;const{rowIndex:x,taskIndex:f}=b;return s[x].taskObjs[f].id},x={onPointerMove:e=>{const t=b(e);t!==d.hoveredTaskId&&d.onTaskHoverChange({id:t}),p&&h?.({cursor:void 0!==t?"pointer":"pointerUnset"})}},f={onPointerUp:e=>{const t=b(e);void 0!==t&&(p&&h?.({cursor:"pointer"}),t!==l?.currentTask?.id&&l.onCurrentTaskChange({id:t,isFocused:!1}))}},{onKeyUp:T,...k}=y.useSelection({idExtracter:b,selection:s.selectedIds,selectionMode:s.selectionMode,onChange:s.onSelectionChange});return{gestureProps:v.mergeProps(x,f,k)}},ye=({targetRef:e,datatip:o,rowData:r,dateFormatter:n,hoveredTaskObj:a,focusedTaskObj:s,currentTaskInteraction:d,dataBodyRegion:l})=>{const{direction:c}=h.useUser(),u="rtl"===c,m=k.useTranslationBundle("@oracle/oraclejet-preact"),g={hover:{taskObj:a,anchor:"pointer"},focus:{taskObj:s,anchor:"element"},none:{taskObj:void 0,anchor:"pointer"}},{anchor:w,taskObj:p}=g[d],b=o??(e=>{const{translations:o,dateFormatter:r,isRTL:n}=e;return({data:e,rowData:a})=>{if(void 0!==e.accessibleLabel)return{content:e.accessibleLabel};const s=i.classNames([T.styles.datatipLabel,n?T.styles.leftAlign:T.styles.rightAlign]),d=i.classNames([T.styles.datatipValue,n?T.styles.rightAlign:T.styles.leftAlign]),{start:l,end:c}=K(e),h=l===c;return{content:t.jsxs("table",{class:T.styles.datatipTable,children:[a.label&&t.jsxs("tr",{children:[t.jsx("td",{class:s,children:o.gantt_labelRow()}),t.jsx("td",{class:d,children:a.label})]}),!h&&t.jsxs(t.Fragment,{children:[t.jsxs("tr",{children:[t.jsx("td",{class:s,children:o.gantt_labelStart()}),t.jsx("td",{class:d,children:r(l)})]}),t.jsxs("tr",{children:[t.jsx("td",{class:s,children:o.gantt_labelEnd()}),t.jsx("td",{class:d,children:r(c)})]})]}),h&&t.jsxs("tr",{children:[t.jsx("td",{class:s,children:o.gantt_labelDate()}),t.jsx("td",{class:d,children:r(l)})]}),e.label&&t.jsxs("tr",{children:[t.jsx("td",{class:s,children:o.gantt_labelLabel()}),t.jsx("td",{class:d,children:e.label})]})]})}}})({translations:m,dateFormatter:n,isRTL:u}),{content:x,borderColor:v}=p?b(((e,t)=>{const{index:o,rowIndex:i}=t;return{data:e[i].tasks[o],rowData:e[i]}})(r,p)):{content:void 0,borderColor:void 0},y=p&&"element"===w?{x:p.x,y:p.y+l.y,width:p.width,height:p.height}:void 0;return re({content:x,anchor:w,placement:"top-start",offset:f.calculateOffset(u,l.w,y),borderColor:v,targetFocusRef:e})};function Te({innerRef:e,isRTL:r,scrollPosition:a,onScrollPositionChange:s,isViewportDefined:l,onViewportChange:h,zoomParameters:u,zooming:m,selectedIds:g,selectionMode:w,onSelectionChange:p,hoveredTaskId:b,onTaskHoverChange:x,currentTask:f,onCurrentTaskChange:y,currentTaskInteraction:T,ariaActive:k,getTimeAxesLayout:j,getResolvedViewportLayout:R,rowDataLayout:A,rowAxisSeparator:S,datatip:C,majorAxis:I,minorAxis:P,dataBody:L}){return l?t.jsx(d.TrackResizeContainer,{width:"100%",height:"100%",children:function(d,l){const O=j(d),{position:E,majorAxis:D,minorAxis:V,viewportStartTime:M,viewportEndTime:z,startTime:_,endTime:B}=O,F=D&&D.zoomOrder[D.zoomOrderIndex],H=V.zoomOrder[V.zoomOrderIndex],U=D?D.height:0,{height:Z}=V,Y=l-(U+Z),W=R(A,M,z,a,d,Y,r),X=q({selectionProps:{selectedIds:g,selectionMode:w},hoverProps:{hoveredTaskId:b},currentProps:{currentTask:f}},W.idTaskObjMap),G=c.getDefaultDateFormatter(H,M),K=D&&I(D),N=P(V),$=L({width:d,height:Y,viewportLayout:W,minorAxisLayout:V,effectsLayout:X,dateFormatter:G,ariaActiveTask:k}),J={top:{components:[K,N,$],dataBodyPos:l-Y},bottom:{components:[$,N,K],dataBodyPos:0}},[Q,ee]=o.useState(),te=e=>ee((t=>void 0===t?e.cursor:"grabbing"===t&&"grabbingUnset"!==e.cursor?"grabbing":"grabbingUnset"!==e.cursor&&"pointerUnset"!==e.cursor?e.cursor:void 0)),{gestureProps:oe}=fe({captureTargetRef:e,width:d,height:l,viewportStartTime:M,viewportEndTime:z,majorAxisScale:F,minorAxisScale:H,startTime:_,endTime:B,zoomParameters:u,scrollPosition:a,dataBodyHeight:Y,totalRowsHeight:A.totalRowsHeight,viewportLayout:W,onViewportChange:e=>{h&&(h(e),x({id:void 0}))},onScrollPositionChange:e=>{s&&(s(e),x({id:void 0}))},onCursorChange:te,isPanDisabled:!1,isZoomDisabled:"off"===m}),ie={x:0,y:J[E].dataBodyPos,w:d,h:Y},{gestureProps:re}=ve({viewportLayout:W,viewportYOffset:a-J[E].dataBodyPos,dataBodyRegion:ie,viewportStartTime:M,viewportEndTime:z,width:d,isRTL:r,selectionProps:{selectedIds:g,selectionMode:w,onSelectionChange:p},hoverProps:{hoveredTaskId:b,onTaskHoverChange:x},currentProps:{currentTask:f,onCurrentTaskChange:y},onCursorChange:te}),{datatipContent:ne,datatipProps:ae}=ye({datatip:C,rowData:W.rowData,dateFormatter:G,hoveredTaskObj:b&&W.idTaskObjMap.get(b),focusedTaskObj:X.focusedTaskObj,currentTaskInteraction:T,dataBodyRegion:ie,targetRef:e}),se=v.mergeProps(oe,re,ae);return t.jsxs("div",{ref:e,...se,class:i.classNames([n.timeAxisDataBodyStyles.base,n.timeAxisDataBodyStyles.pannable,r?S&&n.timeAxisDataBodyStyles.withRowAxisSeparatorRight:S&&n.timeAxisDataBodyStyles.withRowAxisSeparatorLeft]),style:{cursor:Q},children:[J[E].components,ne]})}}):t.jsx(d.TrackResizeContainer,{width:"100%",height:"100%",children:e=>{const t=j(e),{majorAxis:o,minorAxis:i,viewportStartTime:r,viewportEndTime:n}=t,a=o&&o.zoomOrder[o.zoomOrderIndex],s=i.zoomOrder[i.zoomOrderIndex];return h?.({viewportStart:c.getISOString(r),viewportEnd:c.getISOString(n),majorAxisScale:a,minorAxisScale:s}),null}})}function ke({width:e,height:o,positions:i}){const r=i.map((t=>`M0,${t} H${e}`)).join(" ");return t.jsx("svg",{width:e,height:o,children:t.jsx("path",{class:n.horizontalGridlinesStyles.base,d:r})})}function je({width:e,height:i,rowData:r,dateFormatter:n,ariaActiveId:a,ariaActiveTaskObj:s}){const d=k.useTranslationBundle("@oracle/oraclejet-preact"),l=o.useRef(0),c=o.useMemo((()=>{const e=0===l.current?[a,R.getRandomId()]:[R.getRandomId(),a];return l.current=Math.abs(l.current-1),e}),[a]),h=s&&te(s,r,n,d);return t.jsxs("div",{style:{width:e,height:i},children:[t.jsx("div",{role:"img",id:c[0],"aria-label":h}),t.jsx("div",{role:"img",id:c[1],"aria-label":h})]})}function Re({width:e,height:o,rowData:i,dateFormatter:r,layoutObjs:a}){const s=k.useTranslationBundle("@oracle/oraclejet-preact"),d=[];return a.forEach((e=>{e.taskObjs.forEach((e=>{const o=te(e,i,r,s);d.push(t.jsx("div",{role:"img","aria-label":o,class:n.taskMobileAccStyles.content,style:{width:e.width,height:e.height,top:e.y,left:e.x}}))}))})),t.jsx("div",{class:n.taskMobileAccStyles.base,style:{width:e,height:o},children:d})}function Ae({width:e,height:o,rowData:i,dateFormatter:r,ariaActiveId:n,ariaActiveTaskObj:a,layoutObjs:s}){return j.supportsMobileScreenReader?t.jsx(Re,{width:e,height:o,layoutObjs:s,rowData:i,dateFormatter:r}):t.jsx(je,{width:e,height:o,rowData:i,dateFormatter:r,ariaActiveId:n,ariaActiveTaskObj:a})}function Se({width:e,height:o,layoutObjs:i}){const r=i.filter((e=>e.isSelected)),a=r.map((({y:t,height:o})=>`M1,${t} H${e-1} V${t+o} H1 Z`)).join(" ");return r.length>0?t.jsx("svg",{width:e,height:o,children:t.jsx("path",{class:n.rowBackgroundStyles.selected,d:a})}):null}const Ce=(e,t)=>{const{x:o,y:i,width:r,height:n,borderRadius:a,stroke:s,strokeWidth:d,padding:l}=t,c=o-l,h=i-l,u=r+2*l,m=n+2*l,g=A.rectangleWithBorderRadius(c,h,u,m,a,Math.min(u,m),"0"),w=new Path2D(g);e.strokeStyle=s,e.lineWidth=d,e.stroke(w)},Ie=(e,t,o)=>{const i="hovered"===o,{x:r,y:n,width:a,height:s,borderRadius:d,fill:l,stroke:c,strokeWidth:h}=t,u=A.rectangleWithBorderRadius(r,n,a,s,d,Math.min(a,s),"0"),m=new Path2D(u);switch(i&&((e,t)=>{e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.shadowBlur=t.shadowBlur})(e,t.hoverEffect.shadow),e.fillStyle="#ffffff",e.fill(m),i&&(e=>{e.shadowColor="transparent",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0})(e),e.strokeStyle=c,e.fillStyle=l,e.lineWidth=h,e.fill(m),e.stroke(m),o){case"selected":Ce(e,{x:r,y:n,width:a,height:s,borderRadius:d,...t.selectionEffect});break;case"hovered":Ce(e,{x:r,y:n,width:a,height:s,borderRadius:d,...t.hoverEffect});break;case"focused":Ce(e,{x:r,y:n,width:a,height:s,borderRadius:d,...t.focusEffect});break;case void 0:break;default:return o}};function Pe({width:e,height:o,layoutObj:i}){return t.jsx(c.TimeComponentCanvas2D,{width:e,height:o,draw:e=>{i&&Ie(e,i,"focused")}})}function Le({width:e,height:o,layoutObj:i}){return t.jsx(c.TimeComponentCanvas2D,{width:e,height:o,draw:e=>{i&&Ie(e,i,"hovered")}})}function Oe({width:e,height:o,layoutObjs:i}){return t.jsx(c.TimeComponentCanvas2D,{width:e,height:o,draw:e=>{i.forEach((t=>Ie(e,t,"selected")))}})}function Ee({width:e,height:o,layoutObjs:{selectedTaskObjs:i,hoveredTaskObj:r,focusedTaskObj:n}}){return t.jsxs(c.TimeComponentLayersStack,{width:`${e}px`,height:`${o}px`,children:[t.jsx(Pe,{width:e,height:o,layoutObj:n}),t.jsx(Oe,{width:e,height:o,layoutObjs:i}),t.jsx(Le,{width:e,height:o,layoutObj:r})]})}function De({x:e,y:o,width:r,height:a,label:s,isInner:d,textAlign:c,labelStyle:h}){return t.jsx("div",{"aria-hidden":"true",class:i.classNames([n.taskLabelLayerStyles.label,d&&n.taskLabelLayerStyles.innerLabel]),style:{left:e,top:o,width:r,height:a,textAlign:c,...h},children:t.jsx(l.Text,{variant:h?.color?"inherit":"primary",truncation:"ellipsis",size:"md",weight:"inherit",children:s})})}function Ve({width:e,height:o,layoutObjs:i}){return t.jsx("div",{class:n.taskLabelLayerStyles.base,style:{width:e,height:o},children:i.map((e=>t.jsx(De,{...e})))})}function Me({width:e,height:o,layoutObjs:i}){return t.jsx(c.TimeComponentCanvas2D,{width:e,height:o,draw:e=>{i.forEach((t=>{t.taskObjs.forEach((t=>Ie(e,t)))}))}})}function ze({width:e,height:o,minorAxisLayout:{minorGridTicksPos:i,majorGridTicksPos:r},viewportLayout:{gridlines:n,rowData:a,rowObjs:s,taskLabelObjs:d,horizontalGridlinesPos:l,idTaskObjMap:h},effectsLayout:u,dateFormatter:m,ariaActiveTask:g}){return t.jsxs(c.TimeComponentLayersStack,{width:`${e}px`,height:`${o}px`,children:[t.jsx(Se,{width:e,height:o,layoutObjs:s}),"on"===n.vertical&&t.jsx(c.TimeComponentVerticalGridlines,{width:e,height:o,positions:i,variant:"minor"}),"on"===n.vertical&&r&&t.jsx(c.TimeComponentVerticalGridlines,{width:e,height:o,positions:r,variant:"major"}),l&&t.jsx(ke,{width:e,height:o,positions:l}),t.jsx(Ae,{width:e,height:o,layoutObjs:s,rowData:a,dateFormatter:m,ariaActiveId:g?.ariaId,ariaActiveTaskObj:g&&h.get(g.dataId)}),t.jsx(Me,{width:e,height:o,layoutObjs:s}),t.jsx(Ee,{width:e,height:o,layoutObjs:u}),t.jsx(Ve,{width:e,height:o,layoutObjs:d})]})}function _e({visRef:e,overlayControlsContainerRef:o,panZoomLayout:i,getTimeAxesLayout:r,getHorizontalScrollbarLayout:n,onHorizontalScrollChange:a,getVerticalScrollbarLayout:s,onVerticalScrollChange:d,rowAxisSeparator:l=!1,zoomParameters:h,zooming:u="on",isViewportDefined:m,onViewportChange:g,getResolvedViewportLayout:w,datatip:p,rowDataLayout:b,isRTL:x,scrollPosition:f,onScrollPositionChange:v,selectedIds:y,selectionMode:T,onSelectionChange:k,hoveredTaskId:j,onTaskHoverChange:R,currentTask:A,onCurrentTaskChange:S,currentTaskInteraction:C,ariaActive:I,width:P,height:L}){return t.jsx(c.TimeComponentPanZoomLayout,{overlayControlsContainerRef:o,...i,width:P,height:L,overlayControls:"on"===u&&h&&m?t.jsx(c.TimeComponentZoomControls,{position:i.overlayControlsPosition,zoomParameters:h,onViewportChange:g}):void 0,verticalControl:t.jsx(c.TimeComponentVerticalScrollbarContainer,{getLayout:s,onRangeChange:d,children:e=>t.jsx(c.TimeComponentVerticalScrollbar,{...e})}),horizontalControl:t.jsx(c.TimeComponentHorizontalScrollbarContainer,{getLayout:n,onRangeChange:a,children:e=>t.jsx(c.TimeComponentHorizontalScrollbar,{...e})}),vis:t.jsx(Te,{innerRef:e,isRTL:x,scrollPosition:f,onScrollPositionChange:v,isViewportDefined:m,onViewportChange:g,zoomParameters:h,zooming:u,rowAxisSeparator:l,selectedIds:y,selectionMode:T,onSelectionChange:k,hoveredTaskId:j,onTaskHoverChange:R,currentTask:A,onCurrentTaskChange:S,currentTaskInteraction:C,ariaActive:I,getTimeAxesLayout:r,getResolvedViewportLayout:w,rowDataLayout:b,datatip:p,majorAxis:e=>t.jsx(c.TimeComponentHorizontalTimeAxis,{...e}),minorAxis:e=>t.jsx(c.TimeComponentHorizontalTimeAxis,{...e}),dataBody:e=>t.jsx(ze,{...e})})})}const Be=(e,t,o)=>t.map((t=>e(t,o))),Fe=e=>void 0===e?"0px":void 0!==e.height?`${e.height}px`:r.bridgeValues.horizontalTimeAxisHeight,He=(e,t)=>{const o=((e,t)=>void 0===t?0:void 0!==t.height?t.height:e)(e,t),{scale:i,zoomOrder:r=[t.scale]}=t;return{height:o,zoomOrder:r,zoomOrderIndex:r.indexOf(i)}},Ue=(e,t)=>Date.parse(e.getPreviousDate(new Date(t).toISOString())),Ze=(e,t)=>Date.parse(e.getNextDate(new Date(t).toISOString())),Ye=(e,t,o)=>{const i=[Ue(e,t)];for(;i[i.length-1]<o;)i.push(Ze(e,i[i.length-1]));return i},We=(e,t)=>{const{type:o,params:i}=t;switch(o){case"exact":{const t=new Map,o=Ye(e,i.startTime,i.endTime);for(let e=0;e<o.length-1;e++)t.set(o[e],o[e+1]);return{intervals:t,numIntervals:t.size}}case"approximate":{const{startTime:t,endTime:o,numSections:r,numIntervalsPerSection:n}=i,a=((e,t,o,i,r)=>{const n=new Map,a=Math.floor((o-t)/i);for(let s=0;s<i;s++){const i=t+a*s,d=Math.min(t+a*(s+1),o);let l=Ue(e,i);for(let t=0;t<r&&!(l>=d);t++){const t=Ze(e,l);n.set(l,t),l=t}l=Ue(e,d-1),n.set(l,Ze(e,l))}return n})(e,t,o,r,n),s=[...a.keys()],d=s.reduce(((e,t)=>e+(a.get(t)-Number(t))),0)/s.length;return{intervals:a,numIntervals:(o-t)/d}}default:return o}},Xe=(e,t)=>e.formatter(new Date(t).toISOString()),Ge=(e,t,o)=>{const i=Ye(e,t,o),r=i.slice(0,i.length-1).map((t=>Xe(e,t)));return{ticks:i,labels:r}},Ke=(e,t,o,i,r="start",n,a,s,d,l,h,u,m,g)=>{const w=t+o,p=h,b=u,x=n.slice(0,n.length-1),f=a.map((e=>c.getTimePosition(e,p,b,m,g))),v=n.map((e=>c.getTimePosition(e,p,b,m,g))),y=v.slice(1).map(((e,t)=>g?v[t]-e:e-v[t])),T=n[0]<d;T&&(v[0]=0,y[0]=v[1]),n[n.length-1]>l&&(v[v.length-1]=g?0:m,y[y.length-1]=g?v[v.length-2]-v[v.length-1]:v[v.length-1]-v[v.length-2]);const k=v.slice(0,v.length-1).map(((e,t)=>g?e-y[t]:e)),j=Be(e,s,i).map((({width:e},t)=>Math.floor(e)-Math.floor(y[t]-w)>0));return{font:i,labelPosition:r,labels:s,labelTicks:x,labelPositions:k,isLabelTruncated:j,isIntervalStartTruncated:T,intervalWidths:y,gridTicksPos:f,isRTL:g}},Ne=(e,t,o,i,r,n,a,s)=>{const{zoomOrderMinLengthFactor:d,maxNumIntervals:l}=((e,t,o,i,r,n,a)=>{const s=t+o,d=n.map((e=>We(e,a))),l=Math.max(...d.map((({numIntervals:e})=>e)));return{zoomOrderMinLengthFactor:d.map((({intervals:t},o)=>{const a=n[o],d=[...t.keys()],l=d.map((e=>Xe(a,t.get(e)))),c=d.map((e=>t.get(e)-e)),h=Be(e,l,r),u=Math.min(...c.map(((e,t)=>e/Math.max(i,h[t].width+s))));return u})),maxNumIntervals:l}})(e,t,o,i,r,s,{type:"approximate",params:{numSections:4,numIntervalsPerSection:10,startTime:n,endTime:a}});return{getZoomOrderViewDurationThresholds:e=>d.map((t=>e*t)),minorAxisZoomOrder:s,minZoomViewportDuration:(a-n)/l,maxZoomViewportDuration:a-n,startTime:n,endTime:a}},$e=(e,t,o,i,r,n,a,s,d,l,c,h,u,m)=>g=>{const{zoomOrder:w,zoomOrderIndex:p}=c,b=n(g),{viewportStartTime:x,viewportEndTime:f}=((e,t,o,i,r)=>void 0!==i&&void 0!==r?{viewportStartTime:i,viewportEndTime:r}:void 0!==i&&void 0===r?{viewportStartTime:i,viewportEndTime:Math.min(o,i+e)}:void 0===i&&void 0!==r?{viewportStartTime:Math.max(t,r-e),viewportEndTime:r}:{viewportStartTime:t,viewportEndTime:Math.min(o,t+e)})(b[p],s,d,u,m),{majorAxisLayout:v,minorAxisLayout:y}=((e,t,o,i,r,n,a,s,d,l,c,h,u)=>{const m=u?Ge(u,s,d):{ticks:[],labels:[]},g=Ge(h,s,d),{ticks:w,labels:p}=m,{ticks:b,labels:x}=g,f=new Set(w),v=new Set(b),y=0===w.filter((e=>e>s&&e<d&&!v.has(e))).length,T=y?b.filter((e=>!f.has(e))):b,k=u&&Ke(e,t,o,i,u.labelPosition,w,w,p,n,a,s,d,l,c),j=Ke(e,t,o,r,h.labelPosition,b,T,x,n,a,s,d,l,c);return{minorAxisLayout:{majorGridTicksPos:y&&k?k.gridTicksPos:void 0,minorGridTicksPos:j.gridTicksPos,variant:"minor",...j},majorAxisLayout:k&&{majorGridTicksPos:k.gridTicksPos,minorGridTicksPos:void 0,variant:"major",...k}}})(e,t,o,i,r,s,d,x,f,g,l,w[p],h&&h.zoomOrder[h.zoomOrderIndex]);return{position:a,startTime:s,endTime:d,viewportStartTime:x,viewportEndTime:f,width:g,majorAxis:v&&{width:g,...h,...v},minorAxis:{width:g,...c,...y}}},qe=[{tokenVar:r.bridgeValues.horizontalTimeAxisHeight,key:"defaultTimeAxisHeight",cssProp:"height"},{tokenVar:r.bridgeValues.horizontalTimeAxisLabelPaddingInlineStart,key:"timeAxisLabelPaddingInlineStart",cssProp:"margin-inline-start"},{tokenVar:r.bridgeValues.horizontalTimeAxisLabelPaddingInlineEnd,key:"timeAxisLabelPaddingInlineEnd",cssProp:"margin-inline-end"},{tokenVar:P.xUnits(12.5),key:"timeAxisLabelMinWidth",cssProp:"min-width"},{tokenVar:I.typographyVars.body.md.fontSize,key:"majorAxisFontSize",cssProp:"font-size"},{tokenVar:I.typographyVars.body.sm.fontSize,key:"minorAxisFontSize",cssProp:"margin-block-start"},{tokenVar:I.typographyVars.body.md.fontWeight.semibold,key:"majorAxisFontWeight"},{tokenVar:I.typographyVars.body.sm.fontWeight.regular,key:"minorAxisFontWeight"}],Je=e=>"0"===e?0:Number(e.substring(0,e.length-2)),Qe=[{tokenVar:n.bridgeValues.rowLabelPaddingInlineStart,key:"rowLabelPaddingInlineStart",cssProp:"padding-inline-start"},{tokenVar:n.bridgeValues.rowLabelPaddingInlineStart,key:"rowLabelPaddingInlineEnd",cssProp:"padding-inline-end"},{tokenVar:P.xUnits(3),key:"rowPaddingTop",cssProp:"padding-top"},{tokenVar:P.xUnits(3),key:"rowPaddingBottom",cssProp:"padding-bottom"},{tokenVar:P.xUnits(6),key:"taskHeight",cssProp:"min-height"},{tokenVar:P.xUnits(1),key:"taskBorderRadius",cssProp:"border-radius"},{tokenVar:n.bridgeValues.taskBgColor,key:"taskBgColor",cssProp:"background-color"},{tokenVar:n.bridgeValues.taskBorderColor,key:"taskBorderColor",cssProp:"border-color"},{tokenVar:n.bridgeValues.taskEffectBorderColor,key:"taskEffectBorderColor",cssProp:"outline-color"},{tokenVar:I.baseVars.boxShadow.md,key:"taskEffectBoxShadow",cssProp:"box-shadow"}],et=e=>{const[t,o,i,r,...n]=e.split(" ").reverse();return{shadowColor:n.reverse().join(" "),shadowOffsetX:Je(r??"0"),shadowOffsetY:Je(i??"0"),shadowBlur:Je(o??"0")}},tt=e=>e.endsWith("px")?{value:Number(e.substring(0,e.length-2)),suffix:"px"}:e.endsWith("%")?{value:Number(e.substring(0,e.length-1)),suffix:"%"}:{value:1/0,suffix:void 0},ot=qe.concat(Qe),it=({rowAxis:e,gridlines:{horizontal:o="off",vertical:i="on"}={horizontal:"off",vertical:"on"},axisPosition:n="top",minorAxis:a,majorAxis:s,start:d,end:l,viewportStart:u,viewportEnd:m,onViewportChange:g,scrollPosition:{y:w=0}={y:0},onScrollPositionChange:p,rows:b,selectedIds:x,selectionMode:f="none"})=>{const{direction:v}=h.useUser(),{resolvedVars:y,cssContent:T}=S.useCssVars(ot),{textMeasureContent:k,getTextDimensions:j}=C.useTextDimensions(),R="rtl"===v,A=t.jsxs(t.Fragment,{children:[k,T]}),{startTime:I,endTime:L,viewportStartTime:O,viewportEndTime:E,isValidTimeConfig:V}=((e,t,o,i)=>{const r=c.parseDate(e),n=c.parseDate(t),a=o?c.parseDate(o):void 0,s=i?c.parseDate(i):void 0,d=((e,t,o,i)=>t>e&&(void 0===o||void 0===i||i>o)&&(void 0===o||o>=e&&o<t)&&(void 0===i||i>e&&i<=t))(r,n,a,s);return{startTime:r,endTime:n,viewportStartTime:a,viewportEndTime:s,isValidTimeConfig:d}})(d,l,u,m);if(!j||0===Object.keys(y).length)return{isRTL:R,layoutContent:A,isValidConfig:V,isReady:!1};if(!V)return{isRTL:R,layoutContent:A,isValidConfig:V,isReady:!0};const M=void 0===e?"off":"on",z="on"===e?{}:e,_=z?.width??"max-content",B=z?.maxWidth??"none",F=z?.labelRenderer??D,H=((e,t,o)=>{const i=Fe(t);return{position:e,height:`calc(${Fe(o)} + ${i})`}})(n,a,s),U={top:{overlayControlsPosition:"topEnd",verticalControlTopGap:(Z=H).height,verticalControlBottomGap:"0"},bottom:{overlayControlsPosition:"bottomEnd",verticalControlTopGap:"0",verticalControlBottomGap:Z.height}}[Z.position];var Z;const Y="on"===M?((e,t)=>{const o=`${P.xUnits(1)} + ${r.bridgeValues.horizontalScrollbarHeight}`,i={top:{rowAxisTopGap:e.height,rowAxisBottomGap:`calc(${o})`},bottom:{rowAxisTopGap:"0",rowAxisBottomGap:`calc(${e.height} + ${o})`}},n=tt(t.width),a=tt(t.maxWidth);return{...i[e.position],resolvedRowAxisWidth:n,resolvedRowAxisMaxWidth:a,label:t.label}})(H,{width:_,maxWidth:B,label:F}):void 0,W=(e=>({defaultTimeAxisHeight:Je(e.defaultTimeAxisHeight),timeAxisLabelPaddingInlineStart:Je(e.timeAxisLabelPaddingInlineStart),timeAxisLabelPaddingInlineEnd:Je(e.timeAxisLabelPaddingInlineEnd),timeAxisLabelMinWidth:Je(e.timeAxisLabelMinWidth),majorAxisFont:{fontSize:e.majorAxisFontSize,fontWeight:e.majorAxisFontWeight},minorAxisFont:{fontSize:e.minorAxisFontSize,fontWeight:e.minorAxisFontWeight}}))(y),X=s&&He(W.defaultTimeAxisHeight,s),G=He(W.defaultTimeAxisHeight,a),K=Ne(j,W.timeAxisLabelPaddingInlineStart,W.timeAxisLabelPaddingInlineEnd,W.timeAxisLabelMinWidth,W.minorAxisFont,I,L,G.zoomOrder),N=$e(j,W.timeAxisLabelPaddingInlineStart,W.timeAxisLabelPaddingInlineEnd,W.majorAxisFont,W.minorAxisFont,K.getZoomOrderViewDurationThresholds,n,I,L,R,G,X,O,E),q=(e=>({rowPaddingTop:Je(e.rowPaddingTop),rowPaddingBottom:Je(e.rowPaddingBottom)}))(y),J=(e=>({taskHeight:Je(e.taskHeight),taskBorderRadius:e.taskBorderRadius,taskBgColor:e.taskBgColor,taskBorderColor:e.taskBorderColor,taskEffectBorderColor:e.taskEffectBorderColor,taskEffectBoxShadow:et(e.taskEffectBoxShadow)}))(y),ee=$(b,{...q,...J},{horizontal:o,vertical:i},{selectedIds:x,selectionMode:f}),te=(e=>({rowLabelPaddingInlineStart:Je(e.rowLabelPaddingInlineStart),rowLabelPaddingInlineEnd:Je(e.rowLabelPaddingInlineEnd)}))(y),oe={labelPaddingInlineStart:te.rowLabelPaddingInlineStart,labelPaddingInlineEnd:te.rowLabelPaddingInlineEnd,rowData:ee.rowData,rowObjs:ee.rowObjs,idRowObjMap:ee.idRowObjMap,isHorizontalGridlinesVisible:"on"===o},ie=((e,t,o,i,r)=>n=>{const a=t-e,s=i-o,d=n*a/s,l=n*(e-o)/s,c=r?n-l-d:l;return{thumbWidth:d,thumbLeft:r?void 0:l,thumbRight:r?l:void 0,draggableRegion:{xMin:c,xMax:c+d,yMin:-1/0,yMax:1/0},getNewRange:e=>{const t=r?Math.max(0,n-e-d):e,l=Math.min(o+t/n*s,i-a);return{newMin:l,newMax:l+a}}}})(O??I,E??L,I,L,R),re=(ne=w,ae=void 0,se=0,de=ee.totalRowsHeight,e=>{const t=(ae??e+ne)-ne,o=de-se,i=Math.min(e,e*t/o),r=Math.max(0,e*(ne-se)/o);return{thumbHeight:i,thumbTop:r,draggableRegion:{xMin:-1/0,xMax:1/0,yMin:r,yMax:r+i},getNewRange:i=>{const r=Math.max(0,Math.min(se+i/e*o,de-t));return{newMin:r,newMax:r+t}}}});var ne,ae,se,de;return{scrollPosition:w,panZoomLayout:U,withRowAxisLayout:Y,getTimeAxesLayout:N,zoomParameters:void 0!==O&&void 0!==E?{viewportStartTime:O,viewportEndTime:E,minorAxisZoomOrderIndex:G.zoomOrderIndex,majorAxisZoomOrder:X?.zoomOrder,majorAxisZoomOrderIndex:X?.zoomOrderIndex,...K}:void 0,rowDataLayout:ee,rowAxisLayout:oe,getResolvedViewportLayout:Q,getHorizontalScrollbarLayout:ie,onHorizontalScrollChange:(e,t)=>{g?.({viewportStart:c.getISOString(e),viewportEnd:c.getISOString(t),majorAxisScale:s?.scale,minorAxisScale:a.scale})},getVerticalScrollbarLayout:re,onVerticalScrollChange:e=>{p?.({y:e})},isRTL:R,layoutContent:A,isValidConfig:V,isReady:!0}},rt=({visRef:e,isDisabled:t=!1})=>t?{}:{onKeyDown:t=>{switch(t.key){case"=":case"+":{const o=new CustomEvent("KbZoomIn",{detail:{zoomFactor:c.DEFAULT_ZOOM_IN_FACTOR}});e.current?.dispatchEvent(o),L.cancelEvent(t);break}case"-":case"_":{const o=new CustomEvent("KbZoomIn",{detail:{zoomFactor:c.DEFAULT_ZOOM_OUT_FACTOR}});e.current?.dispatchEvent(o),L.cancelEvent(t);break}case"PageUp":{const o=t.shiftKey?new CustomEvent("KbPanHorizontal",{detail:{rangeRatio:.25}}):new CustomEvent("KbPanVertical",{detail:{rangeRatio:.25}});e.current?.dispatchEvent(o),L.cancelEvent(t);break}case"PageDown":{const o=t.shiftKey?new CustomEvent("KbPanHorizontal",{detail:{rangeRatio:-.25}}):new CustomEvent("KbPanVertical",{detail:{rangeRatio:-.25}});e.current?.dispatchEvent(o),L.cancelEvent(t);break}}}},nt=({rowDataLayout:e,currentTask:t,onCurrentTaskChange:o,isRTL:i,isDisabled:r=!1})=>r?{}:{onKeyDown:r=>{switch(r.key){case"ArrowRight":{const n=i?we(t?.id,e):ge(t?.id,e);void 0!==n&&o({id:n,isFocused:!0}),L.cancelEvent(r);break}case"ArrowLeft":{const n=i?ge(t?.id,e):we(t?.id,e);void 0!==n&&o({id:n,isFocused:!0}),L.cancelEvent(r);break}case"ArrowUp":{const i=((e,t)=>me(e,t,"up"))(t?.id,e);void 0!==i&&o({id:i,isFocused:!0}),L.cancelEvent(r);break}case"ArrowDown":{const i=((e,t)=>me(e,t,"down"))(t?.id,e);void 0!==i&&o({id:i,isFocused:!0}),L.cancelEvent(r);break}}}},at=({rowDataLayout:e,currentRowLabel:t,onCurrentRowLabelChange:o,isDisabled:i=!1})=>i?{}:{onKeyDown:i=>{switch(i.key){case"ArrowUp":{const r=((e,t)=>pe(e,t,"up"))(t?.id,e);void 0!==r&&o({id:r,isFocused:!0}),L.cancelEvent(i);break}case"ArrowDown":{const r=((e,t)=>pe(e,t,"down"))(t?.id,e);void 0!==r&&o({id:r,isFocused:!0}),L.cancelEvent(i);break}}}},st=({visRef:e,rowAxisRef:t,rowDataLayout:i,navigationModes:r,selectionProps:n,isRTL:a,isDisabled:s=!1})=>{const d=o.useRef("tasks"),{onKeyUp:l}=y.useSelection({idExtracter:e=>{if("tasks"===d.current&&"keyup"===e.type)return r.tasks.currentItem?.id},selection:n.selectedIds,selectionMode:n.selectionMode,onChange:n.onSelectionChange}),c="tasks"===d.current?{onKeyUp:l}:{},h=rt({visRef:e,isDisabled:s}),u=nt({rowDataLayout:i,currentTask:r.tasks.currentItem,onCurrentTaskChange:r.tasks.onCurrentItemChange,isRTL:a}),m=at({rowDataLayout:i,currentRowLabel:r.rowLabels.currentItem,onCurrentRowLabelChange:r.rowLabels.onCurrentItemChange}),g={onFocus:()=>{const o=new Event("ShowFocusDatatip");e.current?.dispatchEvent(o),t.current?.dispatchEvent(o)}};return s?{}:v.mergeProps(h,g,{onKeyDown:e=>{let t=!1;const o=e=>{const{onCurrentItemChange:t}=r[e.type];t({id:e.id,isFocused:!0})},n=e=>{const{currentItem:t,onCurrentItemChange:o}=r[e];t&&o({id:t.id,isFocused:!1})},s=()=>{const a=((e,t)=>{const o=t.idTaskObjMap.get(e),{rowIndex:i}=o;return t.rowObjs[i].id})(r.tasks.currentItem?.id,i);o({id:a,type:"rowLabels"}),n("tasks"),d.current="rowLabels",t=!0,L.cancelEvent(e)},l=()=>{const a=((e,t,o)=>{if(void 0!==o){const i=t.idTaskObjMap.get(o);if(i){const{rowIndex:r}=i;if(t.rowObjs[r].id===e)return o}}const i=t.idRowObjMap.get(e),r=i?.taskObjs[0];if(r)return r.id;const n=he(t);return n?.id})(r.rowLabels.currentItem.id,i,r.tasks.currentItem?.id);void 0!==a&&o({id:a,type:"tasks"}),n("rowLabels"),d.current="tasks",t=!0,L.cancelEvent(e)};switch(e.key){case"Tab":n(d.current);break;case"ArrowLeft":e.altKey&&(a||"tasks"!==d.current?a&&"rowLabels"===d.current&&l():s());break;case"ArrowRight":e.altKey&&(a||"rowLabels"!==d.current?a&&"tasks"===d.current&&s():l())}if(!t)switch(d.current){case"tasks":u.onKeyDown?.(e);break;case"rowLabels":m.onKeyDown?.(e);break;default:return d.current}},onKeyUp:e=>{switch(e.key){case"Tab":{const{currentItem:t,onCurrentItemChange:o}=r[d.current],n=t||he(i);n&&o({id:n.id,isFocused:!0}),L.cancelEvent(e);break}}}},c)};e.Gantt=function({width:e,height:i,testId:r,...n}){const a=o.useRef(null),{scrollPosition:s,panZoomLayout:d,withRowAxisLayout:l,getTimeAxesLayout:c,zoomParameters:h,rowDataLayout:u,rowAxisLayout:m,getResolvedViewportLayout:g,getHorizontalScrollbarLayout:w,onHorizontalScrollChange:p,getVerticalScrollbarLayout:b,onVerticalScrollChange:x,isRTL:f,layoutContent:y,isValidConfig:T,isReady:k}=it(n),j={"aria-label":n["aria-label"],"aria-describedby":n["aria-describedby"],"aria-labelledby":n["aria-labelledby"],role:"application"},A=void 0!==n.viewportStart&&void 0!==n.viewportEnd,[S,C]=o.useState(),[I,P]=o.useState("none"),[L,D]=o.useState(),[V,M]=o.useState("none"),[z,_]=o.useState(),B=e=>{void 0!==e.id&&C({dataId:e.id,ariaId:R.getRandomId(),type:"rowLabel"}),M(void 0!==e.id?"hover":"none"),_(e.id)},[F,H]=o.useState(),U=e=>{if(e.isFocused){const t=new CustomEvent("KbPanTaskIntoView",{detail:{id:e.id}});W.current?.dispatchEvent(t),C({dataId:e.id,ariaId:R.getRandomId(),type:"task"}),P("focus")}H(e)},[Z,Y]=o.useState(),W=o.useRef(null),X=o.useRef(null),G=o.useRef(null),K=(({rootRef:e,overlayControlsContainerRef:t,isDisabled:i=!1})=>{const r=o.useRef(!1),n=()=>{const e=new Event("ControlsShow");t.current?.dispatchEvent(e)},a=()=>{const e=new Event("ControlsHide");t.current?.dispatchEvent(e)};return i?{}:{onFocus:()=>{r.current=!0,n()},onBlur:t=>{t.relatedTarget&&e.current?.contains(t.relatedTarget)||(r.current=!1,a())},onPointerDown:t=>{"mouse"!==t.pointerType&&e.current?.focus()},onPointerOver:e=>{"mouse"===e.pointerType&&n()},onPointerOut:e=>{"mouse"===e.pointerType&&(r.current||a())}}})({rootRef:a,overlayControlsContainerRef:G,isDisabled:!A}),N=st({visRef:W,rowAxisRef:X,navigationModes:{tasks:{currentItem:F,onCurrentItemChange:U},rowLabels:{currentItem:Z,onCurrentItemChange:e=>{if(e.isFocused){const t=new CustomEvent("KbPanRowIntoView",{detail:{id:e.id}});W.current?.dispatchEvent(t),C({dataId:e.id,ariaId:R.getRandomId(),type:"rowLabel"}),M("focus")}Y(e)}}},rowDataLayout:u,selectionProps:{selectedIds:n.selectedIds,selectionMode:n.selectionMode,onSelectionChange:n.onSelectionChange},isRTL:f,isDisabled:!A});if(!k||!T)return t.jsx(O,{innerRef:a,width:e,height:i,...j,children:y});const $=t.jsx(_e,{visRef:W,overlayControlsContainerRef:G,isRTL:f,isViewportDefined:A,scrollPosition:s,onScrollPositionChange:n.onScrollPositionChange,onViewportChange:n.onViewportChange,rowAxisSeparator:!!l,zoomParameters:h,zooming:n.zooming,panZoomLayout:d,getTimeAxesLayout:c,getHorizontalScrollbarLayout:w,onHorizontalScrollChange:p,getVerticalScrollbarLayout:b,onVerticalScrollChange:x,getResolvedViewportLayout:g,rowDataLayout:u,datatip:n.datatip,selectedIds:n.selectedIds,selectionMode:n.selectionMode,onSelectionChange:n.onSelectionChange,hoveredTaskId:L,onTaskHoverChange:e=>{void 0!==e.id&&C({dataId:e.id,ariaId:R.getRandomId(),type:"task"}),P(void 0!==e.id?"hover":"none"),D(e.id)},currentTask:F,onCurrentTaskChange:U,currentTaskInteraction:I,ariaActive:"task"===S?.type?S:void 0}),q=l&&t.jsx(E,{...l,rowAxis:(e,o)=>t.jsx(se,{innerRef:X,resolvedWidth:e,resolvedMaxWidth:o,currentRowLabel:Z,hoveredRowLabelId:z,onRowLabelHoverChange:B,currentRowLabelInteraction:V,ariaActive:"rowLabel"===S?.type?S:void 0,layoutObj:m,scrollPosition:s,children:l.label}),ganttView:$});return t.jsxs(O,{innerRef:a,width:e,height:i,testId:r,...j,...v.mergeProps(N,K),"aria-activedescendant":S?.ariaId,children:[q||$,y]})}}));
//# sourceMappingURL=Gantt-2a36ee1c.js.map
