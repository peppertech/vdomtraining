define(['exports', 'preact/jsx-runtime', 'preact', './PRIVATE_Chart/themes/ChartStyles.css', './classNames-08d99695', './layoutUtils-c2938c54', './useTranslationBundle-d07d4b20', './dataStyleUtils-7ba616b8', './accUtils-530bdb90', './colorUtils-7c069766'], (function(e,t,i,s,a,r,o,n,l,d){"use strict";const c=2;function u(e,t,i,s,a,r,o){const n=r?1:s,l=c*a,d=(t*(1-i)-(n-1)*l)/n;if(r)return{barWidth:d,offset:-1*d/2,itemsGaps:l};const u=t/2,h=t*(i/2)+e*(d+c*a);return{barWidth:d,offset:o?u-h-d:h-u,itemsGaps:l}}const h=1.5,g=2.5;function f(e){return e.isSelected||e.isFocused?t.jsx(x,{...e}):t.jsx("rect",{x:e.x,y:e.y,"data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,"data-oj-object":"bar","aria-label":e["aria-label"],role:e["aria-label"]?"img":void 0,id:e.activeId,style:{width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth},class:a.classNames([e.isPointerEnabled?s.styles.cursorEnable:void 0,e.isDimmed?s.styles.dimmed:void 0])})}function x(e){const{x:i,y:r,width:o,height:n,fill:l,isSelected:d,isFocused:c}=e,u=d?g:h;return t.jsxs("g",{id:e.activeId,"data-oj-object":"bar","data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,className:e.isDimmed?s.styles.dimmed:"",role:e["aria-label"]?"img":void 0,"aria-label":e["aria-label"],children:[t.jsx("rect",{x:i,y:r,class:a.classNames([d?s.styles.selectedBorder:""]),style:{width:o,height:n,fill:!d&&c?l:void 0}}),t.jsx("rect",{x:i+u,y:r+u,class:a.classNames([s.styles.contrastBorder,e.isPointerEnabled?s.styles.cursorEnable:void 0]),style:{width:o-2*u,height:n-2*u,fill:l}})]})}function m(e,t,i,s,a){let r,o,n,l,d=e,c=t,u=t-e;return u<1&&(d=Math.floor(d),c=d+1,u=1),a?(o=d,r=i>s?s:i,n=Math.abs(s-i),l=Math.abs(c-d)):(r=d,o=i>s?s:i,n=Math.abs(c-d),l=Math.abs(s-i)),{x:r,y:o,width:n,height:l}}function b(e,t,i,s,a,r,o){let n,l;return i?(n=t.transform(e<0?r:o),r+=e<0?e:0,o+=e>0?e:0,l=t.transform(e<0?r:o),n+=l>n?a:-a):(n=s?t.range()[0]:t.transform(0),l=t.transform(e)),{baselineCoord:n,endCoord:l}}const y=2;function p(e,t,i,s,a,r){if(!r)return{};const o=function(e,t,i,s){return e?i&&!t||!i&&t?s.x:s.x+s.width:i?s.height+s.y:s.y}(e,t,i,s);return"insideBarEdge"===a?{y:e?s.y+s.height/2:o+(i?-1:1)*(r.height/2+y+2),x:e?o-(i&&!t||!i&&t?-1:1)*(r.width/2+y):s.x+s.width/2}:"outsideBarEdge"===a?{y:e?s.y+s.height/2:o-(i?-1:1)*(r.height/2+y),x:e?o+(i&&!t||!i&&t?-1:1)*(r.width/2+y):s.x+s.width/2}:{x:s.x+s.width/2,y:s.y+s.height/2}}const S=(e,t,i,s,a,r)=>({y:s?e:t-(i?-1:1)*(r.height/2+y),x:s?t+(i&&!a||!i&&a?-1:1)*(r.width/2+y):e});function v({groupCenter:e,getStackLabel:i,group:a,posValue:r,negValue:o,posItemsData:n,yScale:l,isHoriz:d,isRtl:c,negItemsData:u,defaultFontSize:h,labelStyle:g,getTextDimensions:f}){const x=i({group:a,value:r,data:n}),m={fontSize:h,fontWeight:"bold",...g},b=o<0?i?.({group:a,value:o,data:u}):"",y=S(e,l.transform(r),!1,d,c,f(x,m)),p=S(e,l.transform(o),!0,d,c,f(b,m));return t.jsxs(t.Fragment,{children:[t.jsx("text",{class:s.styles.stackLabelStyle,style:m,...y,children:x}),t.jsx("text",{class:s.styles.stackLabelStyle,style:m,...p,children:b})]})}function I({item:e,seriesColor:i,isStacked:a,defaultFontSize:r,barDim:o,isRtl:n,isHoriz:l,getTextDimensions:c}){let u=null;const h=!e.labelPosition||"outsideBarEdge"===e.labelPosition&&a?"center":e.labelPosition,g=e.label,f=e.color||i;if("none"!=h&&g&&c&&(!a||"outsideBarEdge"!==h)){const i={fontSize:r,fill:a||!("outsideBarEdge"===h)?d.getContrastingTextColor(f):void 0,...e.labelStyle},x=function(e,t,i,s){return e?!(t.height>i.height)&&("outsideBarEdge"==s||t.width<i.width):!(t.width>i.width)&&("outsideBarEdge"==s||t.height<i.height)}(l,c(g,i),o,h||"center");u=x?t.jsx("text",{class:s.styles.dataLabelStyle,style:i,...p(l,n,e.value<0,o,h||"center",c?.(g,i)),children:g}):null}return u}e.BarGroup=function({yScale:e,xScale:s,colors:a,series:d,groupIndex:c,hiddenIds:h,barGapRatio:g,dataItemGaps:x,groupWidth:y,highlightedIds:p,selectedIds:S,isPointInsideMarquee:j,orientation:C,isLog:w,activeId:D,getDataItem:E,isRtl:F,isStacked:k,isSelectionEnabled:B,focusedItemInfo:z,hoveredItemInfo:T,isDrillEnabled:W,group:G,timeAxisType:L,getTextDimensions:P,defaultFontSize:R,stacklabelStyle:M,getStackLabel:q,seriesIndex:V}){const N="horizontal"===C,A=[],H=d.length;let U=w?e.domain()[0]:0,$=0;const O=[],_=[],J=o.useTranslationBundle("@oracle/oraclejet-preact"),K=k&&!!q&&"mixedFrequency"!=L;let Q="mixedFrequency"!=L?s.transform(null!=L?new Date(G.id).getTime():c):void 0;const X=o=>{const v=E(o,c);if(!v||h?.has(v.id)||w&&v.value<=0)return;"mixedFrequency"===L&&(Q=r.getMixedFreqGroupCenter(s,v));const C=z?.groupIndex===c&&z?.seriesIndex===o&&z?.isFocusVisible,M=T?.groupIndex===c&&T?.seriesIndex===o&&T?.isCurrent,q=!!C||!!M&&B,V=C&&z.isCurrent||M,X=void 0===p||0===p.size||p.has(v.id),Y="on"===v.drilling||"off"!=v.drilling&&W,{barWidth:Z,offset:ee,itemsGaps:te}=u(o,y,g,H,x,k,F),ie=Q+ee,se=ie+Z,{baselineCoord:ae,endCoord:re}=b(v.value,e,k,w,te,$,U);$+=v.value<0?v.value:0,U+=v.value>0?v.value:0,K&&(v.value>=0?O.push(v):_.push(v));const oe=function(e,t,i){return{fill:e.color||t.color||i,stroke:e.borderColor||t.borderColor}}(v,d[o],a?.[o]),ne=m(ie,se,re,ae,N),le=j?j?.(v.id,{x:ne.x+ne.width/2,y:ne.y}):S?.has(v.id),de=l.supportsMobileScreenReader||V?n.getItemAriaLabel(J,d[o].name||d[o].id.toString(),G.name||G.id,B,!!le,Y,v.accessibleLabel,v.value):"";A.push(t.jsxs(t.Fragment,{children:[i.createElement(f,{...ne,...oe,seriesIndex:o,groupIndex:c,isFocused:q,activeId:V?D:"","aria-label":de,isDimmed:!X,isSelected:!!le,isPointerEnabled:Y||B,key:`${c};${o}`}),t.jsx(I,{item:v,isRtl:F,seriesColor:a[o%12],isStacked:k,defaultFontSize:R,barDim:ne,isHoriz:N,getTextDimensions:P})]}))};return void 0!==V?X(V):d.forEach(((e,t)=>X(t))),t.jsxs(t.Fragment,{children:[A,K&&P&&t.jsx(v,{group:G,isRtl:F,yScale:e,getStackLabel:q,defaultFontSize:R,getTextDimensions:P,posItemsData:O,negItemsData:_,isHoriz:N,groupCenter:Q,labelStyle:M,posValue:U,negValue:$})]})},e.getBarCenterCoordinate=function(e,t,i,s,a,r,o){const{baselineCoord:n,endCoord:l}=b(e,t,i,s,a,r,o);return(n+l)/2},e.getBarGapRatio=function(e,t,i){return e?.37+.26/(i-t+1):.25},e.getBarPosition=function(e,t,i,s,a,r,o,n,l,d,c,h,g,f){return(x,y)=>{const p=e.length;let S=0,v=0;for(let e=0;e<p;e+=1){const I=i(e,y);let j=y;if(f){const e="mixedFrequency"===f?i(x,y)?.x:t[y].id;j=new Date(e).getTime()}if(!I||r?.has(I.id)||d&&I.value<=0)continue;const C=s.transform(j),{barWidth:w,offset:D,itemsGaps:E}=u(e,n,l,p,o,c,h),F=C+D,k=F+w,{baselineCoord:B,endCoord:z}=b(I.value,a,c,d,E,v,S);if(v+=I.value<0?I.value:0,S+=I.value>0?I.value:0,x===e)return m(F,k,z,B,g)}}},e.getSeriesOffsetAndWidth=function(e,t,i,s,a,r){return o=>{const{offset:n,barWidth:l}=u(o,e,t,i,s,a,r);return{offset:n,dataWidth:l}}}}));
//# sourceMappingURL=BarGroup-76ef0839.js.map
