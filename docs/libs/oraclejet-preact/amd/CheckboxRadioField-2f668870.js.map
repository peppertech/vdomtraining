{"version":3,"file":"CheckboxRadioField-2f668870.js","sources":["../../src/PRIVATE_CheckboxRadioField/CheckboxRadioField.tsx","../../src/PRIVATE_CheckboxRadioField/useCheckboxRadioField.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentChildren, ComponentProps, Ref } from 'preact';\nimport { forwardRef, useImperativeHandle, useRef } from 'preact/compat';\n\nimport { FocusableHandle } from '../hooks/UNSAFE_useFocusableTextField';\nimport { useCollectionFocusRing } from '../hooks/PRIVATE_useCollectionFocusRing';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { FlexboxProps } from '../utils/UNSAFE_interpolations/flexbox';\nimport { Size } from '../utils/UNSAFE_size';\nimport { BundleType } from '../resources/nls/bundle';\nimport { AriaAttributesSignalExcluded } from '#utils/UNSAFE_attributeUtils';\n\nimport { Flex } from '../UNSAFE_Flex';\nimport { Label } from '../UNSAFE_Label';\n\nimport {\n  InlineHelp,\n  InlineUserAssistance,\n  InlineUserAssistanceContainer,\n  UserAssistanceDensityType\n} from '../UNSAFE_UserAssistance';\nimport { useCheckboxRadioField } from './useCheckboxRadioField';\nimport { HiddenAccessible } from '../UNSAFE_HiddenAccessible';\n\nimport { xUnits } from '../UNSAFE_Theme';\n\nimport { topUAContainerStyles } from './CheckboxRadioFieldStyles.css';\nimport { LabelValueLayout } from '../UNSAFE_LabelValueLayout';\nimport { CheckboxRadioContext } from './CheckboxRadioContext';\nimport { layoutSpanStyles, LayoutColumnSpan } from '../utils/UNSAFE_styles/Layout';\nimport { type TestIdProps, useTestId } from '#hooks/UNSAFE_useTestId';\n\ntype InlineUserAssistanceProps = ComponentProps<typeof InlineUserAssistance>;\n\ntype AriaProps = Pick<AriaAttributesSignalExcluded, 'aria-describedby'>;\n\ntype Props = TestIdProps &\n  AriaProps & {\n    /**\n     * Text to provide guidance to help the user understand what data to enter.\n     */\n    assistiveText?: InlineUserAssistanceProps['assistiveText'];\n    /**\n     * baseId, used to generate other element IDs.\n     */\n    baseId: string;\n    /**\n     * <RadioItem /> or <CheckboxItem />\n     */\n    children: ComponentChildren;\n    /**\n     * Specifies how many columns to span in a FormLayout with direction === 'row'\n     */\n    columnSpan?: LayoutColumnSpan;\n    /**\n     * layout direction of the children elements\n     */\n    direction?: FlexboxProps['direction'];\n    /**\n     * Value of the radio option.\n     */\n    hasValue?: boolean;\n    /**\n     * Help source URL associated with the component.\n     */\n    helpSourceLink?: InlineUserAssistanceProps['helpSourceLink'];\n    /**\n     * Custom text to be rendered for the <code>helpSourceLink</code>.\n     */\n    helpSourceText?: InlineUserAssistanceProps['helpSourceText'];\n    /**\n     * Specifies if the radio group is disabled.\n     */\n    isDisabled?: boolean;\n    /**\n     * Specifies if the radio group is read-only.\n     */\n    isReadonly?: boolean;\n    /**\n     * Specifies whether the radio group requires a selection to be made.\n     */\n    isRequired?: boolean;\n    /**\n     * Label text for the group of radio buttons.\n     */\n    label: string;\n    /**\n     * Specifies where the label is positioned relative to the field.\n     */\n    labelEdge?: 'none' | 'top' | 'start' | 'inside';\n    /**\n     * Specifies the width of the label when <code>labelEdge</code> is <code>\"start\"</code>.\n     */\n    labelStartWidth?: Size;\n    /**\n     * Messages to show on screen that are associated with the component.\n     */\n    messages?: InlineUserAssistanceProps['messages'];\n\n    role?: 'radiogroup' | 'group';\n    /**\n     * Specifies the density of the user assistance presentation.  It can be set to:\n     * <ul>\n     * <li><code>'efficient'</code>: Show inline and reserve space to prevent layout reflow when user\n     * assistance text is displayed.</li>\n     * <li><code>'reflow'</code>: Show inline.  Layout will reflow when text is displayed.</li>\n     * <li><code>'compact'</code>: Messages, help, hints, and required indicator will be shown inline just as in reflow (default) mode. </li>\n     * </ul>\n     */\n    userAssistanceDensity?: UserAssistanceDensityType;\n\n    parentComponentVariant: 'radioSet' | 'checkboxSet';\n  };\n\nexport const CheckboxRadioField = forwardRef(\n  (\n    {\n      'aria-describedby': ariaDescribedBy,\n      assistiveText,\n      baseId,\n      direction = 'column',\n      columnSpan = 1,\n      hasValue,\n      helpSourceLink,\n      helpSourceText,\n      isDisabled,\n      isReadonly,\n      isRequired,\n      label,\n      labelEdge,\n      labelStartWidth = '33%',\n      parentComponentVariant,\n      messages,\n      userAssistanceDensity,\n      role,\n      children,\n      testId\n    }: Props,\n    ref: Ref<FocusableHandle> = null\n  ) => {\n    const testIdProps = useTestId(testId);\n    const hasTopUserAssistance =\n      !isDisabled && !isReadonly && (!!assistiveText || (!!helpSourceLink && !!helpSourceText));\n    const hasBottomUserAssistance = !isDisabled && !isReadonly;\n    const groupRef = useRef<HTMLDivElement>(null);\n\n    const {\n      groupProps,\n      labelProps,\n      topUserAssistanceProps,\n      bottomUserAssistanceProps,\n      readonlyId\n    } = useCheckboxRadioField({\n      ariaDescribedBy,\n      baseId,\n      isRequired,\n      isReadonly,\n      isDisabled,\n      label,\n      labelEdge,\n      messages,\n      hasValue,\n      hasTopUserAssistance,\n      hasBottomUserAssistance,\n      parentComponentVariant\n    });\n\n    const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n    const readonlyLabel = translations.formControl_readOnly();\n    const isRadioSet = parentComponentVariant === 'radioSet';\n\n    useImperativeHandle(ref, () => ({\n      focus: () => {\n        if (!isDisabled) {\n          const inputChildren = groupRef.current?.querySelectorAll<HTMLInputElement>('input') ?? [];\n          const selectedChild = Array.from(inputChildren).find((child) => child.checked);\n\n          if (selectedChild) {\n            selectedChild.focus();\n          } else {\n            inputChildren[0].focus();\n          }\n        }\n      },\n      blur: () => {\n        if (groupRef.current?.contains(document.activeElement)) {\n          (document.activeElement as HTMLElement).blur();\n        }\n      }\n    }));\n\n    // the props from the hook are used for focus management on the radioset variant to allow for arrow navigation\n    // while checkboxset uses tabbing\n    const [isFocusRingShown, focusRingProps] = useCollectionFocusRing(\n      groupRef,\n      isRadioSet ? ['ArrowUp', 'ArrowRight', 'ArrowDown', 'ArrowLeft'] : ['Tab']\n    );\n\n    const content = (\n      <>\n        {hasTopUserAssistance && (\n          <div\n            id={`${baseId}-top-ua-container`}\n            class={labelEdge === 'start' ? topUAContainerStyles.start : topUAContainerStyles.top}>\n            <InlineUserAssistanceContainer {...topUserAssistanceProps}>\n              <InlineHelp\n                assistiveText={assistiveText}\n                sourceLink={helpSourceLink}\n                sourceText={helpSourceText}\n              />\n            </InlineUserAssistanceContainer>\n          </div>\n        )}\n        <Flex\n          direction={direction}\n          {...(direction === 'row' && { gap: [0, xUnits(8) as Size], wrap: 'wrap' })}>\n          <CheckboxRadioContext.Provider value={{ isFocusRingShown }}>\n            {children}\n          </CheckboxRadioContext.Provider>\n        </Flex>\n        {hasBottomUserAssistance && !isReadonly && (\n          <InlineUserAssistance\n            {...bottomUserAssistanceProps}\n            requiredAlignment=\"start\"\n            messages={messages}\n            userAssistanceDensity={\n              userAssistanceDensity === 'reflow' ? userAssistanceDensity : 'efficient'\n            }\n          />\n        )}\n      </>\n    );\n    // The top level element needs the column span class on it.\n    const classes = layoutSpanStyles.layoutSpanColumn[columnSpan];\n\n    return (\n      <div\n        role={role}\n        ref={groupRef}\n        class={classes}\n        {...groupProps}\n        {...focusRingProps}\n        {...testIdProps}>\n        {labelEdge === 'none' && content}\n        {labelEdge !== 'none' && (\n          <LabelValueLayout\n            parentComponentVariant={parentComponentVariant}\n            hasTopUserAssistance={hasTopUserAssistance}\n            label={\n              <Label\n                {...labelProps}\n                variant={labelEdge}\n                userAssistanceDensity=\"efficient\"\n                parentComponentVariant={parentComponentVariant}>\n                {label}\n              </Label>\n            }\n            labelEdge={labelEdge}\n            labelStartWidth={labelStartWidth}>\n            {content}\n          </LabelValueLayout>\n        )}\n        {isReadonly && (\n          <HiddenAccessible id={readonlyId} isHidden={true}>\n            {readonlyLabel}\n          </HiddenAccessible>\n        )}\n      </div>\n    );\n  }\n);\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { ComponentProps } from 'preact';\nimport { useMessageSeverity } from '../hooks/PRIVATE_useMessageSeverity';\nimport { merge } from '../utils/UNSAFE_stringUtils';\nimport { HTMLAttributesSignalExcluded } from '../utils/UNSAFE_attributeUtils';\nimport { InlineUserAssistance } from '../UNSAFE_UserAssistance';\n\ntype UseCheckboxRadioFieldProps = {\n  ariaDescribedBy?: string;\n  baseId: string;\n  hasValue?: boolean;\n  hasTopUserAssistance?: boolean;\n  hasBottomUserAssistance?: boolean;\n  isFocused?: boolean; // TODO: check if this is needed\n  isReadonly?: boolean;\n  isRequired?: boolean;\n  isDisabled?: boolean;\n  label: string;\n  labelEdge?: 'none' | 'top' | 'start' | 'inside';\n  styleVariant?: 'default' | 'embedded'; // TODO: check if this is needed\n  messages?: ComponentProps<typeof InlineUserAssistance>['messages'];\n  parentComponentVariant: 'radioSet' | 'checkboxSet';\n};\n\ntype GroupProps = {\n  groupProps: {\n    'aria-describedby'?: HTMLAttributesSignalExcluded['aria-describedby'];\n    'aria-labelledby'?: HTMLAttributesSignalExcluded['aria-labelledby'];\n    'aria-label'?: HTMLAttributesSignalExcluded['aria-label'];\n    'aria-required'?: HTMLAttributesSignalExcluded['aria-required'];\n    'aria-invalid'?: HTMLAttributesSignalExcluded['aria-invalid'];\n    'aria-readonly'?: HTMLAttributesSignalExcluded['aria-readonly'];\n    'aria-disabled'?: HTMLAttributesSignalExcluded['aria-disabled'];\n    id: HTMLAttributesSignalExcluded['id'];\n  };\n  labelProps: {\n    forId: string;\n    id: string;\n    isRequiredShown?: boolean;\n  };\n  topUserAssistanceProps?: {\n    id: string;\n    variant: 'reflow';\n  };\n  bottomUserAssistanceProps?: {\n    id: string;\n    isRequiredShown: boolean;\n  };\n  readonlyId?: string;\n};\n\nexport function useCheckboxRadioField({\n  ariaDescribedBy,\n  baseId,\n  hasValue,\n  hasTopUserAssistance,\n  hasBottomUserAssistance,\n  isReadonly,\n  isRequired = false,\n  isDisabled,\n  label,\n  labelEdge,\n  messages,\n  parentComponentVariant\n}: UseCheckboxRadioFieldProps): GroupProps {\n  const optionsGroupId = `${baseId}-group`;\n  const labelId = `${baseId}-label`;\n  const topUaId = hasTopUserAssistance ? `${baseId}-top-ua` : undefined;\n  const bottomUaId = hasBottomUserAssistance ? `${baseId}-bottom-ua` : undefined;\n  const readonlyId = isReadonly ? `${baseId}-readonly` : undefined;\n  const ariaLabel = label && label.length > 0 && labelEdge === 'none' ? label : undefined;\n  const ariaLabelledBy = ariaLabel ? undefined : labelId;\n  const isRadioSet = parentComponentVariant === 'radioSet';\n  const highestMessageSeverity = useMessageSeverity(messages);\n  const hasErrorMessage = highestMessageSeverity === 'error';\n\n  return {\n    groupProps: {\n      'aria-describedby': merge([topUaId, bottomUaId, readonlyId, ariaDescribedBy]),\n      ...(isRadioSet && { 'aria-required': isRequired }),\n      ...(ariaLabelledBy && { 'aria-labelledby': ariaLabelledBy }),\n      ...(ariaLabel && { 'aria-label': ariaLabel }),\n      ...(isReadonly && isRadioSet && { 'aria-readonly': true }),\n      ...(hasErrorMessage && { 'aria-invalid': true }),\n      ...(isDisabled && { 'aria-disabled': true }),\n      id: optionsGroupId\n    },\n    labelProps: {\n      forId: optionsGroupId,\n      id: labelId\n    },\n    // TOP UA is assistive text and help link/text\n    ...(hasTopUserAssistance && {\n      topUserAssistanceProps: {\n        id: topUaId as string,\n        // Use reflow variant so that top UA doesn't have min height\n        variant: 'reflow'\n      }\n    }),\n    // Bottom UA is required indicator or messages\n    ...(hasBottomUserAssistance && {\n      bottomUserAssistanceProps: {\n        id: bottomUaId as string,\n        isRequiredShown: !!isRequired && !hasValue\n      }\n    }),\n    ...(isReadonly && {\n      readonlyId\n    })\n  };\n}\n"],"names":["CheckboxRadioField","forwardRef","ariaDescribedBy","assistiveText","baseId","direction","columnSpan","hasValue","helpSourceLink","helpSourceText","isDisabled","isReadonly","isRequired","label","labelEdge","labelStartWidth","parentComponentVariant","messages","userAssistanceDensity","role","children","testId","ref","testIdProps","useTestId","hasTopUserAssistance","hasBottomUserAssistance","groupRef","useRef","groupProps","labelProps","topUserAssistanceProps","bottomUserAssistanceProps","readonlyId","optionsGroupId","labelId","topUaId","undefined","bottomUaId","ariaLabel","length","ariaLabelledBy","isRadioSet","hasErrorMessage","useMessageSeverity","merge","id","forId","variant","isRequiredShown","useCheckboxRadioField","readonlyLabel","useTranslationBundle","formControl_readOnly","useImperativeHandle","focus","inputChildren","current","querySelectorAll","selectedChild","Array","from","find","child","checked","blur","contains","document","activeElement","isFocusRingShown","focusRingProps","useCollectionFocusRing","content","_jsxs","jsxs","_Fragment","_jsx","class","topUAContainerStyles","InlineUserAssistanceContainer","InlineHelp","sourceLink","sourceText","Flex","gap","xUnits","wrap","jsx","CheckboxRadioContext","Provider","value","InlineUserAssistance","requiredAlignment","classes","layoutSpanStyles","layoutSpanColumn","LabelValueLayout","Label","HiddenAccessible","isHidden"],"mappings":"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"}