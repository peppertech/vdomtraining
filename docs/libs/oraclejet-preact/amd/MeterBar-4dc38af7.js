define(['exports', 'preact/jsx-runtime', './size-a13c8931', './classNames-2e65b3b3', './mergeProps-7d608009', 'preact/hooks', './useUser-e0989b0b', './useMeterDatatip-17bffef9', './useKeyboardEvents-ce2383c7', './meterUtils-00d6a580', './UNSAFE_MeterBar/themes/MeterBarStyles.css', './utils-4d32c19a', './TabbableModeContext-8858ed6b', './useTabbableMode-913efe07', './useComponentTheme-f77b756d', './UNSAFE_MeterBar/themes/redwood/MeterBarTheme', './useTestId-af48c25c', './LinearMeter-2a231667'], (function(e,t,r,a,o,s,n,i,l,c,d,h,u,m,S,y,b,f){"use strict";function g(e){if(!e)return{width:0,height:0};const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}function p({orientation:e,percentage:r,color:o,position:s}){const i="horizontal"===e,{direction:l}=n.useUser(),c="rtl"===l,u="start"===s;return t.jsx("div",{class:a.classNames([d.styles.referenceLinesBaseStyle,i?d.styles.referenceLinesHorizontalStyle:d.styles.referenceLinesVerticalStyle,u?i?d.styles.referenceLinesHoriontalStartStyle:c?d.styles.referenceLinesVerticalStartRtlStyle:d.styles.referenceLinesVerticalStartLtrStyle:""]),style:{left:i&&!c?r:void 0,right:i&&c?r:void 0,bottom:i?void 0:r,backgroundColor:h.getDvtThresholdColor(o)}})}function T({color:e,length:r,orientation:o,...s}){const{direction:i}=n.useUser(),l="horizontal"===o,c="rtl"===i;return t.jsx("div",{class:a.classNames([d.styles.thresholdBarBaseStyle,l?c?d.styles.thresholdBarHorizontalBarTrackSectionRtlStyle:d.styles.thresholdBarHorizontalBarTrackSectionLtrStyle:d.styles.thresholdBarVerticalBarTrackSectionStyle,s.class]),style:{width:l?r:"100%",height:l?"100%":r,backgroundColor:h.getDvtThresholdColor(e)}})}const x=function(e,t,r,a,o,s){const n=[];return e.start&&n.push(t?r:a),e.end&&n.push(t?o:s),n};e.MeterBar=function({max:e=100,min:d=0,value:h=0,step:u=1,length:k="100%",size:C,orientation:B="horizontal",isTrackRendered:M=!0,thresholdDisplay:z="all",indicatorSize:v=1,testId:L,...V}){const j=b.useTestId(L);c.validateRange(d,e,h,u);const R=s.useRef(),w="horizontal"===B,I=s.useRef(null),H=s.useRef(g(null)),{direction:N,forcedColors:E}=n.useUser(),U="rtl"===N;s.useEffect((()=>{(V.onCommit||V.onInput)&&(H.current=g(I.current))}),[C,k,B,V.onCommit,V.onInput]);const F=s.useRef(!1),D=i.usePointerEvents(h,(t=>{if(t.target==I.current)return function(e,t,r,a,o,s,n){const i=t.current;if(!i||0===i.width)return;let l;if("horizontal"===s){const t=e.offsetX;l=r+(a-r)*(n?i.width-t:t)/i.width}else l=r+(a-r)*(i.height-e.offsetY)/i.height;return l=Math.round(l/o)*o,Math.max(r,Math.min(a,l))}(t,H,d,e,u,B,U)}),I,R,F,V.onCommit,V.onInput),P=l.useKeyboardEvents(h,d,e,u,R,V.onCommit,V.onInput),{datatipContent:A,datatipProps:K}=i.useMeterDatatip(h,F,V.datatip,V["aria-describedby"]),_=c.getMeterAriaProps(h,d,e,V["aria-label"],V["aria-labelledby"],V.thresholds),X=o.mergeProps(D,P,K,_),Y=Math.max(0,Math.min(1,v)),q=100*(h-d)/(e-d)+"%",G=100*Y+"%",{trackColor:J,indicatorColor:O}=c.getTrackAndIndicatorColor(h,z,V.trackColor,V.indicatorColor,V.thresholds),Q=function(e){let t={start:!1,end:!1};return e&&(t=e.reduce(((e,t)=>(e.start=e.start||"start"===t.position,e.end=e.end||"end"===t.position||null==t.position,e)),t)),t}(V.referenceLines),W=V.onCommit||V.onInput,{isTabbable:Z}=m.useTabbableMode(),{classes:$,styles:{interactiveStyle:ee,barValueBaseStyle:te,barValueVerticalStyle:re,barValueHorizontalStyle:ae,barValueHighContrastStyle:oe,barTrackBaseStyle:se,barTrackHorizontalSizeStyle:ne,barTrackVerticalSizeStyle:ie,barTrackBorderStyle:le,barTrackMarginTopStyle:ce,barTrackMarginStartStyle:de,barTrackMarginBottomStyle:he,barTrackMarginEndStyle:ue,trackSectionHorizontalFirstStyle:me,trackSectionHorizontalLastStyle:Se,trackSectionVerticalFirstStyle:ye,trackSectionVerticalLastStyle:be,trackSectionRoundedCornersStyle:fe}}=S.useComponentTheme(y.MeterBarRedwoodTheme,{size:C,orientation:B});return t.jsxs(t.Fragment,{children:[t.jsx("div",{tabIndex:Z?0:-1,...j,...X,style:{width:w?r.sizeToCSS(k):void 0,height:w?void 0:r.sizeToCSS(k)},class:a.classNames([$]),children:t.jsxs(f.BarTrack,{ref:I,orientation:B,color:!M||"all"===z&&V.thresholds?"transparent":J,class:a.classNames([se,W?ee:"",w?ne:ie,!M||"all"===z&&V.thresholds?void 0:le,...x(Q,w,ce,de,he,ue)]),children:["all"===z&&V.thresholds?.filter((t=>t.max>d&&t.max<=e)).sort(((e,t)=>e.max-t.max)).map(((r,a,o)=>{const s=0===a?r.max-d:r.max-o[a-1].max,n=w?Se:be;let i=0===a?w?me:ye:"";return r.max===e&&(i=0===a?fe:n),t.jsxs(t.Fragment,{children:[t.jsx(T,{class:i,orientation:B,length:100*s/(e-d)+"%",color:r.color}),M&&a===o.length-1&&r.max<e?t.jsx(T,{class:n,color:J,orientation:B,length:100*(e-o[a].max)/(e-d)+"%"}):""]})})),t.jsx(f.BarValue,{length:q,size:G,orientation:B,class:a.classNames([te,w?ae:re,"active"===E?oe:""]),color:O}),V.referenceLines?.map((r=>t.jsx(p,{color:r.color,orientation:B,percentage:100*(r.value-d)/(e-d)+"%",position:r.position})))]})}),A]})}}));
//# sourceMappingURL=MeterBar-4dc38af7.js.map
