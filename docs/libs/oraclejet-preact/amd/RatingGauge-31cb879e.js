define(['exports', 'preact/jsx-runtime', 'preact', 'preact/hooks', './classNames-2e65b3b3', './UNSAFE_RatingGauge/themes/RatingGaugeContract.css', './useComponentTheme-f77b756d', './useUser-e0989b0b', './vanilla-extract-dynamic.esm-8f33fc39', './UNSAFE_RatingGauge/themes/redwood/RatingGaugeTheme', './useKeyboardEvents-ce2383c7', 'preact/compat', './TopLayerHost-06d05670', './Floating-d924078b', 'css!./useDatatip.styles.css', './meterUtils-00d6a580', './useDatatip-88cbd577', './useTooltipControlled-e99753ae', './mergeProps-7d608009', './TabbableModeContext-8858ed6b', './useTabbableMode-913efe07', './useTestId-af48c25c'], (function(e,t,s,a,o,i,n,l,r,d,c,u,h,b,p,g,m,y,x,R,f,S){"use strict";function v(e,t,s,a,o){const i=a.current;if(!i||0===i.width)return-1;const n=e-i.x,l=t*(o?i.width-n:n)/i.width/s;return l<.5?0:Math.min(t,Math.ceil(l)*s)}function C(e){if(!e)return{width:0,x:0};const t=e.getBoundingClientRect();return{width:t.width,x:t.x+window.scrollX}}const D=({isSelected:e,isDisabled:s,isReadOnly:a,color:c="neutral"})=>{const{forcedColors:u}=l.useUser(),h="active"===u,b=h&&s,p=function(e){return"neutral"===e||"gold"===e||"danger"===e||"warning"===e||"success"===e?e:void 0}(c),g=r.assignInlineVars({[i.ratingGaugeVars.colorSelected]:c,[i.ratingGaugeVars.borderColorSelected]:c,[i.ratingGaugeVars.colorSelectedReadonly]:c}),{variantClasses:m,styles:{ratingStarBaseStyle:y,innerRatingStarColor:x,outerRatingStarColor:R,outerDisabledHighContrastBaseStyle:f,outerDisabledHighContrastSelectedStyle:S,outerDisabledHighContrastUnselectedStyle:v}}=n.useComponentTheme(d.RatingGaugeRedwoodTheme,{color:p,selectionState:e?"isSelected":"isNotSelected",disabledState:s?"isDisabled":"isNotDisabled",readonlyState:a?"isReadonly":"isNotReadonly",highContrastState:h?"isHighContrast":"isNotHighContrast"});return t.jsx("svg",{viewBox:"0 0 36 36",height:"100%",width:"100%",style:p?void 0:g,class:o.classNames([y,p?m:""]),children:t.jsxs("g",{children:[t.jsx("path",{class:x,d:"m18 1 5.0061 11.9524 12.9939 1.0344-9.9 8.4215 3.0246 12.5917-11.1246-6.7476-11.12461 6.7476 3.02461-12.5917-9.9-8.4215 12.9939-1.0344z"}),t.jsx("path",{class:o.classNames([R,b?f:"",b?e?S:v:""]),d:"m23.0061 12.9524-5.0061-11.9524-5.0061 11.9524-12.9939 1.0344 9.9 8.4215-3.02461 12.5917 11.12461-6.7476 11.1246 6.7476-3.0246-12.5917 9.9-8.4215zm10.5043 1.8394-8.5262 7.2528 2.6077 10.8562-9.5919-5.818-9.59192 5.818 2.60772-10.8562-8.52615-7.2528 11.19115-.891 4.3192-10.31227 4.3192 10.31227z"})]})})},w=({fillRatio:e,isDisabled:a,isReadonly:o,color:i})=>{const{direction:r}=l.useUser(),c="rtl"===r,{styles:{fractionalStarBaseStyle:u}}=n.useComponentTheme(d.RatingGaugeRedwoodTheme);return 1===e||0===e?t.jsx(D,{isSelected:1===e,isDisabled:a,isReadOnly:o,color:i}):t.jsxs(s.Fragment,{children:[t.jsx("div",{class:u,style:{clipPath:`inset(0% ${c?100*(1-e):0}% 0% ${c?0:100*e}%)`},children:t.jsx(D,{isSelected:!1,isDisabled:a,isReadOnly:o,color:i})}),t.jsx("div",{class:u,style:{clipPath:`inset(0% ${c?0:100*(1-e)}% 0% ${c?100*(1-e):0}%)`},children:t.jsx(D,{isSelected:!0,isDisabled:a,isReadOnly:o,color:i})})]})};e.RatingGauge=function({max:e=5,value:i=0,size:r,color:u="neutral",step:h=1,isReadonly:b,isDisabled:p,testId:R,...D}){const T=S.useTestId(R);g.validateRange(0,e,i,h);const j=a.useRef(null),P=a.useRef(C(null)),M=!b&&!p;a.useEffect((()=>{P.current=C(j.current)}),[r,e]);const N=((e,t,s,o,i,n,r,d)=>{const u=a.useRef(),{direction:h}=l.useUser(),b="rtl"===h,p=e=>{d?.({value:e}),u.current=e},g=c.useKeyboardEvents(s,0,e,t,u,r,d);return n?{onPointerUp:s=>{const a=v(s.pageX,e,t,i,b);-1!==a&&r?.({value:a})},onBlur:()=>{r?.({value:s})},onPointerMove:s=>{const a=v(s.pageX,e,t,i,b);-1!==a&&a!=u.current&&p(a)},onKeyUp:g.onKeyUp,onKeyDown:g.onKeyDown,onPointerLeave:()=>{p(void 0)},onPointerEnter:()=>{i.current=C(o.current)}}:{}})(e,h,i,j,P,M,D.onCommit,D.onInput),{datatipContent:G,datatipProps:U}=function({max:e,value:t,isDisabled:s,isReadonly:a,datatip:o,thresholds:i,width:n}){const l=(Math.max(1,Math.ceil(t))-Math.ceil(e/2))*n/e,r=o||!i||s?o:g.findThreshold(t,i)?.accessibleLabel,{datatipContent:d,datatipProps:c}=m.useDatatip({content:s||a?null:r,anchor:"element",offset:{mainAxis:8,crossAxis:l},placement:"bottom"});return{datatipContent:d,datatipProps:a&&!s?{"aria-describedby":void 0}:c}}({max:e,value:i,isDisabled:p,isReadonly:b,datatip:D.datatip,thresholds:D.thresholds,width:P.current.width}),{tooltipContent:A,tooltipProps:B}=function({isReadonly:e,isDisabled:t,tooltip:s}){const[o,i]=a.useState(!1),n=e&&!t?s:"",{tooltipContent:l,tooltipProps:r}=y.useTooltipControlled({text:n,isOpen:o,anchor:{x:"element",y:"element"},position:"bottom",offset:{mainAxis:8,crossAxis:0},isDisabled:t,onToggle:({value:e})=>i(e),variant:"tooltip"});return{tooltipContent:l,tooltipProps:!t&&e?r:{"aria-describedby":void 0}}}({isReadonly:b,isDisabled:p,tooltip:D.tooltip}),z=g.getMeterAriaProps(i,0,e,D["aria-label"],D["aria-labelledby"],D.thresholds,p,b,D.tooltip),{"aria-describedby":E,...F}=U,{"aria-describedby":H,...I}=B,K=x.mergeProps(N,F,I),O=[E,H,D["aria-describedby"]].filter(Boolean).join(" "),V=g.getThresholdColorFromValue(i,u,D.thresholds),{isTabbable:$}=f.useTabbableMode(),{classes:L,styles:{baseStyle:X,interactiveStyle:_,itemStyle:k,sizeStyle:q}}=n.useComponentTheme(d.RatingGaugeRedwoodTheme,{size:r});return t.jsxs(s.Fragment,{children:[t.jsx("div",{...T,...z,ref:j,class:o.classNames([L,X,M?_:void 0]),tabIndex:$&&!p?0:-1,...K,"aria-describedby":O,children:[...Array(e)].map(((e,s)=>{const a=Math.min(Math.max(0,i-s),1);return t.jsx("div",{className:o.classNames([q,k]),children:t.jsx(w,{fillRatio:a,isDisabled:p,isReadonly:b,color:V})})}))}),G,A]})}}));
//# sourceMappingURL=RatingGauge-31cb879e.js.map
