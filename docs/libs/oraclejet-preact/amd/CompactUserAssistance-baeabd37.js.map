{"version":3,"file":"CompactUserAssistance-baeabd37.js","sources":["../../src/UNSAFE_UserAssistance/CompactUserAssistance.tsx"],"sourcesContent":["import { RefObject } from 'preact/compat';\n\nimport { ComponentMessageContainer, ComponentMessageItem } from '../UNSAFE_ComponentMessage';\nimport { useFormFieldContext } from '../hooks/UNSAFE_useFormFieldContext';\nimport { Popup } from '../UNSAFE_Popup';\nimport { Coords } from '../UNSAFE_Floating';\nimport { Separator } from '../UNSAFE_Separator';\nimport { usePopupFocusWithin } from './usePopupFocusWithin';\nimport { assistiveStyles, dividerStyle } from './themes/UserAssistanceStyles.css';\nimport { useComponentTheme } from '../hooks/UNSAFE_useComponentTheme';\nimport { UserAssistanceRedwoodTheme } from './themes/redwood/UserAssistanceTheme';\n\ntype Props = {\n  anchorRef: RefObject<HTMLElement | Coords>;\n  assistiveText?: string;\n  fieldLabel?: string;\n  id?: string;\n  messages?: ComponentMessageItem[];\n};\n\nexport function CompactUserAssistance({\n  anchorRef,\n  assistiveText,\n  fieldLabel,\n  id,\n  messages = []\n}: Props) {\n  const { isInputFocused, isReadonly } = useFormFieldContext();\n  const flip = { mainAxis: true, crossAxis: false };\n  const { isFocused: isPopupFocused, popupProps } = usePopupFocusWithin();\n  const isOpen = isInputFocused === true || isPopupFocused === true;\n\n  const { baseTheme } = useComponentTheme(UserAssistanceRedwoodTheme);\n\n  const uaCompactContent =\n    isReadonly !== true && (messages.length > 0 || assistiveText) ? (\n      <Popup\n        {...popupProps}\n        placement=\"end-top-corner\"\n        isOpen={isOpen}\n        anchorRef={anchorRef}\n        flipOptions={flip}\n        tail=\"simple\">\n        <div id={id} class={baseTheme}>\n          {messages.length > 0 && (\n            <ComponentMessageContainer fieldLabel={fieldLabel} messages={messages} />\n          )}\n          {messages.length > 0 && assistiveText && (\n            <span class={dividerStyle}>\n              <Separator />\n            </span>\n          )}\n          {assistiveText && <span class={assistiveStyles}>{assistiveText}</span>}\n        </div>\n      </Popup>\n    ) : null;\n\n  return uaCompactContent;\n}\n"],"names":["anchorRef","assistiveText","fieldLabel","id","messages","isInputFocused","isReadonly","useFormFieldContext","isFocused","isPopupFocused","popupProps","usePopupFocusWithin","isOpen","baseTheme","useComponentTheme","UserAssistanceRedwoodTheme","length","_jsx","Popup","placement","flipOptions","mainAxis","crossAxis","tail","children","_jsxs","class","jsx","ComponentMessageContainer","dividerStyle","Separator","assistiveStyles"],"mappings":"s1CAoBgB,UAAsBA,UACpCA,EAASC,cACTA,EAAaC,WACbA,EAAUC,GACVA,EAAEC,SACFA,EAAW,KAEX,MAAMC,eAAEA,EAAcC,WAAEA,GAAeC,EAAmBA,uBAElDC,UAAWC,EAAcC,WAAEA,GAAeC,EAAmBA,sBAC/DC,GAA4B,IAAnBP,IAA8C,IAAnBI,GAEpCI,UAAEA,GAAcC,EAAiBA,kBAACC,EAA0BA,4BAyBlE,OAtBiB,IAAfT,IAAwBF,EAASY,OAAS,GAAKf,GAC7CgB,EAAAA,IAACC,EAAAA,MAAK,IACAR,EACJS,UAAU,iBACVP,OAAQA,EACRZ,UAAWA,EACXoB,YAbO,CAAEC,UAAU,EAAMC,WAAW,GAcpCC,KAAK,SACLC,SAAAC,EAAAA,KAAA,MAAA,CAAKtB,GAAIA,EAAIuB,MAAOb,EACjBW,SAAA,CAAApB,EAASY,OAAS,GACjBC,EAAAU,IAACC,EAAyBA,0BAAC,CAAA1B,WAAYA,EAAYE,SAAUA,IAE9DA,EAASY,OAAS,GAAKf,GACtBgB,cAAMS,MAAOG,EAAAA,aAAYL,SACvBP,EAACU,IAAAG,EAASA,gBAGb7B,GAAiBgB,EAAAU,IAAA,OAAA,CAAMD,MAAOK,EAAeA,gBAAGP,SAAAvB,SAGnD,IAGR"}