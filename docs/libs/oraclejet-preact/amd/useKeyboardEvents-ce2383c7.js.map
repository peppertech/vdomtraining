{"version":3,"file":"useKeyboardEvents-ce2383c7.js","sources":["../../src/hooks/PRIVATE_useDvtMeterEvents/events.ts","../../src/hooks/PRIVATE_useDvtMeterEvents/useKeyboardEvents.ts"],"sourcesContent":["import type { MutableRef } from 'preact/hooks';\nimport { InputDetail } from '../../utils/UNSAFE_meterUtils';\n\nexport const handleInput = (\n  inputValue: number | undefined,\n  currentInput: MutableRef<number | undefined>,\n  onInput?: (detail: InputDetail) => void\n) => {\n  onInput?.({ value: inputValue } as InputDetail);\n  currentInput.current = inputValue;\n};\n\nexport const cancelEvent = (event: Event) => {\n  event.preventDefault();\n  event.stopPropagation();\n};\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { MutableRef } from 'preact/hooks';\nimport { useUser } from '../UNSAFE_useUser';\nimport { handleInput, cancelEvent } from './events';\nimport { CommitDetail, InputDetail } from '../../utils/UNSAFE_meterUtils';\n\nexport function useKeyboardEvents(\n  value: number,\n  min: number,\n  max: number,\n  step: number,\n  currentInputRef: MutableRef<number | undefined>,\n  onCommit?: (detail: CommitDetail) => void,\n  onInput?: (detail: InputDetail) => void\n) {\n  const { direction } = useUser();\n\n  const isRtl = direction === 'rtl';\n\n  const keyDownHandler = (event: KeyboardEvent) => {\n    const key = event.key;\n\n    switch (key) {\n      case 'Tab':\n        return;\n      case 'ArrowDown':\n        handleInput(Math.max(min, value - step), currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'ArrowUp':\n        handleInput(Math.min(max, value + step), currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'ArrowLeft': {\n        const inputValue = isRtl ? Math.min(max, value + step) : Math.max(min, value - step);\n        handleInput(inputValue, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      }\n      case 'ArrowRight': {\n        const inputValue = isRtl ? Math.max(min, value - step) : Math.min(max, value + step);\n        handleInput(inputValue, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      }\n    }\n  };\n\n  const keyUpHandler = (event: KeyboardEvent) => {\n    const key = event.key;\n\n    switch (key) {\n      case 'Enter':\n        onCommit?.({ value: value } as CommitDetail);\n        cancelEvent(event);\n        break;\n      case 'Tab':\n        handleInput(value, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'Home':\n        handleInput(min, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n      case 'End':\n        handleInput(max, currentInputRef, onInput);\n        cancelEvent(event);\n        break;\n    }\n  };\n\n  return {\n    onKeyUp: keyUpHandler,\n    onKeyDown: keyDownHandler\n  };\n}\n"],"names":["handleInput","inputValue","currentInput","onInput","value","current","cancelEvent","event","preventDefault","stopPropagation","min","max","step","currentInputRef","onCommit","direction","useUser","isRtl","onKeyUp","key","onKeyDown","Math"],"mappings":"oEAGa,MAAAA,EAAc,CACzBC,EACAC,EACAC,KAEAA,IAAU,CAAEC,MAAOH,IACnBC,EAAaG,QAAUJ,CAAU,EAGtBK,EAAeC,IAC1BA,EAAMC,iBACND,EAAME,iBAAiB,sCCDT,SACdL,EACAM,EACAC,EACAC,EACAC,EACAC,EACAX,GAEA,MAAMY,UAAEA,GAAcC,EAAAA,UAEhBC,EAAsB,QAAdF,EAsDd,MAAO,CACLG,QAxBoBX,IAGpB,OAFYA,EAAMY,KAGhB,IAAK,QACHL,IAAW,CAAEV,MAAOA,IACpBE,EAAYC,GACZ,MACF,IAAK,MACHP,EAAYI,EAAOS,EAAiBV,GACpCG,EAAYC,GACZ,MACF,IAAK,OACHP,EAAYU,EAAKG,EAAiBV,GAClCG,EAAYC,GACZ,MACF,IAAK,MACHP,EAAYW,EAAKE,EAAiBV,GAClCG,EAAYC,GAEf,EAKDa,UAtDsBb,IAGtB,OAFYA,EAAMY,KAGhB,IAAK,MACH,OACF,IAAK,YACHnB,EAAYqB,KAAKV,IAAID,EAAKN,EAAQQ,GAAOC,EAAiBV,GAC1DG,EAAYC,GACZ,MACF,IAAK,UACHP,EAAYqB,KAAKX,IAAIC,EAAKP,EAAQQ,GAAOC,EAAiBV,GAC1DG,EAAYC,GACZ,MACF,IAAK,YAAa,CAChB,MAAMN,EAAagB,EAAQI,KAAKX,IAAIC,EAAKP,EAAQQ,GAAQS,KAAKV,IAAID,EAAKN,EAAQQ,GAC/EZ,EAAYC,EAAYY,EAAiBV,GACzCG,EAAYC,GACZ,KACD,CACD,IAAK,aAAc,CACjB,MAAMN,EAAagB,EAAQI,KAAKV,IAAID,EAAKN,EAAQQ,GAAQS,KAAKX,IAAIC,EAAKP,EAAQQ,GAC/EZ,EAAYC,EAAYY,EAAiBV,GACzCG,EAAYC,GACZ,KACD,EACF,EA8BL"}