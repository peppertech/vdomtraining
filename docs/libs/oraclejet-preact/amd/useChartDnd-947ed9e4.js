define(['exports', './eventsUtils-edf8f4e5', './accUtils-530bdb90', './utils-a2a190fa', './pathUtils-ec75f879', './Common/themes/themeContract.css', './utils-5077c092', './layoutUtils-c2938c54', './useDnd-33ec1cdf'], (function(e,t,r,n,o,a,s,l,i){"use strict";const u=(e,t,r,n)=>{for(let o=0;o<e.length;o++)for(let e=0;e<r.length;e++){const r=n&&n(o,e);if(r&&r.id===t)return{seriesIndex:o,groupIndex:e}}return{seriesIndex:0,groupIndex:0}};e.getCmdsForArea=function(e,t,r,n,a){return"straight"===r?function(e,t){let r;return e.length>0&&(r=e.map(((e,t)=>`${0===t?"M":"L"} ${e[0]} ${e[1]}`)).join(" ")+[...t].reverse().map((e=>`L ${e[0]} ${e[1]}`)).join(" ")+"Z"),r}(e,t):function(e,t,r,n,a){let s;return e.length>0&&(s=a?o.curveThroughPoints(e,!1,n)+" "+o.curveThroughPoints([...t].reverse(),!0,n)+" Z":o.curveThroughPoints(e,r,n)+[...t].reverse().map((e=>`L ${e[0]} ${e[1]}`)).join(" ")+"Z"),s}(e,t,!1,n?"mh":"mv",a)},e.getCmdsForLine=function(e,t,r){return"straight"===t?e.join(" "):o.curveThroughPoints(e,!1,r?"mh":"mv")},e.getCumulativeSeries=function(e,t,r,n,o){const a=Array(e).fill(t).map((()=>new Array(t)));for(let s=0;s<t;s+=1){let t;for(let l=0;l<e;l+=1){const e=r(l,s);if(!e||n?.has(e.id)||o&&void 0!==e.value&&e.value<=0)a[l][s]=void 0;else if(l>0&&null!=t){const r=a[l-1][s];a[l][s]=null!=r?r+e.value:t+e.value}else a[l][s]=e.value,t=e.value}}return a},e.getLabelPosition=function(e,t,r,n){return"aboveMarker"===e?r-=15:"belowMarker"===e?r+=15:"afterMarker"===e?t=t+n?.width/2+15:"beforeMarker"===e&&(t=t-n?.width/2-15),{x:t,y:r}},e.getLineAreaSegments=function(e,t,r,n,o,a,s,i,u,c,g,p){const d=[];let f=[];for(let h=n;h<o+1;h+=1){let n,m,v,x,y,D;(p?(n=r[h],v=n?.x,x=n?.y):(n=r[h],m=n),null==n||s&&m<=0&&v<=0&&x<=0)?(d.push(f),f=[]):(p?(y=t.transform(v),D=e.transform(x)):(y=a?e.transform(m):l.getGroupCenterCoord(i[h],h,t,c(u,h),g),D=a?l.getGroupCenterCoord(i[h],h,t,c(u,h),g):e.transform(m)),f.push([y,D]),h===o&&d.push(f))}return d},e.getMarkerFillAndStroke=function(e,t,r,n,o,l,i){let u,c,g;return t?o?e?(u=i||l,g=s.rgb(a.colorSchemeVars.palette.neutral[130]),c=s.rgb(a.colorSchemeVars.palette.neutral[0])):(u=s.rgb(a.colorSchemeVars.palette.neutral[0]),c=r||n?i||l:s.rgb(a.colorSchemeVars.palette.neutral[130])):r||n?(c=i||l,u=s.rgb(a.colorSchemeVars.palette.neutral[0])):e?(u=i||l,c=s.rgb(a.colorSchemeVars.palette.neutral[0])):(u=s.rgba(a.colorSchemeVars.palette.neutral[0],0),c=s.rgba(a.colorSchemeVars.palette.neutral[0],0)):e?(u=i||l,c=s.rgb(a.colorSchemeVars.palette.neutral[0])):(c=n?i||l:s.rgba(a.colorSchemeVars.palette.neutral[0],0),u=s.rgba(a.colorSchemeVars.palette.neutral[0],0)),{fill:u,stroke:c,outerStroke:g}},e.getMarkers=function(){return["square","circle","diamond","plus","triangleDown","triangleUp"]},e.getSeriesData=function(e,t,r,n,o){const a=[];for(let s=0;s<e;s+=1){const e=[];for(let a=0;a<t;a+=1){const t=r(s,a);!t||n?.has(t.id)||o&&void 0!==t.value&&t.value<=0||(e[a]=void 0!==t.value?t.value:{x:t.x,y:t.y})}a.push(e)}return a},e.useChartDnd=({onDragStart:e,onDrag:r,onDragEnd:o,onDragEnter:a,onDragLeave:s,onDragOver:l,onDrop:c,rootRef:g,series:p,selectedIds:d,groups:f,getDataItem:h,groupDraggable:m,itemsDraggable:v,xSpace:x,ySpace:y,plotAreaSpace:D,setDragOver:S,setDatatipDisabled:b,onSelectionChange:w})=>{const I=function(e,t,r,n,o){if(n)for(let e=0;e<t.length;e++)if("on"===n(t[e]))return!0;if(o&&r)for(let n=0;n<t.length;n++)for(let t=0;t<e.length;t++)if(r(t,n)&&"on"===o(r(t,n),t,n))return!0;return!1}(p,f,h,m,v),{dragProps:C,dropProps:V,content:A}=i.useDnd({onDragStart:e,onDrag:r,onDragEnd:o,onDragEnter:a,onDragLeave:s,onDragOver:l,onDrop:c,getDragContext:function(e,r){return function(e,r,n,o,a,s,l,i,c){const g=t.getInfo(n,e),p=g?g.seriesIndex:void 0,d=g?g.groupIndex:void 0;let f;if(void 0!==p&&void 0!==d&&l?.(p,d)){const e=l(p,d);if(c&&"on"==c(e,p,d)){const t=[];if(a.size>1&&a.has(e.id)){const e=a.values();let n=e.next().value;for(;void 0!==n;){const{seriesIndex:o,groupIndex:a}=u(s,n,r,l);t.push({data:l(o,a),seriesIndex:o,groupIndex:a}),n=e.next().value}}else t.push({data:l(p,d),seriesIndex:p,groupIndex:d});f={items:t,type:"items",event:o}}}else void 0!==d&&i&&i(r[d])&&(f={group:r[d],groupIndex:d,type:"xAxisTickLabel",event:o});return f}(e,f,g,r,d,p,h,m,v)},getDropContext:function(e){const t=function(e,t,r,o){const a=o.offsetX,s=o.offsetY;let l;return n.inSpace(a,s,e)?l={type:"xAxis",x:a-e.x,event:o}:n.inSpace(a,s,t)?l={type:"yAxis",y:s-t.y,event:o}:n.inSpace(a,s,r)&&(l={type:"plotArea",x:a-r.x,y:s-r.y,event:o}),l}(x,y,D,e);return t},getDragImage:function(e){return function(e,t,r){const n=[];let o;const a=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","g");let l,i;if("items"===t?.type){const r=t.items;for(let t=0;t<r.length;t++)o=e.current?.querySelector(`[data-oj-series-index="${r[t].seriesIndex}"][data-oj-group-index="${r[t].groupIndex}"]`),o&&n.push(o)}else"xAxisTickLabel"===t?.type&&(o=e.current?.querySelector(`[data-oj-group-index="${t?.groupIndex}"]`),o&&n.push(o));if(n.length>0){let e=1/0,t=1/0,u=-1/0,c=-1/0;for(let r=0;r<n.length;r++){const o=n[r].getBBox();o.x<e&&(e=o.x),o.x+o.width>u&&(u=o.x+o.width),o.y<t&&(t=o.y),o.y+o.height>c&&(c=o.y+o.height)}const g=window.getComputedStyle(n[0].parentElement);for(let e=0;e<n.length;e++){o=n[e];const t=o.cloneNode(!0);s.appendChild(t)}return s.setAttribute("transform",`translate(${-e},${-t})`),s.style.fontSize=g.getPropertyValue("font-size"),s.style.fontFamily=g.getPropertyValue("font-family"),s.style.textAnchor=g.getPropertyValue("text-anchor"),s.style.dominantBaseline=g.getPropertyValue("dominant-baseline"),l=u-e,i=c-t,a.appendChild(s),{image:a,offSetX:r.offsetX-e,offSetY:r.offsetY-t,width:l,height:i}}return null}(g,e.context,e.event)},onPreDndStart:function(e){if("items"===e?.type){const t=e.items,r=t.map((e=>e.data.id)),n=t.map((e=>e.data));w?.({ids:[...r],data:[...n]})}},setDatatipDisabled:b,showRejectedDropEffect:function(e){S({accepted:!1,type:e.type})},showDropEffect:function(e){S({accepted:!0,type:e.type})},clearDropEffect:function(){S({accepted:void 0,type:""})}});return{draggable:I,dndProps:I?{...C,...V}:V,dndContent:A}}}));
//# sourceMappingURL=useChartDnd-947ed9e4.js.map
