define(['exports', './eventsUtils-5d567a9d', './accUtils-1557920a', 'preact/hooks', './usePinch-4ec01706', './mergeProps-bcfa6a92'], (function(t,e,n,i,o,x){"use strict";function r(t,e,n,i,o,x,r,M,s,c,p,w){const{viewportMin:y,viewportMax:v}=t,{min:f,max:u}=e,{viewportMin:h,viewportMax:l}=n,{min:m,max:E}=i,g=function(t,e,n,i,o,x){const r={};x?(r.xMin=n,r.xMax=i,r.yMin=o?e:t,r.yMax=o?t:e):(r.xMin=o?e:t,r.xMax=o?t:e,r.yMin=i,r.yMax=n);return r}(r,M,s,c,p,w);return{xExtents:a(y,v,f,u,o,g.xMin,g.xMax),yExtents:a(h,l,m,E,x,g.yMin,g.yMax)}}function a(t,e,n,i,o,x,r){const a=o.invert(x)-o.invert(0),M=o.invert(r)-o.invert(0);let s=1;return x!=r&&e+M-(t+a)<1&&(s=(e-t-1)/(a-M)),(e+=M*s)-(t+=a*s)>=i-n?(t=n,e=i):t<n?(e+=n-t,t=n):e>i&&(t-=e-i,e=i),{viewportMin:t,viewportMax:e}}function M(t,e,n,i,o,x,r){const a=r?n.width-t:t-n.x,M=e-n.y,s=i.viewportMax-i.viewportMin,c=(x?M:a)*((o.max-o.min)/(x?n.height:n.width));let p=c-s/2,w=c+s/2;return p<o.min&&(p=o.min,w=p+s),w>o.max&&(p=o.max-s,w=o.max),{xMin:p,xMax:w}}t.useChartViewport=function({plotAreaSpace:t,xViewportExtent:n,xAxisExtent:a,yAxisExtent:s,yViewportExtent:c,yScale:p,xScale:w,onViewportChange:y,isHoriz:v,zoomAndScroll:f,isRtl:u,rootRef:h}){const l=i.useRef(!1),m=(e,i)=>{const o=e*(i.x-t.x),x=-e*(t.x+t.width-i.x),M=e*(i.y-t.y),f=-e*(t.y+t.height-i.y),h=r(n,a,c,s,w,p,o,x,M,f,u,v);y?.({xMin:h.xExtents.viewportMin,yMin:h.yExtents.viewportMin,xMax:h.xExtents.viewportMax,yMax:h.yExtents.viewportMax})},E=o.usePinch({captureTargetRef:h,onPinchZoomChange:({delta:t,origin:e})=>{m(-1*(v?1:-1)*t*.05,e)}});return E.onPointerOut=void 0,y&&"live"===f?x.mergeProps({onWheel:t=>{const e=(v?1:-1)*t.deltaY*.05;m(e,{x:t.offsetX,y:t.offsetY}),t.preventDefault()},onKeyDown:e=>{const i=e.key,o="+"===i||"="===i;if(!o&&!("-"===i||"_"===i))return;const x=(1/(o?1.5:1/1.5)-1)/2,M=-1*x*t.width,f=x*t.width,h=-1*x*t.height,l=x*t.height,m=r(n,a,c,s,w,p,M,f,h,l,u,v);y?.({xMin:m.xExtents.viewportMin,yMin:m.yExtents.viewportMin,xMax:m.xExtents.viewportMax,yMax:m.yExtents.viewportMax})},onPointerMove:i=>{if(!l.current)return;const o=e.getElementData(h,i.target);if(o&&"scrollBar"===o.ojObject){const{xMin:e,xMax:o}=M(i.offsetX,i.offsetY,t,n,a,v,u);y?.({xMin:e,yMin:c.viewportMin,xMax:o,yMax:c.viewportMax})}},onPointerDown:i=>{const o=e.getElementData(h,i.target);if(o&&"scrollBar"===o.ojObject){l.current=!0,i.target.setPointerCapture(i.pointerId);const{xMin:e,xMax:o}=M(i.offsetX,i.offsetY,t,n,a,v,u);y?.({xMin:e,yMin:c.viewportMin,xMax:o,yMax:c.viewportMax})}},onPointerUp:()=>{l.current=!1}},E):{}}}));
//# sourceMappingURL=useChartViewport-ca564baa.js.map
