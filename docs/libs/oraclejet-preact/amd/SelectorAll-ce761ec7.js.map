{"version":3,"file":"SelectorAll-ce761ec7.js","sources":["../../src/UNSAFE_SelectorAll/SelectorAll.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\nimport { useRef } from 'preact/hooks';\nimport { SelectionDetail } from '../UNSAFE_Collection';\nimport { Flex } from '../UNSAFE_Flex';\nimport { usePress } from '../hooks/UNSAFE_usePress';\nimport { styles } from '../UNSAFE_Selector/themes/SelectorStyles.css';\nimport { StyledCheckbox } from '../PRIVATE_StyledCheckbox';\nimport { mergeProps } from '../utils/UNSAFE_mergeProps';\nimport { useActive } from '../hooks/UNSAFE_useActive';\nimport { useFocus } from '../hooks/UNSAFE_useFocus';\nimport { useTestId, TestIdProps } from '../hooks/UNSAFE_useTestId';\n\n/**\n * Props for the SelectorAll Component\n */\nexport type Props<K> = {\n  /**\n   * The selected state of the select all selector\n   */\n  selected: 'none' | 'all' | 'partial' | 'partial-all';\n  /**\n   * Callback function to invoke when the selected keys has changed when\n   * the checkbox is toggled.\n   */\n  onChange?: (detail: SelectionDetail<K>) => void;\n  /**\n   * aria-label for this selectorAll\n   */\n  'aria-label'?: string;\n  /**\n   * One or more ids (separated by spaces) of elements that label the selected item. This will be used for the aria-labelledby of the DOM element.\n   */\n  'aria-labelledby'?: string;\n};\n\n/**\n * The SelectorAll component renders checkboxes for select all case.\n */\nexport function SelectorAll<K>({\n  'aria-label': ariaLabel,\n  'aria-labelledby': ariaLabelledby,\n  selected,\n  onChange,\n  testId\n}: Props<K> & TestIdProps) {\n  const pressHandler = (event: Event) => {\n    if (selected == 'none' || selected == 'partial') {\n      onChange?.({ value: { all: true, deletedKeys: new Set() }, target: event.target });\n    } else {\n      onChange?.({ value: { all: false, keys: new Set() }, target: event.target });\n    }\n  };\n\n  const inputRef = useRef<HTMLInputElement>(null);\n  const { isActive, activeProps } = useActive();\n  const { isFocus, focusProps } = useFocus();\n  const { pressProps } = usePress(pressHandler);\n  const isChecked =\n    selected === 'partial' || selected === 'partial-all'\n      ? 'partial'\n      : selected === 'all'\n      ? 'checked'\n      : 'unchecked';\n  const testIdProps = useTestId(testId);\n\n  const onClick = () => {\n    // ensure the checkbox is focused after click\n    inputRef.current?.focus();\n  };\n\n  return (\n    <div class={styles.container} {...mergeProps({ onClick }, pressProps)} {...testIdProps}>\n      <div class={styles.base} {...activeProps}>\n        <Flex align=\"center\" justify=\"center\" width=\"11x\" height=\"11x\">\n          <StyledCheckbox\n            ref={inputRef}\n            isChecked={isChecked}\n            isActive={isActive}\n            isFocusRingShown={isFocus}\n            aria-label={ariaLabel}\n            aria-labelledby={ariaLabelledby}\n            onKeyDown={handleKeyboardEvent}\n            onKeyUp={handleKeyboardEvent}\n            {...focusProps}\n          />\n        </Flex>\n      </div>\n    </div>\n  );\n}\n\nconst handleKeyboardEvent = (event: KeyboardEvent) => {\n  if (event.key == 'Enter') {\n    // prevent active styles applied to checkbox\n    event.stopPropagation();\n  }\n};\n"],"names":["handleKeyboardEvent","event","key","stopPropagation","ariaLabel","ariaLabelledby","selected","onChange","testId","inputRef","useRef","isActive","activeProps","useActive","isFocus","focusProps","useFocus","pressProps","usePress","value","all","deletedKeys","Set","target","keys","isChecked","testIdProps","useTestId","_jsx","jsx","class","styles","container","mergeProps","onClick","current","focus","children","base","Flex","align","justify","width","height","StyledCheckbox","ref","isFocusRingShown","onKeyDown","onKeyUp"],"mappings":"mTAiGA,MAAMA,EAAuBC,IACV,SAAbA,EAAMC,KAERD,EAAME,iBACP,0BAxDD,aAAcC,EACd,kBAAmBC,EAAcC,SACjCA,EAAQC,SACRA,EAAQC,OACRA,IAEA,MAQMC,EAAWC,SAAyB,OACpCC,SAAEA,EAAQC,YAAEA,GAAgBC,EAASA,aACrCC,QAAEA,EAAOC,WAAEA,GAAeC,EAAQA,YAClCC,WAAEA,GAAeC,EAAQA,UAXTjB,IAElBM,IADc,QAAZD,GAAkC,WAAZA,EACb,CAAEa,MAAO,CAAEC,KAAK,EAAMC,YAAa,IAAIC,KAASC,OAAQtB,EAAMsB,QAE9D,CAAEJ,MAAO,CAAEC,KAAK,EAAOI,KAAM,IAAIF,KAASC,OAAQtB,EAAMsB,QACpE,IAOGE,EACS,YAAbnB,GAAuC,gBAAbA,EACtB,UACa,QAAbA,EACA,UACA,YACAoB,EAAcC,YAAUnB,GAO9B,OACEoB,EAAKC,IAAA,MAAA,CAAAC,MAAOC,EAAMA,OAACC,aAAeC,EAAUA,WAAC,CAAEC,QANjC,KAEdzB,EAAS0B,SAASC,OAAO,GAIiCnB,MAAiBS,EACzEW,SAAAT,MAAA,MAAA,CAAKE,MAAOC,SAAOO,QAAU1B,EAAWyB,SACtCT,EAAAA,IAACW,EAAAA,KAAI,CAACC,MAAM,SAASC,QAAQ,SAASC,MAAM,MAAMC,OAAO,MAAKN,SAC5DT,MAACgB,EAAcA,eAAA,CACbC,IAAKpC,EACLgB,UAAWA,EACXd,SAAUA,EACVmC,iBAAkBhC,EAAO,aACbV,EACK,kBAAAC,EACjB0C,UAAW/C,EACXgD,QAAShD,KACLe,SAMhB"}