define(['exports', 'preact/jsx-runtime', 'preact/hooks', './useVisEvents-954dcd88', './mergeProps-bcfa6a92', './layoutUtils-3c2d340e', './useLegendContextMenu-09c7a5a9', './useItemFocus-75d6510d', './Flex-56ecdf4c', './UNSAFE_Legend/themes/LegendStyles.css', './useCssVars-c043f8da', './classNames-08d99695', './useTestId-3a316499', './useVisTouchResponse-36416652', './stringUtils-0ae982c2'], (function(e,t,n,o,i,s,d,r,a,c,l,m,I,u,f){"use strict";function g(e,t){const{sectionIdx:n,itemIdx:o}=e;if(-1==n&&-1==o){const e=t[t.length-1].items.length;return t[t.length-1].items[e-1]}return t[n].items[o]}function x(e,t){let{itemIdx:n,sectionIdx:o}=e;if(-1==o&&-1==n)return{itemIdx:t[t.length-1].items.length-1,sectionIdx:t.length-1};n+=1;n>=t[o].items.length&&(o===t.length-1?n=e.itemIdx:(o+=1,n=0));const i=t[o].items[n];return"off"!==i?.actionable?{itemIdx:n,sectionIdx:o}:x({itemIdx:n,sectionIdx:o},t)}function h(e,t){let{itemIdx:n,sectionIdx:o}=e;-1==o&&-1==n&&(n=t[t.length-1].items.length-1,o=t.length-1),n-=1,n<0&&(0===o?n=0:(n=t[o-1].items.length-1,o-=1));const i=t[o].items[n];return"off"!==i?.actionable?{itemIdx:n,sectionIdx:o}:h({itemIdx:n,sectionIdx:o},t)}function p(e){return{getItem:t=>g(t,e),getDetailFromInfo:t=>{if(!t)return{itemId:void 0,sectionId:void 0,data:void 0};const n=g(t,e),o=e[t.sectionIdx].id;return{itemId:n.id,sectionId:o,data:e[t.sectionIdx].items[t.itemIdx]}},getPrevItemInfo:t=>h(t,e),getNextItemInfo:t=>x(t,e)}}e.SectionalLegend=function({orientation:e="horizontal",sectionTitleHAlign:g="start",sections:x,isReadOnly:h=!0,onItemAction:y,onItemHover:v,onItemFocus:F,testId:S,contextMenuConfig:R,hideAndShowBehavior:b="off",hoverBehavior:C="none",...L}){const T=I.useTestId(S),P=n.useRef(null),W=n.useRef(),{resolvedVars:w,cssContent:D}=l.useCssVars(d.legendVars),{getItem:M,getDetailFromInfo:V,getPrevItemInfo:j,getNextItemInfo:A}=p(x),B=d.getLegendTextStyle({fontStyle:L.textFontStyle,fontSize:L.textFontSize?.toString(),fontWeight:L.textFontWeight?.toString(),fontFamily:L.textFontFamily},w),z=d.getIsLegendItemActionable(x,h,!0),{textMeasureContent:N,layoutInfo:E}=d.useLegendLayout({rootRef:P,rootDimsRef:W,resolvedVars:w,sections:x,orientation:e,legendFontStylesObj:B,symbolWidth:L.symbolWidth}),{touchResponse:O,touchResponseStyle:U}=u.useVisTouchResponse({type:"touchStart"}),{focusedItemInfo:H,hoveredItemInfo:k,onContextMenuDismissed:q,activeId:G,eventsProps:K}=o.useVisEvent(O,!h,z,d.getKeyUpHandler,V,j,A,y,v,F,d.isEqualItem,d.getItemInfo,{itemIdx:0,sectionIdx:0}),{focusedItemRef:_}=r.useItemFocus(H),J=d.getDatatipText(x,M,H,k),{datatipContent:Q,datatipProps:{"aria-describedby":X,...Y}}=d.useLegendDatatip({text:J,rootDimsRef:W,focusedItemInfo:H,focusedItemRef:_,touchResponse:O}),Z=d.getAriaProps(h,L["aria-label"],L.hiddenIds,f.merge([L["aria-describedby"],X]),L["aria-labelledby"]),{contextMenuContent:$,contextMenuProps:ee}=d.useLegendContextMenu({rootRef:P,contextMenuConfig:R,focusedItemInfo:H,sections:x,isReadOnly:h,onContextMenuDismissed:q}),te=i.mergeProps(K,Y,ee),ne={fontFamily:L.sectionTitleFontFamily,fontSize:L.sectionTitleFontSize,color:L.sectionTitleColor,fontStyle:L.sectionTitleFontStyle,fontWeight:L.sectionTitleFontWeight,textDecoration:L.sectionTitleTextDecoration},{sectionalLegendBaseStyles:oe,renderedLegendStyle:ie,preRenderedLegendStyle:se}=c.styles,de="horizontal"===e,re="vertical"===e||!!E;return t.jsxs("div",{ref:P,tabIndex:h?void 0:0,role:"application",class:m.classNames([oe,re?ie:se]),style:U,...T,...Z,...te,"aria-activedescendant":G,children:[re?t.jsx(a.Flex,{direction:de?"row":"column",wrap:"wrap",gap:"4x",children:x.map(((n,o)=>{const i=h?"":s.getRandomId(),r=!!E&&E.isWrapped,c=!de||r?"column":"row",l=!de||r?"start":"center",{itemsPerCol:m,itemsPerRow:I}=d.getGridNums(n.items.length,E);return t.jsxs(a.Flex,{align:l,direction:c,maxWidth:"100%",justify:"start",wrap:"wrap",children:[t.jsx(d.LegendText,{text:n.title,...ne,type:"title",id:i,align:g}),t.jsx(d.BaseLegend,{...L,focusedItemRef:_,labelledBy:i,sectionIdx:o,items:n.items,orientation:e,itemsPerRow:I,itemsPerCol:m,itemWidth:E?.isWrapped?E?.maxItemWidth:void 0,isReadOnly:h,focusedItemInfo:H,hoveredItemInfo:k,activeId:G,hideAndShowBehavior:b,hoverBehavior:C})]})}))}):null,Q,N,D,$]})}}));
//# sourceMappingURL=SectionalLegend-5d4afed4.js.map
