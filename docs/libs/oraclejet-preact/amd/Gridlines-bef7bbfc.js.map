{"version":3,"file":"Gridlines-bef7bbfc.js","sources":["../../src/PRIVATE_PlotArea/utils.ts","../../src/PRIVATE_PlotArea/Gridlines.tsx","../../src/PRIVATE_PlotArea/PlotArea.tsx"],"sourcesContent":["import { ColorProps } from '../utils/UNSAFE_interpolations/colors';\nimport { Dimension } from '../utils/UNSAFE_visTypes/common';\n\nexport function getXAxisLineProps(\n  availSpace: Dimension,\n  axisPosition: 'left' | 'right' | 'top' | 'bottom',\n  axisLine?: {\n    lineColor?: ColorProps['color'];\n    lineWidth?: number;\n    isRendered: boolean;\n  }\n) {\n  return {\n    x1: axisPosition === 'right' ? availSpace.x + availSpace.width : availSpace.x,\n    x2: axisPosition === 'left' ? availSpace.x : availSpace.x + availSpace.width,\n    y1: axisPosition === 'bottom' ? availSpace.y + availSpace.height : availSpace.y,\n    y2: axisPosition === 'top' ? availSpace.y : availSpace.y + availSpace.height,\n    stroke: axisLine?.lineColor,\n    strokeWidth: axisLine?.lineWidth\n  };\n}\n\nexport function getYAxisLineProps(\n  availSpace: Dimension,\n  isRtl?: boolean,\n  axisLine?: {\n    lineColor?: ColorProps['color'];\n    lineWidth?: number;\n    isRendered: boolean;\n  }\n) {\n  return {\n    x1: isRtl ? availSpace.x + availSpace.width : availSpace.x,\n    x2: isRtl ? availSpace.x + availSpace.width : availSpace.x,\n    y1: availSpace.y,\n    y2: availSpace.y + availSpace.height,\n    stroke: axisLine?.lineColor,\n    strokeWidth: axisLine?.lineWidth\n  };\n}\n\nexport function getBaseLineProps(\n  availSpace: Dimension,\n  coord: number,\n  axisPosition: 'left' | 'right' | 'top' | 'bottom'\n) {\n  let x1, x2, y1, y2: number;\n  if (axisPosition === 'bottom') {\n    x1 = availSpace.x;\n    x2 = availSpace.x + availSpace.width;\n    y1 = coord;\n    y2 = coord;\n  } else {\n    x1 = coord;\n    x2 = coord;\n    y1 = availSpace.y;\n    y2 = availSpace.y + availSpace.height;\n  }\n\n  return { x1, x2, y1, y2 };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { styles } from './themes/PlotAreaStyles.css';\nimport { classNames } from '../utils/UNSAFE_classNames';\nimport { ChartPlotArea, Scale } from '../utils/UNSAFE_visTypes/chart';\nimport { useColorScheme } from '../hooks/UNSAFE_useColorScheme';\n\ntype Props = {\n  xScale: Scale;\n  yScale: Scale;\n  isLog: boolean;\n  yTicks: number[];\n  xTicks?: number[];\n  yMinorTicks: number[];\n  xMinorTicks?: number[];\n  plotArea?: ChartPlotArea;\n  yAxisPosition: 'left' | 'right' | 'top' | 'bottom';\n  isDataXAxis?: boolean;\n};\n\nconst TICK_DEFAULT = {\n  yMajorTick: {\n    isRendered: true\n  },\n  yMinorTick: {\n    isRendered: false\n  },\n  xMajorTick: {\n    isRendered: false\n  },\n  xMinorTick: {\n    isRendered: false\n  }\n};\n\nexport function Gridlines({\n  plotArea = TICK_DEFAULT,\n  yMinorTicks,\n  xMinorTicks,\n  xScale,\n  yScale,\n  isLog,\n  yTicks,\n  xTicks,\n  yAxisPosition,\n  isDataXAxis\n}: Props) {\n  const isHoriz = yAxisPosition === 'top' || yAxisPosition === 'bottom';\n  const [x1, x2] = xScale.range();\n  const [y1, y2] = yScale.range();\n\n  let yLinesPath = '';\n  let xLinesPath = '';\n  let yMinorPath = '';\n  let xMinorPath = '';\n  const {\n    yMajorTick: _yMajorTick,\n    yMinorTick: _yMinorTick,\n    xMajorTick: _xMajorTick,\n    xMinorTick: _xMinorTick\n  } = plotArea;\n  const yMajorTick = { ...TICK_DEFAULT.yMajorTick, ..._yMajorTick };\n  const yMinorTick = { ...TICK_DEFAULT.yMinorTick, ..._yMinorTick };\n  const xMinorTick = { ...TICK_DEFAULT.xMinorTick, ..._xMinorTick };\n  const xMajorTick = { ...TICK_DEFAULT.xMajorTick, ..._xMajorTick };\n  const isYMinorRendered = yMinorTick?.isRendered === true || isLog;\n  const isXMajorRendered =\n    xMajorTick?.isRendered === true || (_xMajorTick?.isRendered === false && isDataXAxis);\n\n  if (yMajorTick?.isRendered) {\n    for (let i = 1; i < yTicks.length; i++) {\n      let y = yScale.transform(yTicks[i]);\n      // last grid line get's clipped due to plot area clippath. Slightly adjust\n      // coord so that it's not clipped.\n      if (i === yTicks.length - 1) {\n        y += isHoriz ? -1 : 1;\n      }\n      yLinesPath += isHoriz ? `M${y},${x1}L${y},${x2}` : `M${x1},${y}L${x2},${y}`;\n    }\n  }\n\n  if (isXMajorRendered) {\n    if (xTicks) {\n      for (let i = 1; i < xTicks.length; i++) {\n        const x = xScale.transform(xTicks[i]);\n        xLinesPath += isHoriz ? `M${y1},${x}L${y2},${x}` : `M${x},${y1}L${x},${y2}`;\n      }\n    }\n  }\n\n  if (isYMinorRendered) {\n    for (let i = 0; i < yMinorTicks.length; i++) {\n      const y = yScale.transform(yMinorTicks[i]);\n      yMinorPath += isHoriz ? `M${y},${x1}L${y},${x2}` : `M${x1},${y}L${x2},${y}`;\n    }\n  }\n\n  if (xMinorTick.isRendered && xMinorTicks) {\n    for (let i = 0; i < xMinorTicks.length; i++) {\n      const x = xScale.transform(xMinorTicks[i]);\n      xMinorPath += isHoriz ? `M${y1},${x}L${y2},${x}` : `M${x},${y1}L${x},${y2}`;\n    }\n  }\n\n  const colorScheme = useColorScheme();\n\n  return (\n    <>\n      {yMajorTick?.isRendered && (\n        <path\n          d={yLinesPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.majorTickLineStyles,\n            yMajorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            yMajorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: yMajorTick.lineColor,\n            strokeWidth: yMajorTick.lineWidth\n          }}\n        />\n      )}\n      {isXMajorRendered && (\n        <path\n          d={xLinesPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.majorTickLineStyles,\n            xMajorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            xMajorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: xMajorTick.lineColor,\n            strokeWidth: xMajorTick.lineWidth\n          }}\n        />\n      )}\n      {isYMinorRendered && (\n        <path\n          d={yMinorPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.minorTickLineStyles,\n            colorScheme === 'light'\n              ? styles.lightMinorTickLineStroke\n              : styles.darkMinorTickLineStroke,\n            yMinorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            yMinorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: yMinorTick?.lineColor,\n            strokeWidth: yMinorTick?.lineWidth\n          }}\n        />\n      )}\n      {xMinorTick.isRendered && (\n        <path\n          d={xMinorPath}\n          class={classNames([\n            styles.noPointerEvents,\n            styles.minorTickLineStyles,\n            colorScheme === 'light'\n              ? styles.lightMinorTickLineStroke\n              : styles.darkMinorTickLineStroke,\n            xMinorTick?.lineStyle === 'dashed' ? styles.dashedLine : undefined,\n            xMinorTick?.lineStyle === 'dotted' ? styles.dottedLine : undefined\n          ])}\n          style={{\n            stroke: xMinorTick?.lineColor,\n            strokeWidth: xMinorTick?.lineWidth\n          }}\n        />\n      )}\n    </>\n  );\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { styles } from './themes/PlotAreaStyles.css';\nimport { Dimension } from '../utils/UNSAFE_visTypes/common';\nimport { getXAxisLineProps, getBaseLineProps, getYAxisLineProps } from './utils';\nimport { Scale } from '../utils/UNSAFE_visTypes/chart';\nimport { ColorProps } from '../utils/UNSAFE_interpolations/colors';\nimport { styles as VisStyles } from '#hooks/PRIVATE_useVisDnd/themes/VisDndStyles.css';\nimport { classNames } from '#utils/UNSAFE_classNames';\n\ntype Props = {\n  yScale: Scale;\n  isLog: boolean;\n  color?: ColorProps['color'];\n  availSpace: Dimension;\n  xAxisPosition: 'left' | 'right' | 'top' | 'bottom';\n  cursor?: string;\n  dragOverStyle: 'accept' | 'reject' | 'none';\n  isDataXAxis?: boolean;\n  isRtl?: boolean;\n  hasAxisLine: boolean;\n};\n\nexport function PlotArea({\n  color,\n  yScale,\n  isLog,\n  availSpace,\n  xAxisPosition,\n  cursor,\n  isDataXAxis,\n  isRtl,\n  hasAxisLine,\n  dragOverStyle\n}: Props) {\n  const hasBaseLine = !isLog && yScale.domain()[0] < 0 && yScale.domain()[1] > 0;\n  const xAxisLineProps = getXAxisLineProps(availSpace, xAxisPosition);\n  const baseLineProps = getBaseLineProps(availSpace, yScale.transform(0), xAxisPosition);\n  const dragClass = [];\n  switch (dragOverStyle) {\n    case 'accept':\n      dragClass.push(VisStyles.dndDragOverSvgStyle);\n      break;\n    case 'reject':\n      dragClass.push(VisStyles.dndRejectedStyle);\n      dragClass.push(styles.plotAreaStyle);\n      break;\n    case 'none':\n      dragClass.push(styles.plotAreaStyle);\n      break;\n  }\n\n  return (\n    <>\n      <rect\n        {...availSpace}\n        class={classNames(dragClass)}\n        style={{ fill: dragOverStyle === 'accept' ? undefined : color, cursor }}></rect>\n      {isDataXAxis && (\n        <line {...getYAxisLineProps(availSpace, isRtl)} class={styles.axisLineStyle} />\n      )}\n      {hasAxisLine && <line {...xAxisLineProps} class={styles.axisLineStyle} />}\n      {hasBaseLine && <line {...baseLineProps} class={styles.baseLineStyle} />}\n    </>\n  );\n}\n"],"names":["getYAxisLineProps","availSpace","isRtl","axisLine","x1","x","width","x2","y1","y","y2","height","stroke","lineColor","strokeWidth","lineWidth","TICK_DEFAULT","yMajorTick","isRendered","yMinorTick","xMajorTick","xMinorTick","plotArea","yMinorTicks","xMinorTicks","xScale","yScale","isLog","yTicks","xTicks","yAxisPosition","isDataXAxis","isHoriz","range","yLinesPath","xLinesPath","yMinorPath","xMinorPath","_yMajorTick","_yMinorTick","_xMajorTick","_xMinorTick","isYMinorRendered","isXMajorRendered","i","length","transform","colorScheme","useColorScheme","_jsxs","jsxs","_Fragment","Fragment","children","_jsx","jsx","d","class","classNames","styles","noPointerEvents","majorTickLineStyles","lineStyle","dashedLine","undefined","dottedLine","style","minorTickLineStyles","lightMinorTickLineStroke","darkMinorTickLineStroke","color","xAxisPosition","cursor","hasAxisLine","dragOverStyle","hasBaseLine","domain","xAxisLineProps","axisPosition","getXAxisLineProps","baseLineProps","coord","getBaseLineProps","dragClass","push","VisStyles","dndDragOverSvgStyle","dndRejectedStyle","plotAreaStyle","fill","axisLineStyle","baseLineStyle"],"mappings":"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"}