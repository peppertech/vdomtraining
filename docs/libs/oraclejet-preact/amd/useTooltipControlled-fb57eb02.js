define(['exports', 'preact/jsx-runtime', 'preact/hooks', './useId-c9578d26', './useHover-7964884c', './useFocus-4194fc59', './useTouch-37489bb5', './mergeProps-bcfa6a92', './useAnimation-5bd3adfc', './useComponentTheme-5aa41a8f', './useTestId-3a316499', './useThemeInterpolations-b1d98ea4', './classNames-08d99695', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentTheme', './useColorScheme-10dc88de', './tooltipUtils-3b34c2bc'], (function(e,t,n,o,u,r,s,i,c,a,l,d,m,p,f,g){"use strict";const h=({children:e,id:o,isOpen:u,isDatatip:r,onTransitionEnd:s,testId:i,...f})=>{const g=n.useRef(null),h=n.useRef(null),b=l.useTestId(i),{baseTheme:T,variantClasses:v,styles:P}=a.useComponentTheme(p.TooltipContentRedwoodTheme,{variant:r?"datatip":"tooltip"}),E=d.useThemeInterpolations(),{nodeRef:x}=c.useAnimation(u?"mounted":"unmounted",{animationStates:{mounted:e=>{const t=e.firstChild;return{from:{maxHeight:"0",opacity:"0%"},to:{maxHeight:`${t?.offsetHeight}px`,opacity:r?"100%":"95%"},options:{duration:r?1:100,easing:[0,0,.2,1]}}},unmounted:e=>({from:{opacity:r?"100%":"95%"},to:{maxHeight:"0",opacity:"0%"},options:{duration:r?1:100,easing:[0,0,.2,1]}})},isAnimatedOnMount:!0,onAnimationEnd:()=>s?.()});return n.useEffect((()=>{g.current&&h.current?.offsetHeight&&(g.current.style.height=`${h.current?.offsetHeight}px`)}),[]),t.jsx("div",{ref:g,id:o,role:"tooltip",class:m.classNames([P.wrapper,E,T]),...b,children:t.jsx("div",{ref:x,class:P.inner,...f,children:t.jsx("div",{ref:h,class:m.classNames([v,P.content]),children:e})})})};e.TooltipContent=h,e.useTooltipControlled=({text:e,isOpen:c=!1,variant:a="tooltip",position:l="bottom",focusStrategy:d="browser",isDisabled:m=!1,anchor:p={x:"element",y:"element"},offset:b,onToggle:T,testId:v})=>{const P=g.getGlobalTooltipManager(),E=m||!e,x=n.useRef(!0),[y,C]=n.useState(!E&&c?"mounting":"unmounted"),R=n.useRef(y),k=e=>{R.current=e,C(e)},[H,A]=n.useState(!1);A(!1);const I="datatip"===a,[S,w]=n.useState(!1),D="logical"===d,L=n.useRef(!0),{hoverProps:O,isHover:B}=u.useHover({}),{touchProps:F,isTouch:M}=s.useTouch({isDisabled:m}),{focusProps:_,isFocus:j}=r.useFocus({isDisabled:D}),{hoverProps:N,isHover:G}=u.useHover({isDisabled:m}),U="pointer"===p.x||"pointer"===p.y,K=n.useRef(o.useId()),W=n.useRef(null),Y=n.useRef({x:-9999,y:-9999}),$=U&&!j?Y:W,X=I?0:g.SHOW_TOOLTIP_DELAY,q=n.useRef(null),z=f.useColorScheme(),J=n.useRef(!1),Q=n.useRef(!1),V=()=>{q.current&&(clearTimeout(q.current),q.current=null)};n.useEffect((()=>{J.current=D?S:j&&P.isTabKeyActive(),J.current&&(Q.current=!1)}),[j,S,D,P]),n.useEffect((()=>{Q.current=B,Q.current&&(J.current=!1)}),[B]),n.useEffect((()=>{L.current?L.current=!1:U&&B&&"unmounted"===y||(e=>{if(e)switch(y){case"unmounted":k("mountPending");break;case"unmounting":k("mounting"),T?.({value:!0});break;case"unmountPending":V(),k("mounted")}else switch(y){case"mounting":case"mounted":k("unmountPending");break;case"mountPending":V(),ce(),k("unmounted")}})(B&&Q.current||(j||S)&&J.current||G||M)}),[B,j,S,G,M,U,y,T]);const Z=n.useCallback((()=>{J.current=!1,Q.current=!1,T?.({value:!1})}),[]);n.useEffect((()=>{x.current?x.current=!1:k(c?"mounting":"unmounting")}),[c]),n.useEffect((()=>()=>{V(),J.current=!1,Q.current=!1}),[]),n.useEffect((()=>{"mounted"===y?P.register(Z):"unmounted"===y&&P.unregister(Z)}),[y,Z,P]),n.useEffect((()=>(q.current||"mountPending"!==y&&"unmountPending"!==y||(q.current=setTimeout((()=>{V(),"mountPending"!==y&&"unmountPending"!==y||y!==R.current||T?.({value:"mountPending"===y})}),X)),()=>{V()})),[y,X,T]);const ee=e=>{w(!0),W.current=e,$.current=e},te=()=>{w(!1)},ne=n.useCallback((e=>{(e.eventPhase===Event.AT_TARGET||e.eventPhase===Event.BUBBLING_PHASE&&I)&&(W.current=e.target)}),[I]),oe=n.useCallback((e=>{e.eventPhase===Event.AT_TARGET&&(J.current=!1)}),[]),ue=D?{}:{onFocus:ne,onBlur:oe},re={onMouseEnter:n.useCallback((e=>{W.current=e.target}),[])},se={onKeyDown:n.useCallback((e=>{"Escape"===e.code&&J.current&&(e.preventDefault(),J.current=!1,T?.({value:!1}))}),[T])};let ie;const ce=()=>{Y.current={x:-9999,y:-9999}};if(E)ie=i.mergeProps(O,_,re,ue);else{const e={"aria-describedby":K.current,...U&&{onMouseLeave:()=>{"mounting"!==y&&V()},onMouseMove:e=>{(e=>{if("unmounted"!==y&&("datatip"!==a||"mounted"!==y))return;const t=W?.current?.getBoundingClientRect(),n=document.body.scrollLeft+(t?.left||0)+(t?.width||0),o=document.body.scrollTop+(t?.top||0)+(t?.height||0),u="pointer"===p.x?e.clientX:n,r="pointer"===p.y?e.clientY:o;"mounted"===y?(Y.current={x:u,y:r},!0!==H&&A(!0)):"unmounted"===y&&(V(),q.current=setTimeout((()=>{"unmounted"===y&&(Y.current={x:u,y:r},T?.({value:!0}))}),X))})(e)}}};ie=i.mergeProps(O,_,F,re,ue,e,se,D?{onLogicalFocus:ee,onLogicalBlur:te}:{})}if(E)return V(),ce(),{tooltipContent:null,tooltipProps:ie};const ae=(e=>{let t="bottom";switch(e){case"top":case"end":case"bottom":case"start":t=e;break;case"top-end":t="top-end-corner";break;case"bottom-end":t="bottom-end-corner";break;case"bottom-start":t="bottom-start-corner";break;case"top-start":t="top-start-corner"}return t})(l),le=t.jsx(h,{id:K.current,testId:v,isOpen:["mounting","mounted","unmountPending"].includes(y),...N,isDatatip:I,onTransitionEnd:()=>{"mounting"===y&&k("mounted"),"unmounting"===y&&(ce(),k("unmounted"))},children:e}),de=g.getWrappedTooltipContent(le,a,z,$,ae,b);return{tooltipContent:!["unmounted","mountPending"].includes(y)&&de,tooltipProps:ie}}}));
//# sourceMappingURL=useTooltipControlled-fb57eb02.js.map
