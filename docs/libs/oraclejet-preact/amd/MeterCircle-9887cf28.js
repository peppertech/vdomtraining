define(['exports', 'preact/jsx-runtime', './useUser-3ef25571', 'preact/hooks', './mergeProps-bcfa6a92', './classNames-08d99695', './meterUtils-9d026b15', './circleUtils-1886e5b4', './utils-a4c75cb2', './UNSAFE_MeterCircle/themes/MeterCircleStyles.css', './UNSAFE_MeterCircle/themes/MeterCircleContract.css', './Common/themes/themeContract.css', './utils-5077c092', './TrackResizeContainer-2b033ae7', './useMeterDatatip-173593b4', './useKeyboardEvents-8ada7a1f', './TabbableModeContext-a9c97640', './useTabbableMode-dc440317', './useComponentTheme-5aa41a8f', './UNSAFE_MeterCircle/themes/redwood/MeterCircleTheme', './useTestId-b5cd4766', './useCssVars-dc52806c', './useTextDimensions-83dd9415', './CircularMeter-b754580a'], (function(e,t,n,s,i,r,a,l,c,o,h,u,d,f,m,g,x,p,$,b,C,y,R,M){"use strict";function S(e,t){if(!e)return{width:0,height:0,innerRadius:0,outerRadius:0};const n=e.children[0],s=n.getBoundingClientRect();return{width:Math.round(s.width),height:Math.round(s.height),...v(n,s,t)}}function v(e,t,n){const s=e.clientWidth,i=e.clientHeight;return"bottom"===n||"top"===n?{outerRadius:t.width/2,innerRadius:i}:"left"===n||"right"===n?{outerRadius:t.height/2,innerRadius:s}:{innerRadius:s/2,outerRadius:t.width/2}}function z(e,t,n,s,i,r,a,c,o){const h=i.current;if(!h)return;const u=l.getCenterCoord(c),{angle:d}=l.convertToPolar(h.width*u.x,h.height*u.y,e.offsetX,e.offsetY),f=l.getPositiveAngle(d);let m;if(o&&r+a>f&&(m=l.getPositiveAngle(d-r)/a*(n-t)),!o){const e=l.getPositiveAngle(r-f);e<=a&&(m=e*(n-t)/a)}return null!=m&&(m=Math.round(m/s)*s,m=Math.max(Math.min(n,m),t)),m}function P(e,t,n,s){return e*s/(n-t)}function T(e,t,n,s,i,r){return s+(r?1:-1)*P(e-t,t,n,i)}function I(e,t){const n=e.current;if(!n)return;const s=l.getCenterCoord(t),i=s.x*n.width,r=s.y*n.height;let a,c,o,h,u,d,f,m;return"top"===t||"bottom"===t||"full"===t?(f=2*n.innerRadius,m="full"===t?2*n.innerRadius:n.innerRadius,u=i-n.innerRadius,d="bottom"===t?0:r-n.innerRadius,o=Math.sqrt(2)*n.innerRadius,h="full"===t?o:n.innerRadius/Math.sqrt(2),a=i-n.innerRadius/Math.sqrt(2),c="bottom"===t?0:r-n.innerRadius/Math.sqrt(2)):(m=2*n.innerRadius,f=n.innerRadius,u="left"===t?i-n.innerRadius:0,d=r-n.innerRadius,h=Math.sqrt(2)*n.innerRadius,o=n.innerRadius/Math.sqrt(2),a="left"===t?i-n.innerRadius/Math.sqrt(2):0,c=r-n.innerRadius/Math.sqrt(2)),{outerBounds:{x:u,y:d,width:f,height:m},innerBounds:{x:a,y:c,width:o,height:h}}}const k=d.xUnits(2),w=d.xUnits(7.5),A=16;function L(e,t){return e?"fit"===e?`${t}px`:h.meterCircleVars.sizes[e]:h.meterCircleVars.size}function V(e){return e?h.meterCircleVars.trackSizes[e]:h.meterCircleVars.trackSize}function j(e,t,n){return null!=t?`(${L(e,n)} * ${t/2})`:`(${L(e,n)} * 0.5 - ${V(e)})`}function D(e,t,n){return null!=t?`(${L(e,n)} * ${1-t} / 2)`:V(e)}function E(e,t,n,s,i,r){const{min:a,max:o,startAngle:h,angleExtent:u,size:d,section:f,isRtl:m,innerRadius:g}=e,x=`calc(${D(d,i,r)})`,p=[],$=t.filter((e=>e.max>a&&e.max<=o)).sort(((e,t)=>e.max-t.max)),b=$.length;for(let e=0;e<b;e++){const t=$[e],i=0===e?a:$[e-1].max,r=0===e?t.max:t.max-$[e-1].max;let d=T(i,a,o,h,u,m),C=P(r,a,o,u);const{startOffset:y,extentOffset:R}=F(g,u,0===e,t.max===o,m),M=l.getClipPath(d+y,C+R,m,f);if(p.push({clipPath:M,color:c.getVisThresholdColor(t.color),size:x,section:f}),e===b-1&&t.max<o&&n){d+=(m?1:-1)*C,C=P(o-t.max,a,o,u);const{startOffset:e,extentOffset:n}=F(g,u,!1,!0,m);p.push({clipPath:l.getClipPath(d+e,C+n,m,f),color:s,size:x,section:f})}}return p}function O(e,t,n,s,i,r,a){const{startAngle:c,angleExtent:o,size:h,section:d,isRtl:f}=e;return{section:d,color:t?"all"===n&&r?`${u.colorSchemeVars.dvt.contrastLine}`:s:"transparent",clipPath:l.getClipPath(c,o,f,d),size:`calc(${D(h,i,a)})`}}function N(e,t,n,s){const{value:i,min:r,max:a,startAngle:c,angleExtent:o,size:h,section:u,isRtl:d}=e,f=(i-r)*o/(a-r),m=Math.min(Math.max(0,t),1),g="left"===u||"right"===u,x="top"===u||"bottom"===u,p=`calc(${D(h,n,s)} * ${m})`,$=`${L(h,s)} - ((1 - ${m}) * ${D(h,n,s)})`,b=`(${$}) / 2`;return{section:u,width:g?`calc(${b})`:`calc(${$})`,height:x?`calc(${b})`:`calc(${$})`,size:p,clipPath:l.getClipPath(c,f,d,u)}}function F(e,t,n,s,i){if(!e)return{startOffset:0,extentOffset:0};const r=360/(2*Math.PI*e);let a=r/2*(i?1:-1),l=-1*r;return n&&t<360&&(a=0,l=-.5*r),s&&t<360&&(l=-.5*r),{startOffset:a,extentOffset:l}}function U(e,t,n){return"top"===n||"bottom"===n?{height:Math.min(t,e/2),width:2*Math.min(t,e/2)}:"left"===n||"right"===n?{width:Math.min(e,t/2),height:2*Math.min(e,t/2)}:{width:Math.min(e,t),height:Math.min(e,t)}}function B(e,t,n){const s=`calc(${100*e.y}% - ((${Math.sin(2*t*Math.PI/360)} * ${n} )))`;return{xOffset:`calc(${100*e.x}%  + ((${Math.cos(2*t*Math.PI/360)} * ${n} )))`,yOffset:s}}function H(e,t,n){let s="-50%";const i=l.getPositiveAngle(e);return 90!==i&&270!==i||(n="string"==typeof n?n:`${Math.abs(n)}px`,"left"===t?s=`min(-50%, calc(-100% + ${n}))`:"right"===t&&(s=`max(-50%, calc(-1 *  ${n}))`)),i<=72||i>=288?"0 -50%":i>=108&&i<=252?"-100% -50%":i<=108&&i>=72?`${s} -100%`:`${s} 0`}function W(e,t,n){return(t=l.getPositiveAngle(t))<108&&t>72||t<288&&t>252?`calc(${e} * 1.4)`:`calc( (${e} * 0.7 ) - (${Math.abs(Math.cos(2*t*Math.PI/360))} * ${n} ))`}function q(e,t,n,s,i){let r="";return n||n?(s?r=`calc(${h.meterCircleVars.size} / ${"lg"===e||"md"===e?3:2} )`:n&&("sm"===e?r=d.xUnits(4):"md"===e?r=d.xUnits(3):"lg"===e&&(r=d.xUnits(2))),"bottom"===t?`${i.height/2}px ${r} ${r} ${r}`:"top"===t?`${r} ${r} ${i.height/2}px ${r}`:"left"===t?`${r} ${w} ${r} ${r}`:"right"===t?`${r} ${r} ${r} ${w}`:r):""}function K(e,t,n){const s="full"===e?t/2:t;return"top"===e?n?"50% -50%":"-50%, -50%":n?`calc(50% + ${s}px), calc(-50% - ${s}px)`:`calc(-50% - ${s}px), calc(-50% - ${s}px)`}function _(e,t,n,s){return(e-t)/2+(!s&&"right"===n||s&&"left"===n?-.5:.5)*A}function X({color:e,angle:n,radius:s,length:i,section:a="full",label:h,labelMaxWidth:u,labelOffset:d,labelStyle:f,halfMeterOffset:m}){const g=l.getCenterCoord(a),{xOffset:x,yOffset:p}=B(g,n,s),{xOffset:$,yOffset:b}=B(g,n,`calc(${i} + ${s} + ${d}px)`);return t.jsxs(t.Fragment,{children:[t.jsx("div",{class:r.classNames([o.styles.referenceBaseLineStyle,e?void 0:o.styles.referenceBorderStyle]),style:{left:x,top:p,width:`calc(${i})`,transform:`translate(0, -1px) rotate(${360-n}deg)`,backgroundColor:e?c.getVisThresholdColor(e):void 0}}),h&&t.jsx("div",{className:o.styles.referenceLineLabelContainerStyle,style:{left:$,top:b,maxWidth:u,translate:H(n,a,m),...f},children:h})]})}const Y=4;function G(e,t,n,s){return`${D(e,t,s)} +  ${d.xUnits("fit"!==e||n?2:4)}`}function J(e,t,n,s,i){const{min:r,max:a,startAngle:l,angleExtent:c,size:o,isRtl:h}=e;return{radius:j(o,n,i),length:G(o,n,s,i),angle:T(t.value,r,a,l,c,h),color:t.color}}function Q(e,t,n,s,i,r){if(!n)return{width:e,height:t,overHang:0};const a=function(e){return"min"===e||"xs"===e?2*Y:4*Y}(s),l=Z(s);return{width:e*(i?.6:1)-2*a,height:t-2*a-2*(r.height+l),overHang:a}}function Z(e,t){const n="min"===e||"xs"===e;return null!=t&&(t<108&&t>72||t<288&&t>252)?n?0:Y:null==t||t<108&&t>72&&!(t<288&&t>252)?n?Y/2:Y:1.5*Y}const ee=.8,te=8;function ne({max:e=100,min:c=0,value:o=0,step:h=1,size:d="fit",startAngle:x=90,angleExtent:v=360,isTrackRendered:P=!0,thresholdDisplay:T="all",indicatorSize:w=1,testId:A,...L}){const V=C.useTestId(A);a.validateRange(c,e,o,h);const j=L.onCommit||L.onInput,{classes:D,styles:F}=$.useComponentTheme(b.MeterCircleRedwoodTheme,{size:d,interaction:j?"isInteractive":void 0});return t.jsx(f.TrackResizeContainer,{class:r.classNames([D,F.textAlignCenter]),width:"100%",height:"100%",children:function(f,$){f-=te,$-=te;const b=a.hasLabelledReferenceLine(L.referenceLines),{textMeasureContent:C,getTextDimensions:A}=R.useTextDimensions(),{direction:B}=n.useUser(),H="rtl"===B;let W=x;H&&(W=l.getPositiveAngle(180-W));const q=l.getCircleSection(W,v,H),{width:Y,height:G}=U(f,$,q),ne=function(e){return e<200?"min":e<320?"xs":e<360?"sm":"md"}(Math.max(Y,G)),se=a.getDefaultReferenceLineLabelFontSize(ne),ie=s.useMemo((()=>[{tokenVar:se,key:"labelFontSize",cssProp:"font-size"},{tokenVar:u.typographyVars.body.md.lineHeight,key:"lineHeight",cssProp:"line-height"}]),[se]),{resolvedVars:re,cssContent:ae}=y.useCssVars(ie),{maxRefLabelDims:le}=a.getMaxRefLabelDims(re.fontSize,re.lineHeight,L.referenceLines,A),ce="xs"===ne||"min"===ne,oe=L.innerRadius??ee,{width:he,height:ue,overHang:de}=Q(f,$,!!L.referenceLines?.length,ne,b,le),{width:fe,height:me}=U(he,ue,q),ge="full"===q?Math.min(fe,me)/2:Math.min(fe,me),xe=2*ge,pe=s.useRef(),$e=s.useRef(S(null,q)),be=s.useRef(null),[Ce,ye]=s.useState(!1);s.useEffect((()=>{(L.onCommit||L.onInput||L.children)&&($e.current=S(be.current,q),ye(!0))}),[q]);const Re=s.useRef(!1),Me=m.usePointerEvents(o,(t=>{const n=be.current;if(t.target==n)return z(t,c,e,h,$e,W,v,q,H)}),be,pe,Re,L.onCommit,L.onInput),Se=g.useKeyboardEvents(o,c,e,h,pe,L.onCommit,L.onInput),{datatipContent:ve,datatipProps:ze}=m.useMeterDatatip(o,Re,L.datatip,L["aria-describedby"]),Pe=a.getMeterAriaProps(o,c,e,L["aria-label"],L["aria-labelledby"],L.thresholds),Te=i.mergeProps(Me,Se,ze,Pe),{trackColor:Ie,indicatorColor:ke}=a.getTrackAndIndicatorColor(o,T,L.trackColor,L.indicatorColor,L.thresholds),we={min:c,max:e,value:o,startAngle:W,angleExtent:v,size:d,section:q,isRtl:H,innerRadius:$e.current.innerRadius},{isTabbable:Ae}=p.useTabbableMode(),Le=I($e,q);return t.jsxs(t.Fragment,{children:[t.jsx("div",{class:r.classNames([D,"full"===q?F.meterCircleFullSizeStyle:"",F.textAlignInitial]),style:{width:f,height:$},tabIndex:Ae?0:-1,...V,...Te,children:t.jsxs(M.CircleWrapper,{wrapperRef:be,class:r.classNames([F.circleWrapperBaseStyle,j?F.interactiveStyle:"",L.referenceLines&&L.referenceLines.length>0?d&&F[`${q}Fit${ce?"Sm":"Lg"}Style`]:"",H?F.centerDivRtl:F.centerDivLtr]),style:{width:`${fe}px`,height:`${me}px`,transform:`translate(${K(q,de,H)})`},children:[t.jsx(M.CircleInner,{width:`${fe}px`,height:`${me}px`,class:r.classNames([F.circleTrackBaseStyle,F[`${q}Style`]]),...O(we,P,T,Ie,oe,L.thresholds,xe)}),"all"===T&&L.thresholds&&E(we,L.thresholds,P,Ie,oe,xe).map((e=>t.jsx(M.CircleInner,{class:r.classNames([F.circleTrackBaseStyle,F[`${q}Style`]]),...e,width:`${fe}px`,height:`${me}px`}))),t.jsx(M.CircleInner,{color:ke,class:r.classNames([F.circleValueBaseStyle,F[`circleValue${q}Style`],F[`${q}Style`]]),...N(we,w,oe,2*ge)}),L.referenceLines?.map((e=>{const{radius:n,length:s,angle:i,color:r}=J(we,e,oe,ce,xe),a=function(e,t,n,s){return n=l.getPositiveAngle(n),"full"===e||"bottom"===e||"top"===e?n<108&&n>72||n<288&&n>252?`calc(${t}px - ${k})`:`calc(${t/2-Math.abs(Math.cos(2*n*Math.PI/360))*s}px - ${k})`:90===n||270===n?`calc(${t}px - ${k})`:`calc(${t/2+s/2-s*Math.abs(Math.cos(2*n*Math.PI/360))}px - ${k})`}(q,f,i,xe/2+de+Z(ne,i));return t.jsx(X,{label:e.label,labelStyle:{fontSize:re.labelFontSize,lineHeight:u.typographyVars.body.md.lineHeight,...e.labelStyle},labelMaxWidth:a,radius:n,length:s,angle:i,labelOffset:Z(ne,i),color:r,section:q,halfMeterOffset:_(f,xe/2,q,H)})})),Ce&&L.children&&Le&&t.jsx("div",{class:r.classNames([F.meterCircleCenterContent]),children:L.children(Le)})]})}),ve,C,ae]})}})}function se({max:e=100,min:c=0,value:o=0,step:d=1,size:f="lg",startAngle:x=90,angleExtent:v=360,isTrackRendered:P=!0,thresholdDisplay:T="all",indicatorSize:k=1,testId:A,...L}){const V=C.useTestId(A);a.validateRange(c,e,o,d);const j=s.useRef(),{direction:D}=n.useUser(),F="rtl"===D;let U=x;F&&(U=l.getPositiveAngle(180-U));const B=l.getCircleSection(U,v,F),H=s.useRef(S(null,B)),K=s.useRef(null),[_,Y]=s.useState(!1);s.useEffect((()=>{(L.onCommit||L.onInput||L.children)&&(H.current=S(K.current,B),Y(!0))}),[f,B,L.onCommit,L.onInput,L.children]);const{textMeasureContent:G,getTextDimensions:Q}=R.useTextDimensions(),ee=s.useRef(!1),te=m.usePointerEvents(o,(t=>{const n=K.current;if(t.target==n)return z(t,c,e,d,H,U,v,B,F)}),K,j,ee,L.onCommit,L.onInput),ne=g.useKeyboardEvents(o,c,e,d,j,L.onCommit,L.onInput),{datatipContent:se,datatipProps:ie}=m.useMeterDatatip(o,ee,L.datatip,L["aria-describedby"]),re=a.getMeterAriaProps(o,c,e,L["aria-label"],L["aria-labelledby"],L.thresholds),ae=i.mergeProps(te,ne,ie,re),{trackColor:le,indicatorColor:ce}=a.getTrackAndIndicatorColor(o,T,L.trackColor,L.indicatorColor,L.thresholds),oe="bottom"===B||"top"===B?"Horizontal":"left"===B||"right"===B?"Vertical":"Full",he={min:c,max:e,value:o,startAngle:U,angleExtent:v,size:f,section:B,isRtl:F,innerRadius:H.current.innerRadius},ue=L.onCommit||L.onInput,{classes:de,styles:fe}=$.useComponentTheme(b.MeterCircleRedwoodTheme,{size:f,interaction:ue?"isInteractive":void 0}),{isTabbable:me}=p.useTabbableMode(),ge=I(H,B),xe=N(he,k,L.innerRadius),pe=a.hasLabelledReferenceLine(L.referenceLines),$e="lg"===f?"sm":"min",be=a.getDefaultReferenceLineLabelFontSize($e),Ce=s.useMemo((()=>[{tokenVar:be,key:"labelFontSize",cssProp:"font-size"},{tokenVar:u.typographyVars.body.md.lineHeight,key:"lineHeight",cssProp:"line-height"}]),[be]),{resolvedVars:ye,cssContent:Re}=y.useCssVars(Ce),{maxRefLabelDims:Me}=a.getMaxRefLabelDims(ye.fontSize,ye.lineHeight,L.referenceLines,Q),Se=O(he,P,T,le,L.innerRadius,L.thresholds);return t.jsxs(t.Fragment,{children:[t.jsx("div",{class:r.classNames([de]),tabIndex:me?0:-1,...V,...ae,children:t.jsxs(M.CircleWrapper,{wrapperRef:K,class:r.classNames([fe.circleWrapperBaseStyle,ue?fe.interactiveStyle:"",fe[`meterCircle${oe}SizeStyle`]]),style:{margin:q(f,B,!!L.referenceLines?.length,pe,Me)},children:[t.jsx(M.CircleInner,{class:r.classNames([fe.circleTrackBaseStyle,fe[`${B}Style`]]),...Se}),"all"===T&&L.thresholds&&E(he,L.thresholds,P,le,L.innerRadius).map((e=>t.jsx(M.CircleInner,{class:r.classNames([fe.circleTrackBaseStyle,fe[`${B}Style`]]),...e}))),t.jsx(M.CircleInner,{color:ce,class:r.classNames([fe.circleValueBaseStyle,fe[`circleValue${B}Style`],fe[`${B}Style`]]),...xe}),L.referenceLines?.map((e=>{const{radius:n,length:s,angle:i,color:r}=J(he,e,L.innerRadius);return t.jsx(X,{label:e.label,labelStyle:{fontSize:ye.labelFontSize,...e.labelStyle},labelMaxWidth:W(h.meterCircleVars.size,i,`calc( ${n} + ${s} - ${Se.size} + ${Z($e,i)}px)`),radius:n,labelOffset:Z($e,i),length:s,angle:i,color:r,halfMeterOffset:w,section:B})})),_&&L.children&&ge&&t.jsx("div",{class:r.classNames([fe.meterCircleCenterContent]),children:L.children(ge)})]})}),se,G,Re]})}e.MeterCircle=function({size:e,max:n=100,min:s=0,value:i=0,step:r=1,startAngle:a=90,angleExtent:l=360,isTrackRendered:c=!0,thresholdDisplay:o="all",indicatorSize:h=1,...u}){return"fit"===e?t.jsx(ne,{min:s,value:i,max:n,step:r,startAngle:a,angleExtent:l,isTrackRendered:c,thresholdDisplay:o,indicatorSize:h,...u}):t.jsx(se,{size:e||"lg",min:s,value:i,max:n,step:r,startAngle:a,angleExtent:l,isTrackRendered:c,thresholdDisplay:o,indicatorSize:h,...u})}}));
//# sourceMappingURL=MeterCircle-9887cf28.js.map
