define(['exports', 'preact/jsx-runtime', './TrackResizeContainer-74ef32df', './classNames-08d99695', './colorUtils-7c069766', './layoutUtils-3c2d340e', './eventsUtils-5d567a9d', './accUtils-1557920a', './UNSAFE_TagCloud/themes/TagCloudStyles.css', './useVisEvents-954dcd88', 'preact/hooks', './useUser-85c781ea', './useDatatip-87792500', './util-5bb1f200', './mergeProps-bcfa6a92', './useTranslationBundle-516b1b83', './useTextDimensions-b37344b4', './useSelection-396ce75f', './useTestId-3a316499', './useContextMenu-57f18e97', './Menu-8f3a1e8c', './MenuItem-44b2547b', 'preact', './logger-0f873e29', './LayerHost-e95c5f30', 'preact/compat', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3b34c2bc', 'css!./IconStyle.styles.css', './SelectMenuGroupContext-67f24a8f', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./MenuSeparatorStyles.styles.css', 'module', './UNSAFE_Menu/themes/redwood/MenuSeparatorVariants.css', './useVisTouchResponse-36416652', './stringUtils-0ae982c2'], (function(e,t,n,o,s,i,r,l,c,a,u,d,h,f,p,x,m,g,S,y,b,I,C,M,v,w,T,R,U,z,D,E,k,A,F,N,P,L){"use strict";function V(e,t){const{idx:n}=e;return t[n]}function _(e){return null!=e?.15*e:0}function j(e){return{getItem:t=>V(t,e),getDetailFromInfo:t=>{if(!t)return{id:void 0,data:void 0};const n=V(t,e);return{id:n.id,data:n}},getPrevItemInfo:t=>function(e,t){let n=e.idx;return n=Math.max(0,n-1),{idx:n,id:t[n].id}}(t,e),getNextItemInfo:t=>function(e,t){let n=e.idx;return n=Math.min(t.length-1,n+1),{idx:n,id:t[n].id}}(t,e)}}const B=20,H=(e,t,n,o)=>t===n?12:12+Math.ceil((o-1)*(e-t)/(n-t)*12);function $(e){const t=[];let n=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(let t=0;t<e.length;t++)n=Math.min(n,e[t].value),o=Math.max(o,e[t].value);for(let s=0;s<e.length;s++){const i=H(e[s].value,n,o,3);t.push({...e[s],fontSize:i})}return t}function O(e,t){const n=[0];let o=e[0].w+2;if(e.length>1)for(let s=1;s<e.length;s++)o+e[s].w>t&&(n.push(s),o=0),o+=e[s].w+2;return n}function G(e,t,n,o,s,r){let l;return l="cloud"!==e&&e?function(e,t,n,o,s){const i=[],r=[];let l=0,c=0,a=0;const u=$(e);for(let e=0;e<u.length;e++){const t=u[e],n=s(t.label,{fontSize:t.fontSize+"px"});l=Math.max(l,n.width),c=Math.max(c,n.height),a=Math.max(a,t.fontSize),r.push({w:n.width,h:n.height,x:n.x,y:n.y})}let d,h,f=0,p=(t-0)/l;for(;p-f>.001;)d=(f+p)/2,h=O(r,(t-0)/d),h.length*(d*c+2)-2>n-0?p=d:f=d;d=f,h=O(r,(t-0)/d),h.push(u.length);for(let e=0;e<h.length-1;e++){const n=h[e],s=h[e+1];let l=5,a=0,f=!0;if(s-n>1){let o=0;for(let e=n;e<s;e++)o+=r[e].w*d,a=Math.max(a,r[e].h*d);if(l=(t-0-o)/(s-n-1),e==h.length-2){const e=.5*a;e<l&&o+(s-n)*e<.9*(t-0)&&(l=e,f=!1)}}const p=0+(e+1)*(c*d+2)-2;let x=0;for(let e=n;e<s;e++){const c=u[e],a=c.fontSize*d;c.fontSize=a;const h=r[e].w*d;c.y=0+p+r[e].y*d-B,f&&e===s-1&&e!==n?c.x=o?0+h+0-t:0+t-h-0:(c.x=0+x,o?x-=r[e].w*d+l:x+=r[e].w*d+l),i.push({...c,w:h,h:r[e].h*d})}}return i}(t,n,o,s,r):function(e,t,n,o,s){const r=[],l=180;let c=10/l,a=10/l;t>n?c*=t/n:a*=n/t;const u=2*Math.PI/l;let d=null,h=0;const f=[],p=[],x=[],m=$(e);for(let e=0;e<m.length;e++){let t=!1,n=0,o=4;const x=m[e],g=s(x.label,{fontSize:x.fontSize+"px"});h=Math.max(h,x.fontSize);let S=-1;for(;!t;){const s=n%l;void 0===f[s]&&(f[s]=Math.cos(n*u)),void 0===p[s]&&(p[s]=Math.sin(n*u));const h=c*n*f[s],m=a*n*p[s],y=_(g.height),b={x:h,y:m,w:g.width+2*y,h:g.height+2*y};if(t=!0,-1!==S&&i.intersects(r[S],b)&&(t=!1),t)for(let n=0;n<e;n++)if(i.intersects(r[n],b)){S=n,t=!1;break}t&&(d=d?i.getUnion(d,b):b,S=-1,r[e]=b,x.x=h,x.y=m,x.w=g.width,x.h=g.height),3600==n?o=3:5400==n?o=2:10800==n&&(o=1),n+=o}}if(d){const e=Math.max(d.w/t,d.h/n),s=d.x+d.w/2,i=d.y+d.h/2;for(let r=0;r<m.length;r++){let l;const c=m[r];l=o?null!=c.x?0-c.x/e-(t/2-s/e):0:null!=c.x?0+c.x/e+(t/2-s/e):0;const a=null!=c.y?0+c.y/e+(n/2-i/e):0,u=null!=c.w?c.w/e:0,d=null!=c.h?c.h/e:0,h=c.fontSize/e;x.push({...c,x:l,y:a,fontSize:h,w:u,h:d})}}return x}(t,n,o,s,r),l}function X(e,t,n,o,i,r,l,c,a){let u,d=!1;if(!o){const e=t===l?.idx,n=t===i?.idx;d=!!(e&&l?.isCurrent||n&&i?.isCurrent)}const h=function(e,t){if(t)return 0===t.length||new Set(t).has(e)}(e.id,c),f=function(e,t){return!(!t||0===t.length)&&new Set(t).has(e)}(e.id,r);if(e.color){let t,n,o;f?(n=e.color,t=s.getContrastingTextColor(n)):t=e.color,u={color:t,backgroundColor:n,backgroundImage:o}}else n||(u={backgroundColor:"none"});return{isCurrent:d,isHighlighted:h,isSelected:f,isFocused:!!l&&K(l,t),key:e.id,itemIdx:t,style:u,activeId:d?a:void 0,isReadOnly:o,...e}}function q(e){const t=e.dataset.idx;if(null!=t)return{idx:Number(t)}}function J(e,t){return e?.idx===t?.idx}function K(e,t){if(!e.isFocusVisible)return!1;const{idx:n}=e;return n===t}function Q(e,t,n){return o=>{switch(o.code){case"Space":case"Enter":e(),r.cancelEvent(o);break;case"Tab":t({...n,isCurrent:!0,isFocusVisible:!0}),r.cancelEvent(o)}}}const W=e=>{const{itemBase:n,itemStyle:s,hoverUnselectedItemStyle:i,selectedItemStyle:r,hoveredSelectedItemStyle:a,dimmedItemStyle:u,interactiveCursorStyle:d}=c.styles,h=e.isHighlighted||null==e.isHighlighted,f=o.classNames([n,e.isSelected?r:s,e.isCurrent?e.isSelected?a:e.isFocused||e.supportsSelection?i:"":"",h?"":u,e.supportsAction||e.supportsSelection?d:""]),p=(x=!!e.supportsSelection,m=e.translations,g=e.isSelected,S=e.accessibleLabel,y=e.role,{"aria-label":l.generateAriaLabel(m,S,{isSelected:x?g:void 0})||void 0,role:y||"img"});var x,m,g,S,y;const b=_(e.h);return t.jsx("div",{class:f,"data-id":`${e.id}`,"data-idx":e.itemIdx,style:{...e.style,transform:`translate(${(e.x||0)-b}px,${(e.y||0)-b}px)`,fontSize:e.fontSize,padding:`${b}px`,lineHeight:e.fontSize+"px"},id:e.activeId,...p,children:e.label})},Y=(e,t,n,o)=>{if(o?.current&&t.isCurrent&&e.current&&null!=o?.current.x&&null!=o?.current.w&&null!=o?.current.y&&null!=o?.current.h){const t={x:o.current.x,y:o.current.y,width:o.current.w,height:o.current.h},s=e.current.getBoundingClientRect();return f.calculateOffset(n,s.width,t)}return f.calculateOffset(n,0,void 0)},Z=({touchResponse:e,datatip:t,rootRef:n,focusedItemRef:o,focusedItemInfo:s})=>{const{direction:i}=d.useUser(),r="rtl"===i,[l,c]=u.useState(Y(n,s,r,o));u.useLayoutEffect((()=>{c(Y(n,s,r,o))}),[s,o,r,n]);const a=s?.isCurrent?"element":"pointer",{datatipContent:f,datatipProps:p}=h.useDatatip({content:t?.content,borderColor:t?.borderColor,anchor:a,placement:"top-start",offset:l,touchResponse:e});return{datatipContent:f,datatipProps:p}},ee=({getItemInfo:e,focusedItemInfo:t,rootRef:n,contextMenuConfig:o,items:s,onContextMenuDismissed:i})=>{const{contextMenuProps:r,contextMenuContent:l}=y.useContextMenu({onContextMenuHandler:({gesture:o,target:i})=>{let r,l;"keyboard"===o?(r=t.idx,l=n.current?.querySelector(`[data-idx="${r}"]`)):r=e(i)?.idx;const c=void 0!==r?s[r]:null;let a;return a=c?{type:"item",data:c}:{type:"background"},{context:a,elem:l}},contextMenuOptions:{isDisabled:!o},rootRef:n,contextMenuConfig:o,onContextMenuDismissed:i});return{contextMenuContent:l,contextMenuProps:r}};function te({selectionMode:e="none",layout:n="cloud",width:o,height:s,items:i,onItemAction:r,onItemHover:l,onItemFocus:h,testId:f,contextMenuConfig:y,...b}){const I=S.useTestId(f),C=u.useRef(null),M=u.useRef(null),v=x.useTranslationBundle("@oracle/oraclejet-preact"),w=i&&0!==i.length,T=!(!e||"none"===e),R=null!=r,U=R&&null===l&&null===h,z=new Map(i.map((e=>[e.id,e]))),{getItem:D,getDetailFromInfo:E,getPrevItemInfo:k,getNextItemInfo:A}=j(i),{touchResponse:F,touchResponseStyle:N}=P.useVisTouchResponse({type:"auto",supportsTouchDragGestures:!1,rootRef:C}),{focusedItemInfo:V,hoveredItemInfo:_,onContextMenuDismissed:B,activeId:H,eventsProps:$}=a.useVisEvent(F,!U&&w,(()=>!U),Q,E,k,A,r,l,h,J,q,{idx:0}),O=function(e,t,n,o,s){const i=n.isCurrent?n:o?.isCurrent&&null!=o.idx?o:void 0;if(!i)return{content:void 0,borderColor:void 0};const r=t(i,e);return s&&r?s({data:r}):{content:r?.accessibleLabel,borderColor:void 0}}(i,D,V,_,b.datatip),{datatipContent:K,datatipProps:{"aria-describedby":Y,...te}}=Z({touchResponse:F,datatip:O,rootRef:C,focusedItemInfo:V,focusedItemRef:M}),ne=function(e,t,n,o,s){return{"aria-label":`${n||""} ${t?"":e.vis_noData()}`,role:"application","aria-describedby":o,"aria-labelledby":s}}(v,w,b.accessibleLabel,L.merge([b["aria-describedby"],Y]),b["aria-labelledby"]),{selectionContent:oe,selectionProps:se}=g.useSelection({idExtracter:e=>{const t="keyup"===e.type?V:q(e.target);return E(t).id},selection:b.selectedIds,selectionMode:e,onChange:b.onSelectionChange,getDataById:e=>z.get(e)}),{direction:ie}=d.useUser(),{textMeasureContent:re,getTextDimensions:le}=m.useTextDimensions(),ce=u.useMemo((()=>le&&w?G(n,i,o,s,"rtl"===ie,le):[]),[n,i,w,o,s,ie,le]),{contextMenuContent:ae,contextMenuProps:ue}=ee({getItemInfo:q,focusedItemInfo:V,rootRef:C,contextMenuConfig:y,items:i,onContextMenuDismissed:B}),de=p.mergeProps($,te,se,ue);return t.jsxs("div",{ref:C,tabIndex:U?void 0:0,style:{width:o,height:s,...N},class:c.baseStyles,...I,...ne,...de,"aria-activedescendant":H,children:[ce.map(((e,n)=>{const o=X(e,n,T,U,_,b.selectedIds,V,b.highlightedIds,H);return V.idx===n&&(M.current=e),t.jsx(W,{fontSize:e.fontSize,x:e.x,y:e.y,accessibleLabel:e.accessibleLabel,supportsSelection:T,supportsAction:R,translations:v,...o})})),re,K,ae,oe]})}e.TagCloud=function({height:e,width:o,...s}){return t.jsx(n.TrackResizeContainer,{width:o,height:e,class:c.dimensionStyle,children:(e,n)=>t.jsx(te,{width:e,height:n,...s})})}}));
//# sourceMappingURL=TagCloud-58b4a81b.js.map
