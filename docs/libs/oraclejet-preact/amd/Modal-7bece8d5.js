define(['exports', 'preact/jsx-runtime', 'preact/compat', './useModal-536cb7ff', './Layer-6f29b67f', './LayerHost-639b3284', './UNSAFE_Modal/themes/ModalStyles.css', './tabbableUtils-85aa6918'], (function(e,t,s,o,n,r,l,a){"use strict";const i=s.forwardRef((({variant:e="scrim"},s)=>{const o=l.multiVariantStyles({backdrop:"transparent"===e?"transparent":"scrim"});return t.jsx("div",{ref:s,class:o})}));function d(e){const t=[];let s=e.previousSibling;for(;null!=s;)1===s.nodeType&&t.push(s),s=s.previousSibling;for(s=e.nextSibling;null!=s;)1===s.nodeType&&t.push(s),s=s.nextSibling;return t}function u(e){if(!e.modalRef)return[];const t=[];let s=e.modalRef.parentElement;do{if(!s)break;d(s).forEach((e=>{"script"!==e.tagName.toLowerCase()&&"true"!==e.getAttribute("aria-hidden")&&(t.push(e),e.setAttribute("aria-hidden","true"))})),s=s.parentElement}while(s&&"body"!==s.tagName.toLowerCase());return t}const c=new class{constructor(){this.isFocusHandlerActive=!1,this.focusHandler=e=>{const t=this.getTopModal(),s=e.target;if(t&&s){const o=t.modalRef;if(o&&!o.contains(s)){a.allTabbableElements(o).length>0&&(a.focusWithin(o),e.preventDefault(),e.stopPropagation())}}},this.getTopModal=()=>this.modals.length>0?this.modals[this.modals.length-1].modal:null,this.islegacyLayerSupportAvailable=()=>null!==document.getElementById("__oj_zorder_container"),this.modals=[],this.styleBackup=[]}push(e){if(-1===this._findModalIndex(e)){if(this.modals.push({modal:e,ariaHiddenChildren:u(e)}),1===this.modals.length){const t=this._getOwnerDocument(e.modalRef).body,s=window.innerWidth-document.documentElement.clientWidth;if(s>1){Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?(this.styleBackup.push({property:"padding-left",value:t.style.paddingLeft}),t.style.paddingLeft=`${s}px`):(this.styleBackup.push({property:"padding-right",value:t.style.paddingRight}),t.style.paddingRight=`${s}px`)}this.styleBackup.push({property:"overflow",value:t.style.overflow}),this.styleBackup.push({property:"overflow-x",value:t.style.overflowX}),this.styleBackup.push({property:"overflow-y",value:t.style.overflowY}),t.style.overflow="hidden"}1!==this.modals.length||this.islegacyLayerSupportAvailable()||(document.addEventListener("focus",this.focusHandler,!0),this.isFocusHandlerActive=!0)}}pop(e){const t=this._findModalIndex(e);if(-1===t)return;if(t!==this.modals.length-1)return;this.isFocusHandlerActive&&1===this.modals.length&&document.removeEventListener("focus",this.focusHandler,!0);const s=this.modals.pop();var o;if(s&&(o=s?.ariaHiddenChildren,o.forEach((e=>{e.removeAttribute("aria-hidden")}))),0===this.modals.length){const t=this._getOwnerDocument(e.modalRef).body;this.styleBackup.forEach((({property:e,value:s})=>{t.style.setProperty(e,s)}))}}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}_findModalIndex(e){let t=-1;return this.modals.forEach(((s,o)=>{s.modal!==e||(t=o)})),t}_getOwnerDocument(e){return e&&e.ownerDocument||document}};e.Modal=({children:e,isOpen:r,onBackdropClick:a,backdropVariant:d})=>{const u=c,{backdropRef:h}=o.useModal({isOpen:r,onBackdropClick:a}),p=s.useRef(null),f=s.useRef({}),m=()=>(f.current.modalRef=p.current,f.current);return s.useEffect((()=>{r&&p.current?u?.push(m()):f.current.modalRef&&u?.pop(m())}),[r,u]),s.useEffect((()=>{const e=f.current.modalRef;return()=>{e&&u?.pop(m())}}),[u]),r?t.jsx(n.Layer,{isModal:!0,children:t.jsxs("div",{ref:p,class:l.baseStyle,children:[t.jsx(i,{ref:h,variant:d}),e]})}):null}}));
//# sourceMappingURL=Modal-7bece8d5.js.map
