define(['exports', 'preact/jsx-runtime', './classNames-08d99695', './SvgSymbol-d0266621', './UNSAFE_Legend/themes/LegendStyles.css', './Text-e132dec0', 'preact/compat', 'preact/hooks', './useUser-85c781ea', './datatipUtils-1b8ab042', './useDatatip-87792500', './useTextDimensions-b37344b4', './useContextMenu-57f18e97', './Menu-8f3a1e8c', './MenuItem-44b2547b', 'preact', './logger-0f873e29', './LayerHost-e95c5f30', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-3b34c2bc', 'css!./IconStyle.styles.css', './SelectMenuGroupContext-67f24a8f', './UNSAFE_Separator/themes/SeparatorStyles.css', 'css!./MenuSeparatorStyles.styles.css', 'module', './UNSAFE_Menu/themes/redwood/MenuSeparatorVariants.css', './Common/themes/themeContract.css', './utils-5077c092', './eventsUtils-5d567a9d'], (function(e,t,n,i,o,s,r,l,a,d,c,u,h,m,x,g,f,y,S,I,C,b,p,F,v,M,T,W,w,k,R){"use strict";function A(e){const{imageMarkerStyle:n}=o.styles;return t.jsx("img",{class:n,src:e.source})}const E=({markerColor:e="#a6acb1",lineColor:n="#a6acb1",markerShape:s="square",isHidden:r=!1,lineStyle:l="none",...a})=>{const{legendSymbolBaseStyle:d}=o.styles,c=!(null==a.width&&null==a.height)&&("rectangle"===s||"ellipse"===s),u="none"!=l&&"none"!=s?2:3;return t.jsx("div",{className:d,style:{width:a.width,height:a.height},children:a.source?t.jsx(A,{source:a.source}):t.jsx(i.SvgSymbol,{setAspectRatioNone:c,markerShape:r?"square":s,lineStyle:r?"none":l,lineColor:n,lineLength:a.lineLength,lineWidth:null!=a.lineWidth?a.lineWidth:u,markerColor:r?"transparent":e,borderColor:r?e||n:a.borderColor,setAbsolutePos:!0})})},L=({text:e,type:i="label",id:r,align:l="start",...a})=>{const{legendTextBaseStyle:d,legendTextTitle:c,legendTitleStartAlign:u,legendTitleCenterAlign:h,legendTitleEndAlign:m}=o.styles,x="title"===i;return t.jsx("div",{class:n.classNames([d,x?c:"",x&&"start"===l?u:"",x&&"center"===l?h:"",x&&"end"===l?m:""]),style:{...a},children:t.jsx(s.Text,{size:"inherit",variant:"inherit",weight:"inherit",truncation:"ellipsis",id:r,children:e})})},j=e=>{const t=e.dataset.ojItem,n=e.dataset.ojSection;if(null!=t&&null!=n)return{itemIdx:Number(t),sectionIdx:Number(n)}};function P(e,t){if(t)return 0===t.length||new Set(t).has(e)}function D(e,t){if(t)return new Set(t).has(e)}const H=(e,t,n)=>{if(!e.isFocusVisible)return!1;const{itemIdx:i,sectionIdx:o}=e;return null==n?i===t:i===t&&o===n};const z=[{tokenVar:k.xUnits(1),key:"unit",cssProp:"padding"},{tokenVar:w.dvtVars.label.sm.fontSize,key:"fontSize",cssProp:"font-size"}];function N(e,t,n,i,s,r){if(e){if(null==t&&null==s&&"off"!==r)return o.styles.legendItemIsCurrentWithCursor;if(null==t&&"on"===n&&"off"!==r)return o.styles.legendItemIsCurrentWithCursor;if(null==s&&"dim"===i&&"off"!==r)return o.styles.legendItemIsCurrentWithoutCursor}return""}const B=r.forwardRef((({id:e,text:i,sectionIdx:s,itemIdx:r,isHighlighted:l,symbolHeight:a,symbolWidth:d,isFocused:c,isCurrent:u,isHidden:h,actionable:m="inherit",hoverBehavior:x="none",hideAndShowBehavior:g="off",...f},y)=>{const S={fontFamily:f.textFontFamily,fontSize:f.textFontSize,color:f.textColor,fontStyle:f.textFontStyle,fontWeight:f.textFontWeight,textDecoration:f.textTextDecoration},I={lineStyle:f.lineStyle,lineWidth:f.lineWidth,markerShape:f.markerShape,markerColor:f.markerColor,source:f.source,borderColor:f.borderColor,lineColor:f.lineColor},C=l||null==l,{legendItemBaseStyle:b,legendItemOpacity:p,legendItemFocusRing:F}=o.styles;return t.jsxs("div",{class:n.classNames([b,N(u,l,g,x,h,m),C?"":p,c?F:"",f.class]),style:{gridRow:f.gridRow,gridColumn:f.gridCol,minWidth:void 0!==f.minWidth?`${f.minWidth}px`:void 0},id:e,ref:y,"data-oj-section":s,"data-oj-item":r,role:null!=h?"menuitemcheckbox":"img","aria-checked":null!=h?!h:void 0,"aria-label":f["aria-label"]||i,children:[t.jsx(E,{...I,isHidden:h,lineLength:d,width:null!=d?`${d}px`:void 0,height:null!=a?`${a}px`:void 0}),t.jsx(L,{...S,text:i,type:"label"})]})})),U=(e,t,n,i)=>{let o=0,s=d.DATATIP_OFFSET;if(e.current&&n.isCurrent&&t.current){const n=t.current,r=e.current.getBoundingClientRect();o=r.x+r.width/2-(n.x+n.width/2),o=i?-1*o:o,s+=n.y-r.y,s=Math.min(d.DATATIP_OFFSET,Math.max(s,r.height-n.height+d.DATATIP_OFFSET))}return{crossAxis:o,mainAxis:s}},V=(e,t,n,i,o)=>{let s=0,r=0,l=0;return l=o?1.5*t+o:4*t,e?.forEach((e=>{const o=e,{width:a}=n(o.text,i),d=2.5*t+a;r+=l+d,s=Math.max(s,Math.ceil(l+d))})),{maxItemWidth:s,horizontalSectionWidth:r}};e.BaseLegend=({orientation:e="horizontal",highlightedIds:i,hiddenIds:s,focusedItemInfo:r,hoveredItemInfo:l,sectionIdx:a,activeId:d,isReadOnly:c,items:u,symbolHeight:h,symbolWidth:m,hideAndShowBehavior:x="off",hoverBehavior:g="none",...f})=>{const y="horizontal"===e,S=y?`repeat(${f.itemsPerRow}, ${f.itemWidth})`:void 0,{baseLegendStyles:I,baseLegendHorizontal:C,baseLegendVertical:b,baseLegendVerticalItem:p,baseLegendPaddingBottom:F,baseLegendPaddingTop:v,baseLegendPaddingEnd:M}=o.styles;return t.jsx("div",{className:n.classNames([I,y?C:b]),style:{gridTemplateColumns:S,maxWidth:"100%"},children:u.map(((e,o)=>{const{markerColor:S,markerShape:I,source:C,borderColor:b,lineColor:T,isCurrent:W,isFocused:w,isHidden:k,isHighlighted:R,key:A,actionable:E,text:L,lineStyle:j,lineWidth:z}=function(e,t,n,i,o,s,r,l){let a=!1;if(!o){const e=t===i.itemIdx&&n===i.sectionIdx,o=t===s?.itemIdx&&n===s?.sectionIdx;a=!!(e&&i.isCurrent||o&&s?.isCurrent)}return{isCurrent:a,isHighlighted:P(e.id,l),isHidden:D(e.id,r),isFocused:H(i,t,n),key:e.id,...e}}(e,o,a,r,c,l,s,i),N=r.sectionIdx===a&&r.itemIdx===o,{gridRow:U,gridCol:V}=function(e,t,n,i){let o,s;return n&&i&&e>n&&(o=t%i+1,s=Math.floor(t/i)+1),{gridRow:o,gridCol:s}}(u.length,o,f.itemsPerRow,f.itemsPerCol),O=null!=U&&U!=f.itemsPerCol,_=null!=U&&1!=U;return t.jsx(B,{ref:N?f.focusedItemRef:void 0,text:L,itemIdx:o,sectionIdx:a,symbolHeight:h,symbolWidth:m,markerColor:S,markerShape:I,lineStyle:j,lineWidth:z,source:C,borderColor:b,"aria-label":e["aria-label"],lineColor:T,isCurrent:W,isFocused:w,isHidden:k,isHighlighted:R,gridRow:U,gridCol:V,minWidth:f.itemWidth,id:W?d:"",textColor:f.textColor,textFontFamily:f.textFontFamily,textFontSize:f.textFontSize,textFontStyle:f.textFontStyle,textFontWeight:f.textFontWeight,textTextDecoration:f.textTextDecoration,class:n.classNames([y?"":p,_?v:"",O?F:"",M]),hideAndShowBehavior:x,hoverBehavior:g,actionable:E},A)}))})},e.LegendText=L,e.getAriaProps=function(e,t,n,i,o){return{"aria-label":t,"aria-disabled":e,role:n&&!e?"menu":"application","aria-describedby":i,"aria-labelledby":o}},e.getDatatipText=function(e,t,n,i){const o=i?.isCurrent;return o&&null!=i.itemIdx?t(i,e)?.datatip:n&&n.isCurrent?t(n,e)?.datatip:void 0},e.getGridNums=(e,t)=>{let n,i;return t?.isWrapped&&(n=t.itemsPerRow,i=Math.ceil(e/n),n=Math.ceil(e/i)),{itemsPerRow:n,itemsPerCol:i}},e.getIsLegendItemActionable=function(e,t,n){return i=>{let o;return o=n&&null!=i.sectionIdx?e[i.sectionIdx].items[i.itemIdx]:e[i.itemIdx],!t&&"off"!==o?.actionable}},e.getItemInfo=j,e.getKeyUpHandler=function(e,t,n,i){return o=>{switch(o.code){case"Space":i&&(e(),R.cancelEvent(o));break;case"Enter":e(),R.cancelEvent(o);break;case"Home":t({itemIdx:0,sectionIdx:0,isFocusVisible:!0,isCurrent:!0}),R.cancelEvent(o);break;case"End":t({itemIdx:-1,sectionIdx:-1,isCurrent:!0,isFocusVisible:!0}),R.cancelEvent(o);break;case"Tab":t({...n,isCurrent:!0,isFocusVisible:!0}),R.cancelEvent(o)}}},e.getLegendTextStyle=function(e,t){return{fontStyle:e.fontStyle,fontSize:t.fontSize??e.fontSize,fontWeight:e.fontWeight,fontFamily:e.fontFamily}},e.isEqualItem=(e,t)=>e?.itemIdx===t?.itemIdx&&e?.sectionIdx===t?.sectionIdx,e.legendVars=z,e.useLegendContextMenu=({rootRef:e,contextMenuConfig:t,focusedItemInfo:n,items:i,sections:o,isReadOnly:s,onContextMenuDismissed:r})=>{const{contextMenuProps:l,contextMenuContent:a}=h.useContextMenu({onContextMenuHandler:({gesture:t,target:s})=>{let r,l,a,d,c;return"keyboard"===t?(l=n.itemIdx,a=n.sectionIdx,i?r=e.current?.querySelector(`[data-oj-item="${l}"]`):o&&(r=e.current?.querySelector(`[data-oj-item="${l}"][data-oj-section="${a}"]`))):(l=j(s)?.itemIdx,o&&(a=j(s)?.sectionIdx)),i?d=void 0!==l?i[l]:null:o&&(d=void 0!==a&&void 0!==l?o[a]?.items[l]:null),c=d?{type:"item",data:d}:{type:"background"},{context:c,elem:r}},contextMenuOptions:{isDisabled:!t||s},rootRef:e,contextMenuConfig:t,onContextMenuDismissed:r});return{contextMenuContent:a,contextMenuProps:l}},e.useLegendDatatip=({text:e,rootDimsRef:t,focusedItemRef:n,focusedItemInfo:i,touchResponse:o})=>{const{direction:s}=a.useUser(),r="rtl"===s,[d,u]=l.useState(U(n,t,i,r));l.useLayoutEffect((()=>{u(U(n,t,i,r))}),[i,n,r,t]);const h=i?.isCurrent?"element":"pointer";return c.useDatatip({content:e,placement:"top",anchor:h,offset:d,touchResponse:o})},e.useLegendLayout=function({resolvedVars:e,sections:t,items:n,rootRef:i,rootDimsRef:o,orientation:s,legendFontStylesObj:r={},symbolWidth:a}){const{textMeasureContent:d,getTextDimensions:c}=u.useTextDimensions(),h=l.useRef(s),m=h.current!==s,[x,g]=l.useState(!1);return l.useLayoutEffect((()=>{m&&(h.current=s,g(!x))}),[m,x,s]),{textMeasureContent:d,layoutInfo:l.useMemo((()=>{if(!i.current||!Object.keys(e).length||!c||m||"vertical"===s)return;const l=parseFloat(e.unit);o.current=i?.current?.getBoundingClientRect();let d=0,u=!1;if(t&&t.forEach((e=>{const{maxItemWidth:t,horizontalSectionWidth:n}=V(e.items,l,c,r,a);u||(u=n>Math.ceil(o.current?.width)),d=Math.max(d,t)})),n){const{maxItemWidth:e,horizontalSectionWidth:t}=V(n,l,c,r,a);d=e,u=t>Math.ceil(o.current?.width)}return{maxItemWidth:Math.min(d,o.current?.width),itemsPerRow:Math.max(1,Math.floor(o.current?.width/d)),isWrapped:u}}),[t,n,o,i,r,e,a,c,s,m])}}}));
//# sourceMappingURL=useLegendContextMenu-09c7a5a9.js.map
