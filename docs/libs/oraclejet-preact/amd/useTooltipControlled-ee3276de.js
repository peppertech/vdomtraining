define(['exports', 'preact/jsx-runtime', 'preact/hooks', './useId-c9578d26', './useHover-7964884c', './useFocus-4194fc59', './useTouch-37489bb5', './mergeProps-bcfa6a92', './useAnimation-5a74955f', './useComponentTheme-5aa41a8f', './useTestId-b5cd4766', './useThemeInterpolations-ab618dee', './classNames-08d99695', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentTheme', './useColorScheme-443e7cc7', './tooltipUtils-e5bdb734'], (function(e,t,n,o,u,s,r,i,c,a,l,d,m,p,f,g){"use strict";const h=({children:e,id:o,isOpen:u,isDatatip:s,onTransitionEnd:r,testId:i,...f})=>{const g=n.useRef(null),h=n.useRef(null),T=l.useTestId(i),{baseTheme:b,variantClasses:v,styles:P}=a.useComponentTheme(p.TooltipContentRedwoodTheme,{variant:s?"datatip":"tooltip"}),E=d.useThemeInterpolations(),{nodeRef:x}=c.useAnimation(u?"mounted":"unmounted",{animationStates:{mounted:e=>{const t=e.firstChild;return{from:{maxHeight:"0",opacity:"0%"},to:{maxHeight:`${t?.offsetHeight}px`,opacity:s?"100%":"95%"},options:{duration:s?1:150,easing:[0,0,.2,1]}}},unmounted:e=>({from:{opacity:s?"100%":"95%"},to:{maxHeight:"0",opacity:"0%"},options:{duration:s?1:150,easing:[0,0,.2,1]}})},isAnimatedOnMount:!0,onAnimationEnd:()=>r?.()});return n.useEffect((()=>{g.current&&h.current?.offsetHeight&&(g.current.style.height=`${h.current?.offsetHeight}px`)}),[]),t.jsx("div",{ref:g,id:o,role:"tooltip",class:m.classNames([P.wrapper,E,b]),...T,children:t.jsx("div",{ref:x,class:P.inner,...f,children:t.jsx("div",{ref:h,class:m.classNames([v,P.content]),children:e})})})};e.TooltipContent=h,e.useTooltipControlled=({text:e,isOpen:c=!1,variant:a="tooltip",position:l="bottom",focusStrategy:d="browser",isDisabled:m=!1,anchor:p={x:"element",y:"element"},offset:T,onToggle:b,testId:v})=>{const P=g.getGlobalTooltipManager(),E=m||!e,x=n.useRef(!0),[y,C]=n.useState(!E&&c?"mounting":"unmounted"),R=n.useRef(y),H=e=>{R.current=e,C(e)},[A,I]=n.useState(!1);I(!1);const D="datatip"===a,[k,S]=n.useState(!1),L="logical"===d,O=n.useRef(!0),{hoverProps:w,isHover:_}=u.useHover({}),{touchProps:B,isTouch:F}=r.useTouch({isDisabled:m}),{focusProps:M,isFocus:j}=s.useFocus({isDisabled:L}),{hoverProps:N,isHover:G}=u.useHover({isDisabled:m||!c}),U="pointer"===p.x||"pointer"===p.y,Y=n.useRef(o.useId()),K=n.useRef(null),W=n.useRef({x:-9999,y:-9999}),$=U&&!j?W:K,X=D?0:g.SHOW_TOOLTIP_DELAY,q=D?0:g.HIDE_TOOLTIP_DELAY,z=n.useRef(null),J=f.useColorScheme(),Q=n.useRef(!1),V=n.useRef(!1),Z=()=>{z.current&&(clearTimeout(z.current),z.current=null)};n.useEffect((()=>{Q.current=L?k:j&&P.isTabKeyActive(),Q.current&&(V.current=!1)}),[j,k,L,P]),n.useEffect((()=>{V.current=_}),[_]),n.useEffect((()=>{O.current?O.current=!1:U&&_&&"unmounted"===y||(e=>{if(e)switch(y){case"unmounted":H("mountPending");break;case"unmounting":H("mounting"),b?.({value:!0});break;case"unmountPending":Z(),H("mounted")}else switch(y){case"mounting":case"mounted":H("unmountPending");break;case"mountPending":Z(),ae(),H("unmounted")}})(_&&V.current||(j||k)&&Q.current||G||F)}),[_,j,k,G,F,U,y,b]);const ee=n.useCallback((()=>{Q.current=!1,V.current=!1,b?.({value:!1})}),[]);n.useEffect((()=>{x.current?x.current=!1:H(c?"mounting":"unmounting")}),[c]),n.useEffect((()=>()=>{Z(),Q.current=!1,V.current=!1}),[]),n.useEffect((()=>{"mounted"===y?P.register(ee):"unmounted"===y&&P.unregister(ee)}),[y,ee,P]),n.useEffect((()=>(z.current||"mountPending"!==y&&"unmountPending"!==y||(z.current=setTimeout((()=>{Z(),"mountPending"!==y&&"unmountPending"!==y||y!==R.current||b?.({value:"mountPending"===y})}),"mountPending"===y?X:q)),()=>{Z()})),[y,X,q,b]);const te=e=>{S(!0),K.current=e,$.current=e},ne=()=>{S(!1)},oe=n.useCallback((e=>{(e.eventPhase===Event.AT_TARGET||e.eventPhase===Event.BUBBLING_PHASE&&D)&&(K.current=e.target)}),[D]),ue=n.useCallback((e=>{e.eventPhase===Event.AT_TARGET&&(Q.current=!1)}),[]),se=L?{}:{onFocus:oe,onBlur:ue},re={onMouseEnter:n.useCallback((e=>{K.current=e.target}),[])},ie={onKeyDown:n.useCallback((e=>{"Escape"===e.code&&Q.current&&(e.preventDefault(),Q.current=!1,b?.({value:!1}))}),[b])};let ce;const ae=()=>{W.current={x:-9999,y:-9999}};if(E)ce=i.mergeProps(w,M,re,se);else{const e={"aria-describedby":Y.current,...U&&{onMouseLeave:()=>{"mounting"!==y&&Z()},onMouseMove:e=>{(e=>{if("unmounted"!==y&&("datatip"!==a||"mounted"!==y))return;const t=K?.current?.getBoundingClientRect(),n=document.body.scrollLeft+(t?.left||0)+(t?.width||0),o=document.body.scrollTop+(t?.top||0)+(t?.height||0),u="pointer"===p.x?e.clientX:n,s="pointer"===p.y?e.clientY:o;"mounted"===y?(W.current={x:u,y:s},!0!==A&&I(!0)):"unmounted"===y&&(Z(),z.current=setTimeout((()=>{"unmounted"===y&&(W.current={x:u,y:s},b?.({value:!0}))}),q))})(e)}}};ce=i.mergeProps(w,M,B,re,se,e,ie,L?{onLogicalFocus:te,onLogicalBlur:ne}:{})}if(E)return Z(),ae(),{tooltipContent:null,tooltipProps:ce};const le=l,de=t.jsx(h,{id:Y.current,testId:v,isOpen:["mounting","mounted","unmountPending"].includes(y),...N,isDatatip:D,onTransitionEnd:()=>{"mounting"===y&&H("mounted"),"unmounting"===y&&(ae(),H("unmounted"))},children:e}),me=g.getWrappedTooltipContent(de,a,J,$,le,T);return{tooltipContent:!["unmounted","mountPending"].includes(y)&&me,tooltipProps:ce}}}));
//# sourceMappingURL=useTooltipControlled-ee3276de.js.map
