define(['exports', 'preact/jsx-runtime', './PRIVATE_Chart/themes/ChartStyles.css', './TrackResizeContainer-2b033ae7', './useTextDimensions-83dd9415', './useCssVars-dc52806c', 'preact/hooks', './Gridlines-bef7bbfc', './useId-c9578d26', './Axis-43a8b896', './useChartViewport-2129094d', './layoutUtils-c2938c54', './useChartNav-60a79595', './mergeProps-bcfa6a92', './ScrollBar-4046f84f', './useSelectDrill-216c007c', './useUser-3ef25571', './useTestId-b5cd4766', './cssUtils-577028f8', './useChartContextMenu-8606bfa2', './useChartDnd-947ed9e4', './eventsUtils-edf8f4e5', './accUtils-530bdb90', './layoutUtils-8805fc5b', './useTooltip-b43ad881', './logger-0f873e29', './LayerHost-639b3284', 'preact/compat', 'css!./TooltipContentStyles.styles.css', 'module', './hooks/UNSAFE_useTooltip/themes/redwood/TooltipContentVariants.css', './tooltipUtils-e5bdb734', './useChartMarquee-51f52d57', './useVisTouchResponse-88a7bb09', './stringUtils-0ae982c2', './useOverviewContext-dd00c487', './scale-3ae48ed5', './OverviewSlidingWindow-e4bea056', './PRIVATE_VisOverview/themes/VisOverview.css'], (function(e,t,o,i,r,s,n,a,d,l,c,u,x,p,g,h,v,f,w,m,I,y,S,C,b,D,A,M,T,P,R,j,k,E,V,O,G,N,z){"use strict";function B(e,t,o){const i=e.groupIndex+1;if(!(i>=t))return o(i)?{groupIndex:i}:B({groupIndex:i},t,o)}function F(e,t){const o=e.groupIndex-1;if(!(o<0))return t(o)?{groupIndex:o}:F({groupIndex:o},t)}function L({x:e,width:o,height:i,y:r,windowX:s,windowHeight:n,windowWidth:a,windowY:d}){return t.jsxs(t.Fragment,{children:[t.jsx("rect",{x:e,y:r,width:Math.max(0,s-e),height:i,class:z.styles.overviewBackground}),t.jsx("rect",{x:s+a,width:Math.max(0,e+o-s-a),y:r,height:i,class:z.styles.overviewBackground}),t.jsx("rect",{x:s,y:r,height:Math.max(0,d-r),width:a,class:z.styles.overviewBackground}),t.jsx("rect",{x:s,y:d+n,width:a,class:z.styles.overviewBackground,height:Math.max(r+i-d-n,0)})]})}const U=10,W=w.getChartVars();function H({width:e,height:i,selectedIds:w,hiddenIds:S,hideAndShowBehavior:D="none",orientation:A="vertical",xAxis:M,yAxis:T,plotArea:P,dragMode:R="user",series:j,groups:z,isStacked:H=!1,getDataItem:X,selectionMode:q="none",drilling:Y="off",dataCursorPosition:$,onSelectionChange:_,isDataCursorEnabled:Z,dataCursorStyle:J,onViewportChange:K,onDataCursorPositionChange:Q,onItemDrill:ee,onGroupDrill:te,onItemHover:oe,onItemFocus:ie,datatip:re,zoomAndScroll:se="off",offset:ne,getNavUtil:ae,getDataItemPos:de,getGapRatio:le,valueFormats:ce,findNearest:ue,getMarkerInfo:xe,isRtl:pe,children:ge,testId:he,renderGridLinesInFront:ve,isDataXAxis:fe,contextMenuConfig:we,overview:me="off",defaultOverviewContentRenderer:Ie,isOverview:ye,yAxisSize:Se,overviewRenderer:Ce,...be}){const De=f.useTestId(he),Ae=n.useRef(null),Me=void 0!==De["data-testid"],Te="horizontal"===A,{xAxisPosition:Pe,yAxisPosition:Re}=u.getAxesPosition(T,Te,pe),{resolvedVars:je,cssContent:ke}=s.useCssVars(W),Ee=Array.from(Array(12)).map(((e,t)=>je[`color${t+1}`])),{textMeasureContent:Ve,getTextDimensions:Oe}=r.useTextDimensions();let Ge=u.getAvailSpace(e,i);if(ye&&Se){const e=Ge.width-Se,t=u.getOuterGaps(e,i);Ge.width-=Se-2*t.width,Ge.x+=Se-t.width}const Ne=null!=M?.timeAxisType,ze=u.getScrollBarSpace(Ne,Ge,se,Pe,me);let Be=ze.scrollDims;Ge=ze.availSpace;const Fe=new Set(S),{locale:Le}=v.useUser(),{xProps:Ue,xScale:We,xViewportExtent:He,xAxisExtent:Xe,xIndexExtent:qe,xAxisMinExtent:Ye,yViewportExtent:$e,yAxisExtent:_e,groupWidth:Ze,yProps:Je,yScale:Ke,yMaxDim:Qe,yMajorTicks:et,xMajorTicks:tt,yMinorTicks:ot,xMinorTicks:it,plotAreaSpace:rt,xSpace:st,ySpace:nt,idToDataMap:at,formatAxisLabel:dt,formatYValue:lt}=u.getLayoutInfo(j,z,X,M,T,Ge,Fe,D,Te,pe,H,je.labelFontSize,ne,Le,Oe,Me,fe);Be=u.updateScrollBarSpace(Be,"bottom"===Pe,pe,Qe);const ct=le(qe.startIndex,qe.endIndex),ut=ae(qe.startIndex,qe.endIndex),xt=Ue.tickLabels.map((({index:e})=>e+qe.startIndex)),{getNextNavGroup:pt,getDefaultNavGroup:gt}=function(e,t,o,i,r){const s=o=>{const r=e[t[o]].drilling;return("on"===i||"groupsOnly"===i)&&"off"!=r},n=e=>o.startIndex>t[e.groupIndex]?(e.groupIndex=0,e):o.endIndex<t[e.groupIndex]?(e.groupIndex=t.length-1,e):void 0;return{getDefaultNavGroup:n,getNextNavGroup:(e,o)=>{let i=n(e);return i||(i="ArrowRight"===o?r?F(e,s):B(e,t.length,s):r?B(e,t.length,s):F(e,s),i||e)}}}(z,xt,qe,Y,pe),{cursor:ht,yAxisCursor:vt,marqueeProps:ft,marqueeContent:wt,toggleButtonContent:mt,isPointInsideMarquee:It,dragMode:yt}=k.useChartMarquee({plotAreaSpace:rt,xSpace:st,ySpace:nt,dragMode:R,chartWidth:e,isMultiSelection:"multiple"===q,onViewportChange:K,isZoomScroll:"live"===se,xAxisExtent:Xe,xScale:We,selectedIds:w,getDataById:e=>at.get(e),onSelectionChange:_,viewportMax:He.viewportMax,viewportMin:He.viewportMin,isRtl:pe,xAxisMinExtent:Ye}),{touchResponse:St,touchResponseStyle:Ct}=E.useVisTouchResponse({type:"auto",supportsTouchDragGestures:"off"!==yt,rootRef:Ae}),{activeId:bt,focusedItemInfo:Dt,hoveredItemInfo:At,focusedGroupInfo:Mt,navProps:Tt,onFocusUpdate:Pt}=x.useChartNav({rootRef:Ae,getNextChartItem:ut,getNextNavGroup:pt,getDefaultNavGroup:gt,touchResponse:St,onItemHover:oe,onItemFocus:ie,drilling:Y,xIndexExtent:qe}),{tooltipContent:Rt,tooltipProps:jt}=function({getTextAndBounds:e,width:t,isRtl:o}){const[i,r]=n.useState(),s=n.useRef(),{tooltipContent:a,tooltipProps:d}=b.useTooltip({text:i,position:"top-start",offset:C.calculateOffset(o,t,s.current)});return{tooltipContent:a,tooltipProps:p.mergeProps({onPointerMove:t=>{const o=e(t.target);o?(s.current=o.bounds,r(o.text)):r(void 0)}},d)}}({getTextAndBounds:e=>{if(e!=Ae.current){const t=y.getElementData(Ae,e),o=t?.ojText;if(!o)return;if(o===M?.title)return{text:o,bounds:Ue.titleProps?.dims};if(o===T?.title)return{text:o,bounds:Je.titleProps?.dims};if(t?.ojGroupIndex){const e=parseInt(t.ojGroupIndex);return{bounds:Ue.tickLabels[e].dims,text:o}}}if(e===Ae.current&&Mt.isFocusVisible){const e=z[Mt.groupIndex];return{bounds:Ue.tickLabels[Mt.groupIndex].dims,text:e.name||e.id}}},width:e,isRtl:pe}),{selectDrillProps:kt,selectionContent:Et}=h.useSelectDrill({selectionMode:q,selection:[...w],onChange:_,rootRef:Ae,drilling:Y,onItemDrill:ee,onGroupDrill:te,focusedGroupInfo:Mt,focusedItemInfo:Dt,groups:z,getDataItem:X,getDataById:e=>at.get(e)}),Vt=c.useChartViewport({rootRef:Ae,width:e,height:i,xViewportExtent:He,yViewportExtent:$e,xAxisExtent:Xe,yAxisExtent:_e,xScale:We,yScale:Ke,plotAreaSpace:rt,isRtl:pe,isHoriz:Te,zoomAndScroll:se,onViewportChange:K}),Ot=ue(We,Ke,Ze,ct),Gt=de(We,Ke,Ze,ct),[Nt,zt]=n.useState(!1),{datatipContent:Bt,dataCursorContent:Ft,datatipProps:{"aria-describedby":Lt,...Ut}}=h.useChartDatatipAndCursor({series:j,groups:z,width:e,height:i,findNearest:Ot,plotAreaSpace:rt,onDataCursorPositionChange:Q,isDataCursorEnabled:Z,dataCursorPosition:$,dataCursorStyle:J,hoveredItemInfo:At,focusedItemInfo:Dt,getDataItem:X,getMarkerInfo:xe,getDataItemPos:Gt,datatip:re,valueFormats:ce,isHoriz:Te,touchResponse:St,isDisabled:Nt,xScale:We,yScale:Ke,timeAxisType:M?.timeAxisType,formatAxisLabel:dt,formatYValue:lt,hasXYValues:fe}),Wt=d.useId(),{startIndex:Ht,endIndex:Xt}=qe,qt=t.jsx(a.Gridlines,{plotArea:P,yMinorTicks:ot,xMinorTicks:it,xScale:We,yScale:Ke,isLog:"log"===T?.scale,yTicks:et,xTicks:tt,yAxisPosition:Re,isDataXAxis:fe}),Yt=j.length>0&&z.length>0,{contextMenuContent:$t,contextMenuProps:_t}=m.useChartContextMenu({isRtl:pe,width:e,height:i,getDataItemPosition:Gt,series:j,groups:z,getDataItem:X,focusedItemInfo:Dt,rootRef:Ae,xAxisTitle:M?.title,yAxisTitle:T?.title,contextMenuConfig:Yt?we:void 0,onContextMenuDismissed:e=>{"keyboard"===e&&Pt()}}),[Zt,Jt]=n.useState({accepted:void 0,type:""}),{draggable:Kt,dndProps:Qt,dndContent:eo}=I.useChartDnd({onDrag:be.onDrag,onDragStart:be.onDragStart,onDragEnd:be.onDragEnd,onDragEnter:be.onDragEnter,onDragLeave:be.onDragLeave,onDragOver:be.onDragOver,onDrop:be.onDrop,itemsDraggable:be.itemsDraggable,groupDraggable:be.groupDraggable,rootRef:Ae,groups:z,series:j,selectedIds:w,getDataItem:X,xSpace:st,ySpace:nt,plotAreaSpace:rt,setDragOver:Jt,setDatatipDisabled:zt,onSelectionChange:_}),to=p.mergeProps(Tt,kt,Vt,Ut,ft,jt,_t,Qt),oo="off"==me||"on"!==me&&me.renderer?void 0:Ie,{background:io,slidingWindow:ro}=Ce(rt);return t.jsxs("div",{tabIndex:ye?void 0:0,draggable:Kt,ref:Ae,"aria-activedescendant":bt,"aria-label":be["aria-label"],"aria-labelledby":be["aria-labelledby"],"aria-describedby":V.merge([be["aria-describedby"],Lt]),style:{...Ct},role:ye?void 0:"application",className:o.styles.baseChartStyle,"data-oj-private-selection-mode":Me?q:void 0,...De,...ye?{}:to,children:[t.jsxs("svg",{width:"100%",height:0!=Be.height&&"off"!=me?Math.ceil(100*(ze.availSpace.height+U))/i+"%":"100%",children:[t.jsx("clipPath",{id:`${Wt}`,children:t.jsx("rect",{...rt})}),io,t.jsx(a.PlotArea,{color:P?.color,dragOverStyle:"plotArea"!==Zt.type?"none":Zt.accepted?"accept":"reject",yScale:Ke,hasAxisLine:!ye,cursor:ht,isLog:"log"===T?.scale,availSpace:rt,xAxisPosition:Pe,isDataXAxis:fe,isRtl:pe}),!ve&&qt,t.jsx(l.Axis,{...Je,axisPosition:Re,isRtl:pe,cursor:vt,availSpace:nt,dragOverStyle:"yAxis"!==Zt.type?"none":Zt.accepted?"accept":"reject"}),t.jsx(l.Axis,{...Ue,isRtl:pe,axisPosition:Pe,isTextInteractive:e=>{if(null!=M?.timeAxisType)return!1;const t=z[e]?.drilling;return"on"===t||"off"!=t&&("on"===Y||"groupsOnly"===Y)},activeId:bt,cursor:ht,focusedGroupIndex:Mt.isFocusVisible?Mt.groupIndex:void 0,availSpace:st,dragOverStyle:"xAxis"!==Zt.type?"none":Zt.accepted?"accept":"reject"}),t.jsxs("g",{"clip-path":`url(#${Wt})`,children:[ge({xStartIndex:Ht,xEndIndex:Xt,colors:Ee,xScale:We,yScale:Ke,isPointInsideMarquee:It,defaultFontSize:je.labelFontSize,gapRatio:ct,activeId:bt,focusedItemInfo:Dt,hoveredItemInfo:At,getTextDimensions:Oe,groupWidth:Ze}),ve&&qt,Ft]}),ro,"live"===se&&!ye&&t.jsx(g.ScrollBar,{availSpace:Be,isRtl:pe,viewport:He,axisExtent:Xe,isHoriz:"bottom"===Pe}),wt]}),t.jsx(O.OverviewContext.Provider,{value:{yAxisSize:nt.width,isOverview:!0,width:e,height:Be.height,overviewRenderer:e=>{const{xScale:o,...i}=function(e,t,o,i,r,s){const n=[o.min,o.max],a=e?[s.x+s.width,s.x]:[s.x,s.x+s.width],d=new G.ScaleLinear(n,a),l=[r.min,r.max],c=[s.y+s.height,s.y],u=new G.ScaleLinear(l,c),x=d.transform(t.viewportMin),p=Math.abs(d.transform(t.viewportMax)-d.transform(t.viewportMin));return{windowX:e?x-p:x+.5,windowWidth:p-.5,windowY:u.transform(i.viewportMax),windowHeight:Math.abs(u.transform(i.viewportMax)-u.transform(i.viewportMin)),xScale:d,yScale:u}}(pe,He,Xe,$e,_e,e);return function(e,o,i,r,s,n,a){return{slidingWindow:t.jsx(N.OverviewSlidingWindow,{...r,...s,hasHandles:n,onWindowDimsChange:t=>{u.updateViewportFromOverview(e,o,s.windowX,s.windowWidth,t.deltaX,t.deltaWidth,i,a)}}),background:t.jsx(L,{...r,...s})}}(Xe,pe,o,e,i,!0,K)}},children:!ye&&"off"!==me&&oo&&t.jsx("div",{style:{width:e,height:Be.height},children:oo()})}),mt,Ve,ke,Bt,Rt,$t,Et,eo]})}e.Chart=function({width:e,height:r,...s}){const{isOverview:n,overviewRenderer:a,yAxisSize:d,width:l,height:c}=O.useOverviewContext();let u=e,x=r;return void 0===u&&n&&void 0!==l&&(u=`${l}px`),void 0===x&&n&&void 0!==c&&(x=`${c}px`),t.jsx(i.TrackResizeContainer,{width:u,height:x,class:o.dimensionStyle,children:(e,o)=>e||o?t.jsx(H,{width:e,height:o,...s,yAxisSize:d,isOverview:n,overviewRenderer:a}):void 0})}}));
//# sourceMappingURL=Chart-3621e125.js.map
