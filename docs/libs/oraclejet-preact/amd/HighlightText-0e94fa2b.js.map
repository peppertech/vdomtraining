{"version":3,"file":"HighlightText-0e94fa2b.js","sources":["../../src/UNSAFE_HighlightText/HighlightText.tsx"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { Fragment } from 'preact';\n\nimport { highlightStyles } from './HighlightTextStyles.css';\n\ntype Props = {\n  /**\n   * The text string to apply highlighting to.\n   */\n  children?: string;\n  /**\n   * The text string to match.\n   */\n  matchText?: string;\n};\n\n/**\n * Renders a text string with highlighting applied to the given text to match.\n */\nexport function HighlightText({ children = '', matchText = '' }: Props) {\n  return highlighter(children, matchText);\n}\n\nconst HIGHLIGHT_TOKEN = '__@@__';\nconst HIGHLIGHT_PATTERN = `${HIGHLIGHT_TOKEN}$&${HIGHLIGHT_TOKEN}`;\n\nfunction highlighter(unhighlightedText: string, matchText: string) {\n  if (matchText.length > 0 && unhighlightedText.length > 0) {\n    const escapedMatchText = escapeRegExp(matchText);\n    const highlightedText = unhighlightedText.replace(\n      new RegExp(escapedMatchText, 'gi'),\n      HIGHLIGHT_PATTERN\n    );\n    const tokens = highlightedText.split(HIGHLIGHT_TOKEN);\n    const nodes = tokens.map((current, index) =>\n      index % 2 == 0 ? current : <span class={highlightStyles}>{current}</span>\n    );\n    return <Fragment>{nodes}</Fragment>;\n  }\n  return <Fragment>{unhighlightedText}</Fragment>;\n}\n\nfunction escapeRegExp(str: string) {\n  // copied from:\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\n  return str.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n"],"names":["HIGHLIGHT_TOKEN","HIGHLIGHT_PATTERN","children","matchText","unhighlightedText","length","escapedMatchText","replace","nodes","RegExp","split","map","current","index","_jsx","jsx","class","highlightStyles","Fragment","highlighter"],"mappings":"yKA8BA,MAAMA,EAAkB,SAClBC,EAAoB,GAAGD,MAAoBA,oBAL3C,UAAwBE,SAAEA,EAAW,GAAEC,UAAEA,EAAY,KACzD,OAMF,SAAqBC,EAA2BD,GAC9C,GAAIA,EAAUE,OAAS,GAAKD,EAAkBC,OAAS,EAAG,CACxD,MAAMC,EAAgCH,EAiB7BI,QAAQ,wBAAyB,QAXpCC,EALkBJ,EAAkBG,QACxC,IAAIE,OAAOH,EAAkB,MAC7BL,GAE6BS,MAAMV,GAChBW,KAAI,CAACC,EAASC,IACjCA,EAAQ,GAAK,EAAID,EAAUE,EAAMC,IAAA,OAAA,CAAAC,MAAOC,EAAef,SAAGU,MAE5D,OAAOE,EAACC,IAAAG,EAAQA,SAAE,CAAAhB,SAAAM,GACnB,CACD,OAAOM,EAACC,IAAAG,EAAQA,SAAE,CAAAhB,SAAAE,GACpB,CApBSe,CAAYjB,EAAUC,EAC/B"}