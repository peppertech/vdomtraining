{"version":3,"file":"useSelectDrill-216c007c.js","sources":["../../src/hooks/PRIVATE_useChartEvents/useDatatipAndCursor.ts","../../src/hooks/PRIVATE_useChartEvents/useSelectDrill.ts"],"sourcesContent":["/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\nimport { useChartDataCursor } from '#hooks/PRIVATE_useChartDataCursor';\nimport { useChartDatatip } from '#hooks/PRIVATE_useChartDatatip';\nimport { LineAreaItem } from '#UNSAFE_LineAreaChart/lineAreaChart.types';\nimport { ScatterItem } from '#UNSAFE_ScatterChart/scatterChart.types';\nimport { BarItemData } from '#UNSAFE_BarChart/barChart.types';\n\ntype DataCursorProps = Parameters<typeof useChartDataCursor>[0];\ntype DatatipProps<\n  K extends string | number,\n  D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>\n> = Parameters<typeof useChartDatatip<K, D>>[0];\n\nexport function useChartDatatipAndCursor<\n  K extends string | number,\n  D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>\n>({\n  series,\n  groups,\n  width,\n  height,\n  findNearest,\n  getMarkerInfo,\n  onDataCursorPositionChange,\n  isDataCursorEnabled,\n  dataCursorPosition,\n  dataCursorStyle,\n  hoveredItemInfo,\n  focusedItemInfo,\n  getDataItem,\n  getDataItemPos,\n  datatip,\n  valueFormats,\n  isHoriz,\n  xScale,\n  yScale,\n  plotAreaSpace,\n  timeAxisType,\n  touchResponse,\n  isDisabled,\n  formatAxisLabel,\n  formatYValue,\n  hasXYValues\n}: DataCursorProps & DatatipProps<K, D>) {\n  const { datatipContent, datatipProps } = useChartDatatip<K, D>({\n    series,\n    groups,\n    width,\n    height,\n    isDataCursorEnabled,\n    dataCursorPosition,\n    hoveredItemInfo,\n    getDataItem,\n    getDataItemPos,\n    focusedItemInfo,\n    datatip,\n    valueFormats,\n    isHoriz,\n    xScale,\n    findNearest,\n    timeAxisType,\n    touchResponse,\n    isDisabled,\n    formatAxisLabel,\n    formatYValue,\n    hasXYValues\n  });\n\n  const { dataCursorContent, dataCursorProps } = useChartDataCursor({\n    touchResponse,\n    findNearest,\n    dataCursorPosition,\n    onDataCursorPositionChange,\n    isDataCursorEnabled,\n    dataCursorStyle,\n    isHoriz,\n    getMarkerInfo,\n    focusedItemInfo,\n    plotAreaSpace,\n    yScale,\n    xScale,\n    getDataItemPos\n  });\n\n  return {\n    datatipContent,\n    dataCursorContent,\n    datatipProps: mergeProps(dataCursorProps, datatipProps)\n  };\n}\n","/**\n * @license\n * Copyright (c) %FIRST_YEAR% %CURRENT_YEAR%, Oracle and/or its affiliates.\n * Licensed under The Universal Permissive License (UPL), Version 1.0\n * as shown at https://oss.oracle.com/licenses/upl/\n * @ignore\n */\n\nimport { getInfo } from '#utils/UNSAFE_visUtils';\nimport { useChartDrill } from '#hooks/PRIVATE_useChartDrill';\nimport { useSelection } from '#hooks/PRIVATE_useVisSelection/useSelection';\nimport { mergeProps } from '#utils/UNSAFE_mergeProps';\nimport { BarItemData } from '#UNSAFE_BarChart/barChart.types';\nimport { LineAreaItem } from '#UNSAFE_LineAreaChart/lineAreaChart.types';\nimport { ScatterItem } from '#UNSAFE_ScatterChart/scatterChart.types';\n\ntype DrillProps<K, D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>> = Parameters<\n  typeof useChartDrill<K, D>\n>[0];\n\ntype SelectionProps<K, D> = {\n  selection: K[];\n  onChange?: (detail: { ids: K[]; data: (D | undefined)[] }) => void;\n  getDataById: (id: K) => D | undefined;\n};\n\nexport function useSelectDrill<K, D extends LineAreaItem<K> | ScatterItem<K> | BarItemData<K>>({\n  selectionMode,\n  selection,\n  onChange,\n  rootRef,\n  drilling,\n  onItemDrill,\n  onGroupDrill,\n  focusedGroupInfo,\n  focusedItemInfo,\n  groups,\n  getDataItem,\n  getDataById\n}: DrillProps<K, D> & SelectionProps<K, D>) {\n  const idExtracter = (event: Event): K | undefined => {\n    const isItemFocused = focusedItemInfo.isCurrent;\n    const info =\n      isItemFocused && event.type === 'keyup'\n        ? focusedItemInfo\n        : getInfo(rootRef, event.target as HTMLElement);\n    return info && info.seriesIndex != null && info.groupIndex != null\n      ? getDataItem(info.seriesIndex, info.groupIndex)?.id\n      : undefined;\n  };\n\n  const { selectionProps, selectionContent } = useSelection<K, D>({\n    idExtracter,\n    isDrillEnabled: drilling === 'on',\n    selection,\n    selectionMode,\n    onChange,\n    getDataById\n  });\n\n  const drillProps = useChartDrill<K, D>({\n    rootRef,\n    selectionMode,\n    drilling,\n    focusedItemInfo,\n    focusedGroupInfo,\n    groups,\n    getDataItem,\n    onItemDrill,\n    onGroupDrill\n  });\n\n  return { selectDrillProps: mergeProps(selectionProps, drillProps), selectionContent };\n}\n"],"names":["series","groups","width","height","findNearest","getMarkerInfo","onDataCursorPositionChange","isDataCursorEnabled","dataCursorPosition","dataCursorStyle","hoveredItemInfo","focusedItemInfo","getDataItem","getDataItemPos","datatip","valueFormats","isHoriz","xScale","yScale","plotAreaSpace","timeAxisType","touchResponse","isDisabled","formatAxisLabel","formatYValue","hasXYValues","datatipContent","datatipProps","useChartDatatip","dataCursorContent","dataCursorProps","useChartDataCursor","mergeProps","selectionMode","selection","onChange","rootRef","drilling","onItemDrill","onGroupDrill","focusedGroupInfo","getDataById","selectionProps","selectionContent","useSelection","idExtracter","event","info","isCurrent","type","getInfo","target","seriesIndex","groupIndex","id","undefined","isDrillEnabled","drillProps","useChartDrill","selectDrillProps"],"mappings":"+QAqBM,UAGJA,OACAA,EAAMC,OACNA,EAAMC,MACNA,EAAKC,OACLA,EAAMC,YACNA,EAAWC,cACXA,EAAaC,2BACbA,EAA0BC,oBAC1BA,EAAmBC,mBACnBA,EAAkBC,gBAClBA,EAAeC,gBACfA,EAAeC,gBACfA,EAAeC,YACfA,EAAWC,eACXA,EAAcC,QACdA,EAAOC,aACPA,EAAYC,QACZA,EAAOC,OACPA,EAAMC,OACNA,EAAMC,cACNA,EAAaC,aACbA,EAAYC,cACZA,EAAaC,WACbA,EAAUC,gBACVA,EAAeC,aACfA,EAAYC,YACZA,IAEA,MAAMC,eAAEA,EAAcC,aAAEA,GAAiBC,kBAAsB,CAC7D5B,SACAC,SACAC,QACAC,SACAI,sBACAC,qBACAE,kBACAE,cACAC,iBACAF,kBACAG,UACAC,eACAC,UACAC,SACAb,cACAgB,eACAC,gBACAC,aACAC,kBACAC,eACAC,iBAGII,kBAAEA,EAAiBC,gBAAEA,GAAoBC,qBAAmB,CAChEV,gBACAjB,cACAI,qBACAF,6BACAC,sBACAE,kBACAO,UACAX,gBACAM,kBACAQ,gBACAD,SACAD,SACAJ,mBAGF,MAAO,CACLa,iBACAG,oBACAF,aAAcK,EAAAA,WAAWF,EAAiBH,GAE9C,mBCvEM,UAAyFM,cAC7FA,EAAaC,UACbA,EAASC,SACTA,EAAQC,QACRA,EAAOC,SACPA,EAAQC,YACRA,EAAWC,aACXA,EAAYC,iBACZA,EAAgB7B,gBAChBA,EAAeV,OACfA,EAAMW,YACNA,EAAW6B,YACXA,IAEA,MAWMC,eAAEA,EAAcC,iBAAEA,GAAqBC,eAAmB,CAC9DC,YAZmBC,IACnB,MACMC,EADgBpC,EAAgBqC,WAEJ,UAAfF,EAAMG,KACnBtC,EACAuC,EAAAA,QAAQd,EAASU,EAAMK,QAC7B,OAAOJ,GAA4B,MAApBA,EAAKK,aAA0C,MAAnBL,EAAKM,WAC5CzC,EAAYmC,EAAKK,YAAaL,EAAKM,aAAaC,QAChDC,CAAS,EAKbC,eAA6B,OAAbnB,EAChBH,YACAD,gBACAE,WACAM,gBAGIgB,EAAaC,EAAAA,cAAoB,CACrCtB,UACAH,gBACAI,WACA1B,kBACA6B,mBACAvC,SACAW,cACA0B,cACAC,iBAGF,MAAO,CAAEoB,iBAAkB3B,EAAUA,WAACU,EAAgBe,GAAad,mBACrE"}