define(['exports', 'preact/hooks', './useId-c9578d26', './useUser-85c781ea', './useTranslationBundle-516b1b83', './clientHints-030d25aa', './collectionUtils-6740111c', './classNames-08d99695', './mergeProps-bcfa6a92', './dndUtils-9d9ccdc5', './useReorderableContext-652356ad', './hooks/PRIVATE_useReorderable/themes/ReorderableItemStyles.css'], (function(e,r,t,s,o,n,a,l,c,i,u,d){"use strict";const f=(e,r,t,s,o)=>{const n=t>0?t-1:0,a=t<s?t+1:s;switch(e){case"ArrowLeft":return r?a:n;case"ArrowRight":return r?n:a;case"ArrowUp":if(o)return t<o?t:t-o;case"ArrowDown":if(o)return t>s-o?t:t+o;default:return}};e.useReorderable=function(e){const{onReorder:l,rootRef:c,itemSelector:i,isDisabled:u,columns:d}=e,y=r.useRef(),{direction:m}=s.useUser(),g="rtl"===m,b=o.useTranslationBundle("@oracle/oraclejet-preact"),v="reorderable_"+t.useId(),{deviceType:p,platform:D}=n.getClientHints(),K="windows"===D?b.accControlKey():b.accCommandKey(),R="phone"===p||"tablet"===p?"":b.accReorderInstructions({keyPressed:K}),[A,I]=r.useState(""),w=r.useCallback((e=>{if((e.metaKey||e.ctrlKey)&&e.shiftKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)&&l&&c.current){e.metaKey&&e.preventDefault();const r=[...a.getItemKeysArray(c.current,i)],t=r.length-1,s=r.indexOf(y.current),o=f(e.key,g,s,t,d);if(void 0!==o&&s!==o){const t=r[o]?.toString();r.splice(s,1),r.splice(o,0,y.current),l?.({reorderedKeys:r,itemKeys:[y.current],referenceKey:0===o?null:r[o-1]});const n="ArrowLeft"===e.key||"ArrowUp"===e.key?b.accPositionBefore():b.accPositionAfter(),a=y?.current?.toString();t&&n&&a&&I(b.accAnnounceMovedKey({itemKey:a,position:n,referenceKey:t}))}}}),[y,l,d,g,i,c,b]);return{reorderProps:u?{}:{onKeyDown:w},reorderContext:{currentItemKey:y},reorderInstructionsId:v,reorderInstructions:R,reorderStatus:A}},e.useReorderableItem=function(e){const{isDisabled:t,draggable:o,dragKey:n,setDragKey:f,onReorder:y,ref:m,rootRef:g,currentKey:b,itemStyles:v,getItem:p,setTransferData:D,itemSelector:K,isVertical:R}=e,A=p(),I=null!=A?a.getKey(A):void 0,[w,O]=r.useState(),h=r.useRef(),k=r.useRef(void 0),C=l.classNames([d.styles.itemDragger,v.itemDragger]),{direction:P}=s.useUser(),S="rtl"===P,T=r.useCallback((e=>{const r=p(),t=null!=r?a.getKey(r):void 0;if(m?.current&&f){k.current=i.createDragImage(m.current,C);const r=m.current.querySelector("[draggable=true]");null!=r?e?.dataTransfer?.setDragImage(k.current,r.offsetLeft+r.offsetWidth/2,r.offsetTop+r.offsetHeight/2):e?.dataTransfer?.setDragImage(k.current,0,0),D(e),f(t)}}),[p,D,C,m,f]),U=r.useCallback((e=>{n&&e.preventDefault()}),[n]),x=r.useCallback((()=>{f?.(void 0),document.body.removeChild(k.current)}),[f]),B=r.useCallback((()=>{if(g?.current){const e=p(),r=null!=e?a.getKey(e):void 0,t=a.getItemKeysArray(g.current,K);let s;const o=[...t],l=o.indexOf(n);if(null!=r){const e=o.indexOf(r);null!=l&&null!=e&&l!=e&&(s=S?l<e?"before"===w?e:e-1:"before"===w?e+1:e:l<e?"before"===w?e-1:e:"before"===w?e:e+1)}if(void 0!==s&&l!==s){const e=t[l];o.splice(l,1),o.splice(s,0,e),y?.({reorderedKeys:o,itemKeys:[n],referenceKey:0===s?null:o[s-1]}),O(void 0),f(void 0)}}}),[n,w,p,S,K,y,g,f]),{currentItemKey:L}=u.useReorderableContext();if(r.useEffect((()=>{b===I&&(L.current=b)}),[b,I,L]),t)return{};const E=null!=I&&I===n,N=l.classNames([d.styles.itemDnd,E&&d.styles.itemDragged]),V=l.classNames([v.itemOverlayFront,R?d.styles.itemOverlayVertical:d.styles.itemOverlay,"before"===w&&d.styles.itemOverlayBefore,"before"===w&&S&&d.styles.itemOverlayBeforeRtl]),H=l.classNames([v.itemOverlayFront,v.itemOverlayRear,R?d.styles.itemOverlayVertical:d.styles.itemOverlay,"after"===w&&d.styles.itemOverlayAfter,"after"===w&&S&&d.styles.itemOverlayAfterRtl]);return{rootProps:c.mergeProps({ref:m,draggable:o,onDragStart:T,onDragEnd:x,onDragOver:U,onDrop:B,isDisabled:t,class:N}),isDragged:E,overlayZoneBeforeProps:c.mergeProps({onDragEnter:()=>{O("before"),h.current="before"},onDragLeave:()=>{"before"===h.current&&O(void 0)},class:V}),overlayZoneAfterProps:c.mergeProps({onDragEnter:()=>{O("after"),h.current="after"},onDragLeave:()=>{"after"===h.current&&O(void 0)},class:H})}}}));
//# sourceMappingURL=useReorderableItem-7fd4d629.js.map
