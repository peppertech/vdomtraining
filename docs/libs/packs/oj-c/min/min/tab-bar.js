define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function a(e,a,t,r){const n=[...r];return e.forEach(((e,r)=>{const o={data:a[r],key:t[r]?.key,metadata:t[r]};e>=0?n.splice(e,0,o):n.push(o)})),n}async function t(e,a){const t=[],r=(await e.fetchByKeys({keys:a})).results;for(const e of a)if(r.has(e)){const a=r.get(e);t.push({...a,key:e})}return t}function r(e,a){return e.has(a)?e.get(a):-1}function n(e,a){const t=[...a];return e.sort(((e,a)=>a-e)),e.forEach((e=>{e<t.length&&t.splice(e,1)})),t}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=async function(e,o,i){const{add:s,remove:d,update:c}=e??{},l=new Map;for(const[e,a]of o.entries())l.set(a.key,e);let u=[...o];d&&(u=function(e,a,t){const{indexes:o,keys:i}=e;let s=[...a];o?.length?s=n(o,s):i?.size&&(s=function(e,a,t){const o=[];return e.forEach((e=>{const a=r(t,e);-1!==a&&o.push(a)})),n(o,a)}(i,s,t));return s}(d,u,l));s&&(u=await async function(e,n,o,i){const{addBeforeKeys:s,data:d,indexes:c,keys:l,metadata:u}=e;let b=[...n],y=d||[],f=u||[];if(0===y.length&&l?.size){const e=await t(i,l)??[];y=e.map((e=>e.data)),f=e.map((e=>e.metadata))}0===f.length&&l?.size&&(f=[...l].map((e=>({key:e}))));y.length&&(b=c?.length?a(c,y,f,b):s?.length?function(e,t,n,o){const i=[],s=[];return e.forEach((e=>{i.push(r(o,e)),s.push({key:e})})),a(i,t,s,n)}(s,y,b,o):function(e,t,r){return a(new Array(e.length).fill(-1),e,t,r)}(y,f,b));return b}(s,u,l,i));c&&(u=await async function(e,a,n,o){const{data:i,indexes:s,keys:d,metadata:c}=e;let l=[...a],u=i||[],b=c||[];if(0===u.length&&d?.size){const e=await t(o,d)??[];u=e.map((e=>e.data)),b=e.map((e=>e.metadata))}0===b.length&&d?.size&&(b=[...d].map((e=>({key:e}))));u.length&&(s?.length?l=function(e,a,t,r){const n=[...r];return e.forEach(((e,r)=>{if(n[e]){const o={data:a[r],key:t[r]?.key,metadata:t[r]};n.splice(e,1,o)}})),n}(s,u,b,l):d?.size&&(l=function(e,a,t,n,o){const i=[...n];return e.forEach((e=>{const n=r(o,e),s={data:a[n],key:t[n]?.key,metadata:t[n]};n>=0&&i.splice(n,1,s)})),i}(d,u,b,l,n)));return l}(c,u,l,i));return u}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,t,r){this.handleMutateEvent=async e=>{const{detail:t}=e,r=this.addBusyState("updating data from mutation event"),n=await(0,a.getUpdatedItemsFromMutationDetail)(t,this.currentData,this.dataProvider);r?.(),this.currentData=n,this.callback?.onDataUpdated?.(n)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=t,this.callback=r,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],a=this.dataProvider.fetchFirst({size:-1});for await(const t of a){const a=t.data.map(((e,a)=>({data:e,key:t.metadata[a].key,metadata:t.metadata[a]})));e.push(...a)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),a=await this._fetchData();this.callback?.onDataUpdated?.(a),e()}}})),define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,a,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=function({addBusyState:e,data:r}){const[n,o]=(0,a.useState)([]),i=(0,a.useRef)();return(0,a.useEffect)((()=>(void 0!==r&&(i.current=new t.DataProviderHandler(r,e,{onDataUpdated:o})),()=>{i.current?.destroy(),i.current=void 0})),[r,e]),{data:n}}})),define("oj-c/tab-bar/DataTabBarIcon",["require","exports","preact/jsx-runtime"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataTabBarIcon=function(e){const{icon:t}=e;if(!t)return null;if("class"===t.type)return(0,a.jsx)("span",{class:t.class});return null}})),define("oj-c/tab-bar/ContentRenderer",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/UNSAFE_TabBar","@oracle/oraclejet-preact/UNSAFE_OverflowTabBar","./DataTabBarIcon","@oracle/oraclejet-preact/UNSAFE_ReorderableTabBar"],(function(require,e,a,t,r,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabBarRenderer=function(e,r,n){const{data:i,truncation:l,...u}=e,b=u.display,{maxWidths:y}=(0,t.useProgressiveTruncation)({rootRef:n,isDisabled:!(l&&"progressive"===l)}),f="progressive"===l?i.map((e=>({...e,labelMaxWidth:y?.get(e.itemKey)}))):i,p=e=>"href"in e;return"enabled"===u.reorderable?(0,a.jsx)(o.ReorderableTabBar,{...u,onSelect:r,children:f.map((e=>null!=e&&(p(e)?c(e,b):e.isRemovable?d(e,b):s(e,b))))}):(0,a.jsx)(t.TabBar,{onSelect:r,ref:n,...u,children:f.map((e=>p(e)?c(e,b):e.isRemovable?d(e,b):s(e,b)))})},e.OverflowTabBarRenderer=function(e,t){const{data:n,truncation:o,...i}=e;return(0,a.jsx)(r.OverflowTabBar,{items:n,onSelect:t,truncation:o,...i})};const i=(e,a)=>{if(null!=e){let t="";return t="stacked"===a||"icons"===a?e>99?"99+":e.toString():e>999?"999+":e.toString(),t}},s=(e,r)=>(0,a.jsx)(t.TabBarItem,{icon:e.icon?(0,a.jsx)(n.DataTabBarIcon,{icon:e.icon}):void 0,badge:i(e.badge,r),itemKey:e.itemKey,label:e.label,metadata:e.metadata,severity:e.severity,"aria-controls":e.tabPanelId,labelMaxWidth:e.labelMaxWidth}),d=(e,r)=>(0,a.jsx)(t.RemovableTabBarItem,{icon:e.icon?(0,a.jsx)(n.DataTabBarIcon,{icon:e.icon}):void 0,"aria-controls":e.tabPanelId,badge:i(e.badge,r),itemKey:e.itemKey,label:e.label,metadata:e.metadata,severity:e.severity}),c=(e,r)=>(0,a.jsx)(t.TabBarLinkItem,{icon:e.icon?(0,a.jsx)(n.DataTabBarIcon,{icon:e.icon}):void 0,"aria-controls":e.tabPanelId,badge:i(e.badge,r),itemKey:e.itemKey,label:e.label,metadata:e.metadata,severity:e.severity,href:e.href})})),define("oj-c/tab-bar/DataTabBar",["require","exports","preact/jsx-runtime","preact","@oracle/oraclejet-preact/UNSAFE_ConveyorBelt","./ContentRenderer"],(function(require,e,a,t,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataTabBar=function(e){const{onRemove:o,onReorder:i,onSelect:s,selection:d,data:c=[],display:l,layout:u,edge:b,overflow:y,reorderable:f,truncation:p,"aria-label":h,"aria-labelledby":v}=e,m=(0,t.createRef)(),j=e=>{e.value&&s&&s(e)};return"popup"===y?(0,n.OverflowTabBarRenderer)({selection:d,onRemove:o,data:c,layout:u,display:l,edge:b,truncation:p,"aria-label":h,"aria-labelledby":v},j):"conveyor"===y?(0,a.jsx)(r.ConveyorBelt,{children:(0,n.TabBarRenderer)({onRemove:o,selection:d,layout:u,display:l,edge:b,"aria-label":h,"aria-labelledby":v,data:c,reorderable:f,truncation:p,onReorder:i},j,m)}):(0,n.TabBarRenderer)({onRemove:o,selection:d,layout:u,display:l,edge:b,"aria-label":h,"aria-labelledby":v,data:c,reorderable:f,truncation:p,onReorder:i},j,m)}})),define("oj-c/tab-bar/tab-bar",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","ojs/ojvcomponent","oj-c/hooks/UNSAFE_useDataProvider/useDataProvider","ojs/ojcontext","./DataTabBar","preact/hooks","preact/compat"],(function(require,e,a,t,r,n,o,i,s,d){"use strict";function c(e){return e&&"fetchFirst"in e}Object.defineProperty(e,"__esModule",{value:!0}),e.TabBar=void 0,e.TabBar=(0,r.registerCustomElement)("oj-c-tab-bar",(0,d.forwardRef)((({data:e=[],onOjBeforeSelect:t,onOjRemove:d,onOjReorder:l,onOjSelectionAction:u,onSelectionChanged:b,reorderable:y="disabled",overflow:f="hidden",truncation:p="none",selection:h,display:v="standard",layout:m="stretch",edge:j="top","aria-label":g,"aria-labelledby":B,id:D},R)=>{const P=(0,s.useRef)(null),_=(0,s.useCallback)(((e="MessageBanner: busyState")=>P.current?o.getContext(P.current).getBusyContext().addBusyState({description:e}):()=>{}),[]),{data:x}=(0,n.useDataProvider)({data:!Array.isArray(e)&&c(e)?e:void 0,addBusyState:_}),k=(0,s.useMemo)((()=>{let a=[];return Array.isArray(e)?a=e:c(e)&&(a=x.map((e=>({...e.data})))),a}),[e,x]);return(0,s.useImperativeHandle)(R,(()=>({_doReorderHelper:e=>(l&&l({reorderedKeys:e}),Promise.resolve())}))),(0,a.jsx)(r.Root,{id:D,ref:P,children:(0,a.jsx)(i.DataTabBar,{"aria-label":g,"aria-labelledby":B,data:k,onRemove:e=>{d&&d({key:e.value})},onReorder:e=>{l&&l({reorderedKeys:e.reorderedKeys})},onSelect:e=>{(async()=>{e:{if(t)try{await t({key:e.value})}catch{break e}if(u&&u({previousValue:h||"",value:e.value}),h===e.value)return;b&&b(e.value)}})()},reorderable:y,selection:h,display:v,edge:j,layout:m,overflow:f,truncation:p})})})),"TabBar",{properties:{data:{type:"Array<object>|DataProvider"},selection:{type:"string|number",writeback:!0},reorderable:{type:"string",enumValues:["disabled","enabled"]},overflow:{type:"string",enumValues:["hidden","popup","conveyor"]},display:{type:"string",enumValues:["standard","icons","stacked"]},layout:{type:"string",enumValues:["stretch","condense"]},edge:{type:"string",enumValues:["top","bottom"]},truncation:{type:"string",enumValues:["none","progressive"]}},events:{ojBeforeSelect:{cancelable:!0},ojRemove:{},ojReorder:{},ojSelectionAction:{}},extension:{_WRITEBACK_PROPS:["selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["aria-label","id","aria-labelledby"]},methods:{_doReorderHelper:{}}},{data:[],reorderable:"disabled",overflow:"hidden",truncation:"none",display:"standard",layout:"stretch",edge:"top"},{"@oracle/oraclejet-preact":t.default})})),define("oj-c/tab-bar",["require","exports","oj-c/tab-bar/tab-bar"],(function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabBar=void 0,Object.defineProperty(e,"TabBar",{enumerable:!0,get:function(){return a.TabBar}})}));
//# sourceMappingURL=tab-bar.js.map