define("oj-c/hooks/UNSAFE_useVisBusyState/useVisBusyState",["require","exports","preact/hooks","ojs/ojcontext"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVisBusyState=function(e,i=""){const o=(0,t.useCallback)((t=>{if(e.current){return n.getContext(e.current).getBusyContext().addBusyState({description:`${i}${t}`})}return()=>{}}),[i,e]);return(0,t.useMemo)((()=>({addBusyState:o})),[o])}})),define("oj-c/legend-item/legend-item",["require","exports","@oracle/oraclejet-preact/translationBundle","ojs/ojvcomponent"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LegendItem=e.LegendItemDefaults=void 0,e.LegendItemDefaults={markerShape:"square",symbolType:"marker",borderColor:"",categories:[],lineStyle:"solid",drilling:"inherit"},e.LegendItem=(0,n.registerCustomElement)("oj-c-legend-item",(({markerShape:t=e.LegendItemDefaults.markerShape,symbolType:n=e.LegendItemDefaults.symbolType,borderColor:i=e.LegendItemDefaults.borderColor,categories:o=e.LegendItemDefaults.categories,lineStyle:a=e.LegendItemDefaults.lineStyle,drilling:r=e.LegendItemDefaults.drilling,...s})=>null),"LegendItem",{properties:{text:{type:"string"},categories:{type:"Array<string>"},symbolType:{type:"string",enumValues:["marker","image","line","lineWithMarker"]},source:{type:"string"},color:{type:"string"},borderColor:{type:"string"},lineStyle:{type:"string",enumValues:["dashed","solid","dotted"]},lineWidth:{type:"number"},markerShape:{type:"string",enumValues:["square","circle","ellipse","diamond","human","plus","star","triangleDown","triangleUp","rectangle"]},markerColor:{type:"string"},shortDesc:{type:"string"},drilling:{type:"string",enumValues:["inherit","off","on"]}}},{markerShape:"square",symbolType:"marker",borderColor:"",categories:[],lineStyle:"solid",drilling:"inherit"},{"@oracle/oraclejet-preact":t.default})})),define("oj-c/legend-section/legend-section",["require","exports","@oracle/oraclejet-preact/translationBundle","ojs/ojvcomponent"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LegendSection=e.LegendSectionDefaults=void 0,e.LegendSectionDefaults={text:""},e.LegendSection=(0,n.registerCustomElement)("oj-c-legend-section",(({text:t=e.LegendSectionDefaults.text,...n})=>null),"LegendSection",{properties:{text:{type:"string"}}},{text:""},{"@oracle/oraclejet-preact":t.default})})),define("oj-c/legend/utils",["require","exports","../legend-item/legend-item","../legend-section/legend-section"],(function(require,e,t,n){"use strict";function i(e,n,i,a,r,s,l){const d={...t.LegendItemDefaults,...e};return{borderColor:d.borderColor,lineWidth:d.lineWidth,markerColor:d.markerColor||d.color||void 0,lineColor:d.color||void 0,markerShape:"line"!==d.symbolType?d.markerShape:"none",lineStyle:"marker"!==d.symbolType?d.lineStyle:"none","aria-label":[d.shortDesc,a].filter(Boolean).join(" ")||void 0,datatip:d.shortDesc,source:d.source,text:d.text,actionable:"on"===s||l?"inherit":o(r,d.drilling),id:`${n};${i}`}}Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultSymbolDims=void 0,e.getTextStyles=function(e){return{textFontStyle:e?.fontStyle,textFontSize:e?.fontSize,textFontColor:e?.color,textFontWeight:e?.fontWeight,textDecoration:e?.textDecoration,textFontFamily:e?.fontFamily}},e.getSectionStyles=function(e){return{sectionTitleColor:e?.color,sectionTitleFontFamily:e?.fontFamily,sectionTitleFontSize:e?.fontSize,sectionTitleFontStyle:e?.fontStyle,sectionTitleFontWeight:e?.fontWeight,sectionTitleTextDecoration:e?.textDecoration}},e.isLegendInteractive=function(e,t,n,i,o){return"on"===e||"on"===t||"dim"===n||i||o},e.parseItemIdx=function(e){return e.split(";").map((e=>parseInt(e,10)))},e.transformItem=i,e.transformSection=function(e,t,o,a){const r={...n.LegendSectionDefaults,...e};return{items:r.items.map(((e,n)=>i(e,o,n,t,a))),title:r.text||r.title,id:`${o}`}},e.isTreeDataProvider=function(e){if(e&&e.getChildDataProvider)return!0;return!1},e.isLegendItemDrillable=o;function o(e,t){let n="inherit";return"on"===t||("off"===t?n="off":"on"===e?n="inherit":"off"===e&&(n="off")),n}e.getDefaultSymbolDims=(e,t)=>e||t?e?t?{width:t,height:e}:{width:e,height:e}:{width:t,height:t}:{width:void 0,height:void 0}})),define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function t(e,t,n,i){const o=[...i];return e.forEach(((e,i)=>{const a={data:t[i],key:n[i]?.key,metadata:n[i]};e>=0?o.splice(e,0,a):o.push(a)})),o}async function n(e,t){const n=[],i=(await e.fetchByKeys({keys:t})).results;for(const e of t)if(i.has(e)){const t=i.get(e);n.push({...t,key:e})}return n}function i(e,t){return e.has(t)?e.get(t):-1}function o(e,t){const n=[...t];return e.sort(((e,t)=>t-e)),e.forEach((e=>{e<n.length&&n.splice(e,1)})),n}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=async function(e,a,r){const{add:s,remove:l,update:d}=e??{},c=new Map;for(const[e,t]of a.entries())c.set(t.key,e);let u=[...a];l&&(u=function(e,t,n){const{indexes:a,keys:r}=e;let s=[...t];a?.length?s=o(a,s):r?.size&&(s=function(e,t,n){const a=[];return e.forEach((e=>{const t=i(n,e);-1!==t&&a.push(t)})),o(a,t)}(r,s,n));return s}(l,u,c));s&&(u=await async function(e,o,a,r){const{addBeforeKeys:s,data:l,indexes:d,keys:c,metadata:u}=e;let g=[...o],m=l||[],h=u||[];if(0===m.length&&c?.size){const e=await n(r,c)??[];m=e.map((e=>e.data)),h=e.map((e=>e.metadata))}0===h.length&&c?.size&&(h=[...c].map((e=>({key:e}))));m.length&&(g=d?.length?t(d,m,h,g):s?.length?function(e,n,o,a){const r=[],s=[];return e.forEach((e=>{r.push(i(a,e)),s.push({key:e})})),t(r,n,s,o)}(s,m,g,a):function(e,n,i){return t(new Array(e.length).fill(-1),e,n,i)}(m,h,g));return g}(s,u,c,r));d&&(u=await async function(e,t,o,a){const{data:r,indexes:s,keys:l,metadata:d}=e;let c=[...t],u=r||[],g=d||[];if(0===u.length&&l?.size){const e=await n(a,l)??[];u=e.map((e=>e.data)),g=e.map((e=>e.metadata))}0===g.length&&l?.size&&(g=[...l].map((e=>({key:e}))));u.length&&(s?.length?c=function(e,t,n,i){const o=[...i];return e.forEach(((e,i)=>{if(o[e]){const a={data:t[i],key:n[i]?.key,metadata:n[i]};o.splice(e,1,a)}})),o}(s,u,g,c):l?.size&&(c=function(e,t,n,o,a){const r=[...o];return e.forEach((e=>{const o=i(a,e),s={data:t[o],key:n[o]?.key,metadata:n[o]};o>=0&&r.splice(o,1,s)})),r}(l,u,g,c,o)));return c}(d,u,c,r));return u}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,n,i){this.handleMutateEvent=async e=>{const{detail:n}=e,i=this.addBusyState("updating data from mutation event"),o=await(0,t.getUpdatedItemsFromMutationDetail)(n,this.currentData,this.dataProvider);i?.(),this.currentData=o,this.callback?.onDataUpdated?.(o)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=n,this.callback=i,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],t=this.dataProvider.fetchFirst({size:-1});for await(const n of t){const t=n.data.map(((e,t)=>({data:e,key:n.metadata[t].key,metadata:n.metadata[t]})));e.push(...t)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),t=await this._fetchData();this.callback?.onDataUpdated?.(t),e()}}})),define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=function({addBusyState:e,data:i}){const[o,a]=(0,t.useState)([]),r=(0,t.useRef)();return(0,t.useEffect)((()=>(void 0!==i&&(r.current=new n.DataProviderHandler(i,e,{onDataUpdated:a})),()=>{r.current?.destroy(),r.current=void 0})),[i,e]),{data:o}}})),define("oj-c/utils/UNSAFE_vizUtils/TemplateHandler",["require","exports","preact/compat"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processTemplate=e.processNodeTemplate=void 0;const n=e=>Object.keys(e).reduce(((t,n)=>{if("children"===n)return t;const{prop:i,value:o}=((e,t)=>"__oj_private_do_not_use_value"===e?{prop:"value",value:"symbol"!=typeof t?t:void 0}:"__oj_private_do_not_use_checked"===e?{prop:"checked",value:"symbol"!=typeof t?t:void 0}:{prop:e,value:t})(n,e[n]);return t[(e=>e[0].toLowerCase()!==e[0]?e.toLowerCase().replace(/-./g,(e=>e[1].toUpperCase())):e)(i)]=o,t}),{});e.processNodeTemplate=(e,i,o,a)=>{const r=i(o),s=t.Children.toArray(r).find((e=>{if(e&&e.props)return(e.props?.children?.type||e.type)===a})),l=s?.type===a?s.props:(s?.props?.children).props,d=e.key||e.metadata?.key;return l?{...n(l),key:d,id:d,_itemData:e.data}:{key:d,id:d,_itemData:e.data}};e.processTemplate=(t,n,i,o)=>t.map(((t,a)=>(0,e.processNodeTemplate)(t,n,i(t,a),o)))})),define("oj-c/hooks/UNSAFE_useVizCategories/useVizCategories",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useCategories"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVizCategories=function(e,n,i,o,a="any",r="all",s,l){const{ids:d,updateCategories:c}=(0,t.useCategories)({items:e,getCategoriesFromItem:n,initialCategories:i,matchCriteria:a,replace:!1,onCategoriesChange:s}),{ids:u,updateCategories:g}=(0,t.useCategories)({items:e,getCategoriesFromItem:n,initialCategories:o,matchCriteria:r,replace:!0,onCategoriesChange:l});return{hiddenIds:d,updateHidden:c,highlightedIds:u,updateHighlighted:g}}})),define("oj-c/legend/events",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLegendEventsHandler=void 0;e.getLegendEventsHandler=(e,n,i,o,a,r="off",s,l)=>({itemActionHandler:n=>{"string"==typeof n.itemId&&e&&i(n.itemId);const[o,d]=(0,t.parseItemIdx)(n.itemId);"off"!==(0,t.isLegendItemDrillable)(r,s(d,o))&&l?.({id:a([o,d])})},inputHandler:e=>{"string"==typeof e.itemId&&n&&o(e.itemId)}})})),define("oj-c/legend/useSectionData",["require","exports","preact/compat","../utils/UNSAFE_vizUtils/TemplateHandler","../hooks/UNSAFE_useDataProvider/useDataProvider","ojs/ojflattenedtreedataproviderview","ojs/ojkeyset"],(function(require,e,t,n,i,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSectionData=function(e,r,s,l){const d=(0,t.useRef)(e),c=(0,t.useRef)(new o(e,{expanded:new a.AllKeySetImpl}));d.current!=e&&(d.current=e,c.current=new o(d.current,{expanded:new a.AllKeySetImpl}));const{data:u}=(0,i.useDataProvider)({data:c.current,addBusyState:r}),g=[];if(u.length>0){let e;for(const t of u){const i={key:t.metadata?.key,data:t.data,index:t.metadata.indexFromParent};if(0===t?.metadata?.treeDepth){e=t;let o=t.data;const a=[];s&&(o=(0,n.processNodeTemplate)(t,s,i,"oj-c-legend-section")),g.push({...o,items:a})}else{const o={...i,parentKey:t.metadata?.parentKey,parentData:e?.data},a=l?(0,n.processNodeTemplate)(t,l,o,"oj-c-legend-item"):t.data;g[g.length-1].items.push({key:t.metadata?.key,...a})}}}const m=new Map(u.map((e=>[e.key,e.data])));return{sections:g,idToDPItemMap:m}}})),define("oj-c/utils/PRIVATE_ItemsMenu/menu-item-icon",["require","exports","preact/jsx-runtime"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuItemIcon=function(e){return"img"===e.icon.type?(0,t.jsx)("img",{src:e.icon.src}):(0,t.jsx)("span",{class:e.icon.class})}})),define("oj-c/utils/PRIVATE_ItemsMenu/menu-select-items",["require","exports","preact/jsx-runtime","./menu-item-icon","@oracle/oraclejet-preact/UNSAFE_Menu"],(function(require,e,t,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuSelectItems=function(e){return(0,t.jsx)(t.Fragment,{children:e.items.map((e=>e&&(0,t.jsx)(i.SelectMenuItem,{label:e.label,isDisabled:e.disabled,endIcon:e.endIcon?(0,t.jsx)(n.MenuItemIcon,{icon:e.endIcon}):void 0,value:e.value})))})}})),define("oj-c/utils/PRIVATE_ItemsMenu/items-menu",["require","exports","preact/jsx-runtime","./menu-item-icon","./menu-select-items","@oracle/oraclejet-preact/UNSAFE_Menu"],(function(require,e,t,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemsMenu=void 0;e.ItemsMenu=({items:a=[],selection:r={},onSelectionChanged:s,onOjMenuAction:l,isSplitMenu:d=!1,onOjMenuSelection:c})=>{const u=e=>{const t=r[e];return t&&"string"==typeof t?t:void 0},g=e=>{const t=r[e];return Array.isArray(t)?t:[]};function m(e,t,n){return i=>{n?.({value:i.value,menuSelectionGroupKey:e}),c?.({value:i.value,menuSelectionGroupKey:e}),s?.(((e,t,n)=>{const i={...e};return Array.isArray(n)&&0===n.length?delete i[t]:i[t]=n,i})(t,e,i.value))}}return(0,t.jsx)(t.Fragment,{children:a.map((a=>{switch(a.type){case"divider":case"separator":return(0,t.jsx)(o.MenuSeparator,{});case"submenu":return a.items&&a.label&&!d?(0,t.jsx)(o.Submenu,{label:a.label,itemKey:a.key,children:(0,t.jsx)(e.ItemsMenu,{items:a.items,selection:r,onSelectionChanged:s,onOjMenuSelection:c,onOjMenuAction:l})}):void 0;case"selectsingle":return a.items&&a.key&&!d?(0,t.jsx)(o.SelectSingleMenuGroup,{groupKey:a.key,value:a.selection||u(a.key),onCommit:m(a.key,r,a.onSelection),children:(0,t.jsx)(i.MenuSelectItems,{items:a.items})}):void 0;case"selectmultiple":return a.items&&a.key&&!d?(0,t.jsx)(o.SelectMultipleMenuGroup,{groupKey:a.key,value:a.selection||g(a.key),onCommit:m(a.key,r,a.onSelection),children:(0,t.jsx)(i.MenuSelectItems,{items:a.items})}):void 0;case void 0:case"item":return a.label?(0,t.jsx)(o.MenuItem,{itemKey:a.key,label:a.label,isDisabled:a.disabled,variant:d?void 0:a.variant,startIcon:!d&&a.startIcon&&(0,t.jsx)(n.MenuItemIcon,{icon:a.startIcon}),endIcon:!d&&a.endIcon&&(0,t.jsx)(n.MenuItemIcon,{icon:a.endIcon}),onAction:(h=a.key,p=a.onAction,()=>{p?.(),l?.({key:h})})}):void 0;default:return}var h,p}))})}})),define("oj-c/hooks/PRIVATE_useVisContextMenu/useVisContextMenu",["require","exports","preact/jsx-runtime","preact/hooks","../../utils/PRIVATE_ItemsMenu/items-menu"],(function(require,e,t,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVisContextMenu=function(e,o,a,r,s){const l=(0,n.useCallback)((n=>{let l=s?s(n):n;if(!s&&"item"===n.type){const t=n.data?.id,i=e.get(t);l={...n,itemData:i}}const d=o?.items(l);return(0,t.jsx)(i.ItemsMenu,{items:d,onOjMenuAction:({key:e})=>{a?.({menuItemKey:e,contextMenuContext:l})},onOjMenuSelection:({value:e,menuSelectionGroupKey:t})=>{r?.({value:e,contextMenuContext:l,menuSelectionGroupKey:t})}})}),[o?.items,a,r,e,s]);return{preactContextMenuConfig:(0,n.useMemo)((()=>({itemsRenderer:l,accessibleLabel:o?.accessibleLabel})),[o?.accessibleLabel,l])}}})),define("oj-c/legend/legend",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","preact/hooks","preact/compat","@oracle/oraclejet-preact/UNSAFE_Legend","@oracle/oraclejet-preact/hooks/UNSAFE_useVisBusyStateContext","../hooks/UNSAFE_useVisBusyState/useVisBusyState","@oracle/oraclejet-preact/UNSAFE_SectionalLegend","ojs/ojvcomponent","./utils","../hooks/UNSAFE_useDataProvider/useDataProvider","../utils/UNSAFE_vizUtils/TemplateHandler","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle","preact/compat","../hooks/UNSAFE_useVizCategories/useVizCategories","./events","./useSectionData","oj-c/hooks/PRIVATE_useVisContextMenu/useVisContextMenu","css!oj-c/legend/legend-styles.css"],(function(require,e,t,n,i,o,a,r,s,l,d,c,u,g,m,h,p,y,f,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SectionalLegend=e.LinearLegend=e.Legend=void 0;const S=[],j=[],x={},b={};e.Legend=(0,d.registerCustomElement)("oj-c-legend",(0,o.forwardRef)((({data:n=null,drilling:o="off",halign:a="start",valign:l="top",hiddenCategories:u=j,hideAndShowBehavior:g="off",highlightedCategories:m=S,hoverBehavior:h="none",orientation:p="vertical",symbolHeight:y=0,symbolWidth:f=0,textStyle:v=x,sectionTitleStyle:C=b,sectionTitleHalign:I="start",contextMenuConfig:M,onOjContextMenuAction:k,onOjContextMenuSelection:_,itemTemplate:D,sectionTemplate:A,onOjDrill:L,...P},T)=>{const E=(0,i.useRef)(null),B=(0,s.useVisBusyState)(E,"oj-c-legend: "),O=(0,i.useRef)(null);(0,i.useImperativeHandle)(T,(()=>({_getPreferredSize:(e,t)=>O.current._getPreferredSize(e,t)})));const H=(0,c.isTreeDataProvider)(n),{width:F,height:V}=(0,c.getDefaultSymbolDims)(y,f);return(0,t.jsx)(d.Root,{ref:E,children:(0,t.jsx)(r.VisBusyStateContext.Provider,{value:B,children:H?(0,t.jsx)(e.SectionalLegend,{...P,onOjDrill:L,data:n,halign:a,valign:l,sectionTemplate:A,itemTemplate:D,addBusyState:B.addBusyState,drilling:o,hiddenCategories:u,hideAndShowBehavior:g,highlightedCategories:m,hoverBehavior:h,orientation:p,symbolHeight:V,symbolWidth:F,textStyle:v,sectionTitleStyle:C,sectionTitleHalign:I,sectionalLegendRef:O,contextMenuConfig:M,onOjContextMenuAction:k,onOjContextMenuSelection:_}):(0,t.jsx)(e.LinearLegend,{...P,onOjDrill:L,data:n,valign:l,halign:a,itemTemplate:D,drilling:o,hiddenCategories:u,hideAndShowBehavior:g,highlightedCategories:m,hoverBehavior:h,orientation:p,symbolHeight:V,symbolWidth:V,addBusyState:B.addBusyState,textStyle:v,linearLegendRef:O,contextMenuConfig:M,onOjContextMenuAction:k,onOjContextMenuSelection:_})})})})),"Legend",{properties:{data:{type:"DataProvider|null"},drilling:{type:"string",enumValues:["off","on"]},halign:{type:"string",enumValues:["center","end","start"]},hiddenCategories:{type:"Array<string>",writeback:!0},hideAndShowBehavior:{type:"string",enumValues:["off","on"]},highlightedCategories:{type:"Array<string>",writeback:!0},hoverBehavior:{type:"string",enumValues:["none","dim"]},orientation:{type:"string",enumValues:["horizontal","vertical"]},symbolHeight:{type:"number"},symbolWidth:{type:"number"},textStyle:{type:"object",properties:{color:{type:"string"},fontFamily:{type:"string"},fontSize:{type:"string"},fontStyle:{type:"string"},fontWeight:{type:"string"},textDecoration:{type:"string"}}},valign:{type:"string",enumValues:["top","bottom","middle"]},sectionTitleStyle:{type:"object",properties:{color:{type:"string"},fontFamily:{type:"string"},fontSize:{type:"string"},fontStyle:{type:"string"},fontWeight:{type:"string"},textDecoration:{type:"string"}}},sectionTitleHalign:{type:"string",enumValues:["center","end","start"]},contextMenuConfig:{type:"object",properties:{accessibleLabel:{type:"string"},items:{type:"function"}}}},slots:{itemTemplate:{data:{}},sectionTemplate:{data:{}}},events:{ojDrill:{},ojContextMenuAction:{bubbles:!0},ojContextMenuSelection:{bubbles:!0}},extension:{_WRITEBACK_PROPS:["hiddenCategories","highlightedCategories"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["aria-label","aria-describedby","aria-labelledby"]},methods:{_getPreferredSize:{}}},{data:null,drilling:"off",halign:"start",valign:"top",hiddenCategories:[],hideAndShowBehavior:"off",highlightedCategories:[],hoverBehavior:"none",orientation:"vertical",symbolHeight:0,symbolWidth:0,textStyle:{},sectionTitleStyle:{},sectionTitleHalign:"start"},{"@oracle/oraclejet-preact":n.default},{consume:[]});e.LinearLegend=({hoverBehavior:e,hideAndShowBehavior:n,hiddenCategories:i,highlightedCategories:o,onHiddenCategoriesChanged:r,onHighlightedCategoriesChanged:s,drilling:l,itemTemplate:d,sectionTemplate:f,textStyle:S,orientation:j,symbolHeight:x,symbolWidth:b,valign:C,halign:I,contextMenuConfig:M,onOjContextMenuAction:k,onOjContextMenuSelection:_,...D})=>{const{data:A}=(0,u.useDataProvider)({data:D.data?D.data:void 0,addBusyState:D.addBusyState}),L=new Map(A.map((e=>[e.key,e.data]))),P="dim"===e,T="on"===n,E=(0,m.useTranslationBundle)("@oracle/oraclejet-preact"),B=d?(0,g.processTemplate)(A,d,((e,t)=>({data:e.data,key:e.key,index:t})),"oj-c-legend-item"):A.map((e=>e.data)),O=(0,h.useMemo)((()=>B.some((e=>"on"===e.drilling))),[B]),H=!!M,F=(0,h.useMemo)((()=>B.map(((e,t)=>(0,c.transformItem)(e,0,t,"on"===l&&"off"!==e.drilling||"on"===e.drilling?E.vis_drillable():"",l,n,H)))),[B,l,E]),V=(0,c.isLegendInteractive)(l,n,e,O,H),w=(0,h.useMemo)((()=>{const e=[];return(T||P)&&B.forEach(((t,n)=>{e.push({id:F[n].id,categories:t.categories||[]})})),e}),[F,B,T,P]),{hiddenIds:R,updateHidden:U,highlightedIds:N,updateHighlighted:z}=(0,p.useVizCategories)(w,(e=>e.categories),i,o,"any","any",r,s),{itemActionHandler:q,inputHandler:W}=(0,y.getLegendEventsHandler)(T,P,U,z,(e=>{const[t,n]=e,i=B[n];return(i.categories||[]).length>0?i.categories:A[n].metadata?.key}),l,(e=>{const t=B[e];return t?.drilling||"inherit"}),D.onOjDrill),K=(0,c.getTextStyles)(S),{preactContextMenuConfig:G}=(0,v.useVisContextMenu)(L,M,k,_,(e=>{if("item"!==e.type)return e;const t=e.data.id,[n,i]=(0,c.parseItemIdx)(t),o=L.get(A[i].metadata?.key);return{data:{...F[i],id:A[i].metadata?.key},itemData:o,itemIndexPath:[i],type:"item"}})),{data:$,...Y}=D;return 0!==F.length?(0,t.jsx)(a.Legend,{ref:D.linearLegendRef,orientation:j,symbolHeight:x,valign:C,halign:I,symbolWidth:b,isReadOnly:!V,hideAndShowBehavior:n,hoverBehavior:e,hiddenIds:T?R:void 0,highlightedIds:P?N:void 0,items:F,onItemAction:q,onItemHover:W,onItemFocus:W,contextMenuConfig:M?G:void 0,...Y,...K}):null};e.SectionalLegend=({hoverBehavior:e,hideAndShowBehavior:n,hiddenCategories:i,highlightedCategories:o,onHiddenCategoriesChanged:a,onHighlightedCategoriesChanged:r,drilling:s,itemTemplate:d,sectionTemplate:u,textStyle:g,sectionTitleStyle:S,orientation:j,symbolHeight:x,symbolWidth:b,valign:C,halign:I,contextMenuConfig:M,onOjContextMenuAction:k,onOjContextMenuSelection:_,...D})=>{const A="dim"===e,L="on"===n,P=(0,m.useTranslationBundle)("@oracle/oraclejet-preact"),{sections:T,idToDPItemMap:E}=(0,f.useSectionData)(D.data,D.addBusyState,u,d),B=T,O=(0,h.useMemo)((()=>B.some((e=>e.items.some((e=>"on"===e.drilling))))),[B]),H=(0,h.useMemo)((()=>B.map(((e,t)=>(0,c.transformSection)(e,"on"===s?P.vis_drillable():"",t)))),[B,s,P]),F=!!M,V=(0,c.isLegendInteractive)(s,n,e,O,F),w=(0,h.useMemo)((()=>{const e=[];return(L||A)&&B.forEach(((t,n)=>{t.items.forEach(((t,i)=>{e.push({id:H[n].items[i].id,categories:t.categories||[]})}))})),e}),[B,L,A,H]),{hiddenIds:R,updateHidden:U,highlightedIds:N,updateHighlighted:z}=(0,p.useVizCategories)(w,(e=>e.categories),i,o,"any","any",a,r),{itemActionHandler:q,inputHandler:W}=(0,y.getLegendEventsHandler)(L,A,U,z,(e=>{const[t,n]=e,i=B[t].items[n];return i.categories?i.categories:i.key}),s,((e,t)=>{const n=B[t].items[e];return n?.drilling||"inherit"}),D.onOjDrill),{preactContextMenuConfig:K}=(0,v.useVisContextMenu)(E,M,k,_,(e=>{if("item"!==e.type)return e;const t=e.data.id,[n,i]=(0,c.parseItemIdx)(t),o=E.get(B[n].items[i].key);return{data:{...H[n].items[i],id:B[n].items[i].key},itemData:o,itemIndexPath:[n,i],type:"item"}})),G=(0,c.getTextStyles)(g),$=(0,c.getSectionStyles)(S);return 0!==H.length?(0,t.jsx)(l.SectionalLegend,{ref:D.sectionalLegendRef,sections:H,orientation:j,sectionTitleHAlign:D.sectionTitleHalign,symbolHeight:x,symbolWidth:b,isReadOnly:!V,valign:C,halign:I,hideAndShowBehavior:n,hoverBehavior:e,"aria-label":D["aria-label"],"aria-describedBy":D["aria-describedby"],"aria-labelledBy":D["aria-labelledby"],hiddenIds:L?R:void 0,highlightedIds:A?N:void 0,onItemAction:q,onItemHover:W,onItemFocus:W,contextMenuConfig:M?K:void 0,...G,...$}):null}})),define("oj-c/legend",["require","exports","oj-c/legend/legend"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Legend=void 0,Object.defineProperty(e,"Legend",{enumerable:!0,get:function(){return t.Legend}})}));
//# sourceMappingURL=legend.js.map