define("oj-c/hooks/UNSAFE_useVisBusyState/useVisBusyState",["require","exports","preact/hooks","ojs/ojcontext"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVisBusyState=function(e,o=""){const n=(0,t.useCallback)((t=>{if(e.current){return a.getContext(e.current).getBusyContext().addBusyState({description:`${o}${t}`})}return()=>{}}),[o,e]);return(0,t.useMemo)((()=>({addBusyState:n})),[n])}})),define("oj-c/tag-cloud-item/tag-cloud-item",["require","exports","@oracle/oraclejet-preact/translationBundle","ojs/ojvcomponent"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCloudItem=e.TagCloudItemDefaults=void 0,e.TagCloudItemDefaults={categories:[]},e.TagCloudItem=(0,a.registerCustomElement)("oj-c-tag-cloud-item",(({categories:t=e.TagCloudItemDefaults.categories,...a})=>null),"TagCloudItem",{properties:{categories:{type:"Array<string>"},color:{type:"string"},label:{type:"string"},value:{type:"number|null"},url:{type:"string"},shortDesc:{type:"string"}}},{categories:[]},{"@oracle/oraclejet-preact":t.default})})),define("oj-c/tag-cloud/utils",["require","exports","../tag-cloud-item/tag-cloud-item"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transformItem=function(e){const a={...t.TagCloudItemDefaults,...e};return{color:a.color,accessibleLabel:a.shortDesc,value:a.value,label:a.label,id:null!=a.key?a?.key:a.id,role:a.url?"link":void 0}},e.executeLink=function(e){const t=window.open(e,"_blank");t&&t.focus()}})),define("oj-c/hooks/UNSAFE_useVizCategories/useVizCategories",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useCategories"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVizCategories=function(e,a,o,n,i="any",s="all",r,u){const{ids:c,updateCategories:l}=(0,t.useCategories)({items:e,getCategoriesFromItem:a,initialCategories:o,matchCriteria:i,replace:!1,onCategoriesChange:r}),{ids:d,updateCategories:p}=(0,t.useCategories)({items:e,getCategoriesFromItem:a,initialCategories:n,matchCriteria:s,replace:!0,onCategoriesChange:u});return{hiddenIds:c,updateHidden:l,highlightedIds:d,updateHighlighted:p}}})),define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function t(e,t,a,o){const n=[...o];return e.forEach(((e,o)=>{const i={data:t[o],key:a[o]?.key,metadata:a[o]};e>=0?n.splice(e,0,i):n.push(i)})),n}async function a(e,t){const a=[],o=(await e.fetchByKeys({keys:t})).results;for(const e of t)if(o.has(e)){const t=o.get(e);a.push({...t,key:e})}return a}function o(e,t){return e.has(t)?e.get(t):-1}function n(e,t){const a=[...t];return e.sort(((e,t)=>t-e)),e.forEach((e=>{e<a.length&&a.splice(e,1)})),a}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=async function(e,i,s){const{add:r,remove:u,update:c}=e??{},l=new Map;for(const[e,t]of i.entries())l.set(t.key,e);let d=[...i];u&&(d=function(e,t,a){const{indexes:i,keys:s}=e;let r=[...t];i?.length?r=n(i,r):s?.size&&(r=function(e,t,a){const i=[];return e.forEach((e=>{const t=o(a,e);-1!==t&&i.push(t)})),n(i,t)}(s,r,a));return r}(u,d,l));r&&(d=await async function(e,n,i,s){const{addBeforeKeys:r,data:u,indexes:c,keys:l,metadata:d}=e;let p=[...n],m=u||[],h=d||[];if(0===m.length&&l?.size){const e=await a(s,l)??[];m=e.map((e=>e.data)),h=e.map((e=>e.metadata))}0===h.length&&l?.size&&(h=[...l].map((e=>({key:e}))));m.length&&(p=c?.length?t(c,m,h,p):r?.length?function(e,a,n,i){const s=[],r=[];return e.forEach((e=>{s.push(o(i,e)),r.push({key:e})})),t(s,a,r,n)}(r,m,p,i):function(e,a,o){return t(new Array(e.length).fill(-1),e,a,o)}(m,h,p));return p}(r,d,l,s));c&&(d=await async function(e,t,n,i){const{data:s,indexes:r,keys:u,metadata:c}=e;let l=[...t],d=s||[],p=c||[];if(0===d.length&&u?.size){const e=await a(i,u)??[];d=e.map((e=>e.data)),p=e.map((e=>e.metadata))}0===p.length&&u?.size&&(p=[...u].map((e=>({key:e}))));d.length&&(r?.length?l=function(e,t,a,o){const n=[...o];return e.forEach(((e,o)=>{if(n[e]){const i={data:t[o],key:a[o]?.key,metadata:a[o]};n.splice(e,1,i)}})),n}(r,d,p,l):u?.size&&(l=function(e,t,a,n,i){const s=[...n];return e.forEach((e=>{const n=o(i,e),r={data:t[n],key:a[n]?.key,metadata:a[n]};n>=0&&s.splice(n,1,r)})),s}(u,d,p,l,n)));return l}(c,d,l,s));return d}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,a,o){this.handleMutateEvent=async e=>{const{detail:a}=e,o=this.addBusyState("updating data from mutation event"),n=await(0,t.getUpdatedItemsFromMutationDetail)(a,this.currentData,this.dataProvider);o?.(),this.currentData=n,this.callback?.onDataUpdated?.(n)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=a,this.callback=o,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],t=this.dataProvider.fetchFirst({size:-1});for await(const a of t){const t=a.data.map(((e,t)=>({data:e,key:a.metadata[t].key,metadata:a.metadata[t]})));e.push(...t)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),t=await this._fetchData();this.callback?.onDataUpdated?.(t),e()}}})),define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=function({addBusyState:e,data:o}){const[n,i]=(0,t.useState)([]),s=(0,t.useRef)();return(0,t.useEffect)((()=>(void 0!==o&&(s.current=new a.DataProviderHandler(o,e,{onDataUpdated:i})),()=>{s.current?.destroy(),s.current=void 0})),[o,e]),{data:n}}})),define("oj-c/utils/UNSAFE_vizUtils/TemplateHandler",["require","exports","preact/compat"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processTemplate=e.processNodeTemplate=void 0;const a=e=>Object.keys(e).reduce(((t,a)=>{if("children"===a)return t;const{prop:o,value:n}=((e,t)=>"__oj_private_do_not_use_value"===e?{prop:"value",value:"symbol"!=typeof t?t:void 0}:"__oj_private_do_not_use_checked"===e?{prop:"checked",value:"symbol"!=typeof t?t:void 0}:{prop:e,value:t})(a,e[a]);return t[(e=>e[0].toLowerCase()!==e[0]?e.toLowerCase().replace(/-./g,(e=>e[1].toUpperCase())):e)(o)]=n,t}),{});e.processNodeTemplate=(e,o,n,i)=>{const s=o(n),r=t.Children.toArray(s).find((e=>{if(e&&e.props)return(e.props?.children?.type||e.type)===i})),u=r?.type===i?r.props:(r?.props?.children).props,c=e.key||e.metadata?.key;return u?{...a(u),key:c,id:c,_itemData:e.data}:{key:c,id:c,_itemData:e.data}};e.processTemplate=(t,a,o,n)=>t.map(((t,i)=>(0,e.processNodeTemplate)(t,a,o(t,i),n)))})),define("oj-c/utils/PRIVATE_ItemsMenu/menu-item-icon",["require","exports","preact/jsx-runtime"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuItemIcon=function(e){return"img"===e.icon.type?(0,t.jsx)("img",{src:e.icon.src}):(0,t.jsx)("span",{class:e.icon.class})}})),define("oj-c/utils/PRIVATE_ItemsMenu/menu-select-items",["require","exports","preact/jsx-runtime","./menu-item-icon","@oracle/oraclejet-preact/UNSAFE_Menu"],(function(require,e,t,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuSelectItems=function(e){return(0,t.jsx)(t.Fragment,{children:e.items.map((e=>e&&(0,t.jsx)(o.SelectMenuItem,{label:e.label,isDisabled:e.disabled,endIcon:e.endIcon?(0,t.jsx)(a.MenuItemIcon,{icon:e.endIcon}):void 0,value:e.value})))})}})),define("oj-c/utils/PRIVATE_ItemsMenu/items-menu",["require","exports","preact/jsx-runtime","./menu-item-icon","./menu-select-items","@oracle/oraclejet-preact/UNSAFE_Menu"],(function(require,e,t,a,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemsMenu=void 0;e.ItemsMenu=({items:i=[],selection:s={},onSelectionChanged:r,onOjMenuAction:u,isSplitMenu:c=!1,onOjMenuSelection:l})=>{const d=e=>{const t=s[e];return t&&"string"==typeof t?t:void 0},p=e=>{const t=s[e];return Array.isArray(t)?t:[]};function m(e,t,a){return o=>{a?.({value:o.value,menuSelectionGroupKey:e}),l?.({value:o.value,menuSelectionGroupKey:e}),r?.(((e,t,a)=>{const o={...e};return Array.isArray(a)&&0===a.length?delete o[t]:o[t]=a,o})(t,e,o.value))}}return(0,t.jsx)(t.Fragment,{children:i.map((i=>{switch(i.type){case"divider":case"separator":return(0,t.jsx)(n.MenuSeparator,{});case"submenu":return i.items&&i.label&&!c?(0,t.jsx)(n.Submenu,{label:i.label,itemKey:i.key,children:(0,t.jsx)(e.ItemsMenu,{items:i.items,selection:s,onSelectionChanged:r,onOjMenuSelection:l,onOjMenuAction:u})}):void 0;case"selectsingle":return i.items&&i.key&&!c?(0,t.jsx)(n.SelectSingleMenuGroup,{groupKey:i.key,value:i.selection||d(i.key),onCommit:m(i.key,s,i.onSelection),children:(0,t.jsx)(o.MenuSelectItems,{items:i.items})}):void 0;case"selectmultiple":return i.items&&i.key&&!c?(0,t.jsx)(n.SelectMultipleMenuGroup,{groupKey:i.key,value:i.selection||p(i.key),onCommit:m(i.key,s,i.onSelection),children:(0,t.jsx)(o.MenuSelectItems,{items:i.items})}):void 0;case void 0:case"item":return i.label?(0,t.jsx)(n.MenuItem,{itemKey:i.key,label:i.label,isDisabled:i.disabled,variant:c?void 0:i.variant,startIcon:!c&&i.startIcon&&(0,t.jsx)(a.MenuItemIcon,{icon:i.startIcon}),endIcon:!c&&i.endIcon&&(0,t.jsx)(a.MenuItemIcon,{icon:i.endIcon}),onAction:(h=i.key,g=i.onAction,()=>{g?.(),u?.({key:h})})}):void 0;default:return}var h,g}))})}})),define("oj-c/hooks/PRIVATE_useVisContextMenu/useVisContextMenu",["require","exports","preact/jsx-runtime","preact/hooks","../../utils/PRIVATE_ItemsMenu/items-menu"],(function(require,e,t,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVisContextMenu=function(e,n,i,s,r){const u=(0,a.useCallback)((a=>{let u=r?r(a):a;if(!r&&"item"===a.type){const t=a.data?.id,o=e.get(t);u={...a,itemData:o}}const c=n?.items(u);return(0,t.jsx)(o.ItemsMenu,{items:c,onOjMenuAction:({key:e})=>{i?.({menuItemKey:e,contextMenuContext:u})},onOjMenuSelection:({value:e,menuSelectionGroupKey:t})=>{s?.({value:e,contextMenuContext:u,menuSelectionGroupKey:t})}})}),[n?.items,i,s,e,r]);return{preactContextMenuConfig:(0,a.useMemo)((()=>({itemsRenderer:u,accessibleLabel:n?.accessibleLabel})),[n?.accessibleLabel,u])}}})),define("oj-c/tag-cloud/tag-cloud",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","preact/hooks","preact/compat","@oracle/oraclejet-preact/UNSAFE_TagCloud","@oracle/oraclejet-preact/hooks/UNSAFE_useVisBusyStateContext","../hooks/UNSAFE_useVisBusyState/useVisBusyState","./utils","@oracle/oraclejet-preact/UNSAFE_VisStatusMessage","../hooks/UNSAFE_useVizCategories/useVizCategories","ojs/ojvcomponent","./utils","../hooks/UNSAFE_useDataProvider/useDataProvider","../utils/UNSAFE_vizUtils/TemplateHandler","oj-c/hooks/PRIVATE_useVisContextMenu/useVisContextMenu","css!oj-c/tag-cloud/tag-cloud-styles.css"],(function(require,e,t,a,o,n,i,s,r,u,c,l,d,p,m,h,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCloud=void 0;const y=[],f=[],v=[];e.TagCloud=(0,d.registerCustomElement)("oj-c-tag-cloud",(function({hiddenCategories:e=v,data:a=null,highlightedCategories:j=y,hoverBehavior:b="none",layout:C="rectangular",selection:M=f,selectionMode:_="none",highlightMatch:k="all",contextMenuConfig:x,onOjContextMenuAction:S,onOjContextMenuSelection:I,...P}){const A=(0,o.useRef)(null),E=(0,r.useVisBusyState)(A,"oj-c-tag-cloud: "),{data:D}=(0,m.useDataProvider)({data:a||void 0,addBusyState:E.addBusyState}),T="dim"===b,V=(0,o.useCallback)(((e,t)=>({data:e.data,key:e.key,index:t})),[]),O=new Map(D.map((e=>[e.key,e.data]))),B=(0,n.useMemo)((()=>P.itemTemplate?(0,h.processTemplate)(D,P.itemTemplate,V,"oj-c-tag-cloud-item"):D.map((e=>e.data))),[P.itemTemplate,D,V]),[F,N]=(0,n.useMemo)((()=>{const e=new Map,t=B.map((t=>(null==t.id&&null==t.key||e.set(t.id||t.key,t),(0,p.transformItem)(t))));return[e,t]}),[B]),[U,w]=(0,n.useMemo)((()=>{let e=!1;const t=B.map(((t,a)=>(e=e||null!=t.url,{id:N[a].id,categories:t.categories||[]})));return[e,t]}),[N,B]),{hiddenIds:R,highlightedIds:L,updateHighlighted:z}=(0,l.useVizCategories)(w,(e=>e.categories),e,j,"any",k,P.onHiddenCategoriesChanged,P.onHighlightedCategoriesChanged),q=e=>{T&&z(e.id)},H=null!=P.datatip?e=>({content:P.datatip?.({id:e.data.id}),borderColor:void 0}):void 0,{preactContextMenuConfig:K}=(0,g.useVisContextMenu)(O,x,S,I);return(0,t.jsx)(d.Root,{ref:A,children:(0,t.jsx)(s.VisBusyStateContext.Provider,{value:E,children:a&&0!==B.length?(0,t.jsx)(i.TagCloud,{layout:C,datatip:H,highlightedIds:T?L:void 0,accessibleLabel:P["aria-label"],"aria-describedBy":P["aria-describedby"],"aria-labelledBy":P["aria-labelledby"],items:N.filter((e=>!R?.includes(e.id))),selectionMode:_,onSelectionChange:e=>{P.onSelectionChanged?.(e.ids)},onItemAction:U?e=>{const t=F.get(e.id);t?.url&&(0,u.executeLink)(t.url)}:void 0,onItemFocus:q,onItemHover:q,selectedIds:"none"===_?void 0:M,width:"100%",height:"100%",contextMenuConfig:x?K:void 0}):(0,t.jsx)(c.VisNoData,{"aria-label":P["aria-label"],"aria-describedby":P["aria-describedby"],"aria-labelledby":P["aria-labelledby"]})})})}),"TagCloud",{properties:{data:{type:"DataProvider|null"},datatip:{type:"function"},hiddenCategories:{type:"Array<string>",writeback:!0},touchResponse:{type:"string",enumValues:["auto","touchStart"]},highlightMatch:{type:"string",enumValues:["all","any"]},highlightedCategories:{type:"Array<string>",writeback:!0},hoverBehavior:{type:"string",enumValues:["none","dim"]},layout:{type:"string",enumValues:["cloud","rectangular"]},selectionMode:{type:"string",enumValues:["none","multiple","single"]},selection:{type:"Array<any>",writeback:!0},contextMenuConfig:{type:"object",properties:{accessibleLabel:{type:"string"},items:{type:"function"}}}},slots:{itemTemplate:{data:{}}},events:{ojContextMenuAction:{bubbles:!0},ojContextMenuSelection:{bubbles:!0}},extension:{_WRITEBACK_PROPS:["hiddenCategories","highlightedCategories","selection"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["aria-label","aria-describedby","aria-labelledby"]}},{hiddenCategories:[],data:null,highlightedCategories:[],hoverBehavior:"none",layout:"rectangular",selection:[],selectionMode:"none",highlightMatch:"all"},{"@oracle/oraclejet-preact":a.default})})),define("oj-c/tag-cloud",["require","exports","oj-c/tag-cloud/tag-cloud"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagCloud=void 0,Object.defineProperty(e,"TagCloud",{enumerable:!0,get:function(){return t.TagCloud}})}));
//# sourceMappingURL=tag-cloud.js.map