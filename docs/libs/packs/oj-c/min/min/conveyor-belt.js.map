{"version":3,"file":"conveyor-belt.js","names":["define","require","exports","jsx_runtime_1","UNSAFE_ConveyorBelt_1","Object","defineProperty","value","ConveyorBeltItem","context","itemTemplate","itemContext","data","item","jsx","children","addItemsAtIndices","indices","itemsToAdd","itemMetadataToAdd","items","returnItems","forEach","addAtIndex","index","addItem","key","metadata","splice","push","async","fetchDataByKeys","dataProvider","keys","fetchedData","results","fetchByKeys","has","result","get","getIndexByKey","keyIndexMap","removeItemsAtIndices","sort","a","b","length","getUpdatedItemsFromMutationDetail","detail","currentData","add","remove","update","Map","entries","set","mutatedData","indexes","size","indicesToRemove","removeItemsAtKeys","removeItemsFromDetail","addBeforeKeys","treatedData","treatedMetaData","fetchResults","map","beforeKeys","addIndices","addItemsBeforeKeys","Array","fill","addItemsAtEnd","addItemsFromDetail","itemsToUpdate","itemMetadataToUpdate","updateAtIndex","updateItemsAtIndices","updateItemsAtKeys","updateItemsFromDetail","utils_1","DataProviderHandler","constructor","addBusyState","callback","this","handleMutateEvent","event","resolver","updatedData","onDataUpdated","handleRefreshEvent","_fetchDataAndNotify","addEventListener","destroy","undefined","removeEventListener","_fetchData","asyncIterable","fetchFirst","contextArray","slice","hooks_1","DataProviderHandler_1","useDataProvider","setFetchedData","useState","dataProviderHandler","useRef","useEffect","current","translationBundle_1","Context","UNSAFE_useUser_1","ojvcomponent_1","compat_1","conveyorBeltItem_1","useDataProvider_1","ConveyorBelt","ConveyorBeltPreactWrapper","forwardRef","onScrollPositionChanged","rest","ref","conveyorRef","useImperativeHandle","scrollElementIntoView","element","scrollPrevious","scrollNext","isFromDataProvider","isDataProvider","dataArr","useMemo","clonedOptions","isArray","childrenContent","dataObj","registerCustomElement","orientation","rootRef","conveyorBeltRef","busyContextRef","getContext","getBusyContext","useCallback","desc","description","direction","useUser","Root","onKeyDown","target","preventDefault","slots","properties","scrollPosition","type","writeback","arrowVisibility","enumValues","extension","_WRITEBACK_PROPS","_READ_ONLY_PROPS","methods","default","conveyor_belt_1","enumerable"],"sources":["0"],"mappings":"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"}