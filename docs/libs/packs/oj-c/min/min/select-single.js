define("oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText",["require","exports","preact/hooks"],(function(require,e,t){"use strict";function a(e,t,a,r,s,n){const i="compact"!==n?a?.definition:void 0;return e?.instruction||("none"===s?.validatorHint?void 0:t)||i||("none"===s?.converterHint?void 0:r)}function r(e){if(!e.length)return;return e.map((e=>"function"==typeof e.getHint?e.getHint():void 0)).filter(Boolean).join("\n")}Object.defineProperty(e,"__esModule",{value:!0}),e.useAssistiveText=function({addBusyState:e,converter:s,displayOptions:n,help:i,helpHints:o,userAssistanceDensity:u,validators:l}){const[d,c]=(0,t.useState)(l&&l.length?r(l):void 0),p=(0,t.useRef)();(0,t.useEffect)((()=>{if(!l||!l.length)return void c(void 0);c(r(l));const t=l.map((e=>e.hint)).filter(Boolean),a=p.current=Symbol(),s=e?.("resolving the async validator hints");Promise.allSettled(t).then((e=>{c((t=>{const r=e.map((e=>"fulfilled"===e.status?e.value:void 0)).filter(Boolean);return a===p.current&&r.length?[t,...r].join("\n"):t})),s?.()}))}),[l]);const f="compact"!==u?o?.sourceText:o?.definition||o?.sourceText;return{assistiveText:a(i,d,o,s?.getHint?.()??void 0,n,u),helpSourceLink:o?.source,helpSourceText:f}}})),define("oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useMergedFormContext=function({propContainerReadonly:e,propLabelWrapping:a,propReadonly:r,propUserAssistanceDensity:s}){const n=(0,t.useFormContext)(),i=s??n.userAssistanceDensity,o=r??n.isReadonly,{isFormLayout:u,isReadonly:l,labelWrapping:d,...c}=n;return{containerProps:{...c,isFormLayout:void 0!==e||u,isReadonly:e??l,labelWrapping:a??d},readonlyValue:o,uadValue:i}}})),define("oj-c/hooks/UNSAFE_useEditableValue/utils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.treatNull=e.normalizeValue=e.isShallowEqual=e.hasErrorMessages=e.getVirtualKeyboardHintFromConverter=e.createMessageFromError=void 0;e.createMessageFromError=e=>"function"==typeof e.getMessage?{severity:"error",detail:e.getMessage().detail}:{severity:"error",detail:e.message};e.treatNull=(e,t)=>null===e?t:e;e.normalizeValue=e=>"string"==typeof e&&""===e?null:e;e.isShallowEqual=(e,t)=>e===t||e.length===t.length&&e.every(((e,a)=>e===t[a]));e.hasErrorMessages=e=>!!e&&e.some((e=>"error"===e.severity));e.getVirtualKeyboardHintFromConverter=e=>{let t;if(e&&e.resolvedOptions){const a=e.resolvedOptions();t=a?.virtualKeyboardHint??"text"}else t="text";return t}})),define("oj-c/hooks/UNSAFE_useEditableValue/converterUtils",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.format=function(e,a,r){if(function(e){return null===e}(e))return{result:"success",value:a};try{return{result:"success",value:r.format(e)}}catch(e){return{result:"failure",error:(0,t.createMessageFromError)(e)}}},e.parse=function(e,a,r){if(void 0===e)return{result:"success",value:null};if(s=e,""===s||null===s)return{result:"success",value:e};var s;try{return{result:"success",value:a.parse(e)}}catch(e){return{result:"failure",error:r?.(e)??(0,t.createMessageFromError)(e)}}}})),define("oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useStaleIdentity=function(){const e=(0,t.useRef)(new Map);return{setStaleIdentity:(0,t.useCallback)((t=>{const a=Symbol();return e.current.set(t,a),{isStale:()=>a!==e.current.get(t)}}),[])}}})),define("oj-c/hooks/UNSAFE_useEditableValue/reducer",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reducer=function(e,t){const a=e.customMessages??[],r=e.hiddenMessages,s=e.componentMessages,n=e.shownMessages;switch(t.type){case"UPDATE_DISPLAY_VALUE":return{...e,displayValue:t.payload};case"UPDATE_VALID":return{...e,valid:t.payload};case"UPDATE_VALUE":return{...e,value:t.payload};case"UPDATE_TRANSIENT_VALUE":return{...e,transientValue:t.payload};case"UPDATE_PREVIOUS_CONVERTER":return{...e,previousConverter:t.payload};case"UPDATE_PREVIOUS_DEFERRED_VALIDATORS":return{...e,previousDeferredValidators:t.payload};case"UPDATE_PREVIOUS_DISABLED":return{...e,previousDisabled:t.payload};case"UPDATE_PREVIOUS_READONLY":return{...e,previousReadonly:t.payload};case"UPDATE_PREVIOUS_VALIDATORS":return{...e,previousValidators:t.payload};case"UPDATE_PREVIOUS_VALUE":return{...e,previousValue:t.payload};case"UPDATE_COMPONENT_MESSAGES":return{...e,componentMessages:t.payload,shownMessages:[...a,...t.payload]};case"UPDATE_HIDDEN_MESSAGES":return{...e,hiddenMessages:t.payload};case"UPDATE_CUSTOM_MESSAGES":return{...e,customMessages:t.payload,shownMessages:[...t.payload,...s]};case"CLEAR_ALL_MESSAGES":return{...e,shownMessages:[],hiddenMessages:[],customMessages:[],componentMessages:[]};case"ADD_COMPONENT_MESSAGE":return{...e,componentMessages:[...s,t.payload],shownMessages:[...n,t.payload]};case"SHOW_HIDDEN_MESSAGES":return 0===r.length?e:{...e,hiddenMessages:[],shownMessages:[...a,...s,...r]};default:return e}},e.addComponentMessage=function(e,t){e({type:"ADD_COMPONENT_MESSAGE",payload:t})},e.clearAllMessages=function(e,t,{onMessagesCustomChanged:a}){e({type:"CLEAR_ALL_MESSAGES"}),a?.([])},e.showHiddenMessages=function(e){e({type:"SHOW_HIDDEN_MESSAGES"})},e.updateComponentMessages=function(e,t){e({type:"UPDATE_COMPONENT_MESSAGES",payload:t})},e.updateCustomMessages=function(e,t){e({type:"UPDATE_CUSTOM_MESSAGES",payload:t})},e.updateDisplayValue=function(e,t,{onRawValueChanged:a}){e({type:"UPDATE_DISPLAY_VALUE",payload:t}),a?.(t)},e.updateHiddenMessages=function(e,t){e({type:"UPDATE_HIDDEN_MESSAGES",payload:t})},e.updatePreviousConverter=function(e,t){e({type:"UPDATE_PREVIOUS_CONVERTER",payload:t})},e.updatePreviousDeferredValidators=function(e,t){e({type:"UPDATE_PREVIOUS_DEFERRED_VALIDATORS",payload:t})},e.updatePreviousDisabled=function(e,t){e({type:"UPDATE_PREVIOUS_DISABLED",payload:t})},e.updatePreviousReadonly=function(e,t){e({type:"UPDATE_PREVIOUS_READONLY",payload:t})},e.updatePreviousValidators=function(e,t){e({type:"UPDATE_PREVIOUS_VALIDATORS",payload:t})},e.updatePreviousValue=function(e,t){e({type:"UPDATE_PREVIOUS_VALUE",payload:t})},e.updateTransientValue=function(e,t,{onTransientValueChanged:a}){e({type:"UPDATE_TRANSIENT_VALUE",payload:t}),a?.(t)},e.updateValidStatus=function(e,t,{onValidChanged:a}){e({type:"UPDATE_VALID",payload:t}),a?.(t)},e.updateValue=function(e,t,{onValueChanged:a}){e({type:"UPDATE_VALUE",payload:t}),a?.(t)}})),define("oj-c/hooks/UNSAFE_useEditableValue/validationUtils",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateAsync=function({validators:e,value:a}){const r=(e,a)=>{try{const r=e.validate(a);if(r instanceof Promise)return r.then((()=>{}),(e=>(0,t.createMessageFromError)(e)))}catch(e){return(0,t.createMessageFromError)(e)}},s=[],n=[];for(const t of e){const e=r(t,a);void 0!==e&&(e instanceof Promise?n.push(e):s.push(e))}return{errors:s,maybeErrorPromises:n}},e.validateSync=function({validators:e,value:a}){const r=[];for(const s of e)try{s.validate(a)}catch(e){r.push((0,t.createMessageFromError)(e))}if(r.length)return{result:"failure",errors:r};return{result:"success"}}})),define("oj-c/hooks/UNSAFE_useEditableValue/useEditableValue",["require","exports","preact/hooks","./converterUtils","./utils","oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity","./reducer","./validationUtils"],(function(require,e,t,a,r,s,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=function({addBusyState:e,ariaDescribedBy:o,converter:u,defaultDisplayValue:l,deferredValidators:d,disabled:c,displayOptions:p,messagesCustom:f,onDisplayValueChanged:v,onMessagesCustomChanged:y,onRawValueChanged:m,onTransientValueChanged:h,onValidChanged:g,onValueChanged:S,translateConverterParseError:E,readonly:b,validators:V,value:_}){const C=(0,t.useRef)(!0),{setStaleIdentity:P}=(0,s.useStaleIdentity)(),[D,A]=(0,t.useReducer)(n.reducer,{shownMessages:[],hiddenMessages:[],customMessages:f,componentMessages:[],value:_,valid:"pending"},(e=>{const t=u?(0,a.format)(_,l,u):{result:"success",value:(0,r.treatNull)(_,l)};return{...e,displayValue:"success"===t.result?t.value:l}})),T=(0,t.useRef)(),M=(0,t.useCallback)((e=>{e!==T.current&&(T.current=e,g?.(e))}),[g]),j=(0,t.useCallback)(((e,t)=>(e(A,t,{onMessagesCustomChanged:y,onRawValueChanged:m,onTransientValueChanged:h,onValidChanged:M,onValueChanged:S}),!0)),[A,y,m,h,M,S]),L=(0,t.useCallback)((e=>{const t="string"==typeof e?e.trim():e;return(0,i.validateSync)({validators:d??[],value:t})}),[d]),R=(0,t.useCallback)((e=>{j(n.updateValue,e)}),[j]),w=(0,t.useCallback)((e=>{j(n.updateDisplayValue,e)}),[j]),x=(0,t.useCallback)((e=>{j(n.updateTransientValue,e)}),[j]),O=(0,t.useCallback)((e=>{let t;if(u){const s=(0,a.format)(e,l,u);"failure"===s.result?(j(n.updateComponentMessages,[s.error]),j(n.updateValidStatus,"invalidShown"),t=(0,r.treatNull)(e,l)):t=s.value}else t=(0,r.treatNull)(e,l);return t}),[u,l,j]),F=(0,t.useCallback)((e=>{const t=O(e);return j(n.updateDisplayValue,t),v?.(),!0}),[j,O,v]),U=(0,t.useCallback)((()=>"invalidShown"!==D.valid?{result:"success",value:D.value}:u?(0,a.parse)((0,r.normalizeValue)(D.displayValue),u,E):{result:"success",value:(0,r.normalizeValue)(D.displayValue)}),[u,D.displayValue,D.valid,D.value,E]),I=(0,t.useCallback)((e=>u?(0,a.parse)((0,r.normalizeValue)(e),u,E):{result:"success",value:(0,r.normalizeValue)(e)}),[u,E]),k=(0,t.useCallback)((e=>{const t=I(e);return"failure"===t.result&&(j(n.updateComponentMessages,[t.error]),j(n.updateValidStatus,"invalidShown")),t}),[j,I]),N=(0,t.useCallback)((async(t,a={})=>{const{doNotClearMessagesCustom:s=!1}=a,o=s&&(0,r.hasErrorMessages)(f);if(s?(j(n.updateComponentMessages,[]),j(n.updateHiddenMessages,[])):j(n.clearAllMessages),!(V&&0!==V.length||d&&0!==d.length))return j(n.updateValidStatus,o?"invalidShown":"valid"),!0;const u=[],l=L(t);let c;"failure"===l.result&&u.push(...l.errors),null!=t&&(c=(0,i.validateAsync)({validators:V??[],value:t})),u.push(...c?.errors??[]);const p=c?.maybeErrorPromises??[];if(!u.length&&!p.length)return j(n.updateValidStatus,o?"invalidShown":"valid"),!0;const v=0!==u.length;if(v&&j(n.updateComponentMessages,u)&&j(n.updateValidStatus,"invalidShown"),!p.length)return!v;!v&&j(n.updateValidStatus,"pending");const y=e?.("running asynchronous validation"),{isStale:m}=P("useEditableValue-full-validate");let h=!1;const g=[];for(const e of p){const t=e.then((e=>{e&&!m()&&(j(n.addComponentMessage,e),j(n.updateValidStatus,"invalidShown"),h=!0)}));g.push(t)}return await Promise.all(g),v||h||m()||j(n.updateValidStatus,o?"invalidShown":"valid"),y?.(),!v&&!h}),[e,j,d,f,P,L,V]),q=async()=>{if(c||b)return;const e=U();if("failure"===e.result)return j(n.updateComponentMessages,[e.error]),void j(n.updateValidStatus,"invalidShown");const t=e.value;await B(t,{doNotClearMessagesCustom:!0})&&j(n.updateValue,t)&&F(t)},z=(0,t.useCallback)((e=>{j(n.clearAllMessages);const t=L(e);return"failure"===t.result&&j(n.updateHiddenMessages,t.errors),j(n.updateValidStatus,"failure"===t.result?"invalidHidden":"valid"),!0}),[j,L]),B=(0,t.useCallback)((async(t,a={})=>{const{isStale:r}=P("useEditableValue-validateValueOnInternalChange"),s=e?.("Running validateValueOnInternalChange"),n=await N(t,a);return s?.(),!r()&&n}),[e,N,P]),H=(0,t.useCallback)((async(e,t=!0)=>{const a=await B(e);return a&&t&&j(n.updateValue,e),a}),[j,B]),K=(0,t.useCallback)((async({value:e})=>{const t=k(e);if("failure"===t.result)return!1;const a=t.value,r=await H(a);return r&&F(a),r}),[H,k,F]),W=(0,t.useCallback)((({value:e})=>{j(n.updateDisplayValue,e??l)}),[j,l]),G=(0,t.useCallback)((async()=>{if(b||c)return"valid";const t=k(D.displayValue);if("failure"===t.result)return"invalid";const a=t.value,r=e?.("Running component method validate"),s=await N(a);return r?.(),s?(a!==D.value&&(j(n.updateValue,a),F(a)),"valid"):"invalid"}),[e,c,j,N,k,b,F,D.displayValue,D.value]),$=(0,t.useCallback)((()=>{z(D.value),F(D.value)}),[F,D.value,z]),Y=(0,t.useCallback)((()=>{D.hiddenMessages&&D.hiddenMessages.length>0&&(j(n.showHiddenMessages),j(n.updateValidStatus,"invalidShown"))}),[j,D.hiddenMessages]);C.current||D.previousValue===_||(j(n.updatePreviousValue,_),_!==D.value&&(z(_),j(n.updateValue,_),F(_)));C.current||D.previousConverter===u||(j(n.updatePreviousConverter,u),"invalidShown"!==D.valid&&F(_),"invalidShown"===D.valid&&q());C.current||D.previousValidators===V||(j(n.updatePreviousValidators,V),"invalidShown"===D.valid&&q());if(!C.current&&(!D.customMessages&&f||D.customMessages&&!f||D.customMessages&&f&&!(0,r.isShallowEqual)(D.customMessages,f))){const e=D.componentMessages??[],t=D.hiddenMessages??[],a=f??[],s=(0,r.hasErrorMessages)(a),i=t.length>0,o=0===e.length&&0===t.length&&0===a.length;j(n.updateCustomMessages,a),s&&j(n.updateValidStatus,"invalidShown"),!s&&"pending"!==D.valid&&(o&&j(n.updateValidStatus,"valid")||i&&j(n.updateValidStatus,"invalidHidden"))}if(!C.current&&(D.previousDeferredValidators!==d||D.previousDisabled!==c||D.previousReadonly!==b)){const e=0===d?.length;if(D.previousDeferredValidators!==d&&j(n.updatePreviousDeferredValidators,d),D.previousDisabled!==c&&j(n.updatePreviousDisabled,c),D.previousReadonly!==b&&j(n.updatePreviousReadonly,b),e||!b&&!c)switch(D.valid){case"valid":const e=U();if("failure"===e.result)j(n.updateComponentMessages,[e.error]),j(n.updateValidStatus,"invalidShown");else{const t=L(e.value);"failure"===t.result&&j(n.updateHiddenMessages,t.errors)&&j(n.updateValidStatus,"invalidHidden")}break;case"invalidHidden":0===d?.length&&(j(n.updateValidStatus,"valid"),j(n.updateHiddenMessages,[]));break;case"invalidShown":q()}}C.current&&(C.current=!1);return(0,t.useEffect)((()=>{if(j(n.updatePreviousValue,_),j(n.updatePreviousConverter,u),j(n.updatePreviousValidators,V),j(n.updatePreviousDeferredValidators,d),j(n.updatePreviousDisabled,c),j(n.updatePreviousReadonly,b),j(n.updateCustomMessages,f),j(n.updateTransientValue,_),c||b)j(n.updateValidStatus,"valid"),F(_);else{const e=L(_);"failure"===e.result&&j(n.updateHiddenMessages,e.errors)&&j(n.updateValidStatus,(0,r.hasErrorMessages)(f)?"invalidShown":"invalidHidden"),"success"===e.result&&j(n.updateValidStatus,(0,r.hasErrorMessages)(f)?"invalidShown":"valid")&&F(_)}}),[]),{value:D.value,displayValue:D.displayValue,formatValue:O,methods:{reset:$,showMessages:Y,validate:G},onCommitValue:H,parseValue:k,refreshDisplayValue:F,setDisplayValue:w,setTransientValue:x,setValue:R,textFieldProps:{"aria-describedby":o,messages:"none"!==p?.messages?D.shownMessages:void 0,onCommit:K,onInput:W,value:D.displayValue},validateValueOnExternalChange:z}}})),define("oj-c/hooks/UNSAFE_useEditableValue/index",["require","exports","./utils","./useEditableValue"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEditableValue=e.treatNull=e.getVirtualKeyboardHintFromConverter=void 0,Object.defineProperty(e,"getVirtualKeyboardHintFromConverter",{enumerable:!0,get:function(){return t.getVirtualKeyboardHintFromConverter}}),Object.defineProperty(e,"treatNull",{enumerable:!0,get:function(){return t.treatNull}}),Object.defineProperty(e,"useEditableValue",{enumerable:!0,get:function(){return a.useEditableValue}})})),define("oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators",["require","exports","ojs/ojvalidator-required","preact/hooks","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle"],(function(require,e,t,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDeferredValidators=function({labelHint:e,required:s,requiredMessageDetail:n}){const i=(0,r.useTranslationBundle)("@oracle/oraclejet-preact"),o=n||i.formControl_requiredMessageDetail(),u=(0,a.useMemo)((()=>s?new t({label:e,messageDetail:o}):null),[s]);return(0,a.useMemo)((()=>[u].filter(Boolean)),[u])}})),define("oj-c/select-common/utils/utils",["require","exports","ojs/ojdataprovider","@oracle/oraclejet-preact/utils/UNSAFE_logger"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_VALUE_ITEMS=e.DEFAULT_VALUE_ITEM=e.DEFAULT_VALUE=e.DEFAULT_ITEM_CONTEXT=void 0,e.isEmpty=function(e){return!e||(Array.isArray(e)?0===e.length:(e instanceof Set||e instanceof Map)&&0===e.size)},e.isSetEqual=function(e,t){if(e===t)return!0;if(e?.size!==t?.size)return!1;const a=Array.from(e),r=Array.from(t);return a.every(((e,t)=>e===r[t]))},e.getFilterCriterion=function(e,r,s){const n=r&&r.length>0;if(!n)return;const i=s,o=i&&i.length>0,u=e?.getCapability("filter"),l=u&&u.textFilter;e&&n&&!l&&(0,a.error)("Core Pack Select: DataProvider does not support text filter.  Filtering results in dropdown may not work correctly.");const d=e&&l&&n&&o?i.reduce(((e,t)=>{if(e)return e;if("unknown"===t)return t;if(t){if(u.textFilterMatching&&u.textFilterMatching.matchBy&&u.textFilterMatching.matchBy.indexOf(t)>-1)return t;(0,a.warn)(`Core Pack Select: DataProvider does not support text filter "${t}" matching.  Filtering results in dropdown may not work as expected.`)}}),null):void 0,c=d?{text:r,matchBy:d}:{text:r};return t.FilterFactory.getFilter({filterDef:c})},e.DEFAULT_ITEM_CONTEXT=null,e.DEFAULT_VALUE=null,e.DEFAULT_VALUE_ITEM=null,e.DEFAULT_VALUE_ITEMS=null})),define("oj-c/select-common/PRIVATE_useCache/useCache",["require","exports","preact/hooks","../utils/utils"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCache=function(){const e=(0,t.useRef)(new Map);return(0,t.useCallback)(((t,a,s)=>r(e.current,t,s)?(e.current.set(t,{value:a,deps:s}),a):e.current.get(t).value),[])};const r=(e,t,a)=>{if(!e.has(t))return!0;const r=e.get(t).deps;return r.length!==a.length||r.some(((e,t)=>!s(e,a[t])))},s=(e,t)=>e===t||(e instanceof Set&&t instanceof Set?(0,a.isSetEqual)(e,t):e===t)})),define("oj-c/select-common/PRIVATE_useCache/index",["require","exports","./useCache"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useCache=void 0,Object.defineProperty(e,"useCache",{enumerable:!0,get:function(){return t.useCache}})})),define("oj-c/hooks/UNSAFE_useListData/useListData",["require","exports","ojs/ojdatacollection-common","ojs/ojdataproviderfactory","preact/hooks"],(function(require,e,t,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEmptyState=e.useListData=void 0;const s=Object.freeze({status:"loading",data:null}),n={isInitialFetchDeferred:!1};e.useListData=(a,l=n)=>{const d=(0,r.useRef)(null),c=(0,r.useRef)(0),y=(0,r.useRef)(!1),m=(0,r.useRef)(null),h=(0,r.useRef)(null),g=l.fetchSize&&l.fetchSize>0?l.fetchSize:25,S=(0,r.useMemo)((()=>i(a)),[a]),[E,b]=(0,r.useReducer)(o,0===l.initialRowsFetched?(0,e.getEmptyState)("atLeast"):s),V=(0,r.useCallback)((async(e,t)=>{if(null==S)return;const a={attributes:l.attributes,sortCriteria:l.sortCriteria,filterCriterion:l.filterCriterion,offset:e.offset,size:e.count},r=!0===y.current?"exact":"atLeast";if(0!==e.count)try{const s=(await S.fetchByOffset(a)).results;t&&t(s),b({status:"success",data:{offset:e.offset,data:s,totalSize:c.current,sizePrecision:r}})}catch(e){b({status:"error",error:e})}else b({status:"success",data:{offset:e.offset,data:[],totalSize:c.current,sizePrecision:r}})}),[S,l.attributes,l.filterCriterion,l.sortCriteria]),_=(0,r.useCallback)((async()=>{if(null==S)return;"loading"===E.status&&h.current?.abort((0,t.getAbortReason)()),b({status:"loading",data:null});const e=new AbortController;h.current=e;const a=S.fetchFirst({attributes:l.attributes,sortCriteria:l.sortCriteria,filterCriterion:l.filterCriterion,size:g,signal:e.signal})[Symbol.asyncIterator]();m.current=a;try{const e=await a.next();if(a!==m.current)return;const t=e.value.fetchParameters;if(t.signal&&t.signal.aborted)return;c.current=e.value.data.length,void 0!==e.done&&(y.current=e.done);const r=l.initialRowsFetched&&l.initialRowsFetched>0?l.initialRowsFetched:g;V({offset:0,count:Math.min(c.current,r)})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;b({status:"error",error:e}),m.current=null}}),[S,V,g,l.attributes,l.filterCriterion,l.initialRowsFetched,l.sortCriteria,l.fetchSize]),C=(0,r.useCallback)((async e=>{if(null===m.current)_();else{const t=e.offset+e.count;if(t>c.current){if(null==d.current){const a=u(m,c.current,t);d.current=a;try{const t=await a;void 0!==t.done&&(y.current=t.done);const r=t.total;(r>0||0===r&&y.current)&&(c.current=r,V({offset:e.offset,count:Math.min(c.current-e.offset,e.count)})),d.current=null}catch(e){b({status:"error",error:e}),d.current=null}}}else V(e)}}),[_,V]),P=(0,r.useCallback)((()=>{m.current=null,d.current=null,c.current=0,y.current=!1,0===l.initialRowsFetched?b((0,e.getEmptyState)("atLeast")):l.isInitialFetchDeferred?b({status:"loading",data:null}):_()}),[_,l.isInitialFetchDeferred,l.initialRowsFetched]);(0,r.useEffect)((()=>{S&&P()}),[S,P]);const D=(0,r.useCallback)((e=>{if("success"===E.status&&E.data){const t=E.data;let a,r=t.data.length,s=!1;if(e.detail.add){const a=p(e.detail.add,t,l,!0);c.current=c.current+a,r+=a,s=a>0||"exact"===t.sizePrecision,a<e.detail.add.data.length&&(y.current=!1)}if(e.detail.remove){const a=p(e.detail.remove,t,l,!1);c.current=Math.max(0,c.current-a),r=Math.max(0,r-a),s=s||a>0}const n=e.detail.update;n&&(s=s||f(n,t,l),a=e=>{v(n,t,e)}),s&&V({offset:t.offset,count:r},a)}}),[E,l,V]),A=(0,r.useCallback)((e=>{let t=-1;const a=e.detail?.disregardAfterKey;if(a&&"success"===E.status){const e=E.data.data.findIndex((e=>e.metadata.key===a));if(e>-1&&(t=E.data.data.length-e-1),0===t&&E.data.data.length>=g)return}t>-1&&"success"===E.status?(c.current=c.current-t,C({offset:E.data.offset,count:Math.max(E.data.data.length,g)})):("loading"===E.status&&h.current?.abort(),P())}),[E,g,C,P]);if((0,r.useEffect)((()=>(S&&(S.addEventListener("refresh",A),S.addEventListener("mutate",D)),()=>{S&&(S.removeEventListener("refresh",A),S.removeEventListener("mutate",D))})),[S,P,D,A]),!a){return[(0,e.getEmptyState)("exact"),e=>Promise.resolve()]}return[E,C]};const i=e=>{if(null==e)return null;return(0,a.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}})},o=(e,t)=>e.status===t.status&&"loading"===t.status?e:t,u=async(e,t,a)=>await l(e,t,a),l=async(e,t,a)=>{const r=e.current;if(null===r)return{total:-1,done:void 0};const s=await r.next();return r===e.current?(t+=s.value.data.length)>=a||s.done?{total:t,done:s.done}:l(e,t,a):{total:-1,done:void 0}};e.getEmptyState=e=>"atLeast"===e?d:c;const d=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"atLeast"}}),c=Object.freeze({status:"success",data:{offset:0,data:[],totalSize:0,sizePrecision:"exact"}}),p=(e,t,a,r)=>{let s=0;if(y(e,a)){const a=r?e.indexes?.sort(((e,t)=>e-t)):e.indexes;let n=t.totalSize-1;a?.forEach((e=>{e<=n&&(s=s+=1,r&&(n=n+=1))}))}else if(r);else{const a=t.data.map((e=>e.metadata.key));e.keys.forEach((e=>{a.includes(e)&&(s+=1)}))}return s},f=(e,t,a)=>{if(y(e,a)){const a=e.indexes?e.indexes:[],r=t.offset,s=r+t.data.length;for(let e=0;e<a.length;e++)if(a[e]>=r&&a[e]<s)return!0}else{const a=Array.from(e.keys),r=t.data.map((e=>e.metadata.key));for(let e=0;e<a.length;e++){const t=a[e];if(r.includes(t))return!0}}return!1},v=(e,t,a)=>{e.keys.forEach((e=>{const r=a.find((t=>t.metadata.key==e)),s=t.data.find((t=>t.metadata.key==e));s&&r&&s.data===r.data&&(r.data=new Proxy(r.data,{}))}))},y=(e,t)=>e.indexes&&null==t.sortCriteria&&null==t.filterCriterion})),define("oj-c/select-common/PRIVATE_DebouncingDataProviderView/Debouncer",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Debouncer=void 0;e.Debouncer=class{constructor(){this._responseTimes=[{time:900,count:0},{time:720,count:0},{time:600,count:0},{time:450,count:0},{time:360,count:0},{time:300,count:0}],this._requestTime={time:250,count:0},this._lastRequestTime=0}debounce(e,t){const a=this.GetDebounceTime(t);return(...t)=>{window.setTimeout((()=>{e(...t)}),a)}}recordResponseTime(e,t){const a=Math.min(t,5),r=this._responseTimes[a];0===r.count?r.time=e:r.time=(r.time*r.count+e)/(r.count+1),r.count+=1}recordRequestTime(){const e=Date.now(),t=this._lastRequestTime;if(this._lastRequestTime=e,0===t)return;const a=e-t;if(a>1e3)return;const r=this._requestTime;0===r.count?r.time=a:r.time=(r.time*r.count+a)/(r.count+1),r.count+=1}_getResponseTime(e){const t=Math.min(e,5);return this._responseTimes[t].time}_getRequestTime(){return this._requestTime.time}GetDebounceTime(e){const t=this._getResponseTime(e),a=1.2*this._getRequestTime();if(t<a)return 0;return(1+(t-a)/t)*a}}})),define("oj-c/select-common/PRIVATE_DebouncingDataProviderView/DebouncingDataProviderView",["require","exports","ojs/ojdataprovider","./Debouncer"],(function(require,e,t,a){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.DebouncingDataProviderView=void 0;class s{constructor(e,t,a){this._isFirstNext=!0,this.dataProvider=e,this.debouncer=t,this.params=a}next(){if(this._isFirstNext){this.debouncer.recordRequestTime(),this._isFirstNext=!1;const e=this.params?.filterCriterion?.text,a=(t,a)=>{if(this.params?.signal?.aborted)return void a(this.params?.signal?.reason);const r=this.dataProvider.fetchFirst(this.params);this._asyncIterator=r[Symbol.asyncIterator]();const s=Date.now();this._asyncIterator.next().then((a=>{const r=Date.now();this.debouncer.recordResponseTime(r-s,e?e.length:0),t(a)}),a)},r=(t,r)=>new Promise(((t,r)=>{this.debouncer.debounce(a,e?e.length:0)(t,r)})).then(t,r);return(0,t.wrapWithAbortHandling)(this.params?.signal,r,!1)}return this._asyncIterator.next()}}class n{constructor(e,t,a){this[r]=()=>new s(this.dataProvider,this.debouncer,this.params),this.dataProvider=e,this.debouncer=t,this.params=a}}r=Symbol.asyncIterator;e.DebouncingDataProviderView=class{constructor(e){this._debouncer=new a.Debouncer,this.dataProvider=e}fetchFirst(e){return new n(this.dataProvider,this._debouncer,e)}fetchByKeys(e){return this.dataProvider.fetchByKeys(e)}containsKeys(e){return this.dataProvider.containsKeys(e)}fetchByOffset(e){return this.dataProvider.fetchByOffset(e)}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}getCapability(e){return this.dataProvider.getCapability(e)}addEventListener(e,t){this.dataProvider.addEventListener(e,t)}removeEventListener(e,t){this.dataProvider.removeEventListener(e,t)}dispatchEvent(e){return this.dataProvider.dispatchEvent(e)}}})),define("oj-c/select-common/UNSAFE_useWrapDataProvider/useWrapDataProvider",["require","exports","ojs/ojdataproviderfactory","preact/hooks","../PRIVATE_DebouncingDataProviderView/DebouncingDataProviderView"],(function(require,e,t,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=function(e){return(0,a.useMemo)((()=>{if(!e)return e;const a=(0,t.getEnhancedDataProvider)(e,{fetchFirst:{caching:"visitedByCurrentIterator"}}),s=a.getCapability("fetchFirst");return"immediate"===s?.iterationSpeed?a:new r.DebouncingDataProviderView(a)}),[e])}})),define("oj-c/select-common/UNSAFE_useWrapDataProvider/index",["require","exports","./useWrapDataProvider"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useWrapDataProvider=void 0,Object.defineProperty(e,"useWrapDataProvider",{enumerable:!0,get:function(){return t.useWrapDataProvider}})})),define("oj-c/select-common/PRIVATE_useSelectData/CollectionTemplateDataProviderView",["require","exports","ojs/ojdataprovider"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CollectionTemplateDataProviderView=e.SELECT_INTERNALS=void 0,e.SELECT_INTERNALS=Symbol("__SELECT_INTERNALS__");e.CollectionTemplateDataProviderView=class{get currentDataProvider(){return this.overrideDataProvider??this.originalDataProvider}setFilterCriterion(a){const r=this.filterCriterion;if(this.filterCriterion=a,!this.compareFilter(r,a)){const a=new t.DataProviderRefreshEvent;Object.defineProperty(a,e.SELECT_INTERNALS,{value:{cause:"filterCriterionChanged"}}),this.dispatchEvent(a),this.options.onRefresh?.()}}setDataStateOverride(r){if(this.dataStateOverride!==r){this.dataStateOverride=r,this.overrideDataProvider="success"===this.dataStateOverride?.status?new a(this.dataStateOverride):void 0;const s=new t.DataProviderRefreshEvent;Object.defineProperty(s,e.SELECT_INTERNALS,{value:{cause:"dataOverrideChanged"}}),this.dispatchEvent(s),this.options.onRefresh?.()}}compareFilter(e,t){if(e===t)return!0;if(void 0===e||void 0===t)return!1;const a=Object.keys(e),r=Object.keys(t);return a.length===r.length&&a.every((a=>r.includes(a)&&e[a]===t[a]))}constructor(e,t){this.originalDataProvider=e,this.options=t,e.createOptimizedKeyMap&&(this.createOptimizedKeyMap=t=>e.createOptimizedKeyMap(t)),e.createOptimizedKeySet&&(this.createOptimizedKeySet=t=>e.createOptimizedKeySet(t))}async fetchByOffset(e){const t=this.filterCriterion?{...e,filterCriterion:this.filterCriterion}:e,a=await this.currentDataProvider.fetchByOffset(t);return this.options.onOffsetFetch?.({results:a}),a}fetchFirst(e){const t=this.filterCriterion?{...e,filterCriterion:this.filterCriterion}:e,a=this.options;a.onInitializeFetch?.();const r=this.currentDataProvider.fetchFirst(t);return{[Symbol.asyncIterator](){let e=0;const t=r[Symbol.asyncIterator]();return{async next(){const r=await t.next(),{value:s,done:n=!1}=r;return a.onNextIteration?.({results:s,offset:e,done:n}),e+=s.data.length,r}}}}}addEventListener(e,t){return this.originalDataProvider.addEventListener(e,t)}containsKeys(e){return this.currentDataProvider.containsKeys(e)}dispatchEvent(e){return this.originalDataProvider.dispatchEvent(e)}fetchByKeys(e){return this.currentDataProvider.fetchByKeys(e)}getCapability(e){return this.originalDataProvider.getCapability(e)}getTotalSize(){return this.currentDataProvider.getTotalSize()}isEmpty(){return this.currentDataProvider.isEmpty()}removeEventListener(e,t){return this.originalDataProvider.removeEventListener(e,t)}};class a{constructor(e){this.dataState=e}containsKeys(e){const{keys:t}=e,{data:a}=this.dataState,r=new Set;return a.data.forEach((e=>{t.has(e.metadata.key)&&r.add(e.metadata.key)})),Promise.resolve({containsParameters:e,results:r})}fetchByKeys(e){const{keys:t}=e,{data:a}=this.dataState,r=new Map;return a.data.forEach((e=>{t.has(e.metadata.key)&&r.set(e.metadata.key,e)})),Promise.resolve({fetchParameters:e,results:r})}fetchByOffset(e){const{offset:t,size:a}=e,{data:r}=this.dataState,s={fetchParameters:e??{},results:r.data.slice(t,a).map((e=>({data:e.data,metadata:e.metadata}))),done:t+(a??0)>=r.totalSize};return Promise.resolve(s)}fetchFirst(e){const{data:t}=this.dataState;return{[Symbol.asyncIterator](){let a=0;const r=e?.size??25,s=t.totalSize;return{async next(){if(a<s){const n={...t.data.slice(a,r).reduce(((e,t)=>(e.data.push(t.data),e.metadata.push(t.metadata),e)),{data:[],metadata:[]}),fetchParameters:e??{},totalFilteredRowCount:t.totalSize},i=Math.min(r,s-a);return a+=a+i,{value:n,done:!1}}return{value:{data:[],metadata:[],fetchParameters:e??{},totalFilteredRowCount:t.totalSize},done:!0}}}}}}getCapability(){return null}getTotalSize(){return Promise.resolve(this.dataState.data.totalSize)}isEmpty(){return 0===this.dataState.data.totalSize?"yes":"no"}addEventListener(){}dispatchEvent(){return!1}removeEventListener(){}}})),define("oj-c/select-common/PRIVATE_useSelectData/useCollectionTemplateDataProviderView",["require","exports","oj-c/hooks/UNSAFE_useListData/useListData","preact/hooks","./CollectionTemplateDataProviderView"],(function(require,e,t,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),
e.useCollectionTemplateDataProviderView=function({dataProvider:e,options:{dataStateOverride:n,filterCriterion:i}}){const[o,u]=(0,a.useReducer)(s,{dataState:(0,t.getEmptyState)("atLeast")}),l=(0,a.useMemo)((()=>null==e?e:new r.CollectionTemplateDataProviderView(e,{onInitializeFetch(){u({type:"loading"})},onNextIteration({results:{data:e,metadata:t,fetchParameters:a},offset:r,done:s}){if(a.signal?.aborted)return;const n=e.map(((e,a)=>({data:e,metadata:t[a]})));u({type:"append",payload:{items:n,offset:r,done:s}})},onOffsetFetch({results:{results:e,done:t,fetchParameters:a}}){a.signal?.aborted||u({type:"update",payload:{items:e,done:t,offset:a.offset}})},onRefresh(){u({type:"loading"})}})),[e]),d=(0,a.useRef)();d.current!==i&&(d.current=i,l?.setFilterCriterion(i));const c=(0,a.useRef)();c.current!==n&&(c.current=n,l?.setDataStateOverride(n));return{dataState:o.dataState,dataProvider:l}};const s=(e,{type:t,payload:a})=>{switch(t){case"append":{const{dataState:t}=e,r="success"===t.status?t.data:null,{done:s,items:n}=a;return{...e,dataState:{status:"success",data:{data:[...r?.data??[],...n],offset:r?.offset??0,sizePrecision:s?"exact":"atLeast",totalSize:(r?.data.length??0)+n.length}}}}case"update":return{...e,dataState:{status:"success",data:{data:a.items,offset:a.offset,sizePrecision:a.done?"exact":"atLeast",totalSize:a.items.length}}};case"loading":return{...e,dataState:{status:"loading",data:null}};default:return e}}})),define("oj-c/select-common/PRIVATE_useSelectData/useSelectData",["require","exports","oj-c/hooks/UNSAFE_useListData/useListData","preact/hooks","../UNSAFE_useWrapDataProvider/index","./useCollectionTemplateDataProviderView"],(function(require,e,t,a,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectData=void 0;const n=()=>{};e.useSelectData=({data:e,dataStateOverride:i,filterCriterion:o,hasCollectionTemplate:u})=>{const l=(0,r.useWrapDataProvider)(e),[d,c]=(0,t.useListData)(l??null,{filterCriterion:o,initialRowsFetched:0}),p=(0,a.useMemo)((()=>i?{status:"success",data:i}:void 0),[i]),{dataState:f,dataProvider:v}=(0,s.useCollectionTemplateDataProviderView)({dataProvider:l,options:{dataStateOverride:p,filterCriterion:o}});return{dataProvider:u?v:l,dataState:u?p??f:d,onLoadRange:u?n:c}}})),define("oj-c/select-common/PRIVATE_useSelectData/index",["require","exports","./useSelectData","./CollectionTemplateDataProviderView"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SELECT_INTERNALS=e.useSelectData=void 0,Object.defineProperty(e,"useSelectData",{enumerable:!0,get:function(){return t.useSelectData}}),Object.defineProperty(e,"SELECT_INTERNALS",{enumerable:!0,get:function(){return a.SELECT_INTERNALS}})})),define("oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","preact/hooks","../PRIVATE_useSelectData/index","../utils/utils"],(function(require,e,t,a,r,s){"use strict";function n(e){return e instanceof Set?new Set(e.values()):e}function i(e,t){return e instanceof Set&&t instanceof Set||e instanceof Map&&t instanceof Map?e.size===t.size:"object"==typeof e&&"object"==typeof t?e.key===t.key:e===t}function o(e,t){return e instanceof Set?e.has(t):null!=e&&e===t}function u(e,t){return e instanceof Set||e instanceof Map?(e.delete(t),e):"number"==typeof e||"string"==typeof e?e===t?s.DEFAULT_VALUE:e:"object"==typeof e&&e.key===t?s.DEFAULT_VALUE_ITEMS:e}Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProviderListeners=function({dataProvider:e,setValue:r,setValueToSync:d,setValueItemsToSync:c,value:p,valueItems:f}){const v=p instanceof Set,y=(0,a.useCallback)((e=>{l(e)&&((0,s.isEmpty)(p)||(d(n(p)),c(s.DEFAULT_VALUE_ITEMS)))}),[c,d,p]),m=(0,a.useCallback)((e=>{if((0,s.isEmpty)(p))return;let a=n(p);if(null!=e.detail.remove){e.detail.remove.keys.forEach((e=>{o(a,e)&&(a=u(a,e),(0,t.warn)(`\n              ${v?"SelectMultiple":"SelectSingle"}: selected value removed from data provider: ${e}`))})),i(a,p)||(r((0,s.isEmpty)(a)?s.DEFAULT_VALUE:a),d((0,s.isEmpty)(a)?s.DEFAULT_VALUE:a))}var l;if(!(0,s.isEmpty)(a)&&null!=e.detail.update){const t=e.detail.update.keys;let r=(0,s.isEmpty)(f)?f:(l=f)instanceof Map?new Map(l.entries()):Object.assign({},l);t.forEach((e=>{o(a,e)&&(r=u(r,e))})),i(r,f)||(d(a),c((0,s.isEmpty)(r)?s.DEFAULT_VALUE_ITEMS:r))}}),[v,r,c,d,p,f]);(0,a.useEffect)((()=>(e?.addEventListener("refresh",y),e?.addEventListener("mutate",m),()=>{e?.removeEventListener("refresh",y),e?.removeEventListener("mutate",m)})),[e,m,y])};const l=e=>{if(r.SELECT_INTERNALS in e){const{cause:t=""}=e[r.SELECT_INTERNALS];return!["filterCriterionChanged","dataOverrideChanged"].includes(t)}return!0}})),define("oj-c/select-single/useSyncValueAndValueItem",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_logger","oj-c/editable-value/UNSAFE_useStaleIdentity/useStaleIdentity","oj-c/select-common/utils/utils","preact/hooks"],(function(require,e,t,a,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSyncValueAndValueItem=function({addBusyState:e,dataProvider:n,setDisplayValue:i,setIsLoading:o,setValue:u,setValueItem:l,value:d,valueItem:c,validateValueOnExternalChange:p}){const f=(0,s.useRef)(d),v=(0,s.useRef)(c),{setStaleIdentity:y}=(0,a.useStaleIdentity)(),m=null!=d,h=null!=c,g=(0,s.useCallback)((async()=>{if(!m)return void(h&&l(r.DEFAULT_VALUE_ITEM));if(null!=d&&null!=c&&c.key===d)return void l(Object.assign({},c));if(!n)return;o(!0);const a=e("useSyncValueItem: calling fetchByKeys"),{isStale:s}=y("useSyncValueItem:fetchByKeys");try{const e=await n.fetchByKeys({keys:new Set([d])});if(!s()){const t=function(e,t,a){if(t&&t.key===e)return t;const r=a.get(e);if(!r)throw new Error(`oj-c-select-single: could not fetch data for key ${e}`);return{key:e,data:r.data,metadata:r.metadata?r.metadata:{key:e}}}(d,c,e.results);l(t)}}catch(e){s()||(0,t.error)(`SelectMultiple: fetchByKeys promise rejected: ${e}`)}s()||o(!1),a()}),[e,n,m,h,o,y,l,d,c]),S=(0,s.useCallback)((()=>{const e=e=>{p(e)&&(u(e),i(e))};h?c.key===d||e(c.key):m&&e(r.DEFAULT_VALUE)}),[m,h,i,u,p,d,c]);(0,s.useEffect)((()=>{m?g():h&&S()}),[]),(0,s.useEffect)((()=>{d!==f.current&&c!==v.current?(f.current=d,v.current=c,d?g():S()):d!==f.current?(f.current=d,g()):c!==v.current&&(v.current=c,S())}),[g,S,d,c])}})),define("oj-c/select-single/useValueItem",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useUncontrolledState","preact/hooks"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useValueItem=function(e,r){const[s,n]=(0,t.useUncontrolledState)(e,r);return(0,a.useEffect)((()=>{s!==e&&n(e)}),[e]),{valueItem:s,setValueItem:n}}})),define("oj-c/select-single/useSelectSinglePreact",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useTranslationBundle","oj-c/hooks/UNSAFE_useEditableValue/index","oj-c/editable-value/UNSAFE_useDeferredValidators/useDeferredValidators","oj-c/select-common/PRIVATE_useCache/index","oj-c/select-common/PRIVATE_useSelectData/index","oj-c/select-common/UNSAFE_useDataProviderListeners/useDataProviderListeners","oj-c/select-common/utils/utils","ojs/ojkeyset","preact/hooks","./useSyncValueAndValueItem","./useValueItem"],(function(require,e,t,a,r,s,n,i,o,u,l,d,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSelectSinglePreact=function({advancedSearch:e,collectionTemplate:p,data:f,disabled:v,displayOptions:y,itemTemplate:m,itemText:h,labelEdge:g,labelHint:S,labelStartWidth:E,matchBy:b,messagesCustom:V,placeholder:_,readonly:C,requiredMessageDetail:P,required:D,textAlign:A,userAssistanceDensity:T,value:M,valueItem:j,virtualKeyboard:L,onMessagesCustomChanged:R,onOjAdvancedSearchAction:w,onOjValueAction:x,onValidChanged:O,onValueChanged:F,onValueItemChanged:U,...I},k){const[N,q]=(0,l.useState)(void 0),[z,B]=(0,l.useState)(null!=f&&null!=M&&null==j),H=(0,l.useMemo)((()=>b&&b.length>0?[...b]:void 0),[b]),{valueItem:K,setValueItem:W}=(0,c.useValueItem)(j,U),[G,$]=(0,l.useState)(K);(0,l.useEffect)((()=>{$(K)}),[K]);const Y=(0,t.useTranslationBundle)("@oracle/oraclejet-preact"),X=P||Y.select_requiredMessageDetail(),J=(0,r.useDeferredValidators)({labelHint:S,required:D,requiredMessageDetail:X}),Q=(0,l.useCallback)((()=>{$(K)}),[K]),{methods:Z,onCommitValue:ee,setDisplayValue:te,setValue:ae,textFieldProps:re,value:se,validateValueOnExternalChange:ne}=(0,a.useEditableValue)({addBusyState:k,ariaDescribedBy:I["aria-describedby"],defaultDisplayValue:null,deferredValidators:J,disabled:v,displayOptions:y,messagesCustom:V,onDisplayValueChanged:Q,onMessagesCustomChanged:R,onValidChanged:O,onValueChanged:F,readonly:C,value:M}),{"aria-describedby":ie,messages:oe}=re,ue=null===se,{dataProvider:le,dataState:de,onLoadRange:ce}=(0,n.useSelectData)({data:f,filterCriterion:N,hasCollectionTemplate:void 0!==p}),[pe,fe]=(0,l.useState)(se),[ve,ye]=(0,l.useState)(K);(0,l.useEffect)((()=>{fe(se)}),[se]),(0,l.useEffect)((()=>{ye(K)}),[K]),(0,i.useDataProviderListeners)({dataProvider:le,setValue:ae,setValueToSync:fe,setValueItemsToSync:ye,value:se,valueItems:K}),(0,d.useSyncValueAndValueItem)({addBusyState:k,dataProvider:le,setDisplayValue:te,setIsLoading:B,setValue:ae,setValueItem:W,value:pe,valueItem:ve,validateValueOnExternalChange:ne});const me=(0,l.useCallback)((async({previousValue:e,value:t})=>{const a=null!=t?t:o.DEFAULT_VALUE;te(a);const r=await ee(a);if(r){if(r&&"success"===de.status)if(null==t)x?.({itemContext:o.DEFAULT_ITEM_CONTEXT,previousValue:e??o.DEFAULT_VALUE,value:o.DEFAULT_VALUE});else if(t===K?.key)x?.({itemContext:K,previousValue:e??o.DEFAULT_VALUE,value:t}),G!==K&&$(K);else{let a=de.data.data.find((e=>e.metadata.key===t));if(void 0===a){a=(await le.fetchByKeys({keys:new Set([t])})).results.get(t)}const r={data:a.data,key:a.metadata.key,metadata:a.metadata};x?.({itemContext:r,previousValue:e??o.DEFAULT_VALUE,value:t??o.DEFAULT_VALUE})}}else $(void 0)}),[le,de,G,K,ee,x,te]),he=(0,l.useCallback)((({searchText:e})=>{const t=(0,o.getFilterCriterion)(le,e,H);q(t)}),[le,H]),ge=(0,l.useMemo)((()=>{if(m)return({data:e,metadata:t,searchText:a})=>m({item:{data:e,metadata:t},searchText:a})}),[m]),Se=(0,l.useRef)(),Ee=(0,s.useCache)(),be=(0,l.useMemo)((()=>{if(p)return({currentRowKeyOverride:e,searchText:t,selected:a,onPersistCurrentRowKey:r,onRowAction:s})=>{const n={currentRowOverride:Ee("currentRowOverride",e?{rowKey:e}:void 0,[e,t]),data:le,onCurrentRowChanged:Ee("onCurrentRowChanged",(({rowKey:e})=>{r({value:e})}),[r]),onRowAction:Ee("onRowAction",(({item:e})=>{s({context:{data:e.data,key:e.metadata.key,metadata:e.metadata}})}),[s]),searchText:t,selected:Ee("selected",new u.KeySetImpl([...a?.values()??[]]),[a])};return Se.current?Object.assign(Se.current,n):Se.current=n,p(Se.current)}}),[Ee,p,le]),Ve=(0,l.useCallback)((async e=>me({value:e??void 0,previousValue:M??void 0})),[me,M]),_e=(0,l.useCallback)((e=>{w?.(e)}),[w]),Ce=(0,l.useCallback)((e=>{_e({searchText:e})}),[_e]);return{methods:Z,selectSingleProps:{advancedSearch:e,"aria-describedby":ie,collectionRenderer:be,data:"error"!==de.status?de.data:null,isDisabled:v,isLoading:z,isReadonly:C,isRequired:D,isRequiredShown:D&&("compact"===T||ue),itemRenderer:ge,itemText:h,label:S,labelEdge:g,labelStartWidth:E,messages:oe,onAdvancedSearchAction:_e,onCommit:me,onFilter:he,onLoadRange:ce,placeholder:_,textAlign:A,userAssistanceDensity:T,valueItem:(0,a.treatNull)(G,void 0),virtualKeyboard:L},_doAdvancedSearchAction:Ce,_selectItemByValue:Ve}}})),define("oj-c/select-single/select-single",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","@oracle/oraclejet-preact/UNSAFE_SelectSingle","@oracle/oraclejet-preact/hooks/UNSAFE_useFormContext","@oracle/oraclejet-preact/hooks/UNSAFE_useFormVariantContext","@oracle/oraclejet-preact/hooks/UNSAFE_useTabbableMode","@oracle/oraclejet-preact/utils/UNSAFE_styles/Layout","oj-c/editable-value/UNSAFE_useAssistiveText/useAssistiveText","oj-c/hooks/UNSAFE_useMergedFormContext/useMergedFormContext","ojs/ojvcomponent","preact/compat","preact/hooks","./useSelectSinglePreact","ojs/ojcontext","css!oj-c/select-single/select-single-styles.css"],(function(require,e,t,a,r,s,n,i,o,u,l,d,c,p,f,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectSingle=void 0;const y={messages:"display"},m={instruction:""},h={definition:"",source:""},g=[];e.SelectSingle=(0,d.registerCustomElement)("oj-c-select-single",(0,c.forwardRef)((function({advancedSearch:e="off",columnSpan:a=1,containerReadonly:i,data:c=null,disabled:S=!1,displayOptions:E=y,help:b=m,helpHints:V=h,id:_,labelWrapping:C,matchBy:P=null,messagesCustom:D=g,readonly:A,required:T=!1,userAssistanceDensity:M,value:j=null,valueItem:L=null,virtualKeyboard:R="auto",...w},x){const O=(0,p.useRef)(),F=(0,p.useRef)(),U=(0,p.useCallback)((e=>O.current?v.getContext(O.current).getBusyContext().addBusyState({description:`oj-c-select-single id=${_}: ${e}`}):()=>{}),[_]),{containerProps:I,uadValue:k,readonlyValue:N}=(0,l.useMergedFormContext)({propContainerReadonly:i,propLabelWrapping:C,propReadonly:A,propUserAssistanceDensity:M}),{selectSingleProps:q,methods:z,_doAdvancedSearchAction:B,_selectItemByValue:H}=(0,f.useSelectSinglePreact)({advancedSearch:e,data:c,disabled:S,displayOptions:E,matchBy:P,messagesCustom:D,readonly:N,required:T,userAssistanceDensity:k,value:j,valueItem:L,virtualKeyboard:R,...w},U);(0,p.useImperativeHandle)(x,(()=>({blur:()=>F.current?.blur(),focus:()=>F.current?.focus(),_doAdvancedSearchAction:B,_selectItemByValue:H,UNSAFE_focusAndOpenDropdown:()=>{if(O.current){const e=O.current,t=()=>e.firstElementChild?.dispatchEvent(new MouseEvent("mousedown"));v.getContext(e).getBusyContext().whenReady().then(t)}},...z})),[z,B,H]);const K=(0,u.useAssistiveText)({displayOptions:E,help:b,helpHints:V,userAssistanceDensity:q.userAssistanceDensity}),W=(0,n.useFormVariantContext)();return(0,t.jsx)(d.Root,{id:_,ref:O,class:o.layoutSpanStyles.layoutSpanColumn[a],children:(0,t.jsx)(s.FormContext.Provider,{value:I,children:(0,t.jsx)(r.SelectSingle,{ref:F,...K,...q,variant:W})})})})),"SelectSingle",{properties:{advancedSearch:{type:"string",enumValues:["off","on"]},columnSpan:{type:"number"},containerReadonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},data:{type:"DataProvider|null"},disabled:{type:"boolean"},displayOptions:{type:"object",properties:{messages:{type:"string",enumValues:["none","display"]}}},help:{type:"object",properties:{instruction:{type:"string"}}},helpHints:{type:"object",properties:{definition:{type:"string"},source:{type:"string"},sourceText:{type:"string"}}},itemText:{type:"string|number|function"},labelEdge:{type:"string",enumValues:["none","start","top","inside"],binding:{consume:{name:"containerLabelEdge"}}},labelHint:{type:"string"},labelStartWidth:{type:"number|string",binding:{consume:{name:"labelWidth"}}},labelWrapping:{type:"string",enumValues:["truncate","wrap"],binding:{consume:{name:"labelWrapping"}}},matchBy:{type:"Array<string>|null"},messagesCustom:{type:"Array<object>",writeback:!0},placeholder:{type:"string"},readonly:{type:"boolean",binding:{consume:{name:"containerReadonly"}}},required:{type:"boolean"},requiredMessageDetail:{type:"string"},textAlign:{type:"string",enumValues:["end","start","right"]},userAssistanceDensity:{type:"string",enumValues:["compact","reflow","efficient"],binding:{consume:{name:"containerUserAssistanceDensity"}}},value:{type:"string|number|null",writeback:!0},valueItem:{type:"object|null",properties:{data:{type:"any"},key:{type:"any"},metadata:{type:"object",properties:{indexFromParent:{type:"number"},isLeaf:{type:"boolean"},key:{type:"any"},message:{type:"object",properties:{detail:{type:"string"},severity:{type:"string|number"},summary:{type:"string"}}},parentKey:{type:"any"},suggestion:{type:"object"},treeDepth:{type:"number"}}}},writeback:!0},virtualKeyboard:{type:"string",enumValues:["number","search","auto","url","text","email","tel"]},valid:{type:"string",enumValues:["pending","valid","invalidHidden","invalidShown"],readOnly:!0,writeback:!0}},slots:{collectionTemplate:{data:{}},itemTemplate:{data:{}}},events:{ojAdvancedSearchAction:{},ojValueAction:{}},extension:{_WRITEBACK_PROPS:["messagesCustom","valid","value","valueItem"],_READ_ONLY_PROPS:["valid"],_OBSERVED_GLOBAL_PROPS:["aria-describedby","id"]},methods:{blur:{},focus:{},showMessages:{},reset:{},validate:{},_doAdvancedSearchAction:{},_selectItemByValue:{},UNSAFE_focusAndOpenDropdown:{}}},{advancedSearch:"off",columnSpan:1,data:null,disabled:!1,displayOptions:{messages:"display"},help:{instruction:""},helpHints:{definition:"",source:""},matchBy:null,messagesCustom:[],required:!1,value:null,valueItem:null,virtualKeyboard:"auto"},{"@oracle/oraclejet-preact":a.default},{consume:[n.FormVariantContext,i.TabbableModeContext]})})),define("oj-c/select-single",["require","exports","oj-c/select-single/select-single"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectSingle=void 0,Object.defineProperty(e,"SelectSingle",{enumerable:!0,get:function(){return t.SelectSingle}})}));
//# sourceMappingURL=select-single.js.map